/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
(function(_1,_2){var _3=function(){},_4=function(it){for(var p in it){return 0;}return 1;},_5={}.toString,_6=function(it){return _5.call(it)=="[object Function]";},_7=function(it){return _5.call(it)=="[object String]";},_8=function(it){return _5.call(it)=="[object Array]";},_9=function(_a,_b){if(_a){for(var i=0;i<_a.length;){_b(_a[i++]);}}},_c=function(_d,_e){for(var p in _e){_d[p]=_e[p];}return _d;},_f=function(_10,_11){return _c(new Error(_10),{src:"dojoLoader",info:_11});},_12=1,uid=function(){return "_"+_12++;},req=function(_13,_14,_15){return _16(_13,_14,_15,0,req);},_17=this,doc=_17.document,_18=doc&&doc.createElement("DiV"),has=req.has=function(_19){return _6(_1a[_19])?(_1a[_19]=_1a[_19](_17,doc,_18)):_1a[_19];},_1a=has.cache=_2.hasCache;has.add=function(_1b,_1c,now,_1d){(_1a[_1b]===undefined||_1d)&&(_1a[_1b]=_1c);return now&&has(_1b);};0&&has.add("host-node",_1.has&&"host-node" in _1.has?_1.has["host-node"]:(typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8));if(0){require("./_base/configNode.js").config(_2);_2.loaderPatch.nodeRequire=require;}0&&has.add("host-rhino",_1.has&&"host-rhino" in _1.has?_1.has["host-rhino"]:(typeof load=="function"&&(typeof Packages=="function"||typeof Packages=="object")));if(0){for(var _1e=_1.baseUrl||".",arg,_1f=this.arguments,i=0;i<_1f.length;){arg=(_1f[i++]+"").split("=");if(arg[0]=="baseUrl"){_1e=arg[1];break;}}load(_1e+"/_base/configRhino.js");rhinoDojoConfig(_2,_1e,_1f);}for(var p in _1.has){has.add(p,_1.has[p],0,1);}var _20=1,_21=2,_22=3,_23=4,_24=5;if(0){_20="requested";_21="arrived";_22="not-a-module";_23="executing";_24="executed";}var _25=0,_26="sync",xd="xd",_27=[],_28=0,_29=_3,_2a=_3,_2b;if(1){req.isXdUrl=_3;req.initSyncLoader=function(_2c,_2d,_2e){if(!_28){_28=_2c;_29=_2d;_2a=_2e;}return {sync:_26,requested:_20,arrived:_21,nonmodule:_22,executing:_23,executed:_24,syncExecStack:_27,modules:_2f,execQ:_30,getModule:_31,injectModule:_32,setArrived:_33,signal:_34,finishExec:_35,execModule:_36,dojoRequirePlugin:_28,getLegacyMode:function(){return _25;},guardCheckComplete:_37};};if(1){var _38=location.protocol,_39=location.host;req.isXdUrl=function(url){if(/^\./.test(url)){return false;}if(/^\/\//.test(url)){return true;}var _3a=url.match(/^([^\/\:]+\:)\/+([^\/]+)/);return _3a&&(_3a[1]!=_38||(_39&&_3a[2]!=_39));};1||has.add("dojo-xhr-factory",1);has.add("dojo-force-activex-xhr",1&&!doc.addEventListener&&window.location.protocol=="file:");has.add("native-xhr",typeof XMLHttpRequest!="undefined");if(has("native-xhr")&&!has("dojo-force-activex-xhr")){_2b=function(){return new XMLHttpRequest();};}else{for(var _3b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],_3c,i=0;i<3;){try{_3c=_3b[i++];if(new ActiveXObject(_3c)){break;}}catch(e){}}_2b=function(){return new ActiveXObject(_3c);};}req.getXhr=_2b;has.add("dojo-gettext-api",1);req.getText=function(url,_3d,_3e){var xhr=_2b();xhr.open("GET",_3f(url),false);xhr.send(null);if(xhr.status==200||(!location.host&&!xhr.status)){if(_3e){_3e(xhr.responseText,_3d);}}else{throw _f("xhrFailed",xhr.status);}return xhr.responseText;};}}else{req.async=1;}var _40=new Function("return eval(arguments[0]);");req.eval=function(_41,_42){return _40(_41+"\r\n////@ sourceURL="+_42);};var _43={},_44="error",_34=req.signal=function(_45,_46){var _47=_43[_45];_9(_47&&_47.slice(0),function(_48){_48.apply(null,_8(_46)?_46:[_46]);});},on=req.on=function(_49,_4a){var _4b=_43[_49]||(_43[_49]=[]);_4b.push(_4a);return {remove:function(){for(var i=0;i<_4b.length;i++){if(_4b[i]===_4a){_4b.splice(i,1);return;}}}};};var _4c=[],_4d={},_4e=[],_4f={},map=req.map={},_50=[],_2f={},_51="",_52={},_53="url:",_54={},_55={};if(1){var _56=function(_57){var p,_58,_59,now,m;for(p in _54){_58=_54[p];_59=p.match(/^url\:(.+)/);if(_59){_52[_53+_5a(_59[1],_57)]=_58;}else{if(p=="*now"){now=_58;}else{if(p!="*noref"){m=_5b(p,_57);_52[m.mid]=_52[_53+m.url]=_58;}}}}if(now){now(_5c(_57));}_54={};},_5d=function(s){return s.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){return "\\"+c;});},_5e=function(map,_5f){_5f.splice(0,_5f.length);for(var p in map){_5f.push([p,map[p],new RegExp("^"+_5d(p)+"(/|$)"),p.length]);}_5f.sort(function(lhs,rhs){return rhs[3]-lhs[3];});return _5f;},_60=function(_61){var _62=_61.name;if(!_62){_62=_61;_61={name:_62};}_61=_c({main:"main"},_61);_61.location=_61.location?_61.location:_62;if(_61.packageMap){map[_62]=_61.packageMap;}if(!_61.main.indexOf("./")){_61.main=_61.main.substring(2);}_4f[_62]=_61;},_63=function(_64,_65,_66){for(var p in _64){if(p=="waitSeconds"){req.waitms=(_64[p]||0)*1000;}if(p=="cacheBust"){_51=_64[p]?(_7(_64[p])?_64[p]:(new Date()).getTime()+""):"";}if(p=="baseUrl"||p=="combo"){req[p]=_64[p];}if(1&&p=="async"){var _67=_64[p];req.legacyMode=_25=(_7(_67)&&/sync|legacyAsync/.test(_67)?_67:(!_67?_26:false));req.async=!_25;}if(_64[p]!==_1a){req.rawConfig[p]=_64[p];p!="has"&&has.add("config-"+p,_64[p],0,_65);}}if(!req.baseUrl){req.baseUrl="./";}if(!/\/$/.test(req.baseUrl)){req.baseUrl+="/";}for(p in _64.has){has.add(p,_64.has[p],0,_65);}_9(_64.packages,_60);for(_1e in _64.packagePaths){_9(_64.packagePaths[_1e],function(_68){var _69=_1e+"/"+_68;if(_7(_68)){_68={name:_68};}_68.location=_69;_60(_68);});}_5e(_c(map,_64.map),_50);_9(_50,function(_6a){_6a[1]=_5e(_6a[1],[]);if(_6a[0]=="*"){_50.star=_6a[1];}});_5e(_c(_4d,_64.paths),_4e);_9(_64.aliases,function(_6b){if(_7(_6b[0])){_6b[0]=new RegExp("^"+_5d(_6b[0])+"$");}_4c.push(_6b);});for(p in _64.config){var _6c=_31(p,_66);_6c.config=_c(_6c.config||{},_64.config[p]);}if(_64.cache){_56();_54=_64.cache;if(_64.cache["*noref"]){_56();}}_34("config",[_64,req.rawConfig]);};if(has("dojo-cdn")||1){var _6d=doc.getElementsByTagName("script"),i=0,_6e,_6f,src,_70;while(i<_6d.length){_6e=_6d[i++];if((src=_6e.getAttribute("src"))&&(_70=src.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){_6f=_70[3]||"";_2.baseUrl=_2.baseUrl||_6f;src=(_6e.getAttribute("data-dojo-config")||_6e.getAttribute("djConfig"));if(src){_55=req.eval("({ "+src+" })","data-dojo-config");}if(0){var _71=_6e.getAttribute("data-main");if(_71){_55.deps=_55.deps||[_71];}}break;}}}if(0){try{if(window.parent!=window&&window.parent.require){var doh=window.parent.require("doh");doh&&_c(_55,doh.testConfig);}}catch(e){}}req.rawConfig={};_63(_2,1);if(has("dojo-cdn")){_4f.dojo.location=_6f;if(_6f){_6f+="/";}_4f.dijit.location=_6f+"../dijit/";_4f.dojox.location=_6f+"../dojox/";}_63(_1,1);_63(_55,1);}else{_4d=_2.paths;_4e=_2.pathsMapProg;_4f=_2.packs;_4c=_2.aliases;_50=_2.mapProgs;_2f=_2.modules;_52=_2.cache;_51=_2.cacheBust;req.rawConfig=_2;}if(0){req.combo=req.combo||{add:_3};var _72=0,_73=[],_74=null;}var _75=function(_76){_37(function(){_9(_76.deps,_32);if(0&&_72&&!_74){_74=setTimeout(function(){_72=0;_74=null;req.combo.done(function(_77,url){var _78=function(){_79(0,_77);_7a();};_73.push(_77);_7b=_77;req.injectUrl(url,_78,_77);_7b=0;},req);},0);}});},_16=function(a1,a2,a3,_7c,_7d){var _7e,_7f;if(_7(a1)){_7e=_31(a1,_7c,true);if(_7e&&_7e.executed){return _7e.result;}throw _f("undefinedModule",a1);}if(!_8(a1)){_63(a1,0,_7c);a1=a2;a2=a3;}if(_8(a1)){if(!a1.length){a2&&a2();}else{_7f="require*"+uid();for(var mid,_80=[],i=0;i<a1.length;){mid=a1[i++];_80.push(_31(mid,_7c));}_7e=_c(_81("",_7f,0,""),{injected:_21,deps:_80,def:a2||_3,require:_7c?_7c.require:req,gc:1});_2f[_7e.mid]=_7e;_75(_7e);var _82=_83&&_25!=_26;_37(function(){_36(_7e,_82);});if(!_7e.executed){_30.push(_7e);}_7a();}}return _7d;},_5c=function(_84){if(!_84){return req;}var _85=_84.require;if(!_85){_85=function(a1,a2,a3){return _16(a1,a2,a3,_84,_85);};_84.require=_c(_85,req);_85.module=_84;_85.toUrl=function(_86){return _5a(_86,_84);};_85.toAbsMid=function(mid){return _b3(mid,_84);};if(0){_85.undef=function(mid){req.undef(mid,_84);};}if(1){_85.syncLoadNls=function(mid){var _87=_5b(mid,_84),_88=_2f[_87.mid];if(!_88||!_88.executed){_89=_52[_87.mid]||_52[_53+_87.url];if(_89){_8a(_89);_88=_2f[_87.mid];}}return _88&&_88.executed&&_88.result;};}}return _85;},_30=[],_8b=[],_8c={},_8d=function(_8e){_8e.injected=_20;_8c[_8e.mid]=1;if(_8e.url){_8c[_8e.url]=_8e.pack||1;}_8f();},_33=function(_90){_90.injected=_21;delete _8c[_90.mid];if(_90.url){delete _8c[_90.url];}if(_4(_8c)){_91();1&&_25==xd&&(_25=_26);}},_92=req.idle=function(){return !_8b.length&&_4(_8c)&&!_30.length&&!_83;},_93=function(_94,map){if(map){for(var i=0;i<map.length;i++){if(map[i][2].test(_94)){return map[i];}}}return 0;},_95=function(_96){var _97=[],_98,_99;_96=_96.replace(/\\/g,"/").split("/");while(_96.length){_98=_96.shift();if(_98==".."&&_97.length&&_99!=".."){_97.pop();_99=_97[_97.length-1];}else{if(_98!="."){_97.push(_99=_98);}}}return _97.join("/");},_81=function(pid,mid,_9a,url){if(1){var xd=req.isXdUrl(url);return {pid:pid,mid:mid,pack:_9a,url:url,executed:0,def:0,isXd:xd,isAmd:!!(xd||(_4f[pid]&&_4f[pid].isAmd))};}else{return {pid:pid,mid:mid,pack:_9a,url:url,executed:0,def:0};}},_9b=function(mid,_9c,_9d,_9e,_9f,_a0,_a1,_a2){var pid,_a3,_a4,_a5,_a6,url,_a7,_a8,_a9;_a9=mid;_a8=/^\./.test(mid);if(/(^\/)|(\:)|(\.js$)/.test(mid)||(_a8&&!_9c)){return _81(0,mid,0,mid);}else{mid=_95(_a8?(_9c.mid+"/../"+mid):mid);if(/^\./.test(mid)){throw _f("irrationalPath",mid);}if(_9c){_a6=_93(_9c.mid,_a0);}_a6=_a6||_a0.star;_a6=_a6&&_93(mid,_a6[1]);if(_a6){mid=_a6[1]+mid.substring(_a6[3]);}_70=mid.match(/^([^\/]+)(\/(.+))?$/);pid=_70?_70[1]:"";if((_a3=_9d[pid])){mid=pid+"/"+(_a4=(_70[3]||_a3.main));}else{pid="";}var _aa=0,_ab=0;_9(_4c,function(_ac){var _ad=mid.match(_ac[0]);if(_ad&&_ad.length>_aa){_ab=_6(_ac[1])?mid.replace(_ac[0],_ac[1]):_ac[1];}});if(_ab){return _9b(_ab,0,_9d,_9e,_9f,_a0,_a1,_a2);}_a7=_9e[mid];if(_a7){return _a2?_81(_a7.pid,_a7.mid,_a7.pack,_a7.url):_9e[mid];}}_a6=_93(mid,_a1);if(_a6){url=_a6[1]+mid.substring(_a6[3]);}else{if(pid){url=_a3.location+"/"+_a4;}else{if(has("config-tlmSiblingOfDojo")){url="../"+mid;}else{url=mid;}}}if(!(/(^\/)|(\:)/.test(url))){url=_9f+url;}url+=".js";return _81(pid,mid,_a3,_95(url));},_5b=function(mid,_ae){return _9b(mid,_ae,_4f,_2f,req.baseUrl,_50,_4e);},_af=function(_b0,_b1,_b2){return _b0.normalize?_b0.normalize(_b1,function(mid){return _b3(mid,_b2);}):_b3(_b1,_b2);},_b4=0,_31=function(mid,_b5,_b6){var _b7,_b8,_b9,_ba;_b7=mid.match(/^(.+?)\!(.*)$/);if(_b7){_b8=_31(_b7[1],_b5,_b6);if(1&&_25==_26&&!_b8.executed){_32(_b8);if(_b8.injected===_21&&!_b8.executed){_37(function(){_36(_b8);});}if(_b8.executed){_bb(_b8);}else{_30.unshift(_b8);}}if(_b8.executed===_24&&!_b8.load){_bb(_b8);}if(_b8.load){_b9=_af(_b8,_b7[2],_b5);mid=(_b8.mid+"!"+(_b8.dynamic?++_b4+"!":"")+_b9);}else{_b9=_b7[2];mid=_b8.mid+"!"+(++_b4)+"!waitingForPlugin";}_ba={plugin:_b8,mid:mid,req:_5c(_b5),prid:_b9};}else{_ba=_5b(mid,_b5);}return _2f[_ba.mid]||(!_b6&&(_2f[_ba.mid]=_ba));},_b3=req.toAbsMid=function(mid,_bc){return _5b(mid,_bc).mid;},_5a=req.toUrl=function(_bd,_be){var _bf=_5b(_bd+"/x",_be),url=_bf.url;return _3f(_bf.pid===0?_bd:url.substring(0,url.length-5));},_c0={injected:_21,executed:_24,def:_22,result:_22},_c1=function(mid){return _2f[mid]=_c({mid:mid},_c0);},_c2=_c1("require"),_c3=_c1("exports"),_c4=_c1("module"),_c5=function(_c6,_c7){req.trace("loader-run-factory",[_c6.mid]);var _c8=_c6.def,_c9;1&&_27.unshift(_c6);if(has("config-dojo-loader-catches")){try{_c9=_6(_c8)?_c8.apply(null,_c7):_c8;}catch(e){_34(_44,_c6.result=_f("factoryThrew",[_c6,e]));}}else{_c9=_6(_c8)?_c8.apply(null,_c7):_c8;}_c6.result=_c9===undefined&&_c6.cjs?_c6.cjs.exports:_c9;1&&_27.shift(_c6);},_ca={},_cb=0,_bb=function(_cc){var _cd=_cc.result;_cc.dynamic=_cd.dynamic;_cc.normalize=_cd.normalize;_cc.load=_cd.load;return _cc;},_ce=function(_cf){var map={};_9(_cf.loadQ,function(_d0){var _d1=_af(_cf,_d0.prid,_d0.req.module),mid=_cf.dynamic?_d0.mid.replace(/waitingForPlugin$/,_d1):(_cf.mid+"!"+_d1),_d2=_c(_c({},_d0),{mid:mid,prid:_d1,injected:0});if(!_2f[mid]){_e4(_2f[mid]=_d2);}map[_d0.mid]=_2f[mid];_33(_d0);delete _2f[_d0.mid];});_cf.loadQ=0;var _d3=function(_d4){for(var _d5,_d6=_d4.deps||[],i=0;i<_d6.length;i++){_d5=map[_d6[i].mid];if(_d5){_d6[i]=_d5;}}};for(var p in _2f){_d3(_2f[p]);}_9(_30,_d3);},_35=function(_d7){req.trace("loader-finish-exec",[_d7.mid]);_d7.executed=_24;_d7.defOrder=_cb++;1&&_9(_d7.provides,function(cb){cb();});if(_d7.loadQ){_bb(_d7);_ce(_d7);}for(i=0;i<_30.length;){if(_30[i]===_d7){_30.splice(i,1);}else{i++;}}if(/^require\*/.test(_d7.mid)){delete _2f[_d7.mid];}},_d8=[],_36=function(_d9,_da){if(_d9.executed===_23){req.trace("loader-circular-dependency",[_d8.concat(_d9.mid).join("->")]);return (!_d9.def||_da)?_ca:(_d9.cjs&&_d9.cjs.exports);}if(!_d9.executed){if(!_d9.def){return _ca;}var mid=_d9.mid,_db=_d9.deps||[],arg,_dc,_dd=[],i=0;if(0){_d8.push(mid);req.trace("loader-exec-module",["exec",_d8.length,mid]);}_d9.executed=_23;while(i<_db.length){arg=_db[i++];_dc=((arg===_c2)?_5c(_d9):((arg===_c3)?_d9.cjs.exports:((arg===_c4)?_d9.cjs:_36(arg,_da))));if(_dc===_ca){_d9.executed=0;req.trace("loader-exec-module",["abort",mid]);0&&_d8.pop();return _ca;}_dd.push(_dc);}_c5(_d9,_dd);_35(_d9);0&&_d8.pop();}return _d9.result;},_83=0,_37=function(_de){try{_83++;_de();}finally{_83--;}if(_92()){_34("idle",[]);}},_7a=function(){if(_83){return;}_37(function(){_29();for(var _df,_e0,i=0;i<_30.length;){_df=_cb;_e0=_30[i];_36(_e0);if(_df!=_cb){_29();i=0;}else{i++;}}});};if(0){req.undef=function(_e1,_e2){var _e3=_31(_e1,_e2);_33(_e3);delete _2f[_e3.mid];};}if(1){if(has("dojo-loader-eval-hint-url")===undefined){has.add("dojo-loader-eval-hint-url",1);}var _3f=function(url){url+="";return url+(_51?((/\?/.test(url)?"&":"?")+_51):"");},_e4=function(_e5){var _e6=_e5.plugin;if(_e6.executed===_24&&!_e6.load){_bb(_e6);}var _e7=function(def){_e5.result=def;_33(_e5);_35(_e5);_7a();};if(_e6.load){_e6.load(_e5.prid,_e5.req,_e7);}else{if(_e6.loadQ){_e6.loadQ.push(_e5);}else{_e6.loadQ=[_e5];_30.unshift(_e6);_32(_e6);}}},_89=0,_7b=0,_e8=0,_8a=function(_e9,_ea){if(has("config-stripStrict")){_e9=_e9.replace(/"use strict"/g,"");}_e8=1;if(has("config-dojo-loader-catches")){try{if(_e9===_89){_89.call(null);}else{req.eval(_e9,has("dojo-loader-eval-hint-url")?_ea.url:_ea.mid);}}catch(e){_34(_44,_f("evalModuleThrew",_ea));}}else{if(_e9===_89){_89.call(null);}else{req.eval(_e9,has("dojo-loader-eval-hint-url")?_ea.url:_ea.mid);}}_e8=0;},_32=function(_eb){var mid=_eb.mid,url=_eb.url;if(_eb.executed||_eb.injected||_8c[mid]||(_eb.url&&((_eb.pack&&_8c[_eb.url]===_eb.pack)||_8c[_eb.url]==1))){return;}_8d(_eb);if(0){var _ec=0;if(_eb.plugin&&_eb.plugin.isCombo){req.combo.add(_eb.plugin.mid,_eb.prid,0,req);_ec=1;}else{if(!_eb.plugin){_ec=req.combo.add(0,_eb.mid,_eb.url,req);}}if(_ec){_72=1;return;}}if(_eb.plugin){_e4(_eb);return;}var _ed=function(){_79(_eb);if(_eb.injected!==_21){_33(_eb);_c(_eb,_c0);req.trace("loader-define-nonmodule",[_eb.url]);}if(1&&_25){!_27.length&&_7a();}else{_7a();}};_89=_52[mid]||_52[_53+_eb.url];if(_89){req.trace("loader-inject",["cache",_eb.mid,url]);_8a(_89,_eb);_ed();return;}if(1&&_25){if(_eb.isXd){_25==_26&&(_25=xd);}else{if(_eb.isAmd&&_25!=_26){}else{var _ee=function(_ef){if(_25==_26){_27.unshift(_eb);_8a(_ef,_eb);_27.shift();_79(_eb);if(!_eb.cjs){_33(_eb);_35(_eb);}if(_eb.finish){var _f0=mid+"*finish",_f1=_eb.finish;delete _eb.finish;def(_f0,["dojo",("dojo/require!"+_f1.join(",")).replace(/\./g,"/")],function(_f2){_9(_f1,function(mid){_f2.require(mid);});});_30.unshift(_31(_f0));}_ed();}else{_ef=_2a(_eb,_ef);if(_ef){_8a(_ef,_eb);_ed();}else{_7b=_eb;req.injectUrl(_3f(url),_ed,_eb);_7b=0;}}};req.trace("loader-inject",["xhr",_eb.mid,url,_25!=_26]);if(has("config-dojo-loader-catches")){try{req.getText(url,_25!=_26,_ee);}catch(e){_34(_44,_f("xhrInjectFailed",[_eb,e]));}}else{req.getText(url,_25!=_26,_ee);}return;}}}req.trace("loader-inject",["script",_eb.mid,url]);_7b=_eb;req.injectUrl(_3f(url),_ed,_eb);_7b=0;},_f3=function(_f4,_f5,def){req.trace("loader-define-module",[_f4.mid,_f5]);if(0&&_f4.plugin&&_f4.plugin.isCombo){_f4.result=_6(def)?def():def;_33(_f4);_35(_f4);return _f4;}var mid=_f4.mid;if(_f4.injected===_21){_34(_44,_f("multipleDefine",_f4));return _f4;}_c(_f4,{deps:_f5,def:def,cjs:{id:_f4.mid,uri:_f4.url,exports:(_f4.result={}),setExports:function(_f6){_f4.cjs.exports=_f6;},config:function(){return _f4.config;}}});for(var i=0;i<_f5.length;i++){_f5[i]=_31(_f5[i],_f4);}if(1&&_25&&!_8c[mid]){_75(_f4);_30.push(_f4);_7a();}_33(_f4);if(!_6(def)&&!_f5.length){_f4.result=def;_35(_f4);}return _f4;},_79=function(_f7,_f8){var _f9=[],_fa,_fb;while(_8b.length){_fb=_8b.shift();_f8&&(_fb[0]=_f8.shift());_fa=(_fb[0]&&_31(_fb[0]))||_f7;_f9.push([_fa,_fb[1],_fb[2]]);}_56(_f7);_9(_f9,function(_fc){_75(_f3.apply(null,_fc));});};}var _fd=0,_91=_3,_8f=_3;if(1){_91=function(){_fd&&clearTimeout(_fd);_fd=0;},_8f=function(){_91();if(req.waitms){_fd=window.setTimeout(function(){_91();_34(_44,_f("timeout",_8c));},req.waitms);}};}if(1){has.add("ie-event-behavior",!!doc.attachEvent&&(typeof opera==="undefined"||opera.toString()!="[object Opera]"));}if(1&&(1||1)){var _fe=function(_ff,_100,_101,_102){if(!has("ie-event-behavior")){_ff.addEventListener(_100,_102,false);return function(){_ff.removeEventListener(_100,_102,false);};}else{_ff.attachEvent(_101,_102);return function(){_ff.detachEvent(_101,_102);};}},_103=_fe(window,"load","onload",function(){req.pageLoaded=1;doc.readyState!="complete"&&(doc.readyState="complete");_103();});if(1){var _104=doc.getElementsByTagName("script")[0],_105=_104.parentNode;req.injectUrl=function(url,_106,_107){var node=_107.node=doc.createElement("script"),_108=function(e){e=e||window.event;var node=e.target||e.srcElement;if(e.type==="load"||/complete|loaded/.test(node.readyState)){_109();_10a();_106&&_106();}},_109=_fe(node,"load","onreadystatechange",_108),_10a=_fe(node,"error","onerror",function(e){_109();_10a();_34(_44,_f("scriptError",[url,e]));});node.type="text/javascript";node.charset="utf-8";node.src=url;_105.insertBefore(node,_104);return node;};}}if(1){req.log=function(){try{for(var i=0;i<arguments.length;i++){console.log(arguments[i]);}}catch(e){}};}else{req.log=_3;}if(0){var _10b=req.trace=function(_10c,args){if(_10b.on&&_10b.group[_10c]){_34("trace",[_10c,args]);for(var arg,dump=[],text="trace:"+_10c+(args.length?(":"+args[0]):""),i=1;i<args.length;){arg=args[i++];if(_7(arg)){text+=", "+arg;}else{dump.push(arg);}}req.log(text);dump.length&&dump.push(".");req.log.apply(req,dump);}};_c(_10b,{on:1,group:{},set:function(_10d,_10e){if(_7(_10d)){_10b.group[_10d]=_10e;}else{_c(_10b.group,_10d);}}});_10b.set(_c(_c(_c({},_2.trace),_1.trace),_55.trace));on("config",function(_10f){_10f.trace&&_10b.set(_10f.trace);});}else{req.trace=_3;}var def=function(mid,_110,_111){var _112=arguments.length,_113=["require","exports","module"],args=[0,mid,_110];if(_112==1){args=[0,(_6(mid)?_113:[]),mid];}else{if(_112==2&&_7(mid)){args=[mid,(_6(_110)?_113:[]),_110];}else{if(_112==3){args=[mid,_110,_111];}}}if(0&&args[1]===_113){args[2].toString().replace(/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,"").replace(/require\(["']([\w\!\-_\.\/]+)["']\)/g,function(_114,dep){args[1].push(dep);});}req.trace("loader-define",args.slice(0,2));var _115=args[0]&&_31(args[0]),_116;if(_115&&!_8c[_115.mid]){_75(_f3(_115,args[1],args[2]));}else{if(!has("ie-event-behavior")||!1||_e8){_8b.push(args);}else{_115=_115||_7b;if(!_115){for(mid in _8c){_116=_2f[mid];if(_116&&_116.node&&_116.node.readyState==="interactive"){_115=_116;break;}}if(0&&!_115){for(var i=0;i<_73.length;i++){_115=_73[i];if(_115.node&&_115.node.readyState==="interactive"){break;}_115=0;}}}if(0&&_8(_115)){_75(_f3(_31(_115.shift()),args[1],args[2]));if(!_115.length){_73.splice(i,1);}}else{if(_115){_56(_115);_75(_f3(_115,args[1],args[2]));}else{_34(_44,_f("ieDefineFailed",args[0]));}}_7a();}}};def.amd={vendor:"dojotoolkit.org"};if(0){req.def=def;}_c(_c(req,_2.loaderPatch),_1.loaderPatch);on(_44,function(arg){try{console.error(arg);if(arg instanceof Error){for(var p in arg){console.log(p+":",arg[p]);}console.log(".");}}catch(e){}});_c(req,{uid:uid,cache:_52,packs:_4f});if(0){_c(req,{paths:_4d,aliases:_4c,modules:_2f,legacyMode:_25,execQ:_30,defQ:_8b,waiting:_8c,packs:_4f,mapProgs:_50,pathsMapProg:_4e,listenerQueues:_43,computeMapProg:_5e,runMapProg:_93,compactPath:_95,getModuleInfo:_9b});}if(_17.define){if(1){_34(_44,_f("defineAlreadyDefined",0));}return;}else{_17.define=def;_17.require=req;if(0){require=req;}}if(0&&req.combo&&req.combo.plugins){var _117=req.combo.plugins,_118;for(_118 in _117){_c(_c(_31(_118),_117[_118]),{isCombo:1,executed:"executed",load:1});}}if(1){var _119=_55.deps||_1.deps||_2.deps,_11a=_55.callback||_1.callback||_2.callback;req.boot=(_119||_11a)?[_119||[],_11a]:0;}if(!1){!req.async&&req(["dojo"]);req.boot&&req.apply(null,req.boot);}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../dojox",name:"dojox"},{location:"../../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dijit",name:"dijit"},{location:"../../xstyle",name:"xstyle"},{location:"../../esri",name:"esri"},{location:"../../WebScene",main:"Stage",name:"WebScene"},{location:".",name:"dojo"},{location:"../../put-selector",main:"put",name:"put-selector"}]});require({cache:{"dojo/request/xhr":function(){define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(_11b,_11c,_11d,util,has){has.add("native-xhr",function(){return typeof XMLHttpRequest!=="undefined";});has.add("dojo-force-activex-xhr",function(){return has("activex")&&!document.addEventListener&&window.location.protocol==="file:";});has.add("native-xhr2",function(){if(!has("native-xhr")){return;}var x=new XMLHttpRequest();return typeof x["addEventListener"]!=="undefined"&&(typeof opera==="undefined"||typeof x["upload"]!=="undefined");});has.add("native-formdata",function(){return typeof FormData!=="undefined";});function _11e(_11f,_120){var _121=_11f.xhr;_11f.status=_11f.xhr.status;_11f.text=_121.responseText;if(_11f.options.handleAs==="xml"){_11f.data=_121.responseXML;}if(!_120){try{_11d(_11f);}catch(e){_120=e;}}if(_120){this.reject(_120);}else{if(util.checkStatus(_121.status)){this.resolve(_11f);}else{_120=new _11b("Unable to load "+_11f.url+" status: "+_121.status,_11f);this.reject(_120);}}};var _122,_123,_124,_125;if(has("native-xhr2")){_122=function(_126){return !this.isFulfilled();};_125=function(dfd,_127){_127.xhr.abort();};_124=function(_128,dfd,_129){function _12a(evt){dfd.handleResponse(_129);};function _12b(evt){var _12c=evt.target;var _12d=new _11b("Unable to load "+_129.url+" status: "+_12c.status,_129);dfd.handleResponse(_129,_12d);};function _12e(evt){if(evt.lengthComputable){_129.loaded=evt.loaded;_129.total=evt.total;dfd.progress(_129);}};_128.addEventListener("load",_12a,false);_128.addEventListener("error",_12b,false);_128.addEventListener("progress",_12e,false);return function(){_128.removeEventListener("load",_12a,false);_128.removeEventListener("error",_12b,false);_128.removeEventListener("progress",_12e,false);};};}else{_122=function(_12f){return _12f.xhr.readyState;};_123=function(_130){return 4===_130.xhr.readyState;};_125=function(dfd,_131){var xhr=_131.xhr;var _132=typeof xhr.abort;if(_132==="function"||_132==="object"||_132==="unknown"){xhr.abort();}};}var _133,_134={data:null,query:null,sync:false,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};function xhr(url,_135,_136){var _137=util.parseArgs(url,util.deepCreate(_134,_135),has("native-formdata")&&_135&&_135.data&&_135.data instanceof FormData);url=_137.url;_135=_137.options;var _138,last=function(){_138&&_138();};var dfd=util.deferred(_137,_125,_122,_123,_11e,last);var _139=_137.xhr=xhr._create();if(!_139){dfd.cancel(new _11b("XHR was not created"));return _136?dfd:dfd.promise;}_137.getHeader=function(_13a){return this.xhr.getResponseHeader(_13a);};if(_124){_138=_124(_139,dfd,_137);}var data=_135.data,_13b=!_135.sync,_13c=_135.method;try{_139.open(_13c,url,_13b,_135.user||_133,_135.password||_133);if(_135.withCredentials){_139.withCredentials=_135.withCredentials;}var _13d=_135.headers,_13e;if(_13d){for(var hdr in _13d){if(hdr.toLowerCase()==="content-type"){_13e=_13d[hdr];}else{if(_13d[hdr]){_139.setRequestHeader(hdr,_13d[hdr]);}}}}if(_13e&&_13e!==false){_139.setRequestHeader("Content-Type",_13e);}if(!_13d||!("X-Requested-With" in _13d)){_139.setRequestHeader("X-Requested-With","XMLHttpRequest");}if(util.notify){util.notify.emit("send",_137,dfd.promise.cancel);}_139.send(data);}catch(e){dfd.reject(e);}_11c(dfd);_139=null;return _136?dfd:dfd.promise;};xhr._create=function(){throw new Error("XMLHTTP not available");};if(has("native-xhr")&&!has("dojo-force-activex-xhr")){xhr._create=function(){return new XMLHttpRequest();};}else{if(has("activex")){try{new ActiveXObject("Msxml2.XMLHTTP");xhr._create=function(){return new ActiveXObject("Msxml2.XMLHTTP");};}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");xhr._create=function(){return new ActiveXObject("Microsoft.XMLHTTP");};}catch(e){}}}}util.addCommonMethods(xhr);return xhr;});},"dojo/sniff":function(){define(["./has"],function(has){if(1){var n=navigator,dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);has.add("air",dua.indexOf("AdobeAIR")>=0),has.add("khtml",dav.indexOf("Konqueror")>=0?tv:undefined);has.add("webkit",parseFloat(dua.split("WebKit/")[1])||undefined);has.add("chrome",parseFloat(dua.split("Chrome/")[1])||undefined);has.add("safari",dav.indexOf("Safari")>=0&&!has("chrome")?parseFloat(dav.split("Version/")[1]):undefined);has.add("mac",dav.indexOf("Macintosh")>=0);has.add("quirks",document.compatMode=="BackCompat");has.add("ios",/iPhone|iPod|iPad/.test(dua));has.add("android",parseFloat(dua.split("Android ")[1])||undefined);if(!has("webkit")){if(dua.indexOf("Opera")>=0){has.add("opera",tv>=9.8?parseFloat(dua.split("Version/")[1])||tv:tv);}if(dua.indexOf("Gecko")>=0&&!has("khtml")&&!has("webkit")){has.add("mozilla",tv);}if(has("mozilla")){has.add("ff",parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined);}if(document.all&&!has("opera")){var isIE=parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;if(mode&&mode!=5&&Math.floor(isIE)!=mode){isIE=mode;}has.add("ie",isIE);}has.add("wii",typeof opera!="undefined"&&opera.wiiremote);}}return has;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_13f,_140,_141,_142,lang,has,_143,_144,_145,_146){var _147=_13f("dijit.form.TextBox",[_143,_144],{templateString:_145,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_141.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _148=this.domNode.getElementsByTagName("INPUT");if(_148){for(var i=0;i<_148.length;i++){_148[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_140.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_149,_14a,_14b){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_142.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_14c){_142.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_14c);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")){_147.prototype._isTextSelected=function(){var _14d=this.ownerDocument.selection.createRange();var _14e=_14d.parentElement();return _14e==this.textbox&&_14d.text.length>0;};_146._setSelectionRange=_144._setSelectionRange=function(_14f,_150,stop){if(_14f.createTextRange){var r=_14f.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_150);r.moveEnd("character",stop-_150);r.select();}};}return _147;});},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(has,win,dom,_151){var geom={};geom.boxModel="content-box";if(has("ie")){geom.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box";}geom.getPadExtents=function getPadExtents(node,_152){node=dom.byId(node);var s=_152||_151.getComputedStyle(node),px=_151.toPixelValue,l=px(node,s.paddingLeft),t=px(node,s.paddingTop),r=px(node,s.paddingRight),b=px(node,s.paddingBottom);return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};var none="none";geom.getBorderExtents=function getBorderExtents(node,_153){node=dom.byId(node);var px=_151.toPixelValue,s=_153||_151.getComputedStyle(node),l=s.borderLeftStyle!=none?px(node,s.borderLeftWidth):0,t=s.borderTopStyle!=none?px(node,s.borderTopWidth):0,r=s.borderRightStyle!=none?px(node,s.borderRightWidth):0,b=s.borderBottomStyle!=none?px(node,s.borderBottomWidth):0;return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};geom.getPadBorderExtents=function getPadBorderExtents(node,_154){node=dom.byId(node);var s=_154||_151.getComputedStyle(node),p=geom.getPadExtents(node,s),b=geom.getBorderExtents(node,s);return {l:p.l+b.l,t:p.t+b.t,r:p.r+b.r,b:p.b+b.b,w:p.w+b.w,h:p.h+b.h};};geom.getMarginExtents=function getMarginExtents(node,_155){node=dom.byId(node);var s=_155||_151.getComputedStyle(node),px=_151.toPixelValue,l=px(node,s.marginLeft),t=px(node,s.marginTop),r=px(node,s.marginRight),b=px(node,s.marginBottom);return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};geom.getMarginBox=function getMarginBox(node,_156){node=dom.byId(node);var s=_156||_151.getComputedStyle(node),me=geom.getMarginExtents(node,s),l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode,px=_151.toPixelValue,pcs;if(has("mozilla")){var sl=parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st)){l=sl;t=st;}else{if(p&&p.style){pcs=_151.getComputedStyle(p);if(pcs.overflow!="visible"){l+=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;t+=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0;}}}}else{if(has("opera")||(has("ie")==8&&!has("quirks"))){if(p){pcs=_151.getComputedStyle(p);l-=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;t-=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0;}}}return {l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h};};geom.getContentBox=function getContentBox(node,_157){node=dom.byId(node);var s=_157||_151.getComputedStyle(node),w=node.clientWidth,h,pe=geom.getPadExtents(node,s),be=geom.getBorderExtents(node,s);if(!w){w=node.offsetWidth;h=node.offsetHeight;}else{h=node.clientHeight;be.w=be.h=0;}if(has("opera")){pe.l+=be.l;pe.t+=be.t;}return {l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h};};function _158(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l)){s.left=l+u;}if(!isNaN(t)){s.top=t+u;}if(w>=0){s.width=w+u;}if(h>=0){s.height=h+u;}};function _159(node){return node.tagName.toLowerCase()=="button"||node.tagName.toLowerCase()=="input"&&(node.getAttribute("type")||"").toLowerCase()=="button";};function _15a(node){return geom.boxModel=="border-box"||node.tagName.toLowerCase()=="table"||_159(node);};geom.setContentSize=function setContentSize(node,box,_15b){node=dom.byId(node);var w=box.w,h=box.h;if(_15a(node)){var pb=geom.getPadBorderExtents(node,_15b);if(w>=0){w+=pb.w;}if(h>=0){h+=pb.h;}}_158(node,NaN,NaN,w,h);};var _15c={l:0,t:0,w:0,h:0};geom.setMarginBox=function setMarginBox(node,box,_15d){node=dom.byId(node);var s=_15d||_151.getComputedStyle(node),w=box.w,h=box.h,pb=_15a(node)?_15c:geom.getPadBorderExtents(node,s),mb=geom.getMarginExtents(node,s);if(has("webkit")){if(_159(node)){var ns=node.style;if(w>=0&&!ns.width){ns.width="4px";}if(h>=0&&!ns.height){ns.height="4px";}}}if(w>=0){w=Math.max(w-pb.w-mb.w,0);}if(h>=0){h=Math.max(h-pb.h-mb.h,0);}_158(node,box.l,box.t,w,h);};geom.isBodyLtr=function isBodyLtr(doc){doc=doc||win.doc;return (win.body(doc).dir||doc.documentElement.dir||"ltr").toLowerCase()=="ltr";};geom.docScroll=function docScroll(doc){doc=doc||win.doc;var node=win.doc.parentWindow||win.doc.defaultView;return "pageXOffset" in node?{x:node.pageXOffset,y:node.pageYOffset}:(node=has("quirks")?win.body(doc):doc.documentElement)&&{x:geom.fixIeBiDiScrollLeft(node.scrollLeft||0,doc),y:node.scrollTop||0};};if(has("ie")){geom.getIeDocumentElementOffset=function getIeDocumentElementOffset(doc){doc=doc||win.doc;var de=doc.documentElement;if(has("ie")<8){var r=de.getBoundingClientRect(),l=r.left,t=r.top;if(has("ie")<7){l+=de.clientLeft;t+=de.clientTop;}return {x:l<0?0:l,y:t<0?0:t};}else{return {x:0,y:0};}};}geom.fixIeBiDiScrollLeft=function fixIeBiDiScrollLeft(_15e,doc){doc=doc||win.doc;var ie=has("ie");if(ie&&!geom.isBodyLtr(doc)){var qk=has("quirks"),de=qk?win.body(doc):doc.documentElement,pwin=win.global;if(ie==6&&!qk&&pwin.frameElement&&de.scrollHeight>de.clientHeight){_15e+=de.clientLeft;}return (ie<8||qk)?(_15e+de.clientWidth-de.scrollWidth):-_15e;}return _15e;};geom.position=function(node,_15f){node=dom.byId(node);var db=win.body(node.ownerDocument),ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(has("ie")){var _160=geom.getIeDocumentElementOffset(node.ownerDocument);ret.x-=_160.x+(has("quirks")?db.clientLeft+db.offsetLeft:0);ret.y-=_160.y+(has("quirks")?db.clientTop+db.offsetTop:0);}if(_15f){var _161=geom.docScroll(node.ownerDocument);ret.x+=_161.x;ret.y+=_161.y;}return ret;};geom.getMarginSize=function getMarginSize(node,_162){node=dom.byId(node);var me=geom.getMarginExtents(node,_162||_151.getComputedStyle(node));var size=node.getBoundingClientRect();return {w:(size.right-size.left)+me.w,h:(size.bottom-size.top)+me.h};};geom.normalizeEvent=function(_163){if(!("layerX" in _163)){_163.layerX=_163.offsetX;_163.layerY=_163.offsetY;}if(!has("dom-addeventlistener")){var se=_163.target;var doc=(se&&se.ownerDocument)||document;var _164=has("quirks")?doc.body:doc.documentElement;var _165=geom.getIeDocumentElementOffset(doc);_163.pageX=_163.clientX+geom.fixIeBiDiScrollLeft(_164.scrollLeft||0,doc)-_165.x;_163.pageY=_163.clientY+(_164.scrollTop||0)-_165.y;}};return geom;});},"dijit/_base/scroll":function(){define("dijit/_base/scroll",["dojo/window","../main"],function(_166,_167){_167.scrollIntoView=function(node,pos){_166.scrollIntoView(node,pos);};});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_168,_169,_16a,_16b,_16c,_16d,_16e,has,_16f){var _170=_16d("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _171=this.declaredClass,_172=this;return _16a.substitute(tmpl,this,function(_173,key){if(key.charAt(0)=="!"){_173=lang.getObject(key.substr(1),false,_172);}if(typeof _173=="undefined"){throw new Error(_171+" template:"+key);}if(_173==null){return "";}return key.charAt(0)=="!"?_173:_173.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_16b(this.templatePath,{sanitize:true});}var _174=_170.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_174)){node=_16e.toDom(this._stringRepl(_174),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_174);}}else{node=_174.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_175){var dest=this.containerNode;if(_175&&dest){while(_175.hasChildNodes()){dest.appendChild(_175.firstChild);}}},_attachTemplateNodes:function(_176,_177){var _178=lang.isArray(_176)?_176:(_176.all||_176.getElementsByTagName("*"));var x=lang.isArray(_176)?0:-1;for(;x<0||_178[x];x++){var _179=(x==-1)?_176:_178[x];if(this.widgetsInTemplate&&(_177(_179,"dojoType")||_177(_179,"data-dojo-type"))){continue;}var _17a=_177(_179,"dojoAttachPoint")||_177(_179,"data-dojo-attach-point");if(_17a){var _17b,_17c=_17a.split(/\s*,\s*/);while((_17b=_17c.shift())){if(lang.isArray(this[_17b])){this[_17b].push(_179);}else{this[_17b]=_179;}this._attachPoints.push(_17b);}}var _17d=_177(_179,"dojoAttachEvent")||_177(_179,"data-dojo-attach-event");if(_17d){var _17e,_17f=_17d.split(/\s*,\s*/);var trim=lang.trim;while((_17e=_17f.shift())){if(_17e){var _180=null;if(_17e.indexOf(":")!=-1){var _181=_17e.split(":");_17e=trim(_181[0]);_180=trim(_181[1]);}else{_17e=trim(_17e);}if(!_180){_180=_17e;}this._attachEvents.push(this.connect(_179,_168[_17e]||_17e,_180));}}}}},destroyRendering:function(){_16c.forEach(this._attachPoints,function(_182){delete this[_182];},this);this._attachPoints=[];_16c.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_170._templateCache={};_170.getCachedTemplate=function(_183,_184,doc){var _185=_170._templateCache;var key=_183;var _186=_185[key];if(_186){try{if(!_186.ownerDocument||_186.ownerDocument==(doc||document)){return _186;}}catch(e){}_16e.destroy(_186);}_183=_16a.trim(_183);if(_184||_183.match(/\$\{([^\}]+)\}/g)){return (_185[key]=_183);}else{var node=_16e.toDom(_183,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_183);}return (_185[key]=node);}};if(has("ie")){_16f.addOnWindowUnload(function(){var _187=_170._templateCache;for(var key in _187){var _188=_187[key];if(typeof _188=="object"){_16e.destroy(_188);}delete _187[key];}});}lang.extend(_169,{dojoAttachEvent:"",dojoAttachPoint:""});return _170;});},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(dojo,lang,on){var win=window;var _189={addOnWindowUnload:function(obj,_18a){if(!dojo.windowUnloaded){on(win,"unload",(dojo.windowUnloaded=function(){}));}on(win,"unload",lang.hitch(obj,_18a));},addOnUnload:function(obj,_18b){on(win,"beforeunload",lang.hitch(obj,_18b));}};dojo.addOnWindowUnload=_189.addOnWindowUnload;dojo.addOnUnload=_189.addOnUnload;return _189;});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_18c,_18d,dom,_18e,lang,on,_18f,win,_190){var _191=_18d("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_18c.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_192){if(!this.disabled){switch(_192.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _193=this.baseClass.split(" ");function _194(_195){_193=_193.concat(_18c.map(_193,function(c){return c+_195;}),"dijit"+_195);};if(!this.isLeftToRight()){_194("Rtl");}var _196=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_194(_196);}if(this.state){_194(this.state);}if(this.selected){_194("Selected");}if(this._opened){_194("Opened");}if(this.disabled){_194("Disabled");}else{if(this.readOnly){_194("ReadOnly");}else{if(this.active){_194("Active");}else{if(this.hovering){_194("Hover");}}}}if(this.focused){_194("Focused");}var tn=this.stateNode||this.domNode,_197={};_18c.forEach(tn.className.split(" "),function(c){_197[c]=true;});if("_stateClasses" in this){_18c.forEach(this._stateClasses,function(c){delete _197[c];});}_18c.forEach(_193,function(c){_197[c]=true;});var _198=[];for(var c in _197){_198.push(c);}tn.className=_198.join(" ");this._stateClasses=_193;},_subnodeCssMouseEvent:function(node,_199,evt){if(this.disabled||this.readOnly){return;}function _19a(_19b){_18e.toggle(node,_199+"Hover",_19b);};function _19c(_19d){_18e.toggle(node,_199+"Active",_19d);};function _19e(_19f){_18e.toggle(node,_199+"Focused",_19f);};switch(evt.type){case "mouseover":_19a(true);break;case "mouseout":_19a(false);_19c(false);break;case "mousedown":case "touchstart":_19c(true);break;case "mouseup":case "touchend":_19c(false);break;case "focus":case "focusin":_19e(true);break;case "blur":case "focusout":_19e(false);break;}},_trackMouseState:function(node,_1a0){node._cssState=_1a0;}});_18f(function(){function _1a1(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _1a2=_190.getEnclosingWidget(node);if(_1a2){if(node==_1a2.domNode){_1a2._cssMouseEvent(evt);}else{_1a2._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _1a3(evt){evt.target=evt.srcElement;_1a1(evt);};var body=win.body();_18c.forEach(["mouseover","mouseout","mousedown","touchstart","mouseup","touchend"],function(type){if(body.addEventListener){body.addEventListener(type,_1a1,true);}else{body.attachEvent("on"+type,_1a3);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _1a4=_190.getEnclosingWidget(node);_1a4._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _191;});},"dojo/selector/_loader":function(){define(["../has","require"],function(has,_1a5){"use strict";var _1a6=document.createElement("div");has.add("dom-qsa2.1",!!_1a6.querySelectorAll);has.add("dom-qsa3",function(){try{_1a6.innerHTML="<p class='TEST'></p>";return _1a6.querySelectorAll(".TEST:empty").length==1;}catch(e){}});var _1a7;var acme="./acme",lite="./lite";return {load:function(id,_1a8,_1a9,_1aa){var req=_1a5;id=id=="default"?has("config-selectorEngine")||"css3":id;id=id=="css2"||id=="lite"?lite:id=="css2.1"?has("dom-qsa2.1")?lite:acme:id=="css3"?has("dom-qsa3")?lite:acme:id=="acme"?acme:(req=_1a8)&&id;if(id.charAt(id.length-1)=="?"){id=id.substring(0,id.length-1);var _1ab=true;}if(_1ab&&(has("dom-compliant-qsa")||_1a7)){return _1a9(_1a7);}req([id],function(_1ac){if(id!="./lite"){_1a7=_1ac;}_1a9(_1ac);});}};});},"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n","dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay",["dojo/_base/declare","dojo/dom-attr","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe"],function(_1ad,_1ae,_1af,_1b0,_1b1,_1b2){return _1ad("dijit.DialogUnderlay",[_1b0,_1b1],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(id){_1ae.set(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_1b3){this.node.className="dijitDialogUnderlay "+_1b3;this._set("class",_1b3);},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _1b4=_1af.getBox(this.ownerDocument);os.top=_1b4.t+"px";os.left=_1b4.l+"px";is.width=_1b4.w+"px";is.height=_1b4.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new _1b2(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_1b5,_1b6,_1b7,_1b8,win,_1b9,_1ba){function _1bb(node,_1bc,_1bd,_1be){var view=_1b9.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_1b5.some(_1bc,function(_1bf){var _1c0=_1bf.corner;var pos=_1bf.pos;var _1c1=0;var _1c2={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_1c0.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_1c0.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_1bd){var res=_1bd(node,_1bf.aroundCorner,_1c0,_1c2,_1be);_1c1=typeof res=="undefined"?0:res;}var _1c3=node.style;var _1c4=_1c3.display;var _1c5=_1c3.visibility;if(_1c3.display=="none"){_1c3.visibility="hidden";_1c3.display="";}var bb=_1b6.position(node);_1c3.display=_1c4;_1c3.visibility=_1c5;var _1c6={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_1c0.charAt(1)],_1c7={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_1c0.charAt(0)],_1c8=Math.max(view.l,_1c6),_1c9=Math.max(view.t,_1c7),endX=Math.min(view.l+view.w,_1c6+bb.w),endY=Math.min(view.t+view.h,_1c7+bb.h),_1ca=endX-_1c8,_1cb=endY-_1c9;_1c1+=(bb.w-_1ca)+(bb.h-_1cb);if(best==null||_1c1<best.overflow){best={corner:_1c0,aroundCorner:_1bf.aroundCorner,x:_1c8,y:_1c9,w:_1ca,h:_1cb,overflow:_1c1,spaceAvailable:_1c2};}return !_1c1;});if(best.overflow&&_1bd){_1bd(node,best.aroundCorner,best.corner,best.spaceAvailable,_1be);}var l=_1b6.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _1cc={at:function(node,pos,_1cd,_1ce){var _1cf=_1b5.map(_1cd,function(_1d0){var c={corner:_1d0,pos:{x:pos.x,y:pos.y}};if(_1ce){c.pos.x+=_1d0.charAt(1)=="L"?_1ce.x:-_1ce.x;c.pos.y+=_1d0.charAt(0)=="T"?_1ce.y:-_1ce.y;}return c;});return _1bb(node,_1cf);},around:function(node,_1d1,_1d2,_1d3,_1d4){var _1d5=(typeof _1d1=="string"||"offsetWidth" in _1d1)?_1b6.position(_1d1,true):_1d1;if(_1d1.parentNode){var _1d6=_1b7.getComputedStyle(_1d1).position=="absolute";var _1d7=_1d1.parentNode;while(_1d7&&_1d7.nodeType==1&&_1d7.nodeName!="BODY"){var _1d8=_1b6.position(_1d7,true),pcs=_1b7.getComputedStyle(_1d7);if(/relative|absolute/.test(pcs.position)){_1d6=false;}if(!_1d6&&/hidden|auto|scroll/.test(pcs.overflow)){var _1d9=Math.min(_1d5.y+_1d5.h,_1d8.y+_1d8.h);var _1da=Math.min(_1d5.x+_1d5.w,_1d8.x+_1d8.w);_1d5.x=Math.max(_1d5.x,_1d8.x);_1d5.y=Math.max(_1d5.y,_1d8.y);_1d5.h=_1d9-_1d5.y;_1d5.w=_1da-_1d5.x;}if(pcs.position=="absolute"){_1d6=true;}_1d7=_1d7.parentNode;}}var x=_1d5.x,y=_1d5.y,_1db="w" in _1d5?_1d5.w:(_1d5.w=_1d5.width),_1dc="h" in _1d5?_1d5.h:(_1b8.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_1d5.height+", width:"+_1db+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_1d5.height+", w:"+_1db+" }","","2.0"),_1d5.h=_1d5.height);var _1dd=[];function push(_1de,_1df){_1dd.push({aroundCorner:_1de,corner:_1df,pos:{x:{"L":x,"R":x+_1db,"M":x+(_1db>>1)}[_1de.charAt(1)],y:{"T":y,"B":y+_1dc,"M":y+(_1dc>>1)}[_1de.charAt(0)]}});};_1b5.forEach(_1d2,function(pos){var ltr=_1d3;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _1e0=_1bb(node,_1dd,_1d4,{w:_1db,h:_1dc});_1e0.aroundNodePos=_1d5;return _1e0;}};return _1ba.place=_1cc;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_1e1,_1e2,_1e3,dom,_1e4,_1e5,_1e6,_1e7,has,keys,lang,on,_1e8,_1e9,_1ea,_1eb,_1ec){return _1e1("dijit._HasDropDown",_1ec,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _1ed=this.dropDown,_1ee=false;if(e&&this._opened){var c=_1e6.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_1ee){if(_1e5.contains(t,"dijitPopup")){_1ee=true;}else{t=t.parentNode;}}if(_1ee){t=e.target;if(_1ed.onItemClick){var _1ef;while(t&&!(_1ef=_1e9.byNode(t))){t=t.parentNode;}if(_1ef&&_1ef.onClick&&_1ef.getParent){_1ef.getParent().onItemClick(_1ef,e);}}return;}}}if(this._opened){if(_1ed.focus&&_1ed.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_1ed.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("ios")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_1e3.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _1f0={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_1e5.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_1f0+"ArrowButton");},postCreate:function(){this.inherited(arguments);this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(this.focusNode,"keydown",lang.hitch(this,"_onKey")),on(this.focusNode,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_1f1=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_1e3.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_1e3.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==dojo.keys.SPACE)&&((_1f1.tagName||"").toLowerCase()!=="input"||(_1f1.type&&_1f1.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_1e3.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _1f2=_1ea.curNode&&this.dropDown&&dom.isDescendant(_1ea.curNode,this.dropDown.domNode);this.closeDropDown(_1f2);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_1f3){_1f3();},loadAndOpenDropDown:function(){var d=new _1e2(),_1f4=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_1f4);}else{_1f4();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _1f5=this.dropDown,_1f6=_1f5.domNode,_1f7=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_1f6.style.width){this._explicitDDWidth=true;}if(_1f6.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _1f8={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_1f8.width="";}if(!this._explicitDDHeight){_1f8.height="";}_1e7.set(_1f6,_1f8);var _1f9=this.maxHeight;if(_1f9==-1){var _1fa=_1e8.getBox(this.ownerDocument),_1fb=_1e6.position(_1f7,false);_1f9=Math.floor(Math.max(_1fb.y,_1fa.h-(_1fb.y+_1fb.h)));}_1eb.moveOffScreen(_1f5);if(_1f5.startup&&!_1f5._started){_1f5.startup();}var mb=_1e6.getMarginSize(_1f6);var _1fc=(_1f9&&mb.h>_1f9);_1e7.set(_1f6,{overflowX:"visible",overflowY:_1fc?"auto":"visible"});if(_1fc){mb.h=_1f9;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_1f7.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_1f7.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_1f5.resize)){_1f5.resize(mb);}else{_1e6.setMarginBox(_1f6,mb);}}var _1fd=_1eb.open({parent:this,popup:_1f5,around:_1f7,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_1e4.set(self._popupStateNode,"popupActive",false);_1e5.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_1e4.set(this._popupStateNode,"popupActive","true");_1e5.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _1fd;},closeDropDown:function(_1fe){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_1fe){this.focus();}_1eb.close(this.dropDown);this._opened=false;}}});});},"esri/geometry/utils":function(){define("esri/geometry/utils",["dijit","dojo","dojox"],function(_1ff,dojo,_200){dojo.provide("esri.geometry.utils");(function(){var EG=esri.geometry;EG.normalizeCentralMeridian=function(_201,_202,_203,_204){var dfd=new dojo.Deferred();dfd.addCallbacks(_203,_204);var _205=[],_206=[],_207=_201[0].spatialReference,info=_207._getInfo(),_208=_207._isWebMercator(),maxX=_208?20037508.342788905:180,minX=_208?-20037508.342788905:-180,_209=new esri.geometry.Polyline({"paths":[[[maxX,minX],[maxX,maxX]]]}),_20a=new esri.geometry.Polyline({"paths":[[[minX,minX],[minX,maxX]]]}),_20b=0;dojo.forEach(_201,function(_20c){var _20d=esri.geometry.fromJson(dojo.fromJson(dojo.toJson(_20c.toJson()))),_20e=_20c.getExtent();if(_20c.type==="point"){_205.push(EG._pointNormalization(_20d,maxX,minX));}else{if(_20c.type==="multipoint"){_20d.points=dojo.map(_20d.points,function(_20f){return EG._pointNormalization(_20f,maxX,minX);});_205.push(_20d);}else{if(_20c.type==="extent"){_205.push(_20e._normalize(null,null,info));}else{var _210=EG._offsetMagnitude(_20e.xmin,minX),_211=_210*(2*maxX);_20d=(_211===0)?_20d:EG._updatePolyGeometry(_20d,_211);_20e=_20e.offset(_211,0);if(_20e.intersects(_209)&&(_20e.xmax!==maxX)){_20b=(_20e.xmax>_20b)?_20e.xmax:_20b;_20d=EG._prepareGeometryForCut(_20d,_208);_206.push(_20d);_205.push("cut");}else{if(_20e.intersects(_20a)&&(_20e.xmin!==minX)){_20b=(_20e.xmax*(2*maxX)>_20b)?_20e.xmax*(2*maxX):_20b;_20d=EG._prepareGeometryForCut(_20d,_208,360);_206.push(_20d);_205.push("cut");}else{_205.push(_20d);}}}}}});var _212=new esri.geometry.Polyline(),_213=EG._offsetMagnitude(_20b,maxX),_214=-90,_215=_213;while(_213>0){var _216=-180+(360*_213);_212.addPath([[_216,_214],[_216,_214*-1]]);_214=_214*-1;_213--;}if(_206.length>0&&_215>0){if(_202){_202.cut(_206,_212,function(_217){_206=EG._foldCutResults(_206,_217);var _218=[];dojo.forEach(_205,function(_219,i){if(_219==="cut"){var _21a=_206.shift();if((_201[i].rings)&&(_201[i].rings.length>1)&&(_21a.rings.length>=_201[i].rings.length)){_205[i]="simplify";_218.push(_21a);}else{_205[i]=(_208===true)?EG.geographicToWebMercator(_21a):_21a;}}});if(_218.length>0){_202.simplify(_218,function(_21b){dojo.forEach(_205,function(_21c,i){if(_21c==="simplify"){_205[i]=(_208===true)?EG.geographicToWebMercator(_21b.shift()):_21b.shift();}});dfd.callback(_205);},function(_21d){dfd.errback(_21d);});}else{dfd.callback(_205);}},function(_21e){dfd.errback(_21e);});}else{dfd.errback(new Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing."));}}else{dojo.forEach(_205,function(_21f,i){if(_21f==="cut"){var _220=_206.shift();_205[i]=(_208===true)?EG.geographicToWebMercator(_220):_220;}});dfd.callback(_205);}return dfd;};EG.geodesicDensify=function(geom,_221){var _222=Math.PI/180;var _223=6371008.771515059;if(_221<_223/10000){_221=_223/10000;}if(!(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon)){var msg="_geodesicDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _224=geom instanceof esri.geometry.Polyline,_225=_224?geom.paths:geom.rings,_226=[],_227;dojo.forEach(_225,function(ring){_226.push(_227=[]);_227.push([ring[0][0],ring[0][1]]);var lon1,lat1,lon2,lat2,i,j;lon1=ring[0][0]*_222;lat1=ring[0][1]*_222;for(i=0;i<ring.length-1;i++){lon2=ring[i+1][0]*_222;lat2=ring[i+1][1]*_222;var _228=EG._inverseGeodeticSolver(lat1,lon1,lat2,lon2);var _229=_228.azimuth;var _22a=_228.geodesicDistance;var _22b=_22a/_221;if(_22b>1){for(j=1;j<=_22b-1;j++){var _22c=j*_221;var pt=EG._directGeodeticSolver(lat1,lon1,_229,_22c);_227.push([pt.x,pt.y]);}var _22d=(_22a+Math.floor(_22b-1)*_221)/2;var _22e=EG._directGeodeticSolver(lat1,lon1,_229,_22d);_227.push([_22e.x,_22e.y]);}var _22f=EG._directGeodeticSolver(lat1,lon1,_229,_22a);_227.push([_22f.x,_22f.y]);lon1=_22f.x*_222;lat1=_22f.y*_222;}});if(_224){return new esri.geometry.Polyline({paths:_226,spatialReference:geom.spatialReference});}else{return new esri.geometry.Polygon({rings:_226,spatialReference:geom.spatialReference});}};EG.geodesicLengths=function(_230,_231){var _232=Math.PI/180;var _233=[];dojo.forEach(_230,function(_234,idx){var _235=0;dojo.forEach(_234.paths,function(path,idx){var _236=0;var i,lon1,lon2,lat1,lat2,_237;for(i=1;i<path.length;i++){lon1=path[i-1][0]*_232;lon2=path[i][0]*_232;lat1=path[i-1][1]*_232;lat2=path[i][1]*_232;_237=EG._inverseGeodeticSolver(lat1,lon1,lat2,lon2);_236+=_237.geodesicDistance/1609.344;}_235+=_236;});_235*=EG._unitsDictionary[_231];_233.push(_235);});return _233;};EG.geodesicAreas=function(_238,_239){var _23a=[];dojo.forEach(_238,function(_23b,idx){var _23c=EG.geodesicDensify(_23b,10000);_23a.push(_23c);});var _23d=[];var _23e,_23f;dojo.forEach(_23a,function(_240,idx){var area=0;dojo.forEach(_240.rings,function(ring,idx){_23e=EG._toEqualAreaPoint(new esri.geometry.Point(ring[0][0],ring[0][1]));_23f=EG._toEqualAreaPoint(new esri.geometry.Point(ring[ring.length-1][0],ring[ring.length-1][1]));var _241=_23f.x*_23e.y-_23e.x*_23f.y;var i;for(i=0;i<ring.length-1;i++){_23e=EG._toEqualAreaPoint(new esri.geometry.Point(ring[i+1][0],ring[i+1][1]));_23f=EG._toEqualAreaPoint(new esri.geometry.Point(ring[i][0],ring[i][1]));_241+=_23f.x*_23e.y-_23e.x*_23f.y;}_241/=4046.87;area+=_241;});area*=EG._unitsDictionary[_239];_23d.push(area/(-2));});return _23d;};EG.polygonSelfIntersecting=function(_242){var i,j,k,m,_243,_244,_245,_246=_242.rings.length;for(k=0;k<_246;k++){for(i=0;i<_242.rings[k].length-1;i++){_243=[[_242.rings[k][i][0],_242.rings[k][i][1]],[_242.rings[k][i+1][0],_242.rings[k][i+1][1]]];for(j=k+1;j<_246;j++){for(m=0;m<_242.rings[j].length-1;m++){_244=[[_242.rings[j][m][0],_242.rings[j][m][1]],[_242.rings[j][m+1][0],_242.rings[j][m+1][1]]];_245=esri.geometry._getLineIntersection2(_243,_244);if(_245){if(!((_245[0]===_243[0][0]&&_245[1]===_243[0][1])||(_245[0]===_244[0][0]&&_245[1]===_244[0][1])||(_245[0]===_243[1][0]&&_245[1]===_243[1][1])||(_245[0]===_244[1][0]&&_245[1]===_244[1][1]))){return true;}}}}}var _247=_242.rings[k].length;if(_247<=4){continue;}for(i=0;i<_247-3;i++){var _248=_247-1;if(i===0){_248=_247-2;}_243=[[_242.rings[k][i][0],_242.rings[k][i][1]],[_242.rings[k][i+1][0],_242.rings[k][i+1][1]]];for(j=i+2;j<_248;j++){_244=[[_242.rings[k][j][0],_242.rings[k][j][1]],[_242.rings[k][j+1][0],_242.rings[k][j+1][1]]];_245=esri.geometry._getLineIntersection2(_243,_244);if(_245){if(!((_245[0]===_243[0][0]&&_245[1]===_243[0][1])||(_245[0]===_244[0][0]&&_245[1]===_244[0][1])||(_245[0]===_243[1][0]&&_245[1]===_243[1][1])||(_245[0]===_244[1][0]&&_245[1]===_244[1][1]))){return true;}}}}}return false;};EG._foldCutResults=function(_249,_24a){var _24b=-1;dojo.forEach(_24a.cutIndexes,function(_24c,i){var _24d=_24a.geometries[i];var _24e=_24d.rings||_24d.paths;dojo.forEach(_24e,function(_24f,_250){dojo.some(_24f,function(_251){if(_251[0]<180){return true;}else{var _252=0,j,jl=_24f.length,ptX;for(j=0;j<jl;j++){ptX=_24f[j][0];_252=ptX>_252?ptX:_252;}var _253=EG._offsetMagnitude(_252,180),_254=_253*-360,_255,_256=_24f.length;for(_255=0;_255<_256;_255++){var _257=_24d.getPoint(_250,_255);_24d.setPoint(_250,_255,_257.offset(_254,0));}return true;}});});if(_24c===_24b){if(_24d.rings){dojo.forEach(_24d.rings,function(ring,j){_249[_24c]=_249[_24c].addRing(ring);});}else{dojo.forEach(_24d.paths,function(path,j){_249[_24c]=_249[_24c].addPath(path);});}}else{_24b=_24c;_249[_24c]=_24d;}});return _249;};EG._prepareGeometryForCut=function(_258,_259,_25a){var _25b=1000000;if(_259){var _25c=EG._straightLineDensify(_258,_25b);_258=EG.webMercatorToGeographic(_25c,true);}if(_25a){_258=EG._updatePolyGeometry(_258,_25a);}return _258;};EG._offsetMagnitude=function(_25d,_25e){return Math.ceil((_25d-_25e)/(_25e*2));};EG._pointNormalization=function(_25f,maxX,minX){var _260=_25f.x||_25f[0];var _261;if(_260>maxX){_261=EG._offsetMagnitude(_260,maxX);if(_25f.x){_25f=_25f.offset(_261*(-2*maxX),0);}else{_25f[0]=_260+(_261*(-2*maxX));}}else{if(_260<minX){_261=EG._offsetMagnitude(_260,minX);if(_25f.x){_25f=_25f.offset(_261*(-2*minX),0);}else{_25f[0]=_260+(_261*(-2*minX));}}}return _25f;};EG._updatePolyGeometry=function(_262,_263){var _264=_262.paths||_262.rings,i,j,il=_264.length,jl;for(i=0;i<il;i++){var _265=_264[i];jl=_265.length;for(j=0;j<jl;j++){var _266=_262.getPoint(i,j);_262.setPoint(i,j,_266.offset(_263,0));}}return _262;};EG._straightLineDensify=function(geom,_267){if(!(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon)){var msg="_straightLineDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _268=geom instanceof esri.geometry.Polyline,_269=_268?geom.paths:geom.rings,_26a=[],_26b;dojo.forEach(_269,function(ring){_26a.push(_26b=[]);_26b.push([ring[0][0],ring[0][1]]);var x1,y1,x2,y2;var i,j,_26c,_26d,_26e,_26f,xj,yj;for(i=0;i<ring.length-1;i++){x1=ring[i][0];y1=ring[i][1];x2=ring[i+1][0];y2=ring[i+1][1];_26c=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));_26d=(y2-y1)/_26c;_26e=(x2-x1)/_26c;_26f=_26c/_267;if(_26f>1){for(j=1;j<=_26f-1;j++){var _270=j*_267;xj=_26e*_270+x1;yj=_26d*_270+y1;_26b.push([xj,yj]);}var _271=(_26c+Math.floor(_26f-1)*_267)/2;xj=_26e*_271+x1;yj=_26d*_271+y1;_26b.push([xj,yj]);}_26b.push([x2,y2]);}});if(_268){return new esri.geometry.Polyline({paths:_26a,spatialReference:geom.spatialReference});}else{return new esri.geometry.Polygon({rings:_26a,spatialReference:geom.spatialReference});}};EG._unitsDictionary={"esriMiles":1,"esriKilometers":1.609344,"esriFeet":5280,"esriMeters":1609.34,"esriYards":1760,"esriNauticalMiles":0.869,"esriCentimeters":160934,"esriDecimeters":16093.4,"esriInches":63360,"esriMillimeters":1609340,"esriAcres":1,"esriAres":40.4685642,"esriSquareKilometers":0.00404685642,"esriSquareMiles":0.0015625,"esriSquareFeet":43560,"esriSquareMeters":4046.85642,"esriHectares":0.404685642,"esriSquareYards":4840,"esriSquareInches":6272640,"esriSquareMillimeters":4046856420,"esriSquareCentimeters":40468564.2,"esriSquareDecimeters":404685.642};EG._toEqualAreaPoint=function(pt){var _272=Math.PI/180;var a=6378137;var eSq=0.006694379990197414,e=0.0818191908429643;var sinY=Math.sin(pt.y*_272);var q=(1-eSq)*((sinY/(1-eSq*(sinY*sinY))-(1/(2*e))*Math.log((1-e*sinY)/(1+e*sinY))));var x=a*pt.x*_272;var y=a*q*0.5;var _273=new esri.geometry.Point(x,y);return _273;};EG._directGeodeticSolver=function(lat1,lon1,_274,s){var a=6378137,b=6356752.31424518,f=1/298.257223563;var _275=Math.sin(_274);var _276=Math.cos(_274);var _277=(1-f)*Math.tan(lat1);var _278=1/Math.sqrt((1+_277*_277)),_279=_277*_278;var _27a=Math.atan2(_277,_276);var _27b=_278*_275;var _27c=1-_27b*_27b;var uSq=_27c*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _27d=s/(b*A),_27e=2*Math.PI;var _27f,_280,_281;while(Math.abs(_27d-_27e)>1e-12){_281=Math.cos(2*_27a+_27d);_27f=Math.sin(_27d);_280=Math.cos(_27d);var _282=B*_27f*(_281+B/4*(_280*(-1+2*_281*_281)-B/6*_281*(-3+4*_27f*_27f)*(-3+4*_281*_281)));_27e=_27d;_27d=s/(b*A)+_282;}var tmp=_279*_27f-_278*_280*_276;var lat2=Math.atan2(_279*_280+_278*_27f*_276,(1-f)*Math.sqrt(_27b*_27b+tmp*tmp));var _283=Math.atan2(_27f*_275,_278*_280-_279*_27f*_276);var C=f/16*_27c*(4+f*(4-3*_27c));var L=_283-(1-C)*f*_27b*(_27d+C*_27f*(_281+C*_280*(-1+2*_281*_281)));var _284=lat2/(Math.PI/180);var _285=(lon1+L)/(Math.PI/180);var pt=new esri.geometry.Point(_285,_284,new esri.SpatialReference({wkid:4326}));return pt;};EG._inverseGeodeticSolver=function(lat1,lon1,lat2,lon2){var a=6378137,b=6356752.31424518,f=1/298.257223563;var L=(lon2-lon1);var U1=Math.atan((1-f)*Math.tan(lat1));var U2=Math.atan((1-f)*Math.tan(lat2));var _286=Math.sin(U1),_287=Math.cos(U1);var _288=Math.sin(U2),_289=Math.cos(U2);var _28a=L,_28b,_28c=1000;var _28d,_28e,_28f,_290,_291;do{var _292=Math.sin(_28a),_293=Math.cos(_28a);_28e=Math.sqrt((_289*_292)*(_289*_292)+(_287*_288-_286*_289*_293)*(_287*_288-_286*_289*_293));if(_28e===0){return 0;}_290=_286*_288+_287*_289*_293;_291=Math.atan2(_28e,_290);var _294=_287*_289*_292/_28e;_28d=1-_294*_294;_28f=_290-2*_286*_288/_28d;if(isNaN(_28f)){_28f=0;}var C=f/16*_28d*(4+f*(4-3*_28d));_28b=_28a;_28a=L+(1-C)*f*_294*(_291+C*_28e*(_28f+C*_290*(-1+2*_28f*_28f)));}while(Math.abs(_28a-_28b)>1e-12&&--_28c>0);if(_28c===0){var _295=6371009;var _296=Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1))*_295;var dLon=lon2-lon1;var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);var brng=Math.atan2(y,x);return {"azimuth":brng,"geodesicDistance":_296};}var uSq=_28d*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _297=B*_28e*(_28f+B/4*(_290*(-1+2*_28f*_28f)-B/6*_28f*(-3+4*_28e*_28e)*(-3+4*_28f*_28f)));var s=b*A*(_291-_297);var _298=Math.atan2(_289*Math.sin(_28a),_287*_288-_286*_289*Math.cos(_28a));var _299=Math.atan2(_287*Math.sin(_28a),_287*_288*Math.cos(_28a)-_286*_289);var _29a={azimuth:_298,geodesicDistance:s,reverseAzimuth:_299};return _29a;};}());});},"WebScene/Stage":function(){define("WebScene/Stage",["dijit","dojo","dojox","dojo/require!WebScene/app/Controller,WebScene/app/DataLoader,WebScene/app/JSON2Model,WebScene/app/StageUtils,WebScene/app/View,WebScene/lib/gl-matrix,WebScene/lib/Selector,WebScene/lib/Util"],function(_29b,dojo,_29c){dojo.provide("WebScene.Stage");dojo.require("WebScene.app.Controller");dojo.require("WebScene.app.DataLoader");dojo.require("WebScene.app.JSON2Model");dojo.require("WebScene.app.StageUtils");dojo.require("WebScene.app.View");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Selector");dojo.require("WebScene.lib.Util");dojo.declare("WebScene.Stage",null,(function(){var _29d=undefined;var view=undefined;var _29e=undefined;var _29f=undefined;var _2a0=undefined;var _2a1=undefined;return {constructor:function(_2a2,_2a3,_2a4,_2a5){var that=this;this.i18n=dojo.mixin({},dojo.i18n.getLocalization("WebScene","cewebviewer").common);dojo.mixin(this.i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").viewerPage);this.onLoading=function(_2a6,msg,_2a7){if(_2a5){_2a5.update(_2a6,msg,_2a7);}if(_2a6=="error"){console.error(msg," "+(_2a7||""));}else{}};_2a0=new WebScene.Utils.Configuration(that,{});_2a0.loadFromUrl();var _2a8=WebGLUtils.detectWebGL();if(_2a0.load.noglcheck){that.onLoading("log",this.i18n.bypassWebglCheck);}if(!_2a8[0]){var msg=that.i18n.badBrowser;if(_2a8[1]==1){msg=that.i18n.badHardware;}that.onLoading("glerror",msg);return;}else{that.onLoading("gl",_2a8[1]);}_29e=_2a3;var d0=new Date();function _2a9(json){var d1=new Date();that.onLoading("log",dojo.string.substitute(that.i18n.dataLoadedTime,{seconds:Math.ceil((d1-d0)/1000)}));that.onLoading("info",that.i18n.initializing);that.onLoading("progress",0,3);setTimeout(function(){_29d=json2model(json,that.onLoading);if(!_29d){return;}that.onLoading("progress",1,3);setTimeout(function(){view=new View(_29e,_29d.getMetadata().renderExtent,that.onLoading,that._pickRay);view.setLights(_29d.getAmbientLight(),_29d.getDirectionalLight());init(view.getCanvas(),_2a4);},0);},0);};_2a1=new WebScene.DataLoader(_2a2,_2a9,that.onLoading,_2a0);dojo.connect(_2a1,"agoItemReady",function(item){});function init(_2aa,_2ab){_29f=new Controller(view.getCanvas(),Controller.TUMBLE,that,view.getTrackball());var _2ac=WebScene.Utils.getVisibleLayers(WebScene.Utils.getInitialLayerStates(that));that.setViewContent(_2ac);that.onLoading("progress",2,3);setTimeout(function(){var _2ad=that.getViewData();if(_2ad["shadowMap"]!==undefined){var _2ae=that.getLight();if(_2a0.scene.shadows!==undefined){_2ae.set({"shadowMap":_2a0.scene.shadows});}view.setData(_2ae);}if(_2ad["ssao"]!==undefined){var _2af=that.getModel().getAmbientLight();if(_2a0.scene.ao!==undefined){_2af.set({"ssao":_2a0.scene.ao});}view.setData(_2af);}that.resetView();that.onLoading("progress",3,3);setTimeout(function(){_2ab();var d1=new Date();that.onLoading("success",dojo.string.substitute(that.i18n.sceneReadyTime,{seconds:Math.round((d1-d0)/1000)}));UIUtils.addFpsDialog(view);view.setRunning(true);},100);},0);};},_that:this,_pick:function(_2b0,all){var p0=vec3.create();var p1=vec3.create();view.getPickRay(_2b0,p0,p1);return this._pickRay(p0,p1,_2b0,all);},_pickRay:function(p0,p1,_2b1,all){var _2b2=_29d.getLayers();var _2b3=view.getPickContent(_2b1);var _2b4=new Array();for(var i=0;i<_2b3.length;++i){if(all&&_2b3[i]!=="Panorama"||WebScene.Utils.isLayerPickable(_2b2[_2b3[i]])){_2b4.push(_2b2[_2b3[i]]);}}return new Selector(_29d.getGeometries(),_29d.getObjects(),_2b4,p0,p1);},_select:function(_2b5){var _2b6=this._pick(_2b5).getMinResult().object;this.selectObject(_2b6===undefined||_2b6===_29d.getSelection()?undefined:_2b6);},selectObject:function(_2b7,_2b8){_29d.setSelection(_2b7);view.setSelection(_2b7!==undefined?_2b7.getName():undefined);if(!_2b8){this.onSelectionChange(_2b7);}},frame:function(_2b9){view.frame(_2b9.getCenter(),_2b9.getBSRadiusApprox());},getContainer:function(){return _29e;},getCamera:function(_2ba){return view.getCamera(_2ba);},setCamera:function(_2bb,_2bc,_2bd){view.setCamera(_2bb,_2bc,_2bd);},getFovX:function(){return view.getFovX();},setFovX:function(fov,_2be){view.setFovX(fov,_2be);},getBookmarks:function(){return _29d.getBookmarks();},getLayers:function(){return _29d.getLayers();},getModel:function(){return _29d;},getLight:function(){return _29d.getDirectionalLight();},setLight:function(data){_29d.setDirectionalLight(data);view.setLights(_29d.getAmbientLight(),_29d.getDirectionalLight());},gotoBookmark:function(name){var _2bf=this.getBookmarks()[name];if(_2bf!==undefined){view.setCamera(_2bf.position,_2bf.target);view.setFovX(deg2rad(_2bf.fov));}else{console.log("Bookmark "+name+" does not exist");}},resetView:function(){var _2c0=this.getBookmarks();for(var v in _2c0){this.gotoBookmark(v);break;}},getTrackball:function(){return view.getTrackball();},setViewMode:function(mode){view.setMode(mode);view.setLights(_29d.getAmbientLight(),_29d.getDirectionalLight());},setViewData:function(data){view.setData(data);},getViewData:function(){return view.getData();},setViewContent:function(_2c1,idx){view.setContent(_29d.getRenderGeometries(_2c1),_2c1,idx);},getViewContent:function(idx){return view.getContent(idx);},setControls:function(_2c2){_29f.setControls(_2c2);},getControls:function(){return _29f.getControls();},getConfiguration:function(){return _2a0;},searcher:new WebScene.Utils.Search(),searchForObjects:function(_2c3){var hits=this.searcher.findMatches(_29d,_2c3,this);return hits;},onReady:function(){},onRender:function(){},onWindowResize:function(_2c4){},onSelectionChange:function(){},addCameraListener:function(_2c5){return view.addCameraListener(_2c5);},removeCameraListener:function(_2c6){view.removeCameraListener(_2c6);},getAgoItem:function(){return _2a1.getAgoItem();},enableFPSCounter:function(on){UIUtils.enableFPSCounter(view,on);},renderScreenshots:function(_2c7,_2c8,_2c9){return view.renderScreenshots(_2c7,_2c8,_2c9);},getAllTexturesLoaded:function(){return view.getAllTexturesLoaded();}};}()));});},"WebScene/lib/SSAOHelper":function(){define("WebScene/lib/SSAOHelper",["dijit","dojo","dojox","dojo/require!WebScene/lib/GLFBO,WebScene/lib/GLVBO,WebScene/lib/Util"],function(_2ca,dojo,_2cb){dojo.provide("WebScene.lib.SSAOHelper");dojo.require("WebScene.lib.GLFBO");dojo.require("WebScene.lib.GLVBO");dojo.require("WebScene.lib.Util");SSAOHelper=function(_2cc,_2cd,gl){var _2ce=undefined;var _2cf=undefined;var _2d0=undefined;var _2d1=undefined;var _2d2=undefined;var _2d3=undefined;var _2d4=undefined;var _2d5=2;var _2d6=64;var _2d7=0.5;var _2d8=5;var _2d9=3;var _2da=16;var _2db=vec4.create();var _2dc=[0.186937,0,0,0.677503,0,0,-0.782832,0.128424,0.557187,0.248064,0.460317,-0.659755,0.062892,0.918659,0.312829,-0.241031,-0.814826,0.224206,-0.642866,0.132138,-0.45016,0.145727,-0.590568,-0.626141,0.005017,-0.002234,0.012668];var _2dd=[0.186937,0,0,0.700542,0,0,-0.864858,-0.481795,-0.111713,-0.624773,0.102853,-0.730153,-0.387172,0.260319,0.007229,-0.222367,-0.642631,-0.707697,-0.01336,-0.014956,0.169662,0.122575,0.1544,-0.456944,-0.177141,0.85997,-0.42346,-0.131631,0.814545,0.524355,-0.779469,0.007991,0.624833,0.308092,0.209288,0.35969,0.359331,-0.184533,-0.377458,0.192633,-0.482999,-0.065284,0.233538,0.293706,-0.055139,0.417709,-0.386701,0.442449,-0.301656,-0.836426,0.408344];var _2de=[0.837372,0,0,0.723531,-0.467287,0.034157,0.169582,-0.31169,-0.881801,0.696236,0.455215,-0.204568,-0.304514,0.528086,0.626381,-0.053116,0.222507,0.037523,0.199755,0.311291,0.916799,-0.681552,-0.516264,0.501792,-0.37127,0.021088,0.737477,-0.029503,0.209188,-0.95298,-0.573731,0.009962,-0.154202,-0.257345,-0.905958,0.282747,0.370779,0.527867,-0.669424,-0.601758,-0.191278,-0.708243,0.271796,0.782684,0.535565,-0.006867,-0.015312,-0.017276,0.419958,0.265628,0.233036,-0.543898,0.554747,-0.174055,-0.079242,0.053475,-0.099539,0.372042,-0.339267,-0.357362,0.015781,-0.011352,0.042707,-0.340564,-0.272507,-0.067725,0.799249,-0.127948,0.586808,0.450015,0.01965,-0.416454,-0.506524,0.323229,0.206546,-0.087316,-0.311097,0.466049,0.146374,-0.34528,-0.045904,-0.152614,-0.926686,-0.287529,-0.665726,-0.032904,0.246643,0.248703,0.637193,-0.062541,-0.073706,0.495925,-0.315143,0.05946,-0.116042,0.075586];var _2df=[0.186937,0,0,0.605726,-0.313457,-0.097616,0.003541,0.781245,0.283011,-0.225029,-0.373279,0.274442,-0.047511,0.04992,-0.226365,0.627629,-0.623617,-0.463628,0.133094,-0.318299,0.528128,0.262035,0.100234,-0.09012,0.178335,-0.426972,-0.666048,-0.27306,-0.207352,0.05514,-0.613649,-0.063395,0.060608,-0.283391,-0.41382,-0.087565,0.136768,0.506126,0.484137,-0.593808,-0.344603,0.453164,0.675326,0.124799,-0.697865,-0.33502,0.411337,-0.09337,-0.15271,0.002908,-0.063582,0.366733,-0.699739,0.401148,-0.519536,-0.585625,-0.508413,0.106482,-0.428709,-0.260221,0.012847,-0.118806,0.016962,-0.188182,0.49945,0.452364,0.586617,0.722539,-0.23302,0.111295,0.202827,0.066695,-0.036503,0.315842,0.896467,-0.039109,-0.270116,-0.080062,0.613435,0.508787,0.538656,-0.352275,0.566869,-0.666275,0.887876,-0.138341,-0.434135,-0.444711,0.269156,0.119506,-0.029457,-0.077316,0.754474,0.274125,-0.13876,-0.37082,-0.73268,0.332723,0.568545,-0.203992,0.878922,-0.430778,0.541154,-0.546752,0.11786,-0.000393,-0.083318,0.059333,-0.341406,-0.117017,-0.318568,-0.262425,-0.457913,0.848753,0.89229,-0.30157,0.322416,0.742328,0.032262,0.643827,0.048091,-0.078044,-0.49908,0.064858,0.549944,-0.796252,-0.230688,0.88978,-0.010153,0.397241,-0.27645,0.405666,-0.46593,0.131187,-0.600166,0.333834,-0.078219,0.73837,-0.870169,-0.411658,-0.222175,-0.492421,0.741454,0.293757,-0.591244,0.389112,-0.388324,0.792346,0.578552,0.088459,-0.121858,-0.437241,-0.472535,-0.374835,0.302427,0.721264,0.057485,0.204085,-0.126575,0.510325,0.481492,-0.579888,-0.29411,-0.82136,0.156404,-0.819717,-0.042466,0.456573,0.079884,0.07019,0.179002,0.220279,0.970222,-0.088025,-0.299911,-0.234627,-0.820794,0.912112,0.243306,0.317869,0.241336,0.161841,-0.721568,0.301135,-0.635993,-0.0939,-0.514731,-0.089673,0.850964,-0.905087,0.314604,-0.098397];this.getIsSupported=function(){return gl.getExtension("OES_standard_derivatives");};this.setEnableState=function(_2e0){assert(_2e0!==this.getEnableState());if(_2e0){this.enable();}else{this.disable();}};this.getEnableState=function(){return _2ce!==undefined;};this.enable=function(){assert(!this.getEnableState());assert(this.getIsSupported());_2ce=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,true,gl.NEAREST,gl);_2cf=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,true,gl.NEAREST,gl);_2d0=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,false,gl.LINEAR,gl);_2d1=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,false,gl.LINEAR,gl);_2d2=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,false,gl.LINEAR,gl);var raw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAqf0lEQVR42gTBB5ydB2EY8G/v8b7v7Xnv9mmcdFp3WpasZUuWFzZgDJgkhgwoSdM2JbTNjzZA06ZNgaRJWtKSEgjDGNuA8UYeWpZkbZ10uj3efu977317j/7/4De/8ef9vCow2VUGGHzRhuQ+t08GvhZb+jy85wOu/68JzwtQSCZedpsvC8SL6NJNNwZoHMaZiMoCrjrPATpGJFxvRCYMKqTCBsyVw8h5B6ROArU3+8HOGLe3Ay+UABow3D4wEcfOakDbjh2h594mikMNcI62ISNzIius0bfeN+QHrv+L7M53FHq1XC29breFgmCjwPHQ/fo88OIg9kvDdQPhB93G8yk6DtRYFT64fR/jQn0NIcIgYHylyFjVHPBboCB7HQ5sXuoZqQCHqKUjtvKNpvxkivqlZe514DOA/Keethib6OkOw204MMTjY3HX8VIGFeITgBEApGRFY3hyKyPeRWK/NNa2huJeLKzBJAimiY7ZQbAh0HwPEP9jxHhs6he37z8+KWqdeD7TCttNwgHftJpfzCq/iOJbKrxap2Ymet8zwVEoNReE7T4aI6t2mBuO4Meyh3vHAeK2+KvLzWHEgSCJpgR5EvP7QPFLyeDWWrqc1iVz6LwPI7GEpOEExCwzVZwtKtDGyzRW5tGyz5WA7HLtfrOIHp9T9kXQB1z7E10eYMytTs5QOuci8E+YIk9W/roj5nxvjVVLaM+30x/09CPGIdQlfsOe/WqxoS9Sf5bVv+drIqyP6uNrQMxFGDPSt1PurVE/UcuV9ci35bmCPTiIjsuZZjZCePj01iMbKBYa7UyVIDI+MDMSAV7sw6CSjKEG0IqwXhEkVtFwFJQ9D3q9q2RE8xEzuxvCN0Bq0pAFH7IMZEW3/zQU6rQ8Dw1bqPE2XCxtht8B/Hsg/yzu3CUcGdb6PW6QCVRs7bYKDwDQfYefmmJO2O/d4LyOzns2kA3kt7Bxrn1ZZ4hlYFs+uYpAnNDyDI36VE+6wLadkEwTwQIdYovCIM8SEVS24D+ktuqjWIT4yWFEN/zEfsqIWkFfKQsW8DNVyLEDKWwZ6ew8x5ojpAmh7DbTuiCGFcW/DXl5hO7Y/BztDCbwqtMaxcanBq59oBYuVIAM2o2twXHduUpDjChd7xinXHoB5OKsvd/jlrN+SnHoir0dn1hWWSbrDzj0Nd6x3PUb1LYyVIpv9AHW9sPW+aEhU8peULyaAG12TddDnq0zVg5S+vfnVLQBwjt3PcU9k0feDfAkCjohqkfBRgeVfcx1xYcTzRYoNbVPbCQ/mmC66x3pMpN7IPDeT7a2+TYYDYj41QNoEoGVQhPLlIPb8k2yMZlM2gNIiEu4nfIZFKeDW08qY9ds2wLoLWIt2yJuYrXnWhNbytRVs1sHIw6qhoE/sYJsJArzFLNdUzxalSOyF3oIBU2ttqZFumoEj6XoZVOHKWSJDoGe+WGZmObQuA4f+uap/u15hOEW1LveusgkSWNvivQRRg7bAQWcd+wUcmN/DTkr6XeHmX/pVnYkebSt/RBNP8PhsXnqFhfUu/ozIH++g98KYa+EnqoRZtFucB/WVPy5MoJEyH+RgSeFoTuDS3Rjpi7Iog/+N2aD7N9oJkprVsWpNOqZ5JsMfDKSID//tUCyQrANUm4Q/czDP1mKVTo2lrM6uuJh9RV3pMc1ylB/5zpYs3EWgR87+hDYZY06VIzFYd+HxTY9FyARG0RytMQAJujsU3Pz/qPlwVVI99+KBosYv4qQOzQP4WWCfPVd5eSjvPMmAkY0LFL9lX5vMfDKgtMADu3pCrNLctVht8XYBr6KRvBkWte8jafxscvmLE7tITB4IxDf4GJ/7YdtklZdgOO6z62Bj4ADitP0UfcQAiwSnoEgw44j+mCCpjb7zL2IcBSOYLS5ArdRgU/EJrsgnLhuAgv6ylO+fTYJZMPiFVUt4bafDNpq8gW2/+Wc1LSVejMjel0a5Yg2kUT1DzSmbB3aGVsieORVfXAq7vYkeQUZKUHxZlufMOFKsneeaJYoxjH4j6q2BObSoPx+o2RkzKti/lyb2uC7h60bB4z9maJ4tnFpvw/fQ8zfJ3IAAiSE6G2X40l/PFI+xGgcAjM+/31BL8p1KGRn8kFaztzEFxsAfOxjR910VTxaqsh6/z5RGNebzyWtoossscYHUPKL91d9BhtQTclREMGf6PoMnmDJ6orHxKl7RZO9DwAIBqRCqlbTHs8hf0fa/1ZcPuxk/I42xYnbafCqgGGatSnGPUaE/1azHhdzw/rok76dX+vslH00lkxaRKfW/wwn3mJTQOH5bu/vzgMJNnTuAvJMFL3p9f90ttxSrfnxNusCI0spKhX0O7XBAHcouivCT56YhuFE+A4vrQr7VfSfeXbsbpt4rbhpwuNPNBagcd8A6DO4PgSzeDQ6lGlIevQ2yGyG3fn49mPgnTNJZqVuLwC8E3FFyBozgL47rtOWlrXOd1s/dRPjgYmLAzl2dWFOGk+bW+PStap2Xm/ERvzJdDYd4fd16N3x3ooL/FzJ8PEPT4H4WRk5ygiRK97yrjHU5p/69gdFfUdLiDlYG0NeFYyjRmZNdLM6mDPgwceejmpR8ek2Pm02WQ3ZqW5nCDTpL9931LtJdladOI0oZjCwoGICD1xZV4cYZxIgzhjekCf9wh4+jDU5IjvsdEm/12T6e0aJ5YqnS7ROWkWBX3FAnboqd7c6kAcAxZwBS3bSAZcH0F6pV/7AkfvSEzW3fzrp1VvQjkL3wetuK7N/CV692ve/zNVq5KYktPLl/CMDhNzFjT6ZOIK3RgxqBaLxgL8Aoc+F8MeP7gFuRpXbCDtlAbL10NvMh/tsocPBVQx9SFIIiN0CNzcipYWwz5GmjGWiarABr7U30U+uUNtF9/saPWDaKnox3JOtzsKvq1INHtwgug+a9C8U+XIiPGGIWaCNg7RE1WFxot+t3g22M6JFGzGOpSzmpS+ODP4Q6RwuwVKDW0f8olQHYv4Iwf51NAr0mmJoXL1TpxX/Jwq9m3b+wiCKtLfiNrWV4I/5xBkDPvnpZ+Q8EN/Czdf1bA+T5A6JpRxP74kwUm8y12j7Jd+fsDMtag5nJvLUigJjbnooZikOBpxD6T+Nk7Ln0kFZlhujYcHz/L1UK05AHRt+gErP4E4f5gKsX+O8TCsbUG1hHj2+vX3Ng7bL0R3a5KytLaPmeay0xND+gBfUj9Phq/2xfYKS87H3ta1Qso4H9Ca6X0hoMdy/IXM7QuhIVg9ZbI2oBRhk6xpX8qoHNrL9POGnrNERY9igV1x61qKLAvFcGoiRcch1N+k7LK/5D0D3eIobCG4s2iADwB67+vJqtk0Tc1TMkgQLKKRG4Bl48I3u2FQq/lO3XbK9g21Br2Wrcyobb2DqyLVhQbWbiwX3JdQGgLjIbjStUiveYGF6IpjdMZj6eyO1pSwXCSByV38TzEY2/VEpeAXdtABk0qq9aZB+cGf+ukGgq26f4iAJfso+9b38L3dfnIImHIwH4TRyf4e78yxS+Uxq6TugN4xw5XDxOoluqXYDJhgyxre24BJr10njnXjpWcTtWbdv4aXNbXQq03s36vFSR1oz9oxk321YuwoQdbNCsfy3tHAmMcnpdcCnnvFu3ffTYs/Ph90bPfqToDdPLPaNcCKivoo0Rwkqbsk1bPVbJpYxGIKUfXH4pK6H8fghaPY13icA4JO+NLuCpoYlHDM9EB75+kNH/n6o9zE+TRnBkkL8xiqWY+Q9ZzaAg4+fLzZjhNfw3w/gUQRFiPz+fPeS0b8aFIJGPC+rr24QY6gIO9YVpEO6A2aaeyYdXRMVVLdKluURo78cBmBt9EtRzeNaKwWKt2E84X3D5pkIp/iAp5BlCgOpbCJAGniU3QBwNA46JmID4zirCmjDcPth6PehZa+zDdAvOqltgXj53q4T5ealBjQn4yoLHxl7ENmhUxeNvsVRYwtikoW6UeUxgr9EMFvwiR9UeuVRYKur4GLqMtLds4H9c7GxNSJGLKubjwZ8TGOXLmgCr4e5uEw7XWCj+lNk1wMUOZOC/mXXfhLtvOu24Kyd7Rq3dEnkuAFo8DA4pyLpJ0zioo44oRxXdESQO1rq81ulq3WDJXbt3ADVNIjWg2a/R+JYnI2PeepVLB6LPzi5eMUa2/jvGWrYA0pIsd2Ax6mPHbLgJuQbN3uQNGGu19WDg/3b6lAnBRn9N3KlQsrLj5LkBOCnwk7P3pLX1ljdnh8cnPPerTvbJmSkWHISCPCTNYii/Dg4JrjaCNS+3DAPRwm9DyJkalkLQz4YsGNLFveiCyw6cE4MzvjUgRAl0jAQclYHdAaYaFVABepI4sP/oeepxPi9oGlSi3tpWIX0FzAOuE71y02MAmdQrbkGPmClGtJGKw+fOHi4cTrPd5qF/4KGkWmwqPqRP9fyB03ZL2FMBtc/W3/43eT17zGJUY+tBegRFjLJktlYf8TKpkmzJai8GvczudWw+UeEPcTZGuLLoFGDpv5YDH7ZFo4P1jmZ3TCjEotNcBqm155Pjm3NzFEKWKF7KcVY72eG4IF507vbNnbj9CwxsimhPW5KBT/cwpfvy/YzvJdcA+6n/B0d85Em9Jpj0SJ6LewBcL7Fw//+NzPSGw1uSqy9jfTmcJuyMzyA57DcJ7BZOkbPIcUXsDPjoMXY/keYYLd0Rax9ZOgJqJzTsb8onXqy1r3kKf8mbdIKVceTSXiiGi4/HR7Pt5tt27+BzW2VM1tj6lqIToB4087XR9bgOfSFKyGf5eeM2J0YhpmrH9/Uu2+28qDSL1av08BUz/i2dTounIci36M4SXJfQvpHifh6TOnD1lTMejVlfZUXf66md5FwdmEaOG1150HxOMK+gQNbgOZs0N1/lb7CJLdA8ILbK7RYCYPhDrXAb+xLMG4f8mFkDpBeyS5+tXLxfxPxJxjk++79i5TfpbnAivqN+HcMfaKsuVEQwkWRTQ6/a5BboYuIP2CsCo3BHucNjYkXfHt7YLxqKU/w4c/bdMrAM0RpawTOtWVdL3+l+Mr9a6KGHjzCdL+Pcs82YJuhXDZ2rh2NZcStekK3eqM4bjnwp/7yMa1OFl1OV3t6QPCo35w0tr2V7Copy7J1Es2x8Vv/HFIPufBxivtOv7nfIH2UelqlYzTdYMRhlOaizWtwONQqix3wIN5egwKRjEqW/h7rM7j0/YG2BRMfQkYeQJUQeo9nCmVps09F9focPDhOOXQUQMjU5dVeslBdgwfdev4kpssy+ovCLglTwJ6SUOXLRMTn3S0pz10x5bTC15u11cl30Nk9Jrzr0xP8nKHV48h0J54cVJqaeI9qlm1gjOB1k0QhXwFP2ObcgC+t0r1ti6P/KzA/SXo/IN0SMFjq9ZuIrLr9A1akw429QOUM5B5UEmUvRmTAe60bM1yWrYMPpCFXI/q4RWB0CWq9rGRvUP6uaKQ/IG34bkpJkt3ViM6N0IEnJx4orp2D+v9I4duJatlZ7BHsJdqYiWJ5E3tNwoeEVCoY2xmtrCoYT1IXAPjUwBP+UKQvs1zFNa06XEMiWsMnUtTlALgZWDlM1hWo28GbMfiUPvgdt/o7pfRflcM/cqANpekRiR1c1GDZum7sabObAKJGAiHtLqegHQC9DUL/UQuHsMQHtHGasfv6lruN/s+g4LNBZ8IJFEA+CQPYmvAjW3wuu8Em2BOLwXwZlFGfMPA9gYvg7ivh8mmQV+jMZCwMKS/nJW8SwW8HazdipRdLct7AJkj40MeOWg3QPwIrXSSc0ovjYScZv/py9VCo137HQyowz7J1BdefseFZXLWQTNmHRNUYHKOArrc1Ld3Tuhw9+iusRlGgUILvkENzEP00tfai71AkRVocwA0+urjxvsVO2au4HpYHBLzTXC5UGH9S7qA+0j8DO6I9fVCSn0La27FII/Qbem53DIga6BQMqMD2zzG2vQobkLxi4skm+av45lv9+w+7UIYVvifAu/74qdQWePGbEC300M0D1rtJrtekESHiIQhLqFk1c20F3oyQ/1MLh3NF2TCvWlpMoB11+RF/m885P9EFQfa2INC4bf0oSDykNB1c7ThJKog6qH/NiRykcxtxc2BiNWPBGQs03Gqy95X23pK3XS3Id6JoO1j/fb+rDEHXOWYCdF5p3D/MD/9Mrf9+0tmM5+43b29zk5/TG88Wc7/BuItg64CzAGDFRsPDYMwC4GPHTsRewpMoEvw7U5wNabW1NhdM5YstTBJvmeCl7EufAXYGheRUrgK3lAcnaBjUtvX7A1YCYrVzG4BI+Fs3u211IAOjITr3qxz1iQhYAzxcC97nqQcC/gNJ/ksGu21JMSvl4BgZhY+tDS2kbAZC/0+j2RmMSIBqxviUr8mBMw5m0irMJ0A6wqp4q7OS54rtv3SYfwE31V4hYBefEWo9yP7E3S6Ry/zAdvd68APdrcHzIBj1kQVNtfTmSN4Y1lvHcX/BxRMGVgizNziT1a+NL4f1ZGrBBLkAbTppStCqqHPLZhyPiDx3SKmtw205TO2WxMEQqkULr7vCn91BzmndvbHWFAu8GiSrgAZyZNMScbS5iAArlhrh5G4HedwL/wH2E6v+bbD1O455A4uBvlNoAUNKwqPsjk9+loTuhkiXwuigelze5UHCb/AJNKw2cc+G4CfE/Z0ZwVsDXSAOfr9R/gpL/ghGMJOL8BA2mOuKNInxFF6AW/7uErMW8sNkEBOBtXXXEbm30CCTJbxe6EOIbec+RTjqvdUflOP7AfgnkC8nhSIm3neEOmts61kCO/o2RP02eqWjJjzYn3A/WgFSoyAwj64gKr0H3nFCK7pZt2FDmwwcSqB3YBMgY3HXWDAoBqr9PHSGIeh/l/QZXZpL2wpO7AylAwZ87Pce3z6xUVvn4SNt0I8zpte4alIJpNWn8cjfSE4UKTvooupk8qPXRvFrmj6smvX17qSIX9baO7HYIjg6IqOvJIEg3tVQ9qyR25F2fx7JpzrMHwCdjgkYRexElPxR1RDICwMQssAVuoCZADE5CJ9ZJS8LV/rUdEFDlFhrI1yQ+/EEZmII9DDLO54bQvrj5cmbQPfa7cH/UOQXdKzucZ2IOklamgTnaRQuwQ/+x1PS39leFqUqIMbQ9x6YH8xs9TiGTviU6lvwehYNuM1i85I+gNg8DiEuTIIk2iOce93t0LQ0udyF6JpSw2dw9G1nJVmKfxT36xJryH6PzgQR9qRD1Mm5e37Mygzm/LbTyeGse9tUbxKBlqB2FtLmQgRT0XuwlEeSNxcWvzw98AE28vXwWr2FlIrAWsXu9Qf2Q3c/wgIo6RZJ5GQlejmceYZfebOaO8nDj/iTnf8s2C9IEEsxD0K57+JXP2Utf9NInQAnGuzKs458w4LXRbgQ9GaWxz4G11+LwAVYeMNM7iHu6gv4qVhtn2OYKeKRJRdJHF61unu1ms8j/2aR7OYTz6aWX1mXRDFnB7aepsLG4BHvkkwVYqa/DYsRNiB3CDPZ2q5Kr5L8oC6j5ULS3/jzu6tf88tQ1tTXmBhfdwgUwXDbbt33gD8woaq7sVQiLnSMXLTtZzY89fkny98x1N8pSu8ETpNAIhg/T8GIQvlae9NA9hx0Nc/krzNurU+PlTodk7+HO9MBugPzcYk8hFtQfN/X7klPxXMLqKf25wcIYKZhb/Htf+L1Uc18kw5jZOGML5c98ZDc5yHfzmVjvWqAh2URb7rTpwH7Z5Z+n7SJeCIdOVzgdwzy80P8Hd9okBHiZ/rd9S+Vrvw4zFlirKiTK6TcVpw1zP5HqVhBXt6RhPfu3IsNMMHfNPSZVSonE3UuRpsMiGM3OJSv93QnDntYsYtdGVuljAmJA47Bndeazv44WQHWORbVjGCIspejDdhnQEoI5OYlcXg5yt52/BHhWJF2Rgxn5H7RStg/JEAf9XnV5j1UAfm2Iy+qgJmEmxTPRFm9jxx0wK5FwlHNEHBPdTZ53Mfs/p00dG2Ren4MbqsBCHPX40CcaD98IfZyAX/LGkYN+CRygtyrER/0WGlb84sVrjlknK7HuCRx0us3BOkONLiBYUCABPNb+cChaP1nBEzlW6DhhQp4wS7EaP8jKzkYuZbKviVem6ZHQsCk7QpfziL22v/or/9J1/1wUns39AYhbg+CwWbwRuSzsQTe07J0eMfvMWHVtaiDsBwCaUJapcqMVu/+bgG9YOOvJ0rvKPZQBrhYhc4Z5hMKxupj1xvFyWmg1W5N56lDJHzoDx/cuAshRzC4RgMiLb4Q2pN8r9bnJc+XUvwe3YZ5fcMVHyusfcuXdpv27i51WA0lbuZsfK3s5de9lWW9zXCCmTWIWhI18QtJZ9RNj1RbAC/ACLbCUo/Cit3JZCjjtKR+f5zdBJtOH2uWGr47tDtauNpKbom3Vu6n4oxtJhFDmzaT2pc62ZPu0gKZ4cnId/Bp195CRRtJRKMX3+4KNbD9NDEARUw+Dj82NV0k8VggVL8EZM8rwKmwWWb4ZiA9mmtNR/6rbulcqybAyYcAajMrvmsCHZJlu0CItUtWhsU38uDA04ET8wqzujLFgSgRRzt+kXEaAKwDm59pL/0Y4byu6kKl7cTK+UR9vb7pvG1tF02qxaRg1uiHnx+g7wOFJdw86CMbIvQEdeeHfeLxFBSPJn5VXZvyXLVsJVZjFpf/G5N9TGEn4xIAIx1aZlnqNx48+fxpszhYt1rUyHKHyqS/reuRCO8KEKE/+p90d4cP7dOZGBZrAe4Q2Cr6VoWFGp7KU8jzB6QbTf++mX28Qt7b0RpHxG638hMdZDlOSXXCsLeIhHkEgDBnDc48xzage9HPIxbGocP0yslbVL0Ed92bnx3d/O9vKImgbfPx20LzQCP7f6r+b/H2tmDTlvc+6g0PHKeaeAe5lUU2I63NVlYI5Hba+5RBXfNRT+s/tQ4/PTEt6013TMhfYY1q4O1CPEUaPZSt/QOqj9rMG3KYH1yhRG/UXcb6yZcW8U+k+wPZPCgBlgpNu8Kf+VLERKyNT9vbszywFAMfMpx9lkOsgwtg4j67egVCDgb+ZEV+Y3qxbUuniUxWX3sxPzIPegZS/ka7kue5Y0IwTZu5WqyB9RSCfE3Uwk57704/vV7o8av3lyOVAoQ+jppahwoMNvpxOGpVqrkEMMvAXy4/1nLZ7CXbF+Kq4DobenxfVH8/pClZz8kcJjJSt/V/IWS/l38JjraIQDwVzDZtH9eDrv81QfiKDZ1jLt12E1ftzmRWhx30rpGsWMCynxugBxI8c3BRcxANJ0r34OFhMkV49Gt40u53T1vkZujkMataE3APzs1g0F8IXsmQDntQsdKFNf6iGH8VLQGmiW3JPBuidQduZTq7OqgW5JykjNnmiYjhbLj8+P7cqCWZYZRrkQTaRDf45QL5RUW9XKQDYn5MF6gY8ryV/nXW3qQrGXcQEKwbvgo4z6HJe/l20BOgwI4GgQJQVMNVFiLM3ZsX3olzj1B2we3+Guo/EO8csQZWY33MdXWPW08uYR5nM+10sH+4/+NzncE/GNbn6voapCiKV4hwCWxfwQ78q7g/B6aP81fbEJ+wCzml/1fZcKYdX5lgUa+LB/huzhEU6bsC/HuPnLhb8Wg6ni/HtV9Ygzwe4IyOGaVdivTDbEOW8wcpQLHx/7eC3Zi8sy8oXu5DhE+kw1u06LV7AqFiBTzxumkfMOCJAaDW1i2H8GXwYpRK1uBaofc2xGWoiG1SfQOZZd0xdeJz8d58GK/YijySB0J9Q+cPTWd/fav6mWhmSO8Q1NbxYhNAcb578XuSsC1uvGTGXkoqnwE2LrPE4WXsNmR+dr37NhPqTXwkhI99/qiruLWDhPRfke3BzfdO0Ym4QFzArH8aMPeu75kh1CseVwnsv8eZgrp91VD2VNU2J07EI+ZuhsZro1D0FpfMsrN9T7l9p9GKTy9r7nBy5t7G3PJk57ic3KRV0fbnLkfXYjF0cMEtFJzX6tUctEsk76FuiYm6EKzekXpHANhG2gts8KgF2qDT9Ady9p3FJLXcvD25D//CQrhEA4ctzFtu/O1u7KgeZ1Lgehq0AnjThaOUIIg7oyTm6DQFQGxYkfvTSD5z57MAe02y8MhnHbc3kWCVWgQS5KFidDa1hijkDgK9HylNiIkH7XUrO8mGx+CxPLJ6RBdr/s20MPBsaIkt9iU5tym3LEP0dJx732kMJwDPoVwVGRLds0r/XgQ5tHsywG8kAgXM0DB7PeFzbWyWa93IoiNSjCBLB+zoOu2+108JuNch6SnYLid74PzEj7llBoIHpx7hDqyxHrF/GasXOcNsJUiWOCPPptVgZcrbrM+/gYSTsRQGWXfwbi+2QpryYDX91ZRFe+c74jbKkPWQeYJdeasX+669/9kssmTPRZwQeXKLpE1E+wMyRDnkcUh+wZGLtPCR7U1wokVAtb7GMvgxlM9qyhlaafSIiZSV2vD+PkAeQIjhlvNRwBAevJgfJOo8qbpPQ2lV3ymUV1TQolwR8JBjKHETgw/91SRAJYKWvUwY46fq3dmcPUTKvlFYHq4cWmVrkV/zqAmy8WLPDahcp4/cpPwdQXMEimgoAXgeHsB/4wcD4WgpYL2kvse//ZIdm06Q86YrrHN/K2SfRJ33m8q3c8ZOC98HW3tg6JanGyYpF7dQgLGiKVfQ9BSfnsWrmyqiJkSrmImzcgVGKVKYrTVWN7tf6d09g6JtyFuSLqhgFsKE9Fy0wFs608u58BMfHhXUar/Ce5muvzisF6JoXe2fcbJTln4mpowiRCwa1bKE6YQTUT9l2z2PjQjcg7OFOC2z8RtLwKey7nwpOL7UIOmIcqMA0iv93CeLhhdhHK4m+WVcKc6sqRqPbXLI16EKsbTpOrc4BMRmvPYq2zwSQVf6zmEllfa8DyVodxwKuwDoOxBniJSY0GaSTDsOqaQq/TpWPIHx64a5xoLT7VUtdG8H8OA3t0HiED0CijKwqttKb740UfZbUfUqGDsNpefiSl7rr/f83Q50h3RzmP+FgiNLqYstIw1HsxCxO+NEcqIwD1RLyafv9PRS1ILpg6J3x9QLGncu4++SB34Fv9pKDJ2lVkflsOoIdszZhLGgK6yT3sT6qIAYAGSBuEik+gu6XOLEgRo4G9MPE8n3jPXHO7aczYZ1+58G+f9MLf5MHd1ldxDeLWLZJoN9pgofnfxs6YhJmWY95DHASjIJ7z4lgpx/SPVFkL0J+49CDoRHdmCHKHKzSLUtPev6OAMuUMQEEHouvSjVNk/k3u7co8aJ+6ADVeEupccQgcHC7UHvmhdNBOLdkMUixyPyK5y5ExMa1LU8oJ3sOnIx+RekN9rAOLaHYPY+Mg+Y7XM8dkgU5p0NAOF36Npi5F2nrS0C9fUadVLAZStsYtK4z94LmF/r8P5vHAT/Fou9Tm8cbjNGvPSpfGe9jhgGmhEpo965JlCczvY8rexaSSe7OVjwZnN2Ob0XkI0+vIwpbCs8lTFWA3WPBZ+j2YdrQXUIbCB4f3E+ES1oGFtWgKXRWKbVP8KnH6tCcoS3ie6H7TTq8e/HEl2l9buU/IptFZByo+5URfMLrQ3UGn29p2sMOyh5u9PYYuA+tOC9Dtsn0O61GrW8Vd1aH6ESfgC5Jg/P8EeGoNSrO1RuOKZ6QOKuKyDdGpj3XS1dR40xjXig7TSGmF9BUEK49IG27ZCocDx5yYHgIKBh8yjbftWO9QPkIibON4Mkgr6TQvea8SNccZVMwuqhXXh1GcPOknL/us4J3nxgC/7gSJD6ZPnuEYD5h5xabgNFEADolRV4z8cp5UeJB0vLK0bCTjKuGoBUQPwToZ9JDn5+w5NxIp4QtgLQBtgfDq1Oc+biHviY+Jm56YXtd9rtk2tlOP76Fb93EUwCcuET2W7HdYPAfxuz11rhA9bgJiSxErg86pGuTrrkL8nelqi1o1VcikcTFPFpXBsQkF9hrfTG5MedxuuME2ltj2r/X8zXK+ZOiW1l5EdKm0wYA6zzCzH/b+cGOyASKNKByGzhU+dk/DSiX2v6GbD0sUznKsJdgSIpDB5vsOUmpSXMKxhQJdBh2zQB9Uga2d7mF1i5Z8Pb/mg0GVkuNZFeFdf6/sQsRJ50cShX0xvFi14EdTAyK5xklct0uG9dU9Ly1BB7e4OdFA2kzjJ4+m4cGSTZsV7nWyCf6oBZWxqinVt+YsTvf6sQA1rUNjuKCtq0KP8EGoOrnXterJwiZH5WDOMJ9wiaTF4E1V6uuU/1KwyzJ+H1nMWLaG9MzrZDB0QJOUnUSxKEth9LU1tb7gYILPvJutypcbbUg/cb8KOPnEjRaCOkwJVQYECuiICK6u6V6FnMA4Qdf4LKiO9CPrEHjf0QCB60rN/YDmrSfSJweSDouFYaper4DVl9KMj8Qq4nhIkrzSCV1VtB8Pv6oXTxphryWz16RTVKqPbbKq9zbQasDtcKWRE9WvP3FNcsICp2kRWQCpSzS+z4+Er1rJgNglbTAWRqrATd8ElRNLkfMfFJWHPwNMPW7vUSOpc9im7UGfizlYOdvT787XWsxMF36s1xPyQov0uMDNuh7HVeyHWziyzKJnJFH1zyJG7twS5yiydQvr+9XtYK/mjNWUEdhgM3TJsWQEK3aaE+HqwUhLE1b65h42a1E3HMqoXuC4BzlnNuEIgryVdgYucd4NsTHd+tf+jBWV+6h6kT2CgOBmdI7gEfBrIYkOCO9tZGY+K770tcEjoG+l/rLT2tDByN06xhRUokM4Ltw8U/fNh/ydTjO4JddSFJ0n6Z9SMiz3lreKURYDM2Z+Szp9+zXvKr6SE29NRrJAGbmRjkSxi3sOErHFrB10tJ2uuT+/tem+j2qexl1P1B2DlgxMa8kS4WHKFWv0vqTQxY7YqnQN8jE+lmv3woeUknMmJciOh8HaLQ2A4uHN+oXYqBkyrckpNz2iLo5vZD/nuEEs/JWzZsCcp2U8YtsPcGQNdIOqvcZRD40+RjBs4WmDr7pU77XhyaIrC93dqsR+qa8BHQOWj4Bu7/Ha59bpCbhRoXY5nTHcgXGvNW2VGXpouirMtJDL3cggbY4AV6rYdtSbnCb2FR0Z3oEVYPa38SZH/o+79XTKl48AVc9BeBWAJbggJXJboVa3PUkSLquk/t1LtVD19MizUfx5LVJ+bJeSq5krVfq1glKB5TIifOV/Do4YI96WDkPPZoWbriIDEdfqy828yhXsnn3/Q6xwJvxVRu4ckHYGnN8zaBRAdlIQwaphWujvdJ4yQCnsPlge7wXDKQuPB5N5wTIyBk/4aw/x/R8SmxQAIM6p4hOxgaYEqGMRpnHcImrDOAMzoXe5VuTKeSPwTmd9FAoKsDOcbGwJsRslfufhCPDSOeWxn4MGty5kg1UIKiP9KtE0xsFPeMLKY0a93YsRVF6su0Tt99uEIYYhogYODAIeFhKqEoyScLyLpjtsnsKTisrwea2HklEPbCjoHgxYi/aPGvA4ZvW8U1dmnMPBgKzwPWT0KUDrRhLPZrT5vB4pMbfon/pNjubIqSAql2YwbQQ66PYVPKvacgMpbKeSS7HSboMBqsLqOFLRlY6bT9QfjaHB7bGfcHQrij1HeGzjphnmbYO359jhvWcLnotM4nsaKU84N3l6nyqRVAQ2K1lrzE659W4Y8ff/hhirkxkgauyvgHNf5Azu8xxk+geLrsjEjx7wK9Z5DodQgqFhp5dO0L4xmvV4M0Y0SFL0OEAVJhhZCKKOnUEM+8TXV/ijaeWGRfwFcNXeQQ4Y7jPytH+ZKzujr6KtApadQaVPlBtAUtg9thT+0kGoo/CvMwOHLTWLuQAvZKzCXc2eFg388gR0yblNUY5JXJ0oFq8N6Et7LKFG367qbWxTUnt3vgemDfAeCT3iMX9+ixihTYoJQGQduFd2K61cIwIDy42PwyyfBAlB69X7pGJWNsTubeIzIBLt1b4a6OQB8ptWFIGIquvVlHu0wqhWx6QJPCQW+8z2h0mDaBT+D9Wddq+oAV60yhIgprTSh7klj8n15U6kkIEZluuJjvLpLZU1QoduLnoIodg37XTJlN/Y0gfKIMzYFZ03d5Wt7iluXVifzY6pDCEoLJ9wOz5Hy6CR/+zuPZFZd4t60NpSxXp6rd3nWq2NfD+YRwSdCNRPK6Lu8LkjZpvlgn+wl0xjLLDD1ixtN0kEMsMAhr8NFsCh6wXAOvrUOc0oEDDrlq9fZH0o8qXnYcv+cXGJweDpW6T2+Lt5q9nFKfv5/JnuxsfcdFm4RMa+wwv/5WLaaPCuv93AxVUQE4R4hKhMQ0H+TkXrcoWciBXUUSWJatVI4SzzvRkzb5PRI+wBz2lOju72rUh1j7mdyWptDkPB/q48dgfBzSCRDyLK/iwy+4+Ndx/I5XmXXV5dlkcnObFaHFJvI5aKgJzGYQ6qpcZ4zooB37BkE9QnAQ5rfxPDVE0hJ2oN6rBryoUXU3OiuuHV/IygkyxwkqeK+YUcsBo5CdWKXw1IC1oZd3U4uKEx93sE1J80d0cKwYmHeqt4jBHVC3p84ObsRrrlbAlJtJcKYXRdj/HwATFUYLcKM1oAAAAABJRU5ErkJggg==";_2d3=_2cd.get("___ssao_noise_texture",raw,gl);var _2e1=new Float32Array(8);_2e1[0]=-1;_2e1[1]=-1;_2e1[2]=1;_2e1[3]=-1;_2e1[4]=-1;_2e1[5]=1;_2e1[6]=1;_2e1[7]=1;var _2e2=new Object();_2e2[VertexAttrConstants.POSITION]=0;_2d4=new GLVBO(_2e1,_2e2,2,gl);};this.disable=function(){assert(this.getEnableState());_2d4.dispose();_2d2.dispose();_2d1.dispose();_2d0.dispose();_2cf.dispose();_2ce.dispose();_2d4=undefined;_2d3=undefined;_2d2=undefined;_2d1=undefined;_2d0=undefined;_2cf=undefined;_2ce=undefined;};this.setAttenuation=function(_2e3){_2d7=_2e3;};this.getAttenuation=function(){return _2d7;};this.setRadius=function(_2e4){_2d8=_2e4;};this.getRadius=function(){return _2d8;};this.setFilterRadius=function(_2e5){_2d9=Math.max(Math.round(_2e5),1);};this.getFilterRadius=function(){return _2d9;};this.setSamples=function(_2e6){_2da=_2e6;};this.getSamples=function(){return _2da;};this.prepare0=function(_2e7){assert(this.getEnableState());vec4.set(_2e7,_2db);var _2e8=Math.floor(_2e7[2]/2)*2;var _2e9=Math.floor(_2e7[3]/2)*2;var _2ea=_2e8/_2d5;var _2eb=_2e9/_2d5;_2ce.setSize(_2e8,_2e9);_2cf.setSize(_2e8,_2e9);_2d0.setSize(_2e8,_2e9);_2d1.setSize(_2ea,_2eb);_2d2.setSize(_2ea,_2eb);gl.viewport(0,0,_2e8,_2e9);_2ce.bind();gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);};this.prepare1=function(){assert(this.getEnableState());_2cf.bind();gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);};this.finish=function(_2ec,fovX,fbo){assert(this.getEnableState());var _2ed=_2d0.getWidth();var _2ee=_2d0.getHeight();_2d0.bind();gl.viewport(0,0,_2ed,_2ee);var _2ef=_2cc.get(_2da<=8?"ssao8":(_2da<=16?"ssao16":(_2da<=32?"ssao32":"ssao64")));var _2f0=_2cc.get("blurH");var _2f1=_2cc.get("blurV");_2ef.use();_2ef.uniform1i("rnm",0);_2ef.uniform1i("normalMap",1);_2ef.uniform1i("depthMap",2);_2ef.uniform1f("ssaoAtt",_2d7);_2ef.uniform2f("rnmScale",_2ed/_2d6,_2ee/_2d6);_2ef.uniform2fv("nearFar",_2ec);var fovy=fovx2fovy(fovX,_2ed,_2ee);var x=2*_2ec[0]*Math.tan(0.5*fovy);_2ef.uniform1f("radius",_2d8/x);_2ef.uniform3fv("pSphere",_2da<=8?_2dc:(_2da<=16?_2dd:(_2da<=32?_2de:_2df)));gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,_2d3);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,_2ce.getTexture());gl.activeTexture(gl.TEXTURE2);gl.bindTexture(gl.TEXTURE_2D,_2cf.getTexture());_2d4.bind();_2d4.setPointers(_2ef);_2ef.enableVertexAttribArrays();gl.drawArrays(gl.TRIANGLE_STRIP,0,_2d4.getNum());gl.bindTexture(gl.TEXTURE_2D,null);gl.activeTexture(gl.TEXTURE0);gl.viewport(0,0,_2ed/_2d5,_2ee/_2d5);_2d1.bind();_2f0.use();_2f0.uniform1i("tex",0);_2f0.uniform1f("blurSize",_2d5/_2ed);_2f0.uniform1i("radius",_2d9);gl.bindTexture(gl.TEXTURE_2D,_2d0.getTexture());gl.drawArrays(gl.TRIANGLE_STRIP,0,_2d4.getNum());_2d2.bind();_2f1.use();_2f1.uniform1i("tex",0);_2f1.uniform1f("blurSize",_2d5/_2ee);_2f1.uniform1i("radius",_2d9);gl.bindTexture(gl.TEXTURE_2D,_2d1.getTexture());gl.drawArrays(gl.TRIANGLE_STRIP,0,_2d4.getNum());_2ef.disableVertexAttribArrays();gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);gl.viewport(_2db[0],_2db[1],_2db[2],_2db[3]);};this.setUniforms=function(_2f2){var _2f3=this.getEnableState();_2f2.use();gl.activeTexture(gl.TEXTURE2);gl.bindTexture(gl.TEXTURE_2D,_2f3?_2d2.getTexture():null);gl.activeTexture(gl.TEXTURE0);_2f2.uniform1i("ssaoTex",2);if(_2f3){_2f2.uniform4f("viewportPixelSz",_2db[0],_2db[1],1/_2d0.getWidth(),1/_2d0.getHeight());}else{_2f2.uniform4f("viewportPixelSz",-1,-1,-1,-1);}};var x=0;var y=0;var _2f4=512;var _2f5=512;var data=new Float32Array(4*2*2);data[0]=x;data[1]=y;data[2]=0;data[3]=0;data[4]=x+_2f4;data[5]=y;data[6]=1;data[7]=0;data[8]=x;data[9]=y+_2f5;data[10]=0;data[11]=1;data[12]=x+_2f4;data[13]=y+_2f5;data[14]=1;data[15]=1;var _2f6=new Object();_2f6[VertexAttrConstants.POSITION]=0;_2f6[VertexAttrConstants.UV0]=2;var _2f7=new GLVBO(data,_2f6,4,gl);this.drawQuad=function(proj){assert(this.getEnableState());var _2f8=_2cc.get("showDepth");gl.disable(gl.DEPTH_TEST);_2f8.use();_2f8.uniformMatrix4fv("proj",proj);_2f8.uniform1i("depthTex",0);gl.bindTexture(gl.TEXTURE_2D,_2d2.getTexture());_2f8.enableVertexAttribArrays();_2f7.bind();_2f7.setPointers(_2f8);gl.drawArrays(gl.TRIANGLE_STRIP,0,_2f7.getNum());gl.bindBuffer(gl.ARRAY_BUFFER,null);_2f8.disableVertexAttribArrays();gl.useProgram(null);gl.enable(gl.DEPTH_TEST);};};});},"dojo/dom-prop":function(){define(["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(_2f9,dojo,has,lang,dom,_2fa,ctr,conn){var _2fb={},_2fc=0,_2fd=dojo._scopeName+"attrid";_2f9.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};_2f9.get=function getProp(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_2fe=_2f9.names[lc]||name;return node[_2fe];};_2f9.set=function setProp(node,name,_2ff){node=dom.byId(node);var l=arguments.length;if(l==2&&typeof name!="string"){for(var x in name){_2f9.set(node,x,name[x]);}return node;}var lc=name.toLowerCase(),_300=_2f9.names[lc]||name;if(_300=="style"&&typeof _2ff!="string"){_2fa.set(node,_2ff);return node;}if(_300=="innerHTML"){if(has("ie")&&node.tagName.toLowerCase() in {col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}){ctr.empty(node);node.appendChild(ctr.toDom(_2ff,node.ownerDocument));}else{node[_300]=_2ff;}return node;}if(lang.isFunction(_2ff)){var _301=node[_2fd];if(!_301){_301=_2fc++;node[_2fd]=_301;}if(!_2fb[_301]){_2fb[_301]={};}var h=_2fb[_301][_300];if(h){conn.disconnect(h);}else{try{delete node[_300];}catch(e){}}if(_2ff){_2fb[_301][_300]=conn.connect(node,_300,_2ff);}else{node[_300]=null;}return node;}node[_300]=_2ff;return node;};});},"dojo/errors/CancelError":function(){define(["./create"],function(_302){return _302("CancelError",null,null,{dojoType:"cancel"});});},"dojo/_base/xhr":function(){define("dojo/_base/xhr",["./kernel","./sniff","require","../io-query","../dom","../dom-form","./Deferred","./config","./json","./lang","./array","../on","../aspect","../request/watch","../request/xhr","../request/util"],function(dojo,has,_303,ioq,dom,_304,_305,_306,json,lang,_307,on,_308,_309,_30a,util){dojo._xhrObj=_30a._create;var cfg=dojo.config;dojo.objectToQuery=ioq.objectToQuery;dojo.queryToObject=ioq.queryToObject;dojo.fieldToObject=_304.fieldToObject;dojo.formToObject=_304.toObject;dojo.formToQuery=_304.toQuery;dojo.formToJson=_304.toJson;dojo._blockAsync=false;var _30b=dojo._contentHandlers=dojo.contentHandlers={"text":function(xhr){return xhr.responseText;},"json":function(xhr){return json.fromJson(xhr.responseText||null);},"json-comment-filtered":function(xhr){if(!_306.useCommentedJson){console.warn("Consider using the standard mimetype:application/json."+" json-commenting can introduce security issues. To"+" decrease the chances of hijacking, use the standard the 'json' handler and"+" prefix your json with: {}&&\n"+"Use djConfig.useCommentedJson=true to turn off this message.");}var _30c=xhr.responseText;var _30d=_30c.indexOf("/*");var _30e=_30c.lastIndexOf("*/");if(_30d==-1||_30e==-1){throw new Error("JSON was not comment filtered");}return json.fromJson(_30c.substring(_30d+2,_30e));},"javascript":function(xhr){return dojo.eval(xhr.responseText);},"xml":function(xhr){var _30f=xhr.responseXML;if(has("ie")){if((!_30f||!_30f.documentElement)){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];_307.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);_30f=dom;}catch(e){return false;}return true;});}}return _30f;},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText)){return _30b["json-comment-filtered"](xhr);}else{return _30b["json"](xhr);}}};dojo._ioSetArgs=function(args,_310,_311,_312){var _313={args:args,url:args.url};var _314=null;if(args.form){var form=dom.byId(args.form);var _315=form.getAttributeNode("action");_313.url=_313.url||(_315?_315.value:null);_314=_304.toObject(form);}var _316=[{}];if(_314){_316.push(_314);}if(args.content){_316.push(args.content);}if(args.preventCache){_316.push({"dojo.preventCache":new Date().valueOf()});}_313.query=ioq.objectToQuery(lang.mixin.apply(null,_316));_313.handleAs=args.handleAs||"text";var d=new _305(function(dfd){dfd.canceled=true;_310&&_310(dfd);var err=dfd.ioArgs.error;if(!err){err=new Error("request cancelled");err.dojoType="cancel";dfd.ioArgs.error=err;}return err;});d.addCallback(_311);var ld=args.load;if(ld&&lang.isFunction(ld)){d.addCallback(function(_317){return ld.call(args,_317,_313);});}var err=args.error;if(err&&lang.isFunction(err)){d.addErrback(function(_318){return err.call(args,_318,_313);});}var _319=args.handle;if(_319&&lang.isFunction(_319)){d.addBoth(function(_31a){return _319.call(args,_31a,_313);});}d.addErrback(function(_31b){return _312(_31b,d);});if(cfg.ioPublish&&dojo.publish&&_313.args.ioPublish!==false){d.addCallbacks(function(res){dojo.publish("/dojo/io/load",[d,res]);return res;},function(res){dojo.publish("/dojo/io/error",[d,res]);return res;});d.addBoth(function(res){dojo.publish("/dojo/io/done",[d,res]);return res;});}d.ioArgs=_313;return d;};var _31c=function(dfd){var ret=_30b[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret;};var _31d=function(_31e,dfd){if(!dfd.ioArgs.args.failOk){console.error(_31e);}return _31e;};var _31f=function(dfd){if(_320<=0){_320=0;if(cfg.ioPublish&&dojo.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false)){dojo.publish("/dojo/io/stop");}}};var _320=0;_308.after(_309,"_onAction",function(){_320-=1;});_308.after(_309,"_onInFlight",_31f);dojo._ioCancelAll=_309.cancelAll;dojo._ioNotifyStart=function(dfd){if(cfg.ioPublish&&dojo.publish&&dfd.ioArgs.args.ioPublish!==false){if(!_320){dojo.publish("/dojo/io/start");}_320+=1;dojo.publish("/dojo/io/send",[dfd]);}};dojo._ioWatch=function(dfd,_321,_322,_323){var args=dfd.ioArgs.options=dfd.ioArgs.args;lang.mixin(dfd,{response:dfd.ioArgs,isValid:function(_324){return _321(dfd);},isReady:function(_325){return _322(dfd);},handleResponse:function(_326){return _323(dfd);}});_309(dfd);_31f(dfd);};var _327="application/x-www-form-urlencoded";dojo._ioAddQueryToUrl=function(_328){if(_328.query.length){_328.url+=(_328.url.indexOf("?")==-1?"?":"&")+_328.query;_328.query=null;}};dojo.xhr=function(_329,args,_32a){var rDfd;var dfd=dojo._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},_31c,_31d);var _32b=dfd.ioArgs;if("postData" in args){_32b.query=args.postData;}else{if("putData" in args){_32b.query=args.putData;}else{if("rawBody" in args){_32b.query=args.rawBody;}else{if((arguments.length>2&&!_32a)||"POST|PUT".indexOf(_329.toUpperCase())===-1){dojo._ioAddQueryToUrl(_32b);}}}}var _32c={method:_329,handleAs:"text",timeout:args.timeout,withCredentials:args.withCredentials,ioArgs:_32b};if(typeof args.headers!=="undefined"){_32c.headers=args.headers;}if(typeof args.contentType!=="undefined"){if(!_32c.headers){_32c.headers={};}_32c.headers["Content-Type"]=args.contentType;}if(typeof _32b.query!=="undefined"){_32c.data=_32b.query;}if(typeof args.sync!=="undefined"){_32c.sync=args.sync;}dojo._ioNotifyStart(dfd);try{rDfd=_30a(_32b.url,_32c,true);}catch(e){dfd.cancel();return dfd;}dfd.ioArgs.xhr=rDfd.response.xhr;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_32d){_32b.error=_32d;dfd.reject(_32d);});return dfd;};dojo.xhrGet=function(args){return dojo.xhr("GET",args);};dojo.rawXhrPost=dojo.xhrPost=function(args){return dojo.xhr("POST",args,true);};dojo.rawXhrPut=dojo.xhrPut=function(args){return dojo.xhr("PUT",args,true);};dojo.xhrDelete=function(args){return dojo.xhr("DELETE",args);};dojo._isDocumentOk=function(x){return util.checkStatus(x.status);};dojo._getText=function(url){var _32e;dojo.xhrGet({url:url,sync:true,load:function(text){_32e=text;}});return _32e;};lang.mixin(dojo.xhr,{_xhrObj:dojo._xhrObj,fieldToObject:_304.fieldToObject,formToObject:_304.toObject,objectToQuery:ioq.objectToQuery,formToQuery:_304.toQuery,formToJson:_304.toJson,queryToObject:ioq.queryToObject,contentHandlers:_30b,_ioSetArgs:dojo._ioSetArgs,_ioCancelAll:dojo._ioCancelAll,_ioNotifyStart:dojo._ioNotifyStart,_ioWatch:dojo._ioWatch,_ioAddQueryToUrl:dojo._ioAddQueryToUrl,_isDocumentOk:dojo._isDocumentOk,_getText:dojo._getText,get:dojo.xhrGet,post:dojo.xhrPost,put:dojo.xhrPut,del:dojo.xhrDelete});return dojo.xhr;});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_32f,_330,dom,_331,_332,_333,lang,on,_334,has,_335,_336,win,_337,a11y,_338,_339){var _33a=_330([_335,_333],{curNode:null,activeStack:[],constructor:function(){var _33b=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_32f.before(_332,"empty",_33b);_32f.before(_332,"destroy",_33b);},registerIframe:function(_33c){return this.registerWin(_33c.contentWindow,_33c);},registerWin:function(_33d,_33e){var _33f=this;var _340=function(evt){_33f._justMouseDowned=true;setTimeout(function(){_33f._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_33f._onTouchNode(_33e||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_33d.document.documentElement:_33d.document;if(doc){if(has("ie")){_33d.document.body.attachEvent("onmousedown",_340);var _341=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_33f._onFocusNode(_33e||evt.srcElement);}else{_33f._onTouchNode(_33e||evt.srcElement);}};doc.attachEvent("onfocusin",_341);var _342=function(evt){_33f._onBlurNode(_33e||evt.srcElement);};doc.attachEvent("onfocusout",_342);return {remove:function(){_33d.document.detachEvent("onmousedown",_340);doc.detachEvent("onfocusin",_341);doc.detachEvent("onfocusout",_342);doc=null;}};}else{doc.body.addEventListener("mousedown",_340,true);doc.body.addEventListener("touchstart",_340,true);var _343=function(evt){_33f._onFocusNode(_33e||evt.target);};doc.addEventListener("focus",_343,true);var _344=function(evt){_33f._onBlurNode(_33e||evt.target);};doc.addEventListener("blur",_344,true);return {remove:function(){doc.body.removeEventListener("mousedown",_340,true);doc.body.removeEventListener("touchstart",_340,true);doc.removeEventListener("focus",_343,true);doc.removeEventListener("blur",_344,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _345=[];try{while(node){var _346=_331.get(node,"dijitPopupParent");if(_346){node=_338.byId(_346).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_337.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_347=id&&_338.byId(id);if(_347&&!(by=="mouse"&&_347.get("disabled"))){_345.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_345,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_348,by){var _349=this.activeStack;this.set("activeStack",_348);for(var _34a=0;_34a<Math.min(_349.length,_348.length);_34a++){if(_349[_34a]!=_348[_34a]){break;}}var _34b;for(var i=_349.length-1;i>=_34a;i--){_34b=_338.byId(_349[i]);if(_34b){_34b._hasBeenBlurred=true;_34b.set("focused",false);if(_34b._focusManager==this){_34b._onBlur(by);}this.emit("widget-blur",_34b,by);}}for(i=_34a;i<_348.length;i++){_34b=_338.byId(_348[i]);if(_34b){_34b.set("focused",true);if(_34b._focusManager==this){_34b._onFocus(by);}this.emit("widget-focus",_34b,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _34c=new _33a();_334(function(){var _34d=_34c.registerWin(_337.get(win.doc));if(has("ie")){_336.addOnWindowUnload(function(){if(_34d){_34d.remove();_34d=null;}});}});_339.focus=function(node){_34c.focus(node);};for(var attr in _34c){if(!/^_/.test(attr)){_339.focus[attr]=typeof _34c[attr]=="function"?lang.hitch(_34c,attr):_34c[attr];}}_34c.watch(function(attr,_34e,_34f){_339.focus[attr]=_34f;});return _34c;});},"dojo/i18n":function(){define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr","./json","module"],function(dojo,_350,has,_351,_352,lang,xhr,json,_353){has.add("dojo-preload-i18n-Api",1);1||has.add("dojo-v1x-i18n-Api",1);var _354=dojo.i18n={},_355=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_356=function(root,_357,_358,_359){for(var _35a=[_358+_359],_35b=_357.split("-"),_35c="",i=0;i<_35b.length;i++){_35c+=(_35c?"-":"")+_35b[i];if(!root||root[_35c]){_35a.push(_358+_35c+"/"+_359);}}return _35a;},_35d={},_35e=function(_35f,_360,_361){_361=_361?_361.toLowerCase():dojo.locale;_35f=_35f.replace(/\./g,"/");_360=_360.replace(/\./g,"/");return (/root/i.test(_361))?(_35f+"/nls/"+_360):(_35f+"/nls/"+_361+"/"+_360);},_362=dojo.getL10nName=function(_363,_364,_365){return _363=_353.id+"!"+_35e(_363,_364,_365);},_366=function(_367,_368,_369,_36a,_36b,load){_367([_368],function(root){var _36c=lang.clone(root.root),_36d=_356(!root._v1x&&root,_36b,_369,_36a);_367(_36d,function(){for(var i=1;i<_36d.length;i++){_36c=lang.mixin(lang.clone(_36c),arguments[i]);}var _36e=_368+"/"+_36b;_35d[_36e]=_36c;load();});});},_36f=function(id,_370){return /^\./.test(id)?_370(id):id;},_371=function(_372){var list=_352.extraLocale||[];list=lang.isArray(list)?list:[list];list.push(_372);return list;},load=function(id,_373,load){if(has("dojo-preload-i18n-Api")){var _374=id.split("*"),_375=_374[1]=="preload";if(_375){if(!_35d[id]){_35d[id]=1;_376(_374[2],json.parse(_374[3]),1,_373);}load(1);}if(_375||_377(id,_373,load)){return;}}var _378=_355.exec(id),_379=_378[1]+"/",_37a=_378[5]||_378[4],_37b=_379+_37a,_37c=(_378[5]&&_378[4]),_37d=_37c||dojo.locale,_37e=_37b+"/"+_37d,_37f=_37c?[_37d]:_371(_37d),_380=_37f.length,_381=function(){if(!--_380){load(lang.delegate(_35d[_37e]));}};_351.forEach(_37f,function(_382){var _383=_37b+"/"+_382;if(has("dojo-preload-i18n-Api")){_384(_383);}if(!_35d[_383]){_366(_373,_37b,_379,_37a,_382,_381);}else{_381();}});};if(has("dojo-unit-tests")){var _385=_354.unitTests=[];}if(has("dojo-preload-i18n-Api")||1){var _386=_354.normalizeLocale=function(_387){var _388=_387?_387.toLowerCase():dojo.locale;return _388=="root"?"ROOT":_388;},isXd=function(mid,_389){return (1&&1)?_389.isXdUrl(_350.toUrl(mid+".js")):true;},_38a=0,_38b=[],_376=_354._preloadLocalizations=function(_38c,_38d,_38e,_38f){_38f=_38f||_350;function _390(mid,_391){if(isXd(mid,_38f)||_38e){_38f([mid],_391);}else{_39b([mid],_391,_38f);}};function _392(_393,func){var _394=_393.split("-");while(_394.length){if(func(_394.join("-"))){return;}_394.pop();}func("ROOT");};function _395(_396){_396=_386(_396);_392(_396,function(loc){if(_351.indexOf(_38d,loc)>=0){var mid=_38c.replace(/\./g,"/")+"_"+loc;_38a++;_390(mid,function(_397){for(var p in _397){_35d[_350.toAbsMid(p)+"/"+loc]=_397[p];}--_38a;while(!_38a&&_38b.length){load.apply(null,_38b.shift());}});return true;}return false;});};_395();_351.forEach(dojo.config.extraLocale,_395);},_377=function(id,_398,load){if(_38a){_38b.push([id,_398,load]);}return _38a;},_384=function(){};}if(1){var _399={},_39a=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},"+"\t   require = function(){define.called = 1;};"+"try{"+"define.called = 0;"+"eval(__bundle);"+"if(define.called==1)"+"return __amdValue;"+"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))"+"return __checkForLegacyModules;"+"}catch(e){}"+"try{"+"return eval('('+__bundle+')');"+"}catch(e){"+"return e;"+"}"),_39b=function(deps,_39c,_39d){var _39e=[];_351.forEach(deps,function(mid){var url=_39d.toUrl(mid+".js");function load(text){var _39f=_39a(text,_384,mid,_399);if(_39f===_399){_39e.push(_35d[url]=_399.result);}else{if(_39f instanceof Error){console.error("failed to evaluate i18n bundle; url="+url,_39f);_39f={};}_39e.push(_35d[url]=(/nls\/[^\/]+\/[^\/]+$/.test(url)?_39f:{root:_39f,_v1x:1}));}};if(_35d[url]){_39e.push(_35d[url]);}else{var _3a0=_39d.syncLoadNls(mid);if(_3a0){_39e.push(_3a0);}else{if(!xhr){try{_39d.getText(url,true,load);}catch(e){_39e.push(_35d[url]={});}}else{xhr.get({url:url,sync:true,load:load,error:function(){_39e.push(_35d[url]={});}});}}}});_39c&&_39c.apply(null,_39e);};_384=function(_3a1){for(var _3a2,_3a3=_3a1.split("/"),_3a4=dojo.global[_3a3[0]],i=1;_3a4&&i<_3a3.length-1;_3a4=_3a4[_3a3[i++]]){}if(_3a4){_3a2=_3a4[_3a3[i]];if(!_3a2){_3a2=_3a4[_3a3[i].replace(/-/g,"_")];}if(_3a2){_35d[_3a1]=_3a2;}}return _3a2;};_354.getLocalization=function(_3a5,_3a6,_3a7){var _3a8,_3a9=_35e(_3a5,_3a6,_3a7);load(_3a9,(!isXd(_3a9,_350)?function(deps,_3aa){_39b(deps,_3aa,_350);}:_350),function(_3ab){_3a8=_3ab;});return _3a8;};if(has("dojo-unit-tests")){_385.push(function(doh){doh.register("tests.i18n.unit",function(t){var _3ac;_3ac=_39a("{prop:1}",_384,"nonsense",_399);t.is({prop:1},_3ac);t.is(undefined,_3ac[1]);_3ac=_39a("({prop:1})",_384,"nonsense",_399);t.is({prop:1},_3ac);t.is(undefined,_3ac[1]);_3ac=_39a("{'prop-x':1}",_384,"nonsense",_399);t.is({"prop-x":1},_3ac);t.is(undefined,_3ac[1]);_3ac=_39a("({'prop-x':1})",_384,"nonsense",_399);t.is({"prop-x":1},_3ac);t.is(undefined,_3ac[1]);_3ac=_39a("define({'prop-x':1})",_384,"nonsense",_399);t.is(_399,_3ac);t.is({"prop-x":1},_399.result);_3ac=_39a("define('some/module', {'prop-x':1})",_384,"nonsense",_399);t.is(_399,_3ac);t.is({"prop-x":1},_399.result);_3ac=_39a("this is total nonsense and should throw an error",_384,"nonsense",_399);t.is(_3ac instanceof Error,true);});});}}return lang.mixin(_354,{dynamic:true,normalize:_36f,load:load,cache:_35d});});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_3ad,has,_3ae,win){_3ae(90,function(){if(has("highcontrast")){_3ad.add(win.body(),"dijit_a11y");}});return has;});},"WebScene/app/Viewport":function(){define("WebScene/app/Viewport",["dijit","dojo","dojox","dojo/require!WebScene/app/DualVisualizer,WebScene/app/Visualizer,WebScene/lib/bitset,WebScene/lib/gl-matrix,WebScene/lib/Renderer,WebScene/lib/Trackball,WebScene/lib/Util"],function(_3af,dojo,_3b0){dojo.provide("WebScene.app.Viewport");dojo.require("WebScene.app.DualVisualizer");dojo.require("WebScene.app.Visualizer");dojo.require("WebScene.lib.bitset");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Renderer");dojo.require("WebScene.lib.Trackball");dojo.require("WebScene.lib.Util");Viewport=function(_3b1,_3b2,_3b3,_3b4,_3b5,_3b6,_3b7,gl){var _3b8=new Visualizer(_3b1,_3b2,_3b3,_3b4,gl);var _3b9=[0,0,0,0];var proj=mat4.identity();var _3ba=vec2d.createFrom(1,1000);var _3bb=new Trackball(vec3.createFrom(0,100,-100),vec3.createFrom(0,0,0),_3bc(_3b5),_3b6,_3b7);var fovX=54/180*Math.PI;var _3bd=fovX;var _3be=new Array();var _3bf=new BitSet();var _3c0=new Array(6);for(var i=0;i<6;++i){_3c0[i]=vec4d.create();}var _3c1=mat4.create();var _3c2=vec3d.create();this.dispose=function(){_3b8.dispose();};this.setLightingData=function(data){_3b8.setLightingData(data);};this.getLightingData=function(){return _3b8.getLightingData();};this.setMode=function(mode){var data=_3b8.getData();_3b8.dispose();_3b8=mode==0?new Visualizer(_3b1,_3b2,_3b3,_3b4,gl):new DualVisualizer(_3b1,_3b2,_3b3,_3b4,gl);_3b8.setData(data);};this.setData=function(data){_3b8.setData(data);};this.getData=function(){return _3b8.getData();};this.setContent=function(_3c3,_3c4,idx){_3b8.setContent(_3c3,_3c4,idx);_3be=_3b8.getContentRenderGeometries();};this.getContent=function(idx){return _3b8.getContent(idx);};this.getContentRenderGeometries=function(){return _3be;};this.setSelection=function(_3c5){_3b8.setSelection(_3c5);};this.frame=function(_3c6,_3c7){_3bb.frame(_3c6,_3c7);};this.setCamera=function(eye,_3c8,_3c9){_3bb.setEyeAndCenter(eye,_3c8);if(_3c9){_3bb.setCurrentToTarget();}};this.getCamera=function(_3ca){return _3ca?_3bb.getCurrentEyeAndCenter():_3bb.getEyeAndCenter();};this.addCameraListener=function(_3cb){return _3bb.addCameraListener(_3cb);},this.removeCameraListener=function(_3cc){_3bb.removeCameraListener(_3cc);},this.getTrackball=function(){return _3bb;};this.getPickRay=function(_3cd,_3ce,_3cf){var p0=vec3.createFrom(_3cd[0],_3cd[1],0);var p1=vec3.createFrom(_3cd[0],_3cd[1],1);var view=_3bb.getMatrix();vec3.unproject(p0,view,proj,_3b9,_3ce);vec3.unproject(p1,view,proj,_3b9,_3cf);};this.getPickContent=function(_3d0){return _3b8.getPickContent(_3d0,_3b9);};this.render=function(dt,_3d1,fbo){step(dt);_3d2();_3b8.render(_3bb.getMatrix(),proj,_3ba,_3b9,fovX,_3d1,_3bf,fbo);};this.setWindowSize=function(size){_3bb.setWindowSize(size);_3b9[0]=0;_3b9[1]=0;_3b9[2]=size[0];_3b9[3]=size[1];gl.viewport(_3b9[0],_3b9[1],_3b9[2],_3b9[3]);_3d3(fovx2fovy(fovX,_3b9[2],_3b9[3]));};this.setFovX=function(fov,_3d4){_3bd=fov;if(_3d4){fovX=fov;_3d3(fovx2fovy(fovX,_3b9[2],_3b9[3]));}};this.getFovX=function(){return _3bd;};function step(dt){_3bb.step(dt);_3d5(dt);};function _3d5(dt){if(fovX===_3bd){return;}if(Math.abs(fovX,_3bd)>0.01){fovX=lerp(fovX,_3bd,Math.min(dt*5,0.3));}else{fovX=_3bd;}};function _3d2(){var fovY=fovx2fovy(fovX,_3b9[2],_3b9[3]);var _3d6=_3b9[2]/_3b9[3];mat4.perspective(fovY*180/Math.PI,_3d6,1,10,_3c1);matrix2frustumPlanes(_3bb.getMatrix(),_3c1,_3c0);_3bf.clearAll();var _3d7=-Number.MAX_VALUE;var _3d8=-Number.MAX_VALUE;var eye=_3bb.getCurrentEyeAndCenter()[0];for(var i=0;i<_3be.length;++i){var _3d9=_3be[i].getCenter();if(_3be[i].getIsCameraSpace()){_3c2[0]=_3d9[0]+eye[0];_3c2[1]=_3d9[1]+eye[1];_3c2[2]=_3d9[2]+eye[2];_3d9=_3c2;}var _3da=_3be[i].getBSRadius();if(_3c0[0][0]*_3d9[0]+_3c0[0][1]*_3d9[1]+_3c0[0][2]*_3d9[2]+_3c0[0][3]>_3da){continue;}if(_3c0[1][0]*_3d9[0]+_3c0[1][1]*_3d9[1]+_3c0[1][2]*_3d9[2]+_3c0[1][3]>_3da){continue;}if(_3c0[2][0]*_3d9[0]+_3c0[2][1]*_3d9[1]+_3c0[2][2]*_3d9[2]+_3c0[2][3]>_3da){continue;}if(_3c0[3][0]*_3d9[0]+_3c0[3][1]*_3d9[1]+_3c0[3][2]*_3d9[2]+_3c0[3][3]>_3da){continue;}_3bf.set(_3be[i].getIndex());var _3db=_3c0[4][0]*_3d9[0]+_3c0[4][1]*_3d9[1]+_3c0[4][2]*_3d9[2];var _3dc=_3db+_3da;var _3dd=-_3db+_3da;if(_3dc>_3d7){_3d7=_3dc;}if(_3dd>_3d8){_3d8=_3dd;}}_3d7+=_3c0[4][3];_3d8+=_3c0[5][3];if(_3bf.cardinality()>0){_3ba[0]=Math.max(1-_3d7,2);_3ba[1]=Math.max(10+_3d8,_3ba[0]+1);}_3d3(fovY);};function _3d3(fovY){mat4.perspective(fovY*180/Math.PI,_3b9[2]/_3b9[3],_3ba[0],_3ba[1],proj);};function _3bc(_3de){if(!_3de||_3de.length!=6){return 5000;}return Math.max(Math.max(Math.max(_3de[3]-_3de[0],_3de[4]-_3de[1]),_3de[5]-_3de[2])*7,100);};};});},"esri/graphic":function(){define("esri/graphic",["dijit","dojo","dojox","dojo/require!esri/geometry,esri/symbol"],function(_3df,dojo,_3e0){dojo.provide("esri.graphic");dojo.require("esri.geometry");dojo.require("esri.symbol");dojo.declare("esri.Graphic",null,{constructor:function(json,_3e1,_3e2,_3e3){if(json&&!(json instanceof esri.geometry.Geometry)){this.geometry=json.geometry?esri.geometry.fromJson(json.geometry):null;this.symbol=json.symbol?esri.symbol.fromJson(json.symbol):null;this.attributes=json.attributes||null;this.infoTemplate=json.infoTemplate?new esri.InfoTemplate(json.infoTemplate):null;}else{this.geometry=json;this.symbol=_3e1;this.attributes=_3e2;this.infoTemplate=_3e3;}},_shape:null,_graphicsLayer:null,_visible:true,visible:true,getDojoShape:function(){return this._shape;},getLayer:function(){return this._graphicsLayer;},setGeometry:function(_3e4){this.geometry=_3e4;var gl=this._graphicsLayer;if(gl){gl._updateExtent(this);gl._draw(this,true);}return this;},setSymbol:function(_3e5,_3e6){var gl=this._graphicsLayer,_3e7=this._shape;this.symbol=_3e5;if(_3e5){this.symbol._stroke=this.symbol._fill=null;}if(gl){if(_3e6){if(_3e7){gl._removeShape(this);}gl._draw(this,true);return this;}if(!this.geometry){return this;}var type=this.geometry.type;if(type==="point"||type==="multipoint"){gl._draw(this,true);}else{if(_3e7){gl._symbolizeShape(this);}}}return this;},setAttributes:function(_3e8){this.attributes=_3e8;return this;},setInfoTemplate:function(_3e9){this.infoTemplate=_3e9;return this;},_getEffInfoTemplate:function(){var _3ea=this.getLayer();return this.infoTemplate||(_3ea&&_3ea.infoTemplate);},getTitle:function(){var _3eb=this._getEffInfoTemplate();var _3ec=_3eb&&_3eb.title;if(dojo.isFunction(_3ec)){_3ec=_3ec.call(_3eb,this);}else{if(dojo.isString(_3ec)){var _3ed=this._graphicsLayer;var func=_3ed&&_3ed._getDateOpts;_3ec=esri.substitute(this.attributes,_3ec,{first:true,dateFormat:func&&func.call(_3ed)});}}return _3ec;},getContent:function(){var _3ee=this._getEffInfoTemplate();var _3ef=_3ee&&_3ee.content;if(dojo.isFunction(_3ef)){_3ef=_3ef.call(_3ee,this);}else{if(dojo.isString(_3ef)){var _3f0=this._graphicsLayer;var func=_3f0&&_3f0._getDateOpts;_3ef=esri.substitute(this.attributes,_3ef,{dateFormat:func&&func.call(_3f0)});}}return _3ef;},show:function(){this.visible=this._visible=true;var _3f1=this._shape,_3f2;if(_3f1){_3f2=_3f1.declaredClass.toLowerCase().indexOf("canvas")===-1?_3f1.getEventSource():null;if(_3f2){esri.show(_3f2);}}else{if(this._graphicsLayer){this._graphicsLayer._draw(this,true);}}return this;},hide:function(){this.visible=this._visible=false;var _3f3=this._shape,_3f4,_3f5;if(_3f3){_3f4=_3f3.declaredClass.toLowerCase().indexOf("canvas")===-1?_3f3.getEventSource():null;if(_3f4){esri.hide(_3f4);}else{_3f5=this._graphicsLayer;if(_3f5){_3f5._removeShape(this);}}}return this;},toJson:function(){var json={};if(this.geometry){json.geometry=this.geometry.toJson();}if(this.attributes){json.attributes=dojo.mixin({},this.attributes);}if(this.symbol){json.symbol=this.symbol.toJson();}if(this.infoTemplate){json.infoTemplate=this.infoTemplate.toJson();}return json;}});dojo.declare("esri.InfoTemplate",null,{constructor:function(_3f6,_3f7){if(_3f6&&dojo.isObject(_3f6)&&!dojo.isFunction(_3f6)){dojo.mixin(this,_3f6);}else{this.title=_3f6||"${*}";this.content=_3f7||"${*}";}},setTitle:function(_3f8){this.title=_3f8;return this;},setContent:function(_3f9){this.content=_3f9;return this;},toJson:function(){return esri._sanitize({title:this.title,content:this.content});}});});},"dojo/_base/lang":function(){define("dojo/_base/lang",["./kernel","../has","../sniff"],function(dojo,has){has.add("bug-for-in-skips-shadowed",function(){for(var i in {toString:1}){return 0;}return 1;});var _3fa=has("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],_3fb=_3fa.length,_3fc=function(_3fd,_3fe,_3ff){var p,i=0,_400=dojo.global;if(!_3ff){if(!_3fd.length){return _400;}else{p=_3fd[i++];try{_3ff=dojo.scopeMap[p]&&dojo.scopeMap[p][1];}catch(e){}_3ff=_3ff||(p in _400?_400[p]:(_3fe?_400[p]={}:undefined));}}while(_3ff&&(p=_3fd[i++])){_3ff=(p in _3ff?_3ff[p]:(_3fe?_3ff[p]={}:undefined));}return _3ff;},opts=Object.prototype.toString,_401=function(obj,_402,_403){return (_403||[]).concat(Array.prototype.slice.call(obj,_402||0));},_404=/\{([^\}]+)\}/g;var lang={_extraNames:_3fa,_mixin:function(dest,_405,_406){var name,s,i,_407={};for(name in _405){s=_405[name];if(!(name in dest)||(dest[name]!==s&&(!(name in _407)||_407[name]!==s))){dest[name]=_406?_406(s):s;}}if(has("bug-for-in-skips-shadowed")){if(_405){for(i=0;i<_3fb;++i){name=_3fa[i];s=_405[name];if(!(name in dest)||(dest[name]!==s&&(!(name in _407)||_407[name]!==s))){dest[name]=_406?_406(s):s;}}}}return dest;},mixin:function(dest,_408){if(!dest){dest={};}for(var i=1,l=arguments.length;i<l;i++){lang._mixin(dest,arguments[i]);}return dest;},setObject:function(name,_409,_40a){var _40b=name.split("."),p=_40b.pop(),obj=_3fc(_40b,true,_40a);return obj&&p?(obj[p]=_409):undefined;},getObject:function(name,_40c,_40d){return _3fc(name.split("."),_40c,_40d);},exists:function(name,obj){return lang.getObject(name,false,obj)!==undefined;},isString:function(it){return (typeof it=="string"||it instanceof String);},isArray:function(it){return it&&(it instanceof Array||typeof it=="array");},isFunction:function(it){return opts.call(it)==="[object Function]";},isObject:function(it){return it!==undefined&&(it===null||typeof it=="object"||lang.isArray(it)||lang.isFunction(it));},isArrayLike:function(it){return it&&it!==undefined&&!lang.isString(it)&&!lang.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(lang.isArray(it)||isFinite(it.length));},isAlien:function(it){return it&&!lang.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it));},extend:function(ctor,_40e){for(var i=1,l=arguments.length;i<l;i++){lang._mixin(ctor.prototype,arguments[i]);}return ctor;},_hitchArgs:function(_40f,_410){var pre=lang._toArray(arguments,2);var _411=lang.isString(_410);return function(){var args=lang._toArray(arguments);var f=_411?(_40f||dojo.global)[_410]:_410;return f&&f.apply(_40f||this,pre.concat(args));};},hitch:function(_412,_413){if(arguments.length>2){return lang._hitchArgs.apply(dojo,arguments);}if(!_413){_413=_412;_412=null;}if(lang.isString(_413)){_412=_412||dojo.global;if(!_412[_413]){throw (["lang.hitch: scope[\"",_413,"\"] is null (scope=\"",_412,"\")"].join(""));}return function(){return _412[_413].apply(_412,arguments||[]);};}return !_412?_413:function(){return _413.apply(_412,arguments||[]);};},delegate:(function(){function TMP(){};return function(obj,_414){TMP.prototype=obj;var tmp=new TMP();TMP.prototype=null;if(_414){lang._mixin(tmp,_414);}return tmp;};})(),_toArray:has("ie")?(function(){function slow(obj,_415,_416){var arr=_416||[];for(var x=_415||0;x<obj.length;x++){arr.push(obj[x]);}return arr;};return function(obj){return ((obj.item)?slow:_401).apply(this,arguments);};})():_401,partial:function(_417){var arr=[null];return lang.hitch.apply(dojo,arr.concat(lang._toArray(arguments)));},clone:function(src){if(!src||typeof src!="object"||lang.isFunction(src)){return src;}if(src.nodeType&&"cloneNode" in src){return src.cloneNode(true);}if(src instanceof Date){return new Date(src.getTime());}if(src instanceof RegExp){return new RegExp(src);}var r,i,l;if(lang.isArray(src)){r=[];for(i=0,l=src.length;i<l;++i){if(i in src){r.push(lang.clone(src[i]));}}}else{r=src.constructor?new src.constructor():{};}return lang._mixin(r,src,lang.clone);},trim:String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");},replace:function(tmpl,map,_418){return tmpl.replace(_418||_404,lang.isFunction(map)?map:function(_419,k){return lang.getObject(k,false,map);});}};1&&lang.mixin(dojo,lang);return lang;});},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query","./array","./html","../NodeList-dom"],function(dojo,_41a,_41b){var _41c=_41a.NodeList,nlp=_41c.prototype;nlp.connect=_41c._adaptAsForEach(function(){return dojo.connect.apply(this,arguments);});nlp.coords=_41c._adaptAsMap(dojo.coords);_41c.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];_41b.forEach(_41c.events,function(evt){var _41d="on"+evt;nlp[_41d]=function(a,b){return this.connect(_41d,a,b);};});dojo.NodeList=_41c;return _41c;});},"dojo/parser":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(dojo,_41e,_41f,_420,_421,_422,_423,_424,_425,_426,_427,has,_428,don,_429){new Date("X");var _42a=0;_425.after(_41e,"extend",function(){_42a++;},true);function _42b(ctor){var map=ctor._nameCaseMap,_42c=ctor.prototype;if(!map||map._extendCnt<_42a){map=ctor._nameCaseMap={};for(var name in _42c){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_42a;}return map;};var _42d={};function _42e(_42f){var ts=_42f.join();if(!_42d[ts]){var _430=[];for(var i=0,l=_42f.length;i<l;i++){var t=_42f[i];_430[_430.length]=(_42d[t]=_42d[t]||(_41e.getObject(t)||(~t.indexOf("/")&&require(t))));}var ctor=_430.shift();_42d[ts]=_430.length?(ctor.createSubclass?ctor.createSubclass(_430):ctor.extend.apply(ctor,_430)):ctor;}return _42d[ts];};var _431={_clearCache:function(){_42a++;_42d={};},_functionFromScript:function(_432,_433){var _434="",_435="",_436=(_432.getAttribute(_433+"args")||_432.getAttribute("args")),_437=_432.getAttribute("with");var _438=(_436||"").split(/\s*,\s*/);if(_437&&_437.length){_41f.forEach(_437.split(/\s*,\s*/),function(part){_434+="with("+part+"){";_435+="}";});}return new Function(_438,_434+_432.innerHTML+_435);},instantiate:function(_439,_43a,_43b){_43a=_43a||{};_43b=_43b||{};var _43c=(_43b.scope||dojo._scopeName)+"Type",_43d="data-"+(_43b.scope||dojo._scopeName)+"-",_43e=_43d+"type",_43f=_43d+"mixins";var list=[];_41f.forEach(_439,function(node){var type=_43c in _43a?_43a[_43c]:node.getAttribute(_43e)||node.getAttribute(_43c);if(type){var _440=node.getAttribute(_43f),_441=_440?[type].concat(_440.split(/\s*,\s*/)):[type];list.push({node:node,types:_441});}});return this._instantiate(list,_43a,_43b);},_instantiate:function(_442,_443,_444){var _445=_41f.map(_442,function(obj){var ctor=obj.ctor||_42e(obj.types);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_443,_444,obj.scripts,obj.inherited);},this);if(!_443._started&&!_444.noStart){_41f.forEach(_445,function(_446){if(typeof _446.startup==="function"&&!_446._started){_446.startup();}});}return _445;},construct:function(ctor,node,_447,_448,_449,_44a){var _44b=ctor&&ctor.prototype;_448=_448||{};var _44c={};if(_448.defaults){_41e.mixin(_44c,_448.defaults);}if(_44a){_41e.mixin(_44c,_44a);}var _44d;if(has("dom-attributes-explicit")){_44d=node.attributes;}else{if(has("dom-attributes-specified-flag")){_44d=_41f.filter(node.attributes,function(a){return a.specified;});}else{var _44e=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_44f=_44e.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_44d=_41f.map(_44f.split(/\s+/),function(name){var _450=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_450=="enctype"?node.getAttribute(_450):node.getAttributeNode(_450).value};});}}var _451=_448.scope||dojo._scopeName,_452="data-"+_451+"-",hash={};if(_451!=="dojo"){hash[_452+"props"]="data-dojo-props";hash[_452+"type"]="data-dojo-type";hash[_452+"mixins"]="data-dojo-mixins";hash[_451+"type"]="dojoType";hash[_452+"id"]="data-dojo-id";}var i=0,item,_453=[],_454,_455;while(item=_44d[i++]){var name=item.name,_456=name.toLowerCase(),_457=item.value;switch(hash[_456]||_456){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_455=_457;break;case "data-dojo-id":case "jsid":_454=_457;break;case "data-dojo-attach-point":case "dojoattachpoint":_44c.dojoAttachPoint=_457;break;case "data-dojo-attach-event":case "dojoattachevent":_44c.dojoAttachEvent=_457;break;case "class":_44c["class"]=node.className;break;case "style":_44c["style"]=node.style&&node.style.cssText;break;default:if(!(name in _44b)){var map=_42b(ctor);name=map[_456]||name;}if(name in _44b){switch(typeof _44b[name]){case "string":_44c[name]=_457;break;case "number":_44c[name]=_457.length?Number(_457):NaN;break;case "boolean":_44c[name]=_457.toLowerCase()!="false";break;case "function":if(_457===""||_457.search(/[^\w\.]+/i)!=-1){_44c[name]=new Function(_457);}else{_44c[name]=_41e.getObject(_457,false)||new Function(_457);}_453.push(name);break;default:var pVal=_44b[name];_44c[name]=(pVal&&"length" in pVal)?(_457?_457.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_457==""?new Date(""):_457=="now"?new Date():_426.fromISOString(_457)):(pVal instanceof _423)?(dojo.baseUrl+_457):_424.fromJson(_457);}}else{_44c[name]=_457;}}}for(var j=0;j<_453.length;j++){var _458=_453[j].toLowerCase();node.removeAttribute(_458);node[_458]=null;}if(_455){try{_455=_424.fromJson.call(_448.propsThis,"{"+_455+"}");_41e.mixin(_44c,_455);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_455+"'");}}_41e.mixin(_44c,_447);if(!_449){_449=(ctor&&(ctor._noScript||_44b._noScript)?[]:_428("> script[type^='dojo/']",node));}var _459=[],_45a=[],_45b=[],ons=[];if(_449){for(i=0;i<_449.length;i++){var _45c=_449[i];node.removeChild(_45c);var _45d=(_45c.getAttribute(_452+"event")||_45c.getAttribute("event")),prop=_45c.getAttribute(_452+"prop"),_45e=_45c.getAttribute(_452+"method"),_45f=_45c.getAttribute(_452+"advice"),_460=_45c.getAttribute("type"),nf=this._functionFromScript(_45c,_452);if(_45d){if(_460=="dojo/connect"){_459.push({method:_45d,func:nf});}else{if(_460=="dojo/on"){ons.push({event:_45d,func:nf});}else{_44c[_45d]=nf;}}}else{if(_460=="dojo/aspect"){_459.push({method:_45e,advice:_45f,func:nf});}else{if(_460=="dojo/watch"){_45b.push({prop:prop,func:nf});}else{_45a.push(nf);}}}}}var _461=ctor.markupFactory||_44b.markupFactory;var _462=_461?_461(_44c,node,ctor):new ctor(_44c,node);if(_454){_41e.setObject(_454,_462);}for(i=0;i<_459.length;i++){_425[_459[i].advice||"after"](_462,_459[i].method,_41e.hitch(_462,_459[i].func),true);}for(i=0;i<_45a.length;i++){_45a[i].call(_462);}for(i=0;i<_45b.length;i++){_462.watch(_45b[i].prop,_45b[i].func);}for(i=0;i<ons.length;i++){don(_462,ons[i].event,ons[i].func);}return _462;},scan:function(root,_463){var list=[],mids=[],_464={};var _465=(_463.scope||dojo._scopeName)+"Type",_466="data-"+(_463.scope||dojo._scopeName)+"-",_467=_466+"type",_468=_466+"textdir",_469=_466+"mixins";var node=root.firstChild;var _46a=_463.inherited;if(!_46a){function _46b(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_46b(node.parentNode,attr));};_46a={dir:_46b(root,"dir"),lang:_46b(root,"lang"),textDir:_46b(root,_468)};for(var key in _46a){if(!_46a[key]){delete _46a[key];}}}var _46c={inherited:_46a};var _46d;var _46e;function _46f(_470){if(!_470.inherited){_470.inherited={};var node=_470.node,_471=_46f(_470.parent);var _472={dir:node.getAttribute("dir")||_471.dir,lang:node.getAttribute("lang")||_471.lang,textDir:node.getAttribute(_468)||_471.textDir};for(var key in _472){if(_472[key]){_470.inherited[key]=_472[key];}}}return _470.inherited;};while(true){if(!node){if(!_46c||!_46c.node){break;}node=_46c.node.nextSibling;_46d=_46c.scripts;_46e=false;_46c=_46c.parent;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_46d&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_46d.push(node);}node=node.nextSibling;continue;}if(_46e){node=node.nextSibling;continue;}var type=node.getAttribute(_467)||node.getAttribute(_465);var _473=node.firstChild;if(!type&&(!_473||(_473.nodeType==3&&!_473.nextSibling))){node=node.nextSibling;continue;}var _474;var ctor=null;if(type){var _475=node.getAttribute(_469),_476=_475?[type].concat(_475.split(/\s*,\s*/)):[type];try{ctor=_42e(_476);}catch(e){}if(!ctor){_41f.forEach(_476,function(t){if(~t.indexOf("/")&&!_464[t]){_464[t]=true;mids[mids.length]=t;}});}var _477=ctor&&!ctor.prototype._noScript?[]:null;_474={types:_476,ctor:ctor,parent:_46c,node:node,scripts:_477};_474.inherited=_46f(_474);list.push(_474);}else{_474={node:node,scripts:_46d,parent:_46c};}node=_473;_46d=_477;_46e=ctor&&ctor.prototype.stopParser&&!(_463.template);_46c=_474;}var d=new _427();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}require(mids,function(){d.resolve(_41f.filter(list,function(_478){if(!_478.ctor){try{_478.ctor=_42e(_478.types);}catch(e){}}var _479=_478.parent;while(_479&&!_479.types){_479=_479.parent;}var _47a=_478.ctor&&_478.ctor.prototype;_478.instantiateChildren=!(_47a&&_47a.stopParser&&!(_463.template));_478.instantiate=!_479||(_479.instantiate&&_479.instantiateChildren);return _478.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_47b){var hash=_424.fromJson("{"+_47b.innerHTML+"}"),vars=[],mids=[],d=new _427();for(var name in hash){vars.push(name);mids.push(hash[name]);}require(mids,function(){for(var i=0;i<vars.length;i++){_41e.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _47c=new _427(),_47d=_47c.promise;_47c.resolve(true);var self=this;_428("script[type='dojo/require']",root).forEach(function(node){_47d=_47d.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _47d;},parse:function(_47e,_47f){var root;if(!_47f&&_47e&&_47e.rootNode){_47f=_47e;root=_47f.rootNode;}else{if(_47e&&_41e.isObject(_47e)&&!("nodeType" in _47e)){_47f=_47e;}else{root=_47e;}}root=root?_421.byId(root):_422.body();_47f=_47f||{};var _480=_47f.template?{template:true}:{},_481=[],self=this;var p=this._scanAmd(root,_47f).then(function(){return self.scan(root,_47f);}).then(function(_482){return _481=_481.concat(self._instantiate(_482,_480,_47f));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_41e.mixin(_481,p);return _481;}};if(1){dojo.parser=_431;}if(_420.parseOnLoad){_429(100,_431,"parse");}return _431;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/symbol":function(){define("esri/symbol",["dijit","dojo","dojox","dojo/require!dojo/_base/Color,dojox/gfx/_base,esri/utils"],function(_483,dojo,_484){dojo.provide("esri.symbol");dojo.require("dojo._base.Color");dojo.require("dojox.gfx._base");dojo.require("esri.utils");dojo.mixin(esri.symbol,{toDojoColor:function(clr){return clr&&new dojo.Color([clr[0],clr[1],clr[2],clr[3]/255]);},toJsonColor:function(clr){return clr&&[clr.r,clr.g,clr.b,Math.round(clr.a*255)];},fromJson:function(json){var type=json.type,_485=null;switch(type.substring(0,"esriXX".length)){case "esriSM":_485=new esri.symbol.SimpleMarkerSymbol(json);break;case "esriPM":_485=new esri.symbol.PictureMarkerSymbol(json);break;case "esriTS":_485=new esri.symbol.TextSymbol(json);break;case "esriSL":if(json.cap!==undefined){_485=new esri.symbol.CartographicLineSymbol(json);}else{_485=new esri.symbol.SimpleLineSymbol(json);}break;case "esriSF":_485=new esri.symbol.SimpleFillSymbol(json);break;case "esriPF":_485=new esri.symbol.PictureFillSymbol(json);break;}return _485;}});dojo.declare("esri.symbol.Symbol",null,{color:new dojo.Color([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(json){if(json&&dojo.isObject(json)){dojo.mixin(this,json);if(this.color&&esri._isDefined(this.color[0])){this.color=esri.symbol.toDojoColor(this.color);}var type=this.type;if(type&&type.indexOf("esri")===0){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[type];}}},setColor:function(_486){this.color=_486;return this;},toJson:function(){return {color:esri.symbol.toJsonColor(this.color)};}});dojo.declare("esri.symbol.MarkerSymbol",esri.symbol.Symbol,{constructor:function(json){if(json&&dojo.isObject(json)){this.size=_484.gfx.pt2px(this.size);this.xoffset=_484.gfx.pt2px(this.xoffset);this.yoffset=_484.gfx.pt2px(this.yoffset);}},setAngle:function(_487){this.angle=_487;return this;},setSize:function(size){this.size=size;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var size=_484.gfx.px2pt(this.size);size=isNaN(size)?undefined:size;var xoff=_484.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_484.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return dojo.mixin(this.inherited("toJson",arguments),{size:size,angle:this.angle,xoffset:xoff,yoffset:yoff});},angle:0,xoffset:0,yoffset:0,size:12});dojo.declare("esri.symbol.SimpleMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(json,size,_488,_489){if(json){if(dojo.isString(json)){this.style=json;if(size){this.size=size;}if(_488){this.outline=_488;}if(_489){this.color=_489;}}else{this.style=esri.valueOf(this._styles,this.style);if(json.outline){this.outline=new esri.symbol.SimpleLineSymbol(json.outline);}}}else{dojo.mixin(this,esri.symbol.defaultSimpleMarkerSymbol);this.size=_484.gfx.pt2px(this.size);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}if(!this.style){this.style=esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE;}},type:"simplemarkersymbol",setStyle:function(_48a){this.style=_48a;return this;},setOutline:function(_48b){this.outline=_48b;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_48c,_48d,_48e){this._targetWidth=_48c;this._targetHeight=_48d;this._spikeSize=_48e;},toJson:function(){var json=dojo.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_48f=this.outline;if(_48f){json.outline=_48f.toJson();}return esri._sanitize(json);},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond"}});dojo.mixin(esri.symbol.SimpleMarkerSymbol,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_TARGET:"target"});dojo.declare("esri.symbol.PictureMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(json,_490,_491){if(json){if(dojo.isString(json)){this.url=json;if(_490){this.width=_490;}if(_491){this.height=_491;}}else{this.width=_484.gfx.pt2px(json.width);this.height=_484.gfx.pt2px(json.height);var _492=json.imageData;if((!(dojo.isIE<9))&&_492){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_492;this.imageData=temp;}}}else{dojo.mixin(this,esri.symbol.defaultPictureMarkerSymbol);this.width=_484.gfx.pt2px(this.width);this.height=_484.gfx.pt2px(this.height);}},type:"picturemarkersymbol",getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_493){this.width=_493;return this;},setHeight:function(_494){this.height=_494;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},toJson:function(){var url=this.url,_495=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_495;var _496=temp.indexOf(";base64,")+8;_495=temp.substr(_496);}url=esri._getAbsoluteUrl(url);var _497=_484.gfx.px2pt(this.width);_497=isNaN(_497)?undefined:_497;var _498=_484.gfx.px2pt(this.height);_498=isNaN(_498)?undefined:_498;var _499=esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_495,contentType:this.contentType,width:_497,height:_498}));delete _499.color;delete _499.size;if(!_499.imageData){delete _499.imageData;}return _499;}});dojo.declare("esri.symbol.LineSymbol",esri.symbol.Symbol,{constructor:function(json){if(dojo.isObject(json)){this.width=_484.gfx.pt2px(this.width);}else{this.width=12;}},setWidth:function(_49a){this.width=_49a;return this;},toJson:function(){var _49b=_484.gfx.px2pt(this.width);_49b=isNaN(_49b)?undefined:_49b;return dojo.mixin(this.inherited("toJson",arguments),{width:_49b});}});dojo.declare("esri.symbol.SimpleLineSymbol",esri.symbol.LineSymbol,{constructor:function(json,_49c,_49d){if(json){if(dojo.isString(json)){this.style=json;if(_49c){this.color=_49c;}if(_49d){this.width=_49d;}}else{this.style=esri.valueOf(this._styles,json.style)||esri.symbol.SimpleLineSymbol.STYLE_SOLID;}}else{dojo.mixin(this,esri.symbol.defaultSimpleLineSymbol);this.color=new dojo.Color(this.color);this.width=_484.gfx.pt2px(this.width);}},type:"simplelinesymbol",setStyle:function(_49e){this.style=_49e;return this;},getStroke:function(){return (this.style===esri.symbol.SimpleLineSymbol.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));},_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame"}});dojo.mixin(esri.symbol.SimpleLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none"});dojo.declare("esri.symbol.CartographicLineSymbol",esri.symbol.SimpleLineSymbol,{constructor:function(json,_49f,_4a0,cap,join,_4a1){if(json){if(dojo.isString(json)){this.style=json;if(_49f){this.color=_49f;}if(_4a0!==undefined){this.width=_4a0;}if(cap){this.cap=cap;}if(join){this.join=join;}if(_4a1!==undefined){this.miterLimit=_4a1;}}else{this.cap=esri.valueOf(this._caps,json.cap);this.join=esri.valueOf(this._joins,json.join);this.width=_484.gfx.pt2px(json.width);this.miterLimit=_484.gfx.pt2px(json.miterLimit);}}else{dojo.mixin(this,esri.symbol.defaultCartographicLineSymbol);this.color=new dojo.Color(this.color);this.width=_484.gfx.pt2px(this.width);this.miterLimit=_484.gfx.pt2px(this.miterLimit);}},type:"cartographiclinesymbol",setCap:function(cap){this.cap=cap;return this;},setJoin:function(join){this.join=join;return this;},setMiterLimit:function(_4a2){this.miterLimit=_4a2;return this;},getStroke:function(){return dojo.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===esri.symbol.CartographicLineSymbol.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},toJson:function(){var _4a3=_484.gfx.px2pt(this.miterLimit);_4a3=isNaN(_4a3)?undefined:_4a3;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_4a3}));},_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"}});dojo.mixin(esri.symbol.CartographicLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"});dojo.declare("esri.symbol.FillSymbol",esri.symbol.Symbol,{constructor:function(json){if(json&&dojo.isObject(json)&&json.outline){this.outline=new esri.symbol.SimpleLineSymbol(json.outline);}},setOutline:function(_4a4){this.outline=_4a4;return this;},toJson:function(){var json=this.inherited("toJson",arguments);if(this.outline){json.outline=this.outline.toJson();}return json;}});dojo.declare("esri.symbol.SimpleFillSymbol",esri.symbol.FillSymbol,{constructor:function(json,_4a5,_4a6){if(json){if(dojo.isString(json)){this.style=json;if(_4a5!==undefined){this.outline=_4a5;}if(_4a6!==undefined){this.color=_4a6;}}else{this.style=esri.valueOf(this._styles,json.style);}}else{dojo.mixin(this,esri.symbol.defaultSimpleFillSymbol);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}var _4a7=this.style;if(_4a7!=="solid"&&_4a7!=="none"){this._src=dojo.moduleUrl("esri")+"images/symbol/sfs/"+_4a7+".png";}},type:"simplefillsymbol",setStyle:function(_4a8){this.style=_4a8;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var _4a9=this.style;if(_4a9===esri.symbol.SimpleFillSymbol.STYLE_NULL){return null;}else{if(_4a9===esri.symbol.SimpleFillSymbol.STYLE_SOLID){return this.color;}else{return dojo.mixin(dojo.mixin({},_484.gfx.defaultPattern),{src:this._src,width:10,height:10});}}},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"}});dojo.mixin(esri.symbol.SimpleFillSymbol,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"});dojo.declare("esri.symbol.PictureFillSymbol",esri.symbol.FillSymbol,{constructor:function(json,_4aa,_4ab,_4ac){if(json){if(dojo.isString(json)){this.url=json;if(_4aa!==undefined){this.outline=_4aa;}if(_4ab!==undefined){this.width=_4ab;}if(_4ac!==undefined){this.height=_4ac;}}else{this.xoffset=_484.gfx.pt2px(json.xoffset);this.yoffset=_484.gfx.pt2px(json.yoffset);this.width=_484.gfx.pt2px(json.width);this.height=_484.gfx.pt2px(json.height);var _4ad=json.imageData;if((!(dojo.isIE<9))&&_4ad){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_4ad;this.imageData=temp;}}}else{dojo.mixin(this,esri.symbol.defaultPictureFillSymbol);this.width=_484.gfx.pt2px(this.width);this.height=_484.gfx.pt2px(this.height);}},type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,setWidth:function(_4ae){this.width=_4ae;return this;},setHeight:function(_4af){this.height=_4af;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(_4b0){this.xscale=_4b0;return this;},setYScale:function(_4b1){this.yscale=_4b1;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return dojo.mixin({},_484.gfx.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},toJson:function(){var url=this.url,_4b2=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_4b2;var _4b3=temp.indexOf(";base64,")+8;_4b2=temp.substr(_4b3);}url=esri._getAbsoluteUrl(url);var _4b4=_484.gfx.px2pt(this.width);_4b4=isNaN(_4b4)?undefined:_4b4;var _4b5=_484.gfx.px2pt(this.height);_4b5=isNaN(_4b5)?undefined:_4b5;var xoff=_484.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_484.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;var json=esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_4b2,contentType:this.contentType,width:_4b4,height:_4b5,xoffset:xoff,yoffset:yoff,xscale:this.xscale,yscale:this.yscale}));if(!json.imageData){delete json.imageData;}return json;}});dojo.declare("esri.symbol.Font",null,{constructor:function(json,_4b6,_4b7,_4b8,_4b9){if(json){if(dojo.isObject(json)){dojo.mixin(this,json);}else{this.size=json;if(_4b6!==undefined){this.style=_4b6;}if(_4b7!==undefined){this.variant=_4b7;}if(_4b8!==undefined){this.weight=_4b8;}if(_4b9!==undefined){this.family=_4b9;}}}else{dojo.mixin(this,_484.gfx.defaultFont);}if(dojo.isIE<9&&this.size&&dojo.isString(this.size)&&this.size.indexOf("em")>-1){this.size=_484.gfx.pt2px(parseFloat(this.size)*12)+"px";}},setSize:function(size){this.size=size;return this;},setStyle:function(_4ba){this.style=_4ba;return this;},setVariant:function(_4bb){this.variant=_4bb;return this;},setWeight:function(_4bc){this.weight=_4bc;return this;},setFamily:function(_4bd){this.family=_4bd;return this;},toJson:function(){return esri._sanitize({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});dojo.mixin(esri.symbol.Font,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});dojo.declare("esri.symbol.TextSymbol",esri.symbol.Symbol,{constructor:function(json,font,_4be){dojo.mixin(this,esri.symbol.defaultTextSymbol);this.font=new esri.symbol.Font(this.font);this.color=new dojo.Color(this.color);if(json){if(dojo.isObject(json)){dojo.mixin(this,json);if(this.color&&esri._isDefined(this.color[0])){this.color=esri.symbol.toDojoColor(this.color);}this.type="textsymbol";this.font=new esri.symbol.Font(this.font);this.xoffset=_484.gfx.pt2px(this.xoffset);this.yoffset=_484.gfx.pt2px(this.yoffset);}else{this.text=json;if(font){this.font=font;}if(_4be){this.color=_4be;}}}},angle:0,xoffset:0,yoffset:0,setFont:function(font){this.font=font;return this;},setAngle:function(_4bf){this.angle=_4bf;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_4c0){this.align=_4c0;return this;},setDecoration:function(_4c1){this.decoration=_4c1;return this;},setRotated:function(_4c2){this.rotated=_4c2;return this;},setKerning:function(_4c3){this.kerning=_4c3;return this;},setText:function(text){this.text=text;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var xoff=_484.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_484.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:xoff,yoffset:yoff,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});dojo.mixin(esri.symbol.TextSymbol,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});dojo.mixin(esri.symbol,{defaultSimpleLineSymbol:{color:[0,0,0,1],style:esri.symbol.SimpleLineSymbol.STYLE_SOLID,width:1},defaultSimpleMarkerSymbol:{style:esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,color:[255,255,255,0.25],outline:esri.symbol.defaultSimpleLineSymbol,size:12,angle:0,xoffset:0,yoffset:0},defaultPictureMarkerSymbol:{url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0},defaultCartographicLineSymbol:{color:[0,0,0,1],style:esri.symbol.CartographicLineSymbol.STYLE_SOLID,width:1,cap:esri.symbol.CartographicLineSymbol.CAP_BUTT,join:esri.symbol.CartographicLineSymbol.JOIN_MITER,miterLimit:10},defaultSimpleFillSymbol:{style:esri.symbol.SimpleFillSymbol.STYLE_SOLID,color:[0,0,0,0.25],outline:esri.symbol.defaultSimpleLineSymbol},defaultPictureFillSymbol:{xoffset:0,yoffset:0,width:12,height:12},defaultTextSymbol:{color:[0,0,0,1],font:_484.gfx.defaultFont,angle:0,xoffset:0,yoffset:0},getShapeDescriptors:function(_4c4){var _4c5,fill,_4c6;var type=_4c4.type;switch(type){case "simplemarkersymbol":var _4c7=_4c4.style,SMS=esri.symbol.SimpleMarkerSymbol;var size=_4c4.size||_484.gfx.pt2px(esri.symbol.defaultSimpleMarkerSymbol.size),cx=0,cy=0,half=size/2;var left=cx-half,_4c8=cx+half,top=cy-half,_4c9=cy+half;switch(_4c7){case SMS.STYLE_CIRCLE:_4c5={type:"circle",cx:cx,cy:cy,r:half};fill=_4c4.getFill();_4c6=_4c4.getStroke();if(_4c6){_4c6.style=_4c6.style||"Solid";}break;case SMS.STYLE_CROSS:_4c5={type:"path",path:"M "+left+",0 L "+_4c8+",0 M 0,"+top+" L 0,"+_4c9+" E"};fill=null;_4c6=_4c4.getStroke();break;case SMS.STYLE_DIAMOND:_4c5={type:"path",path:"M "+left+",0 L 0,"+top+" L "+_4c8+",0 L 0,"+_4c9+" L "+left+",0 E"};fill=_4c4.getFill();_4c6=_4c4.getStroke();break;case SMS.STYLE_SQUARE:_4c5={type:"path",path:"M "+left+","+_4c9+" L "+left+","+top+" L "+_4c8+","+top+" L "+_4c8+","+_4c9+" L "+left+","+_4c9+" E"};fill=_4c4.getFill();_4c6=_4c4.getStroke();break;case SMS.STYLE_X:_4c5={type:"path",path:"M "+left+","+_4c9+" L "+_4c8+","+top+" M "+left+","+top+" L "+_4c8+","+_4c9+" E"};fill=null;_4c6=_4c4.getStroke();break;}break;case "picturemarkersymbol":_4c5={type:"image",x:0,y:0,width:16,height:16,src:""};_4c5.x=_4c5.x-Math.round(_4c4.width/2);_4c5.y=_4c5.y-Math.round(_4c4.height/2);_4c5.width=_4c4.width;_4c5.height=_4c4.height;_4c5.src=_4c4.url;break;case "simplelinesymbol":case "cartographiclinesymbol":_4c5={type:"path",path:"M -15,0 L 15,0 E"};fill=null;_4c6=_4c4.getStroke();break;case "simplefillsymbol":case "picturefillsymbol":_4c5={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};fill=_4c4.getFill();_4c6=_4c4.getStroke();break;}return {defaultShape:_4c5,fill:fill,stroke:_4c6};}});dojo.mixin(esri.symbol.defaultTextSymbol,_484.gfx.defaultText,{type:"textsymbol",align:"middle"});});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_4ca,_4cb,_4cc,_4cd){return _4ca("dijit.form.ToggleButton",[_4cc,_4cd],{baseClass:"dijitToggleButton",setChecked:function(_4ce){_4cb.deprecated("setChecked("+_4ce+") is deprecated. Use set('checked',"+_4ce+") instead.","","2.0");this.set("checked",_4ce);}});});},"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/lang","../_base/array"],function(lang,_4cf){var _4d0={};lang.setObject("dojo.date.stamp",_4d0);_4d0.fromISOString=function(_4d1,_4d2){if(!_4d0._isoRegExp){_4d0._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _4d3=_4d0._isoRegExp.exec(_4d1),_4d4=null;if(_4d3){_4d3.shift();if(_4d3[1]){_4d3[1]--;}if(_4d3[6]){_4d3[6]*=1000;}if(_4d2){_4d2=new Date(_4d2);_4cf.forEach(_4cf.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _4d2["get"+prop]();}),function(_4d5,_4d6){_4d3[_4d6]=_4d3[_4d6]||_4d5;});}_4d4=new Date(_4d3[0]||1970,_4d3[1]||0,_4d3[2]||1,_4d3[3]||0,_4d3[4]||0,_4d3[5]||0,_4d3[6]||0);if(_4d3[0]<100){_4d4.setFullYear(_4d3[0]||1970);}var _4d7=0,_4d8=_4d3[7]&&_4d3[7].charAt(0);if(_4d8!="Z"){_4d7=((_4d3[8]||0)*60)+(Number(_4d3[9])||0);if(_4d8!="-"){_4d7*=-1;}}if(_4d8){_4d7-=_4d4.getTimezoneOffset();}if(_4d7){_4d4.setTime(_4d4.getTime()+_4d7*60000);}}return _4d4;};_4d0.toISOString=function(_4d9,_4da){var _4db=function(n){return (n<10)?"0"+n:n;};_4da=_4da||{};var _4dc=[],_4dd=_4da.zulu?"getUTC":"get",date="";if(_4da.selector!="time"){var year=_4d9[_4dd+"FullYear"]();date=["0000".substr((year+"").length)+year,_4db(_4d9[_4dd+"Month"]()+1),_4db(_4d9[_4dd+"Date"]())].join("-");}_4dc.push(date);if(_4da.selector!="date"){var time=[_4db(_4d9[_4dd+"Hours"]()),_4db(_4d9[_4dd+"Minutes"]()),_4db(_4d9[_4dd+"Seconds"]())].join(":");var _4de=_4d9[_4dd+"Milliseconds"]();if(_4da.milliseconds){time+="."+(_4de<100?"0":"")+_4db(_4de);}if(_4da.zulu){time+="Z";}else{if(_4da.selector!="time"){var _4df=_4d9.getTimezoneOffset();var _4e0=Math.abs(_4df);time+=(_4df>0?"-":"+")+_4db(Math.floor(_4e0/60))+":"+_4db(_4e0%60);}}_4dc.push(time);}return _4dc.join("T");};return _4d0;});},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_4e1,lang,_4e2,has,win,arr,dom,_4e3,_4e4){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_4e5){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_4e5+" ")>=0;};g._addClass=function(node,_4e6){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_4e6+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_4e6);}};g._removeClass=function(node,_4e7){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_4e7+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _4e8={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_4e3.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _4e8){div.style.fontSize=p;_4e8[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _4e8;};var _4e9=null;b._getCachedFontMeasurements=function(_4ea){if(_4ea||!_4e9){_4e9=b._getFontMeasurements();}return _4e9;};var _4eb=null,_4ec={};b._getTextBox=function(text,_4ed,_4ee){var m,s,al=arguments.length;var i;if(!_4eb){_4eb=_4e3.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_4eb;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_4ed){for(i in _4ed){if(i in _4ec){continue;}s[i]=_4ed[i];}}if(al>2&&_4ee){m.className=_4ee;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _4e4.getMarginBox(m);}};var _4ef=0;b._getUniqueId=function(){var id;do{id=_4e1._scopeName+"xUnique"+(++_4ef);}while(dom.byId(id));return id;};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _4f0={};return function(type){var t=_4f0[type];if(t){return new t();}t=_4f0[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(_4f1){return (_4f1 instanceof _4e2)?_4f1:new _4e2(_4f1);},normalizeParameters:function(_4f2,_4f3){var x;if(_4f3){var _4f4={};for(x in _4f2){if(x in _4f3&&!(x in _4f4)){_4f2[x]=_4f3[x];}}}return _4f2;},makeParameters:function(_4f5,_4f6){var i=null;if(!_4f6){return lang.delegate(_4f5);}var _4f7={};for(i in _4f5){if(!(i in _4f7)){_4f7[i]=lang.clone((i in _4f6)?_4f6[i]:_4f5[i]);}}return _4f7;},formatNumber:function(x,_4f8){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _4f9=val.indexOf(".");if(_4f9>=0&&val.length-_4f9>5){val=x.toFixed(4);}}if(x<0){return val;}return _4f8?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _4fa=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_4fa;case "in":return val*72*_4fa;case "pc":return val*12*_4fa;case "mm":return val*g.mm_in_pt*_4fa;case "cm":return val*g.cm_in_pt*_4fa;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_4fb){var ns=typeof _4fb=="string"?g[_4fb]:_4fb;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","EsriPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});}}});return g;});},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(dojo,on,has,dom,win){has.add("dom-quirks",win.doc&&win.doc.compatMode=="BackCompat");has.add("events-mouseenter",win.doc&&"onmouseenter" in win.doc.createElement("div"));has.add("events-mousewheel",win.doc&&"onmousewheel" in win.doc);var _4fc;if(has("dom-quirks")||!has("dom-addeventlistener")){_4fc={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,_4fd){return e.button&_4fd;},isLeft:function(e){return e.button&1;},isMiddle:function(e){return e.button&4;},isRight:function(e){return e.button&2;}};}else{_4fc={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,_4fe){return e.button==_4fe;},isLeft:function(e){return e.button==0;},isMiddle:function(e){return e.button==1;},isRight:function(e){return e.button==2;}};}dojo.mouseButtons=_4fc;function _4ff(type,_500){var _501=function(node,_502){return on(node,type,function(evt){if(_500){return _500(evt,_502);}if(!dom.isDescendant(evt.relatedTarget,node)){return _502.call(this,evt);}});};_501.bubble=function(_503){return _4ff(type,function(evt,_504){var _505=_503(evt.target);var _506=evt.relatedTarget;if(_505&&(_505!=(_506&&_506.nodeType==1&&_503(_506)))){return _504.call(_505,evt);}});};return _501;};var _507;if(has("events-mousewheel")){_507="mousewheel";}else{_507=function(node,_508){return on(node,"DOMMouseScroll",function(evt){evt.wheelDelta=-evt.detail;_508.call(this,evt);});};}return {_eventHandler:_4ff,enter:_4ff("mouseover"),leave:_4ff("mouseout"),wheel:_507,isLeft:_4fc.isLeft,isMiddle:_4fc.isMiddle,isRight:_4fc.isRight};});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(_509,lang,_50a,when){return _509("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_50b){if(_50b){this.set(_50b);}},_get:function(name,_50c){return typeof this[_50c.g]==="function"?this[_50c.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_50d){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _50e=this._getAttrNames(name),_50f=this._get(name,_50e),_510=this[_50e.s],_511;if(typeof _510==="function"){_511=_510.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_50d;}if(this._watchCallbacks){var self=this;when(_511,function(){self._watchCallbacks(name,_50f,_50d);});}return this;},_changeAttrValue:function(name,_512){var _513=this.get(name);this[name]=_512;if(this._watchCallbacks){this._watchCallbacks(name,_513,_512);}return this;},watch:function(name,_514){var _515=this._watchCallbacks;if(!_515){var self=this;_515=this._watchCallbacks=function(name,_516,_517,_518){var _519=function(_51a){if(_51a){_51a=_51a.slice();for(var i=0,l=_51a.length;i<l;i++){_51a[i].call(self,name,_516,_517);}}};_519(_515["_"+name]);if(!_518){_519(_515["*"]);}};}if(!_514&&typeof name==="function"){_514=name;name="*";}else{name="_"+name;}var _51b=_515[name];if(typeof _51b!=="object"){_51b=_515[name]=[];}_51b.push(_514);var _51c={};_51c.unwatch=_51c.remove=function(){var _51d=_50a.indexOf(_51b,_514);if(_51d>-1){_51b.splice(_51d,1);}};return _51c;}});});},"esri/IdentityManagerBase":function(){define("esri/IdentityManagerBase",["dijit","dojo","dojox","dojo/require!dojo/cookie,esri/utils"],function(_51e,dojo,_51f){dojo.provide("esri.IdentityManagerBase");dojo.require("dojo.cookie");dojo.require("esri.utils");(function(){var _520={};var _521=function(_522,_523){var _524=new dojo._Url(_522).host,_525=new dojo._Url(_523.server).host,_526=/.+\.arcgis\.com$/i;return (_526.test(_524)&&_526.test(_525));};dojo.declare("esri.IdentityManagerBase",null,{constructor:function(){this._portalConfig=dojo.getObject("esriGeowConfig");this.serverInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];},tokenValidity:60,signInPage:null,_busy:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_publicUrls:[/\/arcgis\/tokens/i,/\/sharing\/generatetoken/i,/\/rest\/info/i],registerServers:function(_527){var _528=this.serverInfos;if(_528){_527=dojo.filter(_527,function(info){return !this.findServerInfo(info.server);},this);this.serverInfos=_528.concat(_527);}else{this.serverInfos=_527;}dojo.forEach(_527,function(info){if(info.owningSystemUrl){this._portals.push(info.owningSystemUrl);}},this);},toJson:function(){return esri._sanitize({"serverInfos":dojo.map(this.serverInfos,function(_529){return _529.toJson();}),"credentials":dojo.map(this.credentials,function(crd){return crd.toJson();})});},initialize:function(json){if(!json){return;}if(dojo.isString(json)){json=dojo.fromJson(json);}var _52a=json.serverInfos,_52b=json.credentials;if(_52a){var _52c=[];dojo.forEach(_52a,function(_52d){if(_52d.server&&_52d.tokenServiceUrl){_52c.push(_52d.declaredClass?_52d:new esri.ServerInfo(_52d));}});if(_52c.length){this.registerServers(_52c);}}if(_52b){dojo.forEach(_52b,function(crd){if(crd.userId&&crd.server&&crd.token&&crd.expires&&(crd.expires>(new Date()).getTime())){crd=crd.declaredClass?crd:new esri.Credential(crd);crd.onTokenChange();this.credentials.push(crd);}},this);}},findServerInfo:function(_52e){var _52f;_52e=this._sanitizeUrl(_52e);dojo.some(this.serverInfos,function(info){if(esri._hasSameOrigin(info.server,_52e,true)){_52f=info;}return !!_52f;});return _52f;},findCredential:function(_530,_531){var _532;_530=this._sanitizeUrl(_530);if(_531){dojo.some(this.credentials,function(crd){if(esri._hasSameOrigin(_530,crd.server,true)&&_531===crd.userId){_532=crd;}return !!_532;},this);}else{dojo.some(this.credentials,function(crd){if(esri._hasSameOrigin(_530,crd.server,true)&&this._getIdenticalSvcIdx(_530,crd)!==-1){_532=crd;}return !!_532;},this);}return _532;},getCredential:function(_533,_534){var _535,_536;if(esri._isDefined(_534)){if(dojo.isObject(_534)){_535=!!_534.token;_536=_534.error;}else{_535=_534;}}_533=this._sanitizeUrl(_533);var dfd=new dojo.Deferred(esri._dfdCanceller),err,_537=this._isAdminResource(_533),_538=(_535&&this._doPortalSignIn(_533))?dojo.cookie("esri_auth"):null;if(_538){_538=dojo.fromJson(_538);err=new Error("You are currently signed in as: '"+_538.email+"'. You do not have access to this resource: "+_533);err.code="IdentityManagerBase."+1;err.messageCode=_536?_536.messageCode:null;err.subcode=_536?_536.subcode:null;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}var _539=this._findCredential(_533,_534);if(_539){dfd.callback(_539);return dfd;}var _53a=this.findServerInfo(_533);if(!_53a){var _53b=this._getTokenSvcUrl(_533);if(!_53b){err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}_53a=new esri.ServerInfo();_53a.server=this._getOrigin(_533);if(dojo.isString(_53b)){_53a.tokenServiceUrl=_53b;}else{_53a._restInfoDfd=_53b;}this.registerServers([_53a]);}return this._enqueue(_533,_53a,_534,dfd,_537);},getResourceName:function(_53c){if(this._isRESTService(_53c)){return _53c.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"";}else{return (this._gwUser.test(_53c)&&_53c.replace(this._gwUser,"$1"))||(this._gwItem.test(_53c)&&_53c.replace(this._gwItem,"$1"))||(this._gwGroup.test(_53c)&&_53c.replace(this._gwGroup,"$1"))||"";}},generateToken:function(_53d,_53e,_53f){var _540,_541,_542;if(_53f){_540=_53f.isAdmin;_541=_53f.serverUrl;_542=_53f.token;}var _543=esri.request({url:_540?_53d.adminTokenServiceUrl:_53d.tokenServiceUrl,content:{request:"getToken",username:_53e&&_53e.username,password:_53e&&_53e.password,serverUrl:_541,token:_542,expiration:esri.id.tokenValidity,referer:(_540||_53d.tokenServiceUrl.toLowerCase().indexOf("/sharing/generatetoken")!==-1)?window.location.href:null,client:_540?"referer":null,f:"json"},handleAs:"json"},{usePost:true,disableIdentityLookup:true,useProxy:this._useProxy(_53d,_53f)});_543.addCallback(function(_544){if(!_544||!_544.token){var err=new Error("Unable to generate token");err.code="IdentityManagerBase."+3;err.log=dojo.config.isDebug;return err;}var _545=_53d.server;if(!_520[_545]){_520[_545]={};}if(_53e){_520[_545][_53e.username]=_53e.password;}return _544;});_543.addErrback(function(_546){});return _543;},isBusy:function(){return !!this._busy;},setRedirectionHandler:function(_547){this._redirectFunc=_547;},setProtocolErrorHandler:function(_548){this._protocolFunc=_548;},signIn:function(){},_findCredential:function(_549,_54a){var idx=-1,cred,_54b,_54c,_54d,_54e=_54a&&_54a.token,_54f=_54a&&_54a.resource,_550=dojo.filter(this.credentials,function(crd){return esri._hasSameOrigin(crd.server,_549,true);});_549=_54f||_549;if(_550.length){if(_550.length===1){cred=_550[0];_54d=this.findServerInfo(cred.server);_54b=_54d&&_54d.owningSystemUrl;_54c=_54b&&!_521(_54b,_54d)&&this.findCredential(_54b,cred.userId);idx=this._getIdenticalSvcIdx(_549,cred);if(_54e){if(idx!==-1){cred.resources.splice(idx,1);this._removeResource(_549,_54c);}}else{if(idx===-1){cred.resources.push(_549);}this._addResource(_549,_54c);return cred;}}else{var _551,i;dojo.some(_550,function(crd){i=this._getIdenticalSvcIdx(_549,crd);if(i!==-1){_551=crd;_54d=this.findServerInfo(_551.server);_54b=_54d&&_54d.owningSystemUrl;_54c=_54b&&!_521(_54b,_54d)&&this.findCredential(_54b,_551.userId);idx=i;return true;}return false;},this);if(_54e){if(_551){_551.resources.splice(idx,1);this._removeResource(_549,_54c);}}else{if(_551){this._addResource(_549,_54c);return _551;}}}}},_addResource:function(_552,_553){if(_553){if(this._getIdenticalSvcIdx(_552,_553)===-1){_553.resources.push(_552);}}},_removeResource:function(_554,_555){var idx=-1;if(_555){idx=this._getIdenticalSvcIdx(_554,_555);if(idx>-1){_555.resources.splice(idx,1);}}},_useProxy:function(_556,_557){return (_557&&_557.isAdmin)||(!this._isPortalDomain(_556.tokenServiceUrl)&&_556.currentVersion==10.1&&!esri._hasSameOrigin(_556.tokenServiceUrl,window.location.href));},_getOrigin:function(_558){var uri=new dojo._Url(_558);return uri.scheme+"://"+uri.host+(esri._isDefined(uri.port)?(":"+uri.port):"");},_sanitizeUrl:function(url){url=dojo.trim(url);var _559=(esri.config.defaults.io.proxyUrl||"").toLowerCase(),mark=_559?url.toLowerCase().indexOf(_559+"?"):-1;if(mark!==-1){url=url.substring(mark+_559.length+1);}return esri.urlToObject(url).path;},_isRESTService:function(_55a){return (_55a.indexOf(this._agsRest)>-1);},_isAdminResource:function(_55b){return this._agsAdmin.test(_55b);},_isIdenticalService:function(_55c,_55d){var _55e;if(this._isRESTService(_55c)&&this._isRESTService(_55d)){var _55f=this._getSuffix(_55c).toLowerCase(),_560=this._getSuffix(_55d).toLowerCase();_55e=(_55f===_560);if(!_55e){var _561=/(.*)\/(MapServer|FeatureServer).*/ig;_55e=(_55f.replace(_561,"$1")===_560.replace(_561,"$1"));}}else{if(this._isPortalDomain(_55c)){_55e=true;}else{if(this._isAdminResource(_55c)&&this._isAdminResource(_55d)){return true;}}}return _55e;},_isPortalDomain:function(_562){_562=_562.toLowerCase();var _563=(new dojo._Url(_562)).authority,_564=this._portalConfig,_565=(_563.indexOf(this._agolSuffix)!==-1);if(!_565&&_564){_565=esri._hasSameOrigin(_564.restBaseUrl,_562,true);}if(!_565){if(!this._arcgisUrl){var _566=dojo.getObject("esri.arcgis.utils.arcgisUrl");if(_566){this._arcgisUrl=(new dojo._Url(_566)).authority;}}if(this._arcgisUrl){_565=(this._arcgisUrl.toLowerCase()===_563);}}if(!_565){_565=dojo.some(this._portals,function(_567){return esri._hasSameOrigin(_567,_562,true);});}return _565;},_isIdProvider:function(_568,_569){var i=-1,j=-1;dojo.forEach(this._gwDomains,function(_56a,idx){if(i===-1&&_56a.regex.test(_568)){i=idx;}if(j===-1&&_56a.regex.test(_569)){j=idx;}});var _56b=false;if(i>-1&&j>-1){if(i===0||i===4){if(j===0||j===4){_56b=true;}}else{if(i===1){if(j===1||j===2){_56b=true;}}else{if(i===2){if(j===2){_56b=true;}}else{if(i===3){if(j===3){_56b=true;}}}}}}if(!_56b){var _56c=this.findServerInfo(_569),_56d=_56c&&_56c.owningSystemUrl;if(_56d&&_521(_56d,_56c)&&this._isPortalDomain(_56d)&&this._isIdProvider(_568,_56d)){_56b=true;}}return _56b;},_isPublic:function(_56e){_56e=this._sanitizeUrl(_56e);return dojo.some(this._publicUrls,function(_56f){return _56f.test(_56e);});},_getIdenticalSvcIdx:function(_570,_571){var idx=-1;dojo.some(_571.resources,function(rsrc,i){if(this._isIdenticalService(_570,rsrc)){idx=i;return true;}return false;},this);return idx;},_getSuffix:function(_572){return _572.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1");},_getTokenSvcUrl:function(_573){var _574,dfd;if(this._isRESTService(_573)){_574=_573.substring(0,_573.toLowerCase().indexOf("/rest/"))+"/admin/generateToken";_573=_573.substring(0,_573.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info";if(this._isPortalDomain(_573)){_573=_573.replace(/http:/i,"https:");}dfd=esri.request({url:_573,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_574;return dfd;}else{if(this._isPortalDomain(_573)){var url="";dojo.some(this._gwDomains,function(_575){if(_575.regex.test(_573)){url=_575.tokenServiceUrl;return true;}return false;});if(!url){var _576=this._getOrigin(_573);url=_576.replace(/http:/i,"https:")+this._gwTokenUrl;}return url;}else{if(_573.toLowerCase().indexOf("premium.arcgisonline.com")!==-1){return "https://premium.arcgisonline.com/server/tokens";}else{if(this._isAdminResource(_573)){_574=_573.substring(0,_573.toLowerCase().indexOf("/admin/")+"/admin/".length)+"generateToken";_573=_573.substring(0,_573.toLowerCase().indexOf("/admin/"))+"/rest/info";dfd=esri.request({url:_573,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_574;return dfd;}}}}},_hasPortalSession:function(){return dojo.cookie.isSupported()?!!dojo.cookie("esri_auth"):false;},_doPortalSignIn:function(_577){if(dojo.cookie.isSupported()){var _578=dojo.cookie("esri_auth"),_579=this._portalConfig,_57a=window.location.href,_57b=this.findServerInfo(_577);if((_579||this._isPortalDomain(_57a)||_578)&&(this._isPortalDomain(_577)||(_57b&&_57b.owningSystemUrl&&this._isPortalDomain(_57b.owningSystemUrl)))&&(this._isIdProvider(_57a,_577)||(_579&&(esri._hasSameOrigin(_579.restBaseUrl,_577,true)||this._isIdProvider(_579.restBaseUrl,_577)))||esri._hasSameOrigin(_57a,_577,true))){return true;}}return false;},_checkProtocol:function(_57c,_57d,_57e){var _57f=true,_580=_57d.tokenServiceUrl;if(dojo.trim(_580).toLowerCase().indexOf("https:")===0&&window.location.href.toLowerCase().indexOf("https:")!==0&&!esri._canDoXOXHR(_580)&&!esri._canDoXOXHR(esri._getProxyUrl(true).path)){_57f=this._protocolFunc?!!this._protocolFunc({resourceUrl:_57c,serverInfo:_57d}):false;if(!_57f){var err=new Error("Aborted the Sign-In process to avoid sending password over insecure connection.");err.code="IdentityManagerBase."+4;err.log=dojo.config.isDebug;console.log(err.message);_57e(err);}}return _57f;},_enqueue:function(_581,_582,_583,dfd,_584){if(!dfd){dfd=new dojo.Deferred(esri._dfdCanceller);}dfd.resUrl_=_581;dfd.sinfo_=_582;dfd.options_=_583;dfd.admin_=_584;if(this._busy){if(esri._hasSameOrigin(_581,this._busy.resUrl_,true)){this._soReqs.push(dfd);}else{this._xoReqs.push(dfd);}}else{this._doSignIn(dfd);}return dfd;},_doSignIn:function(dfd){this._busy=dfd;var self=this;var _585=function(_586){var _587=dfd.options_&&dfd.options_.resource;if(!_586.resources){_586.resources=[];}_586.resources.push(_587||dfd.resUrl_);_586.onTokenChange();if(dojo.indexOf(self.credentials,_586)===-1){self.credentials.push(_586);}var reqs=self._soReqs,_588={};self._soReqs=[];dojo.forEach(reqs,function(_589){if(!this._isIdenticalService(dfd.resUrl_,_589.resUrl_)){var _58a=this._getSuffix(_589.resUrl_);if(!_588[_58a]){_588[_58a]=true;_586.resources.push(_589.resUrl_);}}},self);dfd.callback(_586);dojo.forEach(reqs,function(_58b){_58b.callback(_586);});self._busy=dfd.resUrl_=dfd.sinfo_=null;if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_58c=function(_58d){dfd.errback(_58d);self._busy=dfd.resUrl_=dfd.sinfo_=null;if(self._soReqs.length){self._doSignIn(self._soReqs.shift());}if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_58e=function(){if(self._doPortalSignIn(dfd.resUrl_)){var _58f=dojo.cookie("esri_auth"),_590=self._portalConfig;if(_58f){_58f=dojo.fromJson(_58f);_585(new esri.Credential({userId:_58f.email,server:dfd.sinfo_.server,token:_58f.token,expires:null}));return;}else{var _591="",_592=window.location.href;if(self.signInPage){_591=self.signInPage;}else{if(_590){_591=_590.baseUrl+_590.signin;}else{if(self._isIdProvider(_592,dfd.resUrl_)){_591=self._getOrigin(_592)+"/home/signin.html";}else{_591=dfd.sinfo_.server+"/home/signin.html";}}}_591=_591.replace(/http:/i,"https:");if(_590&&_590.useSSL===false){_591=_591.replace(/https:/i,"http:");}if(_592.toLowerCase().replace("https","http").indexOf(_591.toLowerCase().replace("https","http"))===0){var err=new Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+dfd.resUrl_);err.code="IdentityManagerBase."+5;err.log=dojo.config.isDebug;_58c(err);}else{if(self._redirectFunc){self._redirectFunc({signInPage:_591,returnUrlParamName:"returnUrl",returnUrl:_592,resourceUrl:dfd.resUrl_,serverInfo:dfd.sinfo_});}else{window.location=_591+"?returnUrl="+window.escape(_592);}}return;}}else{if(self._checkProtocol(dfd.resUrl_,dfd.sinfo_,_58c)){var _593=dfd.options_;if(dfd.admin_){_593=_593||{};_593.isAdmin=true;}dfd._pendingDfd=self.signIn(dfd.resUrl_,dfd.sinfo_,_593).addCallbacks(_585,_58c);}}},_594=function(){var _595=dfd.sinfo_,_596=_595.owningSystemUrl,_597=dfd.options_,_598,_599,_59a;if(_597){_598=_597.token;_599=_597.error;}_59a=self._findCredential(_596,{token:_598,resource:dfd.resUrl_});if(_59a){var _59b=self.findCredential(dfd.resUrl_,_59a.userId);if(_59b){_585(_59b);return;}var _59c=(dfd._pendingDfd=self.generateToken(self.findServerInfo(_59a.server),null,{serverUrl:dfd.resUrl_,token:_59a.token}));_59c.addCallbacks(function(_59d){_585(new esri.Credential({userId:_59a.userId,server:_595.server,token:_59d.token,expires:esri._isDefined(_59d.expires)?Number(_59d.expires):null,ssl:!!_59d.ssl,isAdmin:dfd.admin_,validity:_595.shortLivedTokenValidity}));},_58c);}else{self._busy=null;if(_598){dfd.options_.token=null;}var _59e=(dfd._pendingDfd=self.getCredential(_596,{resource:dfd.resUrl_,token:_598,error:_599}));_59e.addCallbacks(function(_59f){self._enqueue(dfd.resUrl_,dfd.sinfo_,dfd.options_,dfd,dfd.admin_);},function(_5a0){_58c(_5a0);});}};var _5a1=dfd.sinfo_.tokenServiceUrl,_5a2=dfd.sinfo_.owningSystemUrl;if(_5a1){if(_5a2&&!_521(_5a2,dfd.sinfo_)){_594();}else{_58e();}}else{dfd.sinfo_._restInfoDfd.addCallbacks(function(_5a3){var _5a4=dfd.sinfo_;_5a4.adminTokenServiceUrl=_5a4._restInfoDfd.adminUrl_;_5a4._restInfoDfd=null;_5a4.tokenServiceUrl=dojo.getObject("authInfo.tokenServicesUrl",false,_5a3)||dojo.getObject("authInfo.tokenServiceUrl",false,_5a3)||dojo.getObject("tokenServiceUrl",false,_5a3);_5a4.shortLivedTokenValidity=dojo.getObject("authInfo.shortLivedTokenValidity",false,_5a3);_5a4.currentVersion=_5a3.currentVersion;_5a4.owningTenant=_5a3.owningTenant;var _5a5=(_5a4.owningSystemUrl=_5a3.owningSystemUrl);if(_5a5){self._portals.push(_5a5);if(_521(_5a5,_5a4)){var _5a6=self.findCredential(_5a5);if(!_5a6){dojo.some(self.credentials,function(cred){if(this._isIdProvider(_5a5,cred.server)){_5a6=cred;}return !!_5a6;},self);}if(_5a6){_5a6=_5a6.toJson();_5a6.resources=null;_5a6.server=_5a4.server;_585(new esri.Credential(_5a6));return;}_58e();}else{_594();}}else{_58e();}},function(){dfd.sinfo_._restInfoDfd=null;var err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=dojo.config.isDebug;_58c(err);});}}});dojo.declare("esri.ServerInfo",null,{constructor:function(json){dojo.mixin(this,json);},toJson:function(){return esri._sanitize({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion});}});dojo.declare("esri.Credential",null,{tokenRefreshBuffer:2,constructor:function(json){dojo.mixin(this,json);this.resources=this.resources||[];if(!esri._isDefined(this.creationTime)){this.creationTime=(new Date()).getTime();}},refreshToken:function(){var self=this,_5a7=esri.id.findServerInfo(this.server),_5a8=_5a7&&_5a7.owningSystemUrl,_5a9=_5a8&&!_521(_5a8,_5a7),_5aa=this.resources&&this.resources[0],_5ab=_520[this.server],kpwd=_5ab&&_5ab[this.userId];if(!kpwd&&!_5a9){var dfd;if(_5aa){_5aa=esri.id._sanitizeUrl(_5aa);this._enqueued=1;dfd=esri.id._enqueue(_5aa,_5a7,null,null,this.isAdmin);dfd.addBoth(function(){self._enqueued=0;});}return dfd;}var _5ac,_5ad,_5ae;if(_5a9){_5ad=esri.id.findServerInfo(_5a8);_5ae=_5ad&&esri.id.findCredential(_5ad.server,self.userId);if(!_5ae){return;}_5ac={serverUrl:_5aa,token:_5ae&&_5ae.token};}else{if(self.isAdmin){_5ac={isAdmin:true};}}return esri.id.generateToken(_5a9?_5ad:_5a7,_5a9?null:{username:self.userId,password:kpwd},_5ac).addCallback(function(_5af){self.token=_5af.token;self.expires=esri._isDefined(_5af.expires)?Number(_5af.expires):null;self.creationTime=(new Date()).getTime();self.onTokenChange();var _5b0=dojo.filter(esri.id.credentials,function(cred){var _5b1=esri.id.findServerInfo(cred.server),_5a8=_5b1&&_5b1.owningSystemUrl;return (cred.userId===self.userId&&_5a8&&!_521(_5a8,_5b1)&&esri._hasSameOrigin(self.server,_5a8,true))?true:false;});dojo.forEach(_5b0,function(_5b2){_5b2.refreshToken();});}).addErrback(function(){});},onTokenChange:function(){clearTimeout(this._refreshTimer);var _5b3=this.server&&esri.id.findServerInfo(this.server),_5b4=_5b3&&_5b3.owningSystemUrl;if((!_5b4||_521(_5b4,_5b3))&&(esri._isDefined(this.expires)||esri._isDefined(this.validity))){this._startRefreshTimer();}},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;var _5b5=dojo.indexOf(esri.id.credentials,this);if(_5b5>-1){esri.id.credentials.splice(_5b5,1);}this.onTokenChange();this.onDestroy();},toJson:function(){return this._toJson();},_toJson:function(){var json=esri._sanitize({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime});var _5b6=this.resources;if(_5b6&&_5b6.length>0){json.resources=_5b6;}return json;},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var _5b7=this.tokenRefreshBuffer*60000,_5b8=this.validity?(this.creationTime+(this.validity*60000)):this.expires,_5b9=(_5b8-(new Date()).getTime());if(_5b9<0){_5b9=0;}this._refreshTimer=setTimeout(dojo.hitch(this,this.refreshToken),(_5b9>_5b7)?(_5b9-_5b7):_5b9);}});}());});},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n"}});define("dijit/form/ComboButton",["dojo/_base/declare","dojo/_base/event","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_5ba,_5bb,keys,_5bc,_5bd,_5be){return _5ba("dijit.form.ComboButton",_5bd,{templateString:_5be,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_5bc.focus(this._popupStateNode);_5bb.stop(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_5bc.focus(this.titleNode);_5bb.stop(evt);}},focus:function(_5bf){if(!this.disabled){_5bc.focus(_5bf=="start"?this.titleNode:this._popupStateNode);}}});});},"esri/arcgis/Portal":function(){define("esri/arcgis/Portal",["esri/main","dojo/_base/declare","dojo/Evented","dojo/_base/lang","dojo/_base/kernel","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/array","esri/IdentityManager"],function(esri,_5c0,_5c1,lang,dojo,_5c2,_5c3,_5c4){var _5c5={"options":{"disableIdentityLookup":true},"requestParams":{"f":"json"}},_5c6=_5c0("esri.arcgis.Portal",[_5c1],{onLoad:function(){},constructor:function(url){lang.mixin(this,{"url":url});this.init(url).then(lang.hitch(this,function(){this.emit("ready",this);this.onLoad(this);}));},init:function(url,_5c7){url=(url||this.portalUrl).replace(/\/+$/,"");var idx=url.indexOf("/sharing");this.portalUrl=(idx!==-1?(url+"/"):(url+"/sharing/rest/"));return this._getSelf(this.portalUrl).then(lang.hitch(this,function(_5c8){_5c5.self=lang.mixin({},_5c8);var _5c9=_5c8.user;if(_5c9){_5c9.portal=this;_5c9=new _5ca(_5c9);}if(_5c5.self.id&&_5c5.self.canSearchPublic===false){_5c5.extraQuery=" AND orgid:"+self.id;}lang.mixin(this,_5c5.self);_5c5.loggedInUser=lang.mixin({},lang.mixin(_5c9,{"credential":_5c7}));this.thumbnailUrl=_5cb.formatUrl(this.portalUrl+"accounts/self/resources/"+this.thumbnail);this.isOrganization=(this.access&&this.access.length)||false;this.created=new Date(this.created);this.modified=new Date(this.modified);return this;}));},signIn:function(){_5c5.options.disableIdentityLookup=false;return esri.id.getCredential(this.url).then(lang.hitch(this,"init",this.url)).then(function(){return _5c5.loggedInUser;},function(_5cc){_5c5.options.disableIdentityLookup=true;throw _5cc;});},signOut:function(){_5c5.loggedInUser.credential&&_5c5.loggedInUser.credential.destroy();_5c5.loggedInUser=null;_5c5.options.disableIdentityLookup=true;_5cb.clearFieldsFromObject(_5c5.self,this);_5c5.self=null;return this.init(this.url);},getPortalUser:function(){return _5c5.loggedInUser;},queryGroups:function(_5cd){return this._queryPortal(this.portalUrl+"community/groups",_5cb.formatQueryParams({},_5cd),_5ce);},queryItems:function(_5cf){return this._queryPortal(this.portalUrl+"search",_5cb.formatQueryParams({},_5cf),_5d0);},queryUsers:function(_5d1){return this._queryPortal(this.portalUrl+"community/users",_5cb.formatQueryParams({"sortField":"username"},_5d1),_5ca);},_getSelf:function(url){var _5d2=url+"accounts/self?"+"culture="+dojo.locale;return _5cb.request(_5d2);},_queryPortal:function(url,_5d3,type){var _5d4=lang.mixin({"num":10,"start":0,"sortField":"title","sortOrder":"asc"},_5d3),_5d5=["start","query","num","nextStart"],dfd=_5cb.request(url,_5d4).then(lang.hitch(this,function(_5d6){_5d6.results=_5cb.resultsToTypedArray(type,{"portal":this},_5d6.results);_5d6.queryParams=lang.mixin({},_5d4);_5d6.nextQueryParams=lang.mixin(_5d4,{"start":_5d6.nextStart});return _5cb.clearFieldsFromObject(_5d5,_5d6);}));dfd=lang.delegate(dfd);dfd.queryParams=lang.mixin({},_5d4);dfd.nextQueryParams=_5c2.when(dfd,function(_5d7){return _5d7.nextQueryParams;});return _5d8(dfd);}}),_5d9=_5c0("esri.arcgis.PortalFolder",[],{constructor:function(_5da){lang.mixin(this,_5da);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=new Date(this.created);},getItems:function(){return _5cb.requestToTypedArray(this.url,null,null,_5d0,{"portal":this.portal,"folderId":this.id});}}),_5ce=_5c0("esri.arcgis.PortalGroup",[],{constructor:function(_5db){lang.mixin(this,_5db);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=_5cb.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=new Date(this.modified);this.created=new Date(this.created);},getMembers:function(){return _5cb.request(this.url+"/users");},queryItems:function(_5dc){_5dc=_5cb.formatQueryParams({},_5dc);_5dc.q="group:"+this.id+(_5dc.q?(" "+_5dc.q):"");return this.portal.queryItems(_5dc);}}),_5d0=_5c0("esri.arcgis.PortalItem",[],{constructor:function(_5dd){lang.mixin(this,_5dd);this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=_5cb.formatUrl(this.itemUrl.replace("content",("content/users/"+this.owner)+(this.folderId?"/"+this.folderId:"")));this.itemDataUrl=_5cb.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=_5cb.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.created=new Date(this.created);this.uploaded=new Date(this.uploaded);this.modified=new Date(this.modified);},addComment:function(_5de){var _5df=lang.isString(_5de)?{"comment":_5de}:_5de;return _5cb.request(this.itemUrl+"/addComment",_5df,{"usePost":true}).then(lang.hitch(this,function(_5e0){return _5e1(lang.mixin(_5df,{"id":_5e0.commentId,"item":this}));}));},updateComment:function(_5e2){if(_5e2&&_5e2.url&&_5e2.comment){var _5e3={"comment":_5e2.comment};return _5cb.request(_5e2.url+"/update",_5e3,{"usePost":true}).then(function(_5e4){_5e2.id=_5e4.commentId;return _5e2;});}else{throw new Error();}},getComments:function(){return _5cb.requestToTypedArray(this.itemUrl+"/comments",null,null,_5e1,{"item":this});},deleteComment:function(_5e5){if(_5e5&&_5e5.url){return _5cb.request(_5e5.url+"/delete",null,{"usePost":true});}else{throw new Error();}},addRating:function(_5e6){var _5e7=lang.isObject(_5e6)?_5e6:{"rating":parseFloat(_5e6)};return _5cb.request(this.itemUrl+"/addRating",_5e7,{"usePost":true}).then(lang.hitch(this,function(_5e8){return new _5e9(lang.mixin(_5e7,{"id":_5e8.ratingId,"item":this}));}));},getRating:function(){return _5cb.request(this.itemUrl+"/rating").then(lang.hitch(this,function(_5ea){return new _5e9(lang.mixin(_5ea,{"item":this}));}));},deleteRating:function(){return _5cb.request(this.itemUrl+"/deleteRating",null,{"usePost":true});}}),_5e1=_5c0("esri.arcgis.PortalComment",[],{constructor:function(_5eb){lang.mixin(this,_5eb);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=new Date(this.created);}}),_5e9=_5c0("esri.arcgis.PortalRating",[],{constructor:function(_5ec){lang.mixin(this,_5ec);this.url=this.item.itemUrl+"/rating";this.created=new Date(this.created);}}),_5ca=_5c0("esri.arcgis.PortalUser",[],{constructor:function(_5ed){lang.mixin(this,_5ed);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;console.log(this.userContentUrl);this.thumbnailUrl=_5cb.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=new Date(this.modified);this.created=new Date(this.created);},getGroups:function(){return _5d8(_5cb.request(this.url).then(function(_5ee){return _5cb.resultsToTypedArray(_5ce,{"portal":this.portal},_5ee.groups);}));},getNotifications:function(){return _5cb.requestToTypedArray(this.url+"/notifications",null,null,null,{"portal":this.portal});},getGroupInvitations:function(){return _5cb.requestToTypedArray(this.url+"/invitations",null,null,null,{"portal":this.portal});},getTags:function(){return _5cb.requestToTypedArray(this.url+"/tags",null,null,null,{"portal":this.portal});},getFolders:function(){return _5d8(this.getContent().then(function(_5ef){return _5ef.folders;}));},getItems:function(_5f0){return _5d8(this.getContent(_5f0).then(function(_5f1){return _5f1.items;}));},getContent:function(_5f2){var url=(this.url.replace("community","content"))+(_5f2?("/"+_5f2):"");return _5cb.request(url).then(lang.hitch(this,function(_5f3){_5f3.folders=_5cb.resultsToTypedArray(_5d9,{"portal":this.portal},_5f3.folders);_5f3.items=_5cb.resultsToTypedArray(_5d0,{"portal":this.portal,"folderId":_5f2},_5f3.items);return _5f3;}));}}),_5d8=function(_5f4){if(!_5f4){return _5f4;}if(_5f4.then){_5f4=lang.delegate(_5f4);}if(!_5f4.total){_5f4.total=_5c2.when(_5f4,function(_5f5){return esri._isDefined(_5f5.total)?_5f5.total:(_5f5.length||0);});}function _5f6(_5f7){if(!_5f4[_5f7]){_5f4[_5f7]=function(){var args=arguments;return _5c2.when(_5f4,function(_5f8){Array.prototype.unshift.call(args,(_5f8.results||_5f8));return _5d8(dojo[_5f7].apply(dojo,args));});};}};_5f6("forEach");_5f6("filter");_5f6("map");_5f6("some");_5f6("every");return _5f4;},_5cb={useSSL:function(_5f9,url){return (_5f9.indexOf("https:")!==-1||(_5c5.self&&_5c5.self.allSSL))?url.replace("http:","https:"):url;},formatUrl:function(url){var _5fa=_5c5.loggedInUser&&_5c5.loggedInUser.credential&&_5c5.loggedInUser.credential.token;return url.indexOf("null")!==-1?null:_5cb.useSSL(window.location.protocol,(_5fa?url+(url.indexOf("?")!==-1?"&":"?")+("token="+_5fa):url));},resultsToTypedArray:function(type,_5fb,_5fc){_5fc=_5fc?(_5fc.notifications||_5fc.userInvitations||_5fc.tags||_5fc.items||_5fc.groups||_5fc.comments||_5fc.results||_5fc):[];return _5c4.map(_5fc,function(_5fd){_5fd=lang.mixin(_5fd,_5fb||{});return type?new type(_5fd):_5fd;});},clearFieldsFromObject:function(flds,obj){if(!lang.isArray(flds)){for(var fld in flds){delete obj[fld];}}else{for(var i=0,l=flds.length;i<l;i++){delete obj[flds[i]];}}return obj;},requestToTypedArray:function(url,_5fe,_5ff,type,_600){return _5d8(_5cb.request(url,_5fe,_5ff).then(lang.partial(_5cb.resultsToTypedArray,type,_600)));},request:function(url,_601,_602){_601&&_601.portal&&delete _601.portal;var _603=lang.mixin(lang.mixin({},_601||{}),_5c5.requestParams);var _604=lang.mixin(_602||{},_5c5.options);return esri.request({url:_5cb.useSSL(window.location.protocol,(url.url||url)),content:_603,callbackParamName:"callback",timeout:(_604&&_604.timeout)||0},_604);},formatQueryParams:function(_605,_606){var qp=lang.mixin(lang.mixin({},_605),(lang.isString(_606)?{"q":_606}:(_606||{})));qp.q=_5c5.extraQuery?"("+qp.q+")"+_5c5.extraQuery:qp.q;return qp;}};return {Portal:_5c6,PortalFolder:_5d9,PortalGroup:_5ce,PortalItem:_5d0,PortalComment:_5e1,PortalRating:_5e9,PortalUtil:_5cb,PortalResult:_5d8};});},"dojo/NodeList-traverse":function(){define("dojo/NodeList-traverse",["./query","./_base/lang","./_base/array"],function(_607,lang,_608){var _609=_607.NodeList;lang.extend(_609,{_buildArrayFromCallback:function(_60a){var ary=[];for(var i=0;i<this.length;i++){var _60b=_60a.call(this[i],this[i],ary);if(_60b){ary=ary.concat(_60b);}}return ary;},_getUniqueAsNodeList:function(_60c){var ary=[];for(var i=0,node;node=_60c[i];i++){if(node.nodeType==1&&_608.indexOf(ary,node)==-1){ary.push(node);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_60d,_60e){var ary=this._getUniqueAsNodeList(_60d);ary=(_60e?_607._filterResult(ary,_60e):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_60f,_610){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_610),_60f);},children:function(_611){return this._getRelatedUniqueNodes(_611,function(node,ary){return lang._toArray(node.childNodes);});},closest:function(_612,root){return this._getRelatedUniqueNodes(null,function(node,ary){do{if(_607._filterResult([node],_612,root).length){return node;}}while(node!=root&&(node=node.parentNode)&&node.nodeType==1);return null;});},parent:function(_613){return this._getRelatedUniqueNodes(_613,function(node,ary){return node.parentNode;});},parents:function(_614){return this._getRelatedUniqueNodes(_614,function(node,ary){var pary=[];while(node.parentNode){node=node.parentNode;pary.push(node);}return pary;});},siblings:function(_615){return this._getRelatedUniqueNodes(_615,function(node,ary){var pary=[];var _616=(node.parentNode&&node.parentNode.childNodes);for(var i=0;i<_616.length;i++){if(_616[i]!=node){pary.push(_616[i]);}}return pary;});},next:function(_617){return this._getRelatedUniqueNodes(_617,function(node,ary){var next=node.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;}return next;});},nextAll:function(_618){return this._getRelatedUniqueNodes(_618,function(node,ary){var pary=[];var next=node;while((next=next.nextSibling)){if(next.nodeType==1){pary.push(next);}}return pary;});},prev:function(_619){return this._getRelatedUniqueNodes(_619,function(node,ary){var prev=node.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;}return prev;});},prevAll:function(_61a){return this._getRelatedUniqueNodes(_61a,function(node,ary){var pary=[];var prev=node;while((prev=prev.previousSibling)){if(prev.nodeType==1){pary.push(prev);}}return pary;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(item,i){return i%2!=0;});},odd:function(){return this.filter(function(item,i){return i%2==0;});}});return _609;});},"WebScene/lib/RenderGeometry":function(){define("WebScene/lib/RenderGeometry",["dijit","dojo","dojox"],function(_61b,dojo,_61c){dojo.provide("WebScene.lib.RenderGeometry");RenderGeometry=function(_61d,_61e,_61f,_620,_621,_622,_623,name,_624,idx){this.getInterleavedData=function(){return _61d;};this.getMaterial=function(){return _61e;};this.getTransformation=function(){return _61f;};this.getCenter=function(){return _620;};this.getBSRadius=function(){return _621;};this.getCastShadow=function(){return _622;};this.getIsCameraSpace=function(){return _623;};this.getName=function(){return name;};this.getUniqueName=function(){return _624;};this.getIndex=function(){return idx;};};});},"dojo/loadInit":function(){define("dojo/loadInit",["./_base/loader"],function(_625){return {dynamic:0,normalize:function(id){return id;},load:_625.loadInit};});},"WebScene/app/DataLoader":function(){define("WebScene/app/DataLoader",["dijit","dojo","dojox","dojo/require!WebScene/app/AgolUtils,WebScene/app/UIUtils,WebScene/lib/JSONGet"],function(_626,dojo,_627){dojo.provide("WebScene.app.DataLoader");dojo.require("WebScene.app.AgolUtils");dojo.require("WebScene.app.UIUtils");dojo.require("WebScene.lib.JSONGet");WebScene.DataLoader=function(_628,_629,_62a,_62b){var _62c=undefined;var that=this;this._agoItem={item:undefined,store:undefined};this.i18n=dojo.mixin({},dojo.i18n.getLocalization("WebScene","cewebviewer").common);dojo.mixin(this.i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").viewerPage);this.onprogress=function(_62d,msg,_62e){};function _62f(_630,msg,r1,r2){if(_630=="download"){var _631=r1;if(r2){_62c=r2;}var _631=UIUtils.cround(_631/1024/1024);if(_62c){var _632=UIUtils.cround(_62c/1024/1024);}_62a(_630,that.i18n.downloading+":",[_631,_632]);}else{if(_630=="parse"){var _633=UIUtils.cround(r1/1024/1024);var _632=UIUtils.cround(r2/1024/1024);_62a(_630,that.i18n.reading+":",[_633,_632]);}else{if(_630=="success"){}else{_62a(_630,msg,r1);}}}};function _634(_635){var _636=".3ws";if(_635.indexOf(_636,_635.length-_636.length)!==-1){_637=false;}else{_637=true;}return _637;};var _637=_634(_628);if(_637){var _638=AgolUtils.loadItem(_628);_638._pendingDfd.addErrback(function(_639){innerError=_639;});_638.then(function(item){if(!item){_62a("error",that.i18n.unableToLoadData," "+_628);return;}_62a("log",that.i18n.loadingWsId,": "+_628);that._agoItem.item=item;that.agoItemReady(item);var _63a=AgolUtils.getDataUrl(item);_62c=item.size;jsonGet(_63a.url,_629,_62f,_62b.load,item.size);_62a("item",item);},function(_63b){_62a("error",that.i18n.unableToLoadData," "+_63b);if(innerError&&innerError.code==403){_62a("hint","signout");}});}else{var _63c=decodeURIComponent(_628).replace(/[+]/g," ");var _63d=_63c.substr(_63c.lastIndexOf("/")+1);_62a("item",{title:_63d});_62a("info",that.i18n.loadingSceneFile,": "+_63c);jsonGet(_63c,_629,_62f,_62b.load);}this.getAgoItem=function(){if(this._agoItem.item){return this._agoItem;}return undefined;};this.agoItemReady=function(){};};});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_63e,_63f,dom,_640,keys,lang,on,_641){var _642=_63f("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_643,_644,_645){var _646;if(_643!==undefined){_646=this.filter(_643);if(typeof _645!="string"){if(_646!==null&&((typeof _646!="number")||!isNaN(_646))){_645=this.filter(this.format(_646,this.constraints));}else{_645="";}}}if(_645!=null&&((typeof _645)!="number"||!isNaN(_645))&&this.textbox.value!=_645){this.textbox.value=_645;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_645);}this.inherited(arguments,[_646,_644]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_647){if(_647==null){_647="";}else{if(typeof _647!="string"){_647=String(_647);}}this.textbox.value=_647;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_647);}},format:function(_648){return _648==null?"":(_648.toString?_648.toString():_648);},parse:function(_649){return _649;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _64a=function(e){var _64b;if(e.type=="keydown"){_64b=e.keyCode;switch(_64b){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_64b){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_64b>=65&&_64b<=90)||(_64b>=48&&_64b<=57)||_64b==keys.SPACE){return;}var _64c=false;for(var i in keys){if(keys[i]===e.keyCode){_64c=true;break;}}if(!_64c){return;}}}_64b=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_64b){_64b=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_64b){_64b=229;}if(e.type=="keypress"){if(typeof _64b!="string"){return;}if((_64b>="a"&&_64b<="z")||(_64b>="A"&&_64b<="Z")||(_64b>="0"&&_64b<="9")||(_64b===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux={faux:true},attr;for(attr in e){if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_64b,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}this.defer(function(){this._onInput(faux);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,_64a)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_642.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_64d){if(!this._created||this.textDir!=_64d){this._set("textDir",_64d);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_642._setSelectionRange=_641._setSelectionRange=function(_64e,_64f,stop){if(_64e.setSelectionRange){_64e.setSelectionRange(_64f,stop);}};_642.selectInputText=_641.selectInputText=function(_650,_651,stop){_650=dom.byId(_650);if(isNaN(_651)){_651=0;}if(isNaN(stop)){stop=_650.value?_650.value.length:0;}try{_650.focus();_642._setSelectionRange(_650,_651,stop);}catch(e){}};return _642;});},"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(_652,on){"use strict";var _653=_652.after;function _654(){};_654.prototype={on:function(type,_655){return on.parse(this,type,_655,function(_656,type){return _653(_656,"on"+type,_655,true);});},emit:function(type,_657){var args=[this];args.push.apply(args,arguments);return on.emit.apply(on,args);}};return _654;});},"dijit/_base/window":function(){define("dijit/_base/window",["dojo/window","../main"],function(_658,_659){_659.getDocumentWindow=function(doc){return _658.get(doc);};});},"WebScene/lib/gl-matrix":function(){define("WebScene/lib/gl-matrix",["dijit","dojo","dojox"],function(_65a,dojo,_65b){dojo.provide("WebScene.lib.gl-matrix");(function(root,_65c){_65c(root,true);_65c(root,false);}(this,function(root,_65d){"use strict";var _65e={};(function(){if(typeof (Float32Array)!="undefined"){var y=new Float32Array(1);var i=new Int32Array(y.buffer);_65e.invsqrt=function(_65f){var x2=_65f*0.5;y[0]=_65f;var _660=1.5;i[0]=1597463007-(i[0]>>1);var _661=y[0];return _661*(_660-(x2*_661*_661));};}else{_65e.invsqrt=function(_662){return 1/Math.sqrt(_662);};}})();var _663=Array;if(typeof (Float32Array)!="undefined"){_663=_65d?Float32Array:Array;}var vec3={};vec3.create=function(vec){var dest=new _663(3);if(vec){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];}else{dest[0]=dest[1]=dest[2]=0;}return dest;};vec3.createFrom=function(x,y,z){var dest=new _663(3);dest[0]=x;dest[1]=y;dest[2]=z;return dest;};vec3.set=function(vec,dest){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];return dest;};vec3.set3=function(x,y,z,dest){dest[0]=x;dest[1]=y;dest[2]=z;return dest;};vec3.add=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]+=vec2[0];vec[1]+=vec2[1];vec[2]+=vec2[2];return vec;}dest[0]=vec[0]+vec2[0];dest[1]=vec[1]+vec2[1];dest[2]=vec[2]+vec2[2];return dest;};vec3.subtract=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]-=vec2[0];vec[1]-=vec2[1];vec[2]-=vec2[2];return vec;}dest[0]=vec[0]-vec2[0];dest[1]=vec[1]-vec2[1];dest[2]=vec[2]-vec2[2];return dest;};vec3.multiply=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]*=vec2[0];vec[1]*=vec2[1];vec[2]*=vec2[2];return vec;}dest[0]=vec[0]*vec2[0];dest[1]=vec[1]*vec2[1];dest[2]=vec[2]*vec2[2];return dest;};vec3.negate=function(vec,dest){if(!dest){dest=vec;}dest[0]=-vec[0];dest[1]=-vec[1];dest[2]=-vec[2];return dest;};vec3.scale=function(vec,val,dest){if(!dest||vec===dest){vec[0]*=val;vec[1]*=val;vec[2]*=val;return vec;}dest[0]=vec[0]*val;dest[1]=vec[1]*val;dest[2]=vec[2]*val;return dest;};vec3.normalize=function(vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2],len=Math.sqrt(x*x+y*y+z*z);if(!len){dest[0]=0;dest[1]=0;dest[2]=0;return dest;}else{if(len===1){dest[0]=x;dest[1]=y;dest[2]=z;return dest;}}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;return dest;};vec3.cross=function(vec,vec2,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2],x2=vec2[0],y2=vec2[1],z2=vec2[2];dest[0]=y*z2-z*y2;dest[1]=z*x2-x*z2;dest[2]=x*y2-y*x2;return dest;};vec3.length=function(vec){var x=vec[0],y=vec[1],z=vec[2];return Math.sqrt(x*x+y*y+z*z);};vec3.dot=function(vec,vec2){return vec[0]*vec2[0]+vec[1]*vec2[1]+vec[2]*vec2[2];};vec3.direction=function(vec,vec2,dest){if(!dest){dest=vec;}var x=vec[0]-vec2[0],y=vec[1]-vec2[1],z=vec[2]-vec2[2],len=Math.sqrt(x*x+y*y+z*z);if(!len){dest[0]=0;dest[1]=0;dest[2]=0;return dest;}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;return dest;};vec3.lerp=function(vec,vec2,lerp,dest){if(!dest){dest=vec;}dest[0]=vec[0]+lerp*(vec2[0]-vec[0]);dest[1]=vec[1]+lerp*(vec2[1]-vec[1]);dest[2]=vec[2]+lerp*(vec2[2]-vec[2]);return dest;};vec3.dist=function(vec,vec2){var x=vec2[0]-vec[0],y=vec2[1]-vec[1],z=vec2[2]-vec[2];return Math.sqrt(x*x+y*y+z*z);};vec3.dist2=function(vec,vec2){var x=vec2[0]-vec[0],y=vec2[1]-vec[1],z=vec2[2]-vec[2];return x*x+y*y+z*z;};var _664=null;var _665=new _663(4);vec3.unproject=function(vec,view,proj,_666,dest){if(!dest){dest=vec;}if(!_664){_664=mat4.create();}var m=_664;var v=_665;v[0]=(vec[0]-_666[0])*2/_666[2]-1;v[1]=(vec[1]-_666[1])*2/_666[3]-1;v[2]=2*vec[2]-1;v[3]=1;mat4.multiply(proj,view,m);if(!mat4.inverse(m)){return null;}mat4.multiplyVec4(m,v);if(v[3]===0){return null;}dest[0]=v[0]/v[3];dest[1]=v[1]/v[3];dest[2]=v[2]/v[3];return dest;};var _667=vec3.createFrom(1,0,0);var _668=vec3.createFrom(0,1,0);var _669=vec3.createFrom(0,0,1);vec3.rotationTo=function(a,b,dest){if(!dest){dest=_66a.create();}var d=vec3.dot(a,b);var axis=vec3.create();if(d>=1){_66a.set(_66b,dest);}else{if(d<(0.000001-1)){vec3.cross(_667,a,axis);if(axis.length<0.000001){vec3.cross(_668,a,axis);}if(axis.length<0.000001){vec3.cross(_669,a,axis);}vec3.normalize(axis);_66a.fromAxisAngle(axis,Math.PI,dest);}else{var s=Math.sqrt((1+d)*2);var sInv=1/s;vec3.cross(a,b,axis);dest[0]=axis[0]*sInv;dest[1]=axis[1]*sInv;dest[2]=axis[2]*sInv;dest[3]=s*0.5;_66a.normalize(dest);}}if(dest[3]>1){dest[3]=1;}else{if(dest[3]<-1){dest[3]=-1;}}return dest;};vec3.project=function(vec,vecA,vecB,dest){if(!dest){dest=vec;}var dir=vec3.create();vec3.direction(vecA,vecB,dir);var dir2=vec3.create();vec3.subtract(vec,vecA,dir2);var dot=vec3.dot(dir,dir2);vec3.scale(dir,dot,dest);vec3.add(dest,vecA,dest);};vec3.str=function(vec){return "["+vec[0]+", "+vec[1]+", "+vec[2]+"]";};var mat3={};mat3.create=function(mat){var dest=new _663(9);if(mat){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];}else{dest[0]=dest[1]=dest[2]=dest[3]=dest[4]=dest[5]=dest[6]=dest[7]=dest[8]=0;}return dest;};mat3.createFrom=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var dest=new _663(9);dest[0]=m00;dest[1]=m01;dest[2]=m02;dest[3]=m10;dest[4]=m11;dest[5]=m12;dest[6]=m20;dest[7]=m21;dest[8]=m22;return dest;};mat3.determinant=function(mat){var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20);};mat3.inverse=function(mat,dest){var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,d=a00*b01+a01*b11+a02*b21,id;if(!d){return null;}id=1/d;if(!dest){dest=mat3.create();}dest[0]=b01*id;dest[1]=(-a22*a01+a02*a21)*id;dest[2]=(a12*a01-a02*a11)*id;dest[3]=b11*id;dest[4]=(a22*a00-a02*a20)*id;dest[5]=(-a12*a00+a02*a10)*id;dest[6]=b21*id;dest[7]=(-a21*a00+a01*a20)*id;dest[8]=(a11*a00-a01*a10)*id;return dest;};mat3.multiply=function(mat,mat2,dest){if(!dest){dest=mat;}var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8],b00=mat2[0],b01=mat2[1],b02=mat2[2],b10=mat2[3],b11=mat2[4],b12=mat2[5],b20=mat2[6],b21=mat2[7],b22=mat2[8];dest[0]=b00*a00+b01*a10+b02*a20;dest[1]=b00*a01+b01*a11+b02*a21;dest[2]=b00*a02+b01*a12+b02*a22;dest[3]=b10*a00+b11*a10+b12*a20;dest[4]=b10*a01+b11*a11+b12*a21;dest[5]=b10*a02+b11*a12+b12*a22;dest[6]=b20*a00+b21*a10+b22*a20;dest[7]=b20*a01+b21*a11+b22*a21;dest[8]=b20*a02+b21*a12+b22*a22;return dest;};mat3.multiplyVec2=function(_66c,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1];dest[0]=x*_66c[0]+y*_66c[3]+_66c[6];dest[1]=x*_66c[1]+y*_66c[4]+_66c[7];return dest;};mat3.multiplyVec3=function(_66d,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2];dest[0]=x*_66d[0]+y*_66d[3]+z*_66d[6];dest[1]=x*_66d[1]+y*_66d[4]+z*_66d[7];dest[2]=x*_66d[2]+y*_66d[5]+z*_66d[8];return dest;};mat3.set=function(mat,dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];return dest;};mat3.identity=function(dest){if(!dest){dest=mat3.create();}dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=1;dest[5]=0;dest[6]=0;dest[7]=0;dest[8]=1;return dest;};mat3.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a12=mat[5];mat[1]=mat[3];mat[2]=mat[6];mat[3]=a01;mat[5]=mat[7];mat[6]=a02;mat[7]=a12;return mat;}dest[0]=mat[0];dest[1]=mat[3];dest[2]=mat[6];dest[3]=mat[1];dest[4]=mat[4];dest[5]=mat[7];dest[6]=mat[2];dest[7]=mat[5];dest[8]=mat[8];return dest;};mat3.toMat4=function(mat,dest){if(!dest){dest=mat4.create();}dest[15]=1;dest[14]=0;dest[13]=0;dest[12]=0;dest[11]=0;dest[10]=mat[8];dest[9]=mat[7];dest[8]=mat[6];dest[7]=0;dest[6]=mat[5];dest[5]=mat[4];dest[4]=mat[3];dest[3]=0;dest[2]=mat[2];dest[1]=mat[1];dest[0]=mat[0];return dest;};mat3.str=function(mat){return "["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+"]";};var mat4={};mat4.create=function(mat){var dest=new _663(16);if(arguments.length===4){dest[0]=arguments[0];dest[1]=arguments[1];dest[2]=arguments[2];dest[3]=arguments[3];dest[4]=arguments[4];dest[5]=arguments[5];dest[6]=arguments[6];dest[7]=arguments[7];dest[8]=arguments[8];dest[9]=arguments[9];dest[10]=arguments[10];dest[11]=arguments[11];dest[12]=arguments[12];dest[13]=arguments[13];dest[14]=arguments[14];dest[15]=arguments[15];}else{if(mat){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];}}return dest;};mat4.createFrom=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var dest=new _663(16);dest[0]=m00;dest[1]=m01;dest[2]=m02;dest[3]=m03;dest[4]=m10;dest[5]=m11;dest[6]=m12;dest[7]=m13;dest[8]=m20;dest[9]=m21;dest[10]=m22;dest[11]=m23;dest[12]=m30;dest[13]=m31;dest[14]=m32;dest[15]=m33;return dest;};mat4.set=function(mat,dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];return dest;};mat4.identity=function(dest){if(!dest){dest=mat4.create();}dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=1;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=1;dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest;};mat4.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a03=mat[3],a12=mat[6],a13=mat[7],a23=mat[11];mat[1]=mat[4];mat[2]=mat[8];mat[3]=mat[12];mat[4]=a01;mat[6]=mat[9];mat[7]=mat[13];mat[8]=a02;mat[9]=a12;mat[11]=mat[14];mat[12]=a03;mat[13]=a13;mat[14]=a23;return mat;}dest[0]=mat[0];dest[1]=mat[4];dest[2]=mat[8];dest[3]=mat[12];dest[4]=mat[1];dest[5]=mat[5];dest[6]=mat[9];dest[7]=mat[13];dest[8]=mat[2];dest[9]=mat[6];dest[10]=mat[10];dest[11]=mat[14];dest[12]=mat[3];dest[13]=mat[7];dest[14]=mat[11];dest[15]=mat[15];return dest;};mat4.determinant=function(mat){var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15];return (a30*a21*a12*a03-a20*a31*a12*a03-a30*a11*a22*a03+a10*a31*a22*a03+a20*a11*a32*a03-a10*a21*a32*a03-a30*a21*a02*a13+a20*a31*a02*a13+a30*a01*a22*a13-a00*a31*a22*a13-a20*a01*a32*a13+a00*a21*a32*a13+a30*a11*a02*a23-a10*a31*a02*a23-a30*a01*a12*a23+a00*a31*a12*a23+a10*a01*a32*a23-a00*a11*a32*a23-a20*a11*a02*a33+a10*a21*a02*a33+a20*a01*a12*a33-a00*a21*a12*a33-a10*a01*a22*a33+a00*a11*a22*a33);};mat4.inverse=function(mat,dest){if(!dest){dest=mat;}var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,d=(b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06),_66e;if(!d){return null;}_66e=1/d;dest[0]=(a11*b11-a12*b10+a13*b09)*_66e;dest[1]=(-a01*b11+a02*b10-a03*b09)*_66e;dest[2]=(a31*b05-a32*b04+a33*b03)*_66e;dest[3]=(-a21*b05+a22*b04-a23*b03)*_66e;dest[4]=(-a10*b11+a12*b08-a13*b07)*_66e;dest[5]=(a00*b11-a02*b08+a03*b07)*_66e;dest[6]=(-a30*b05+a32*b02-a33*b01)*_66e;dest[7]=(a20*b05-a22*b02+a23*b01)*_66e;dest[8]=(a10*b10-a11*b08+a13*b06)*_66e;dest[9]=(-a00*b10+a01*b08-a03*b06)*_66e;dest[10]=(a30*b04-a31*b02+a33*b00)*_66e;dest[11]=(-a20*b04+a21*b02-a23*b00)*_66e;dest[12]=(-a10*b09+a11*b07-a12*b06)*_66e;dest[13]=(a00*b09-a01*b07+a02*b06)*_66e;dest[14]=(-a30*b03+a31*b01-a32*b00)*_66e;dest[15]=(a20*b03-a21*b01+a22*b00)*_66e;return dest;};mat4.toRotationMat=function(mat,dest){if(!dest){dest=mat4.create();}dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest;};mat4.toMat3=function(mat,dest){if(!dest){dest=mat3.create();}dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[4];dest[4]=mat[5];dest[5]=mat[6];dest[6]=mat[8];dest[7]=mat[9];dest[8]=mat[10];return dest;};mat4.toInverseMat3=function(mat,dest){var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[4],a11=mat[5],a12=mat[6],a20=mat[8],a21=mat[9],a22=mat[10],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,d=a00*b01+a01*b11+a02*b21,id;if(!d){return null;}id=1/d;if(!dest){dest=mat3.create();}dest[0]=b01*id;dest[1]=(-a22*a01+a02*a21)*id;dest[2]=(a12*a01-a02*a11)*id;dest[3]=b11*id;dest[4]=(a22*a00-a02*a20)*id;dest[5]=(-a12*a00+a02*a10)*id;dest[6]=b21*id;dest[7]=(-a21*a00+a01*a20)*id;dest[8]=(a11*a00-a01*a10)*id;return dest;};mat4.multiply=function(mat,mat2,dest){if(!dest){dest=mat;}var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b00=mat2[0],b01=mat2[1],b02=mat2[2],b03=mat2[3],b10=mat2[4],b11=mat2[5],b12=mat2[6],b13=mat2[7],b20=mat2[8],b21=mat2[9],b22=mat2[10],b23=mat2[11],b30=mat2[12],b31=mat2[13],b32=mat2[14],b33=mat2[15];dest[0]=b00*a00+b01*a10+b02*a20+b03*a30;dest[1]=b00*a01+b01*a11+b02*a21+b03*a31;dest[2]=b00*a02+b01*a12+b02*a22+b03*a32;dest[3]=b00*a03+b01*a13+b02*a23+b03*a33;dest[4]=b10*a00+b11*a10+b12*a20+b13*a30;dest[5]=b10*a01+b11*a11+b12*a21+b13*a31;dest[6]=b10*a02+b11*a12+b12*a22+b13*a32;dest[7]=b10*a03+b11*a13+b12*a23+b13*a33;dest[8]=b20*a00+b21*a10+b22*a20+b23*a30;dest[9]=b20*a01+b21*a11+b22*a21+b23*a31;dest[10]=b20*a02+b21*a12+b22*a22+b23*a32;dest[11]=b20*a03+b21*a13+b22*a23+b23*a33;dest[12]=b30*a00+b31*a10+b32*a20+b33*a30;dest[13]=b30*a01+b31*a11+b32*a21+b33*a31;dest[14]=b30*a02+b31*a12+b32*a22+b33*a32;dest[15]=b30*a03+b31*a13+b32*a23+b33*a33;return dest;};mat4.multiplyVec3=function(mat,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2];dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12];dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13];dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14];return dest;};mat4.multiplyVec4=function(mat,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2],w=vec[3];dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12]*w;dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13]*w;dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14]*w;dest[3]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15]*w;return dest;};mat4.translate=function(mat,vec,dest){var x=vec[0],y=vec[1],z=vec[2],a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23;if(!dest||mat===dest){mat[12]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12];mat[13]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13];mat[14]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14];mat[15]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15];return mat;}a00=mat[0];a01=mat[1];a02=mat[2];a03=mat[3];a10=mat[4];a11=mat[5];a12=mat[6];a13=mat[7];a20=mat[8];a21=mat[9];a22=mat[10];a23=mat[11];dest[0]=a00;dest[1]=a01;dest[2]=a02;dest[3]=a03;dest[4]=a10;dest[5]=a11;dest[6]=a12;dest[7]=a13;dest[8]=a20;dest[9]=a21;dest[10]=a22;dest[11]=a23;dest[12]=a00*x+a10*y+a20*z+mat[12];dest[13]=a01*x+a11*y+a21*z+mat[13];dest[14]=a02*x+a12*y+a22*z+mat[14];dest[15]=a03*x+a13*y+a23*z+mat[15];return dest;};mat4.scale=function(mat,vec,dest){var x=vec[0],y=vec[1],z=vec[2];if(!dest||mat===dest){mat[0]*=x;mat[1]*=x;mat[2]*=x;mat[3]*=x;mat[4]*=y;mat[5]*=y;mat[6]*=y;mat[7]*=y;mat[8]*=z;mat[9]*=z;mat[10]*=z;mat[11]*=z;return mat;}dest[0]=mat[0]*x;dest[1]=mat[1]*x;dest[2]=mat[2]*x;dest[3]=mat[3]*x;dest[4]=mat[4]*y;dest[5]=mat[5]*y;dest[6]=mat[6]*y;dest[7]=mat[7]*y;dest[8]=mat[8]*z;dest[9]=mat[9]*z;dest[10]=mat[10]*z;dest[11]=mat[11]*z;dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];return dest;};mat4.rotate=function(mat,_66f,axis,dest){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22;if(!len){return null;}if(len!==1){len=1/len;x*=len;y*=len;z*=len;}s=Math.sin(_66f);c=Math.cos(_66f);t=1-c;a00=mat[0];a01=mat[1];a02=mat[2];a03=mat[3];a10=mat[4];a11=mat[5];a12=mat[6];a13=mat[7];a20=mat[8];a21=mat[9];a22=mat[10];a23=mat[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;if(!dest){dest=mat;}else{if(mat!==dest){dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];}}dest[0]=a00*b00+a10*b01+a20*b02;dest[1]=a01*b00+a11*b01+a21*b02;dest[2]=a02*b00+a12*b01+a22*b02;dest[3]=a03*b00+a13*b01+a23*b02;dest[4]=a00*b10+a10*b11+a20*b12;dest[5]=a01*b10+a11*b11+a21*b12;dest[6]=a02*b10+a12*b11+a22*b12;dest[7]=a03*b10+a13*b11+a23*b12;dest[8]=a00*b20+a10*b21+a20*b22;dest[9]=a01*b20+a11*b21+a21*b22;dest[10]=a02*b20+a12*b21+a22*b22;dest[11]=a03*b20+a13*b21+a23*b22;return dest;};mat4.rotateX=function(mat,_670,dest){var s=Math.sin(_670),c=Math.cos(_670),a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];if(!dest){dest=mat;}else{if(mat!==dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];}}dest[4]=a10*c+a20*s;dest[5]=a11*c+a21*s;dest[6]=a12*c+a22*s;dest[7]=a13*c+a23*s;dest[8]=a10*-s+a20*c;dest[9]=a11*-s+a21*c;dest[10]=a12*-s+a22*c;dest[11]=a13*-s+a23*c;return dest;};mat4.rotateY=function(mat,_671,dest){var s=Math.sin(_671),c=Math.cos(_671),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];if(!dest){dest=mat;}else{if(mat!==dest){dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];}}dest[0]=a00*c+a20*-s;dest[1]=a01*c+a21*-s;dest[2]=a02*c+a22*-s;dest[3]=a03*c+a23*-s;dest[8]=a00*s+a20*c;dest[9]=a01*s+a21*c;dest[10]=a02*s+a22*c;dest[11]=a03*s+a23*c;return dest;};mat4.rotateZ=function(mat,_672,dest){var s=Math.sin(_672),c=Math.cos(_672),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7];if(!dest){dest=mat;}else{if(mat!==dest){dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];}}dest[0]=a00*c+a10*s;dest[1]=a01*c+a11*s;dest[2]=a02*c+a12*s;dest[3]=a03*c+a13*s;dest[4]=a00*-s+a10*c;dest[5]=a01*-s+a11*c;dest[6]=a02*-s+a12*c;dest[7]=a03*-s+a13*c;return dest;};mat4.frustum=function(left,_673,_674,top,near,far,dest){if(!dest){dest=mat4.create();}var rl=(_673-left),tb=(top-_674),fn=(far-near);dest[0]=(near*2)/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=(near*2)/tb;dest[6]=0;dest[7]=0;dest[8]=(_673+left)/rl;dest[9]=(top+_674)/tb;dest[10]=-(far+near)/fn;dest[11]=-1;dest[12]=0;dest[13]=0;dest[14]=-(far*near*2)/fn;dest[15]=0;return dest;};mat4.perspective=function(fovy,_675,near,far,dest){var top=near*Math.tan(fovy*Math.PI/360),_676=top*_675;return mat4.frustum(-_676,_676,-top,top,near,far,dest);};mat4.ortho=function(left,_677,_678,top,near,far,dest){if(!dest){dest=mat4.create();}var rl=(_677-left),tb=(top-_678),fn=(far-near);dest[0]=2/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=2/tb;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=-2/fn;dest[11]=0;dest[12]=-(left+_677)/rl;dest[13]=-(top+_678)/tb;dest[14]=-(far+near)/fn;dest[15]=1;return dest;};mat4.lookAt=function(eye,_679,up,dest){if(!dest){dest=mat4.create();}var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],_67a=_679[0],_67b=_679[1],_67c=_679[2];if(eyex===_67a&&eyey===_67b&&eyez===_67c){return mat4.identity(dest);}z0=eyex-_67a;z1=eyey-_67b;z2=eyez-_67c;len=1/Math.sqrt(z0*z0+z1*z1+z2*z2);z0*=len;z1*=len;z2*=len;x0=upy*z2-upz*z1;x1=upz*z0-upx*z2;x2=upx*z1-upy*z0;len=Math.sqrt(x0*x0+x1*x1+x2*x2);if(!len){x0=0;x1=0;x2=0;}else{len=1/len;x0*=len;x1*=len;x2*=len;}y0=z1*x2-z2*x1;y1=z2*x0-z0*x2;y2=z0*x1-z1*x0;len=Math.sqrt(y0*y0+y1*y1+y2*y2);if(!len){y0=0;y1=0;y2=0;}else{len=1/len;y0*=len;y1*=len;y2*=len;}dest[0]=x0;dest[1]=y0;dest[2]=z0;dest[3]=0;dest[4]=x1;dest[5]=y1;dest[6]=z1;dest[7]=0;dest[8]=x2;dest[9]=y2;dest[10]=z2;dest[11]=0;dest[12]=-(x0*eyex+x1*eyey+x2*eyez);dest[13]=-(y0*eyex+y1*eyey+y2*eyez);dest[14]=-(z0*eyex+z1*eyey+z2*eyez);dest[15]=1;return dest;};mat4.fromRotationTranslation=function(quat,vec,dest){if(!dest){dest=mat4.create();}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=0;dest[4]=xy-wz;dest[5]=1-(xx+zz);dest[6]=yz+wx;dest[7]=0;dest[8]=xz+wy;dest[9]=yz-wx;dest[10]=1-(xx+yy);dest[11]=0;dest[12]=vec[0];dest[13]=vec[1];dest[14]=vec[2];dest[15]=1;return dest;};mat4.str=function(mat){return "["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+", "+mat[9]+", "+mat[10]+", "+mat[11]+", "+mat[12]+", "+mat[13]+", "+mat[14]+", "+mat[15]+"]";};var _66a={};_66a.create=function(quat){var dest=new _663(4);if(quat){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3];}else{dest[0]=dest[1]=dest[2]=dest[3]=0;}return dest;};_66a.createFrom=function(x,y,z,w){var dest=new _663(4);dest[0]=x;dest[1]=y;dest[2]=z;dest[3]=w;return dest;};_66a.set=function(quat,dest){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3];return dest;};_66a.identity=function(dest){if(!dest){dest=_66a.create();}dest[0]=0;dest[1]=0;dest[2]=0;dest[3]=1;return dest;};var _66b=_66a.identity();_66a.calculateW=function(quat,dest){var x=quat[0],y=quat[1],z=quat[2];if(!dest||quat===dest){quat[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z));return quat;}dest[0]=x;dest[1]=y;dest[2]=z;dest[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z));return dest;};_66a.dot=function(quat,_67d){return quat[0]*_67d[0]+quat[1]*_67d[1]+quat[2]*_67d[2]+quat[3]*_67d[3];};_66a.inverse=function(quat,dest){var q0=quat[0],q1=quat[1],q2=quat[2],q3=quat[3],dot=q0*q0+q1*q1+q2*q2+q3*q3,_67e=dot?1/dot:0;if(!dest||quat===dest){quat[0]*=-_67e;quat[1]*=-_67e;quat[2]*=-_67e;quat[3]*=_67e;return quat;}dest[0]=-quat[0]*_67e;dest[1]=-quat[1]*_67e;dest[2]=-quat[2]*_67e;dest[3]=quat[3]*_67e;return dest;};_66a.conjugate=function(quat,dest){if(!dest||quat===dest){quat[0]*=-1;quat[1]*=-1;quat[2]*=-1;return quat;}dest[0]=-quat[0];dest[1]=-quat[1];dest[2]=-quat[2];dest[3]=quat[3];return dest;};_66a.length=function(quat){var x=quat[0],y=quat[1],z=quat[2],w=quat[3];return Math.sqrt(x*x+y*y+z*z+w*w);};_66a.normalize=function(quat,dest){if(!dest){dest=quat;}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],len=Math.sqrt(x*x+y*y+z*z+w*w);if(len===0){dest[0]=0;dest[1]=0;dest[2]=0;dest[3]=0;return dest;}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;dest[3]=w*len;return dest;};_66a.add=function(quat,_67f,dest){if(!dest||quat===dest){quat[0]+=_67f[0];quat[1]+=_67f[1];quat[2]+=_67f[2];quat[3]+=_67f[3];return quat;}dest[0]=quat[0]+_67f[0];dest[1]=quat[1]+_67f[1];dest[2]=quat[2]+_67f[2];dest[3]=quat[3]+_67f[3];return dest;};_66a.multiply=function(quat,_680,dest){if(!dest){dest=quat;}var qax=quat[0],qay=quat[1],qaz=quat[2],qaw=quat[3],qbx=_680[0],qby=_680[1],qbz=_680[2],qbw=_680[3];dest[0]=qax*qbw+qaw*qbx+qay*qbz-qaz*qby;dest[1]=qay*qbw+qaw*qby+qaz*qbx-qax*qbz;dest[2]=qaz*qbw+qaw*qbz+qax*qby-qay*qbx;dest[3]=qaw*qbw-qax*qbx-qay*qby-qaz*qbz;return dest;};_66a.multiplyVec3=function(quat,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1],z=vec[2],qx=quat[0],qy=quat[1],qz=quat[2],qw=quat[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;dest[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;dest[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;dest[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;return dest;};_66a.scale=function(quat,val,dest){if(!dest||quat===dest){quat[0]*=val;quat[1]*=val;quat[2]*=val;quat[3]*=val;return quat;}dest[0]=quat[0]*val;dest[1]=quat[1]*val;dest[2]=quat[2]*val;dest[3]=quat[3]*val;return dest;};_66a.toMat3=function(quat,dest){if(!dest){dest=mat3.create();}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=xy-wz;dest[4]=1-(xx+zz);dest[5]=yz+wx;dest[6]=xz+wy;dest[7]=yz-wx;dest[8]=1-(xx+yy);return dest;};_66a.toMat4=function(quat,dest){if(!dest){dest=mat4.create();}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=0;dest[4]=xy-wz;dest[5]=1-(xx+zz);dest[6]=yz+wx;dest[7]=0;dest[8]=xz+wy;dest[9]=yz-wx;dest[10]=1-(xx+yy);dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest;};_66a.slerp=function(quat,_681,_682,dest){if(!dest){dest=quat;}var _683=quat[0]*_681[0]+quat[1]*_681[1]+quat[2]*_681[2]+quat[3]*_681[3],_684,_685,_686,_687;if(Math.abs(_683)>=1){if(dest!==quat){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3];}return dest;}_684=Math.acos(_683);_685=Math.sqrt(1-_683*_683);if(Math.abs(_685)<0.001){dest[0]=(quat[0]*0.5+_681[0]*0.5);dest[1]=(quat[1]*0.5+_681[1]*0.5);dest[2]=(quat[2]*0.5+_681[2]*0.5);dest[3]=(quat[3]*0.5+_681[3]*0.5);return dest;}_686=Math.sin((1-_682)*_684)/_685;_687=Math.sin(_682*_684)/_685;dest[0]=(quat[0]*_686+_681[0]*_687);dest[1]=(quat[1]*_686+_681[1]*_687);dest[2]=(quat[2]*_686+_681[2]*_687);dest[3]=(quat[3]*_686+_681[3]*_687);return dest;};_66a.fromRotationMatrix=function(mat,dest){if(!dest){dest=_66a.create();}var _688=mat[0]+mat[4]+mat[8];var _689;if(_688>0){_689=Math.sqrt(_688+1);dest[3]=0.5*_689;_689=0.5/_689;dest[0]=(mat[7]-mat[5])*_689;dest[1]=(mat[2]-mat[6])*_689;dest[2]=(mat[3]-mat[1])*_689;}else{var _68a=_66a.fromRotationMatrix.s_iNext=_66a.fromRotationMatrix.s_iNext||[1,2,0];var i=0;if(mat[4]>mat[0]){i=1;}if(mat[8]>mat[i*3+i]){i=2;}var j=_68a[i];var k=_68a[j];_689=Math.sqrt(mat[i*3+i]-mat[j*3+j]-mat[k*3+k]+1);dest[i]=0.5*_689;_689=0.5/_689;dest[3]=(mat[k*3+j]-mat[j*3+k])*_689;dest[j]=(mat[j*3+i]+mat[i*3+j])*_689;dest[k]=(mat[k*3+i]+mat[i*3+k])*_689;}return dest;};mat3.toQuat4=_66a.fromRotationMatrix;(function(){var mat=mat3.create();_66a.fromAxes=function(view,_68b,up,dest){mat[0]=_68b[0];mat[3]=_68b[1];mat[6]=_68b[2];mat[1]=up[0];mat[4]=up[1];mat[7]=up[2];mat[2]=view[0];mat[5]=view[1];mat[8]=view[2];return _66a.fromRotationMatrix(mat,dest);};})();_66a.identity=function(dest){if(!dest){dest=_66a.create();}dest[0]=0;dest[1]=0;dest[2]=0;dest[3]=1;return dest;};_66a.fromAngleAxis=function(_68c,axis,dest){if(!dest){dest=_66a.create();}var half=_68c*0.5;var s=Math.sin(half);dest[3]=Math.cos(half);dest[0]=s*axis[0];dest[1]=s*axis[1];dest[2]=s*axis[2];return dest;};_66a.toAngleAxis=function(src,dest){if(!dest){dest=src;}var _68d=src[0]*src[0]+src[1]*src[1]+src[2]*src[2];if(_68d>0){dest[3]=2*Math.acos(src[3]);var _68e=_65e.invsqrt(_68d);dest[0]=src[0]*_68e;dest[1]=src[1]*_68e;dest[2]=src[2]*_68e;}else{dest[3]=0;dest[0]=1;dest[1]=0;dest[2]=0;}return dest;};_66a.str=function(quat){return "["+quat[0]+", "+quat[1]+", "+quat[2]+", "+quat[3]+"]";};var vec2={};vec2.create=function(vec){var dest=new _663(2);if(vec){dest[0]=vec[0];dest[1]=vec[1];}else{dest[0]=0;dest[1]=0;}return dest;};vec2.createFrom=function(x,y){var dest=new _663(2);dest[0]=x;dest[1]=y;return dest;};vec2.add=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]+vecB[0];dest[1]=vecA[1]+vecB[1];return dest;};vec2.subtract=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]-vecB[0];dest[1]=vecA[1]-vecB[1];return dest;};vec2.multiply=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]*vecB[0];dest[1]=vecA[1]*vecB[1];return dest;};vec2.divide=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]/vecB[0];dest[1]=vecA[1]/vecB[1];return dest;};vec2.scale=function(vecA,_68f,dest){if(!dest){dest=vecA;}dest[0]=vecA[0]*_68f;dest[1]=vecA[1]*_68f;return dest;};vec2.dist=function(vecA,vecB){var x=vecB[0]-vecA[0],y=vecB[1]-vecA[1];return Math.sqrt(x*x+y*y);};vec2.dist2=function(vecA,vecB){var x=vecB[0]-vecA[0],y=vecB[1]-vecA[1];return x*x+y*y;};vec2.set=function(vec,dest){dest[0]=vec[0];dest[1]=vec[1];return dest;};vec2.set2=function(x,y,dest){dest[0]=x;dest[1]=y;return dest;};vec2.negate=function(vec,dest){if(!dest){dest=vec;}dest[0]=-vec[0];dest[1]=-vec[1];return dest;};vec2.normalize=function(vec,dest){if(!dest){dest=vec;}var mag=vec[0]*vec[0]+vec[1]*vec[1];if(mag>0){mag=Math.sqrt(mag);dest[0]=vec[0]/mag;dest[1]=vec[1]/mag;}else{dest[0]=dest[1]=0;}return dest;};vec2.cross=function(vecA,vecB,dest){var z=vecA[0]*vecB[1]-vecA[1]*vecB[0];if(!dest){return z;}dest[0]=dest[1]=0;dest[2]=z;return dest;};vec2.length=function(vec){var x=vec[0],y=vec[1];return Math.sqrt(x*x+y*y);};vec2.dot=function(vecA,vecB){return vecA[0]*vecB[0]+vecA[1]*vecB[1];};vec2.direction=function(vecA,vecB,dest){if(!dest){dest=vecA;}var x=vecA[0]-vecB[0],y=vecA[1]-vecB[1],len=x*x+y*y;if(!len){dest[0]=0;dest[1]=0;dest[2]=0;return dest;}len=1/Math.sqrt(len);dest[0]=x*len;dest[1]=y*len;return dest;};vec2.lerp=function(vecA,vecB,lerp,dest){if(!dest){dest=vecA;}dest[0]=vecA[0]+lerp*(vecB[0]-vecA[0]);dest[1]=vecA[1]+lerp*(vecB[1]-vecA[1]);return dest;};vec2.str=function(vec){return "["+vec[0]+", "+vec[1]+"]";};var mat2={};mat2.create=function(src){var dest=new _663(4);if(src){dest[0]=src[0];dest[1]=src[1];dest[2]=src[2];dest[3]=src[3];}else{dest[0]=dest[1]=dest[2]=dest[3]=0;}return dest;};mat2.createFrom=function(m00,m01,m10,m11){var dest=new _663(4);dest[0]=m00;dest[1]=m01;dest[2]=m10;dest[3]=m11;return dest;};mat2.set=function(mat,dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];return dest;};mat2.identity=function(dest){if(!dest){dest=mat2.create();}dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=1;return dest;};mat2.transpose=function(mat,dest){if(!dest||mat===dest){var a00=mat[1];mat[1]=mat[2];mat[2]=a00;return mat;}dest[0]=mat[0];dest[1]=mat[2];dest[2]=mat[1];dest[3]=mat[3];return dest;};mat2.determinant=function(mat){return mat[0]*mat[3]-mat[2]*mat[1];};mat2.inverse=function(mat,dest){if(!dest){dest=mat;}var a0=mat[0],a1=mat[1],a2=mat[2],a3=mat[3];var det=a0*a3-a2*a1;if(!det){return null;}det=1/det;dest[0]=a3*det;dest[1]=-a1*det;dest[2]=-a2*det;dest[3]=a0*det;return dest;};mat2.multiply=function(matA,matB,dest){if(!dest){dest=matA;}var a11=matA[0],a12=matA[1],a21=matA[2],a22=matA[3];dest[0]=a11*matB[0]+a12*matB[2];dest[1]=a11*matB[1]+a12*matB[3];dest[2]=a21*matB[0]+a22*matB[2];dest[3]=a21*matB[1]+a22*matB[3];return dest;};mat2.rotate=function(mat,_690,dest){if(!dest){dest=mat;}var a11=mat[0],a12=mat[1],a21=mat[2],a22=mat[3],s=Math.sin(_690),c=Math.cos(_690);dest[0]=a11*c+a12*s;dest[1]=a11*-s+a12*c;dest[2]=a21*c+a22*s;dest[3]=a21*-s+a22*c;return dest;};mat2.multiplyVec2=function(_691,vec,dest){if(!dest){dest=vec;}var x=vec[0],y=vec[1];dest[0]=x*_691[0]+y*_691[1];dest[1]=x*_691[2]+y*_691[3];return dest;};mat2.scale=function(_692,vec,dest){if(!dest){dest=_692;}var a11=_692[0],a12=_692[1],a21=_692[2],a22=_692[3],b11=vec[0],b22=vec[1];dest[0]=a11*b11;dest[1]=a12*b22;dest[2]=a21*b11;dest[3]=a22*b22;return dest;};mat2.str=function(mat){return "["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+"]";};var vec4={};vec4.create=function(vec){var dest=new _663(4);if(vec){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];dest[3]=vec[3];}else{dest[0]=0;dest[1]=0;dest[2]=0;dest[3]=0;}return dest;};vec4.createFrom=function(x,y,z,w){var dest=new _663(4);dest[0]=x;dest[1]=y;dest[2]=z;dest[3]=w;return dest;};vec4.add=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]+vecB[0];dest[1]=vecA[1]+vecB[1];dest[2]=vecA[2]+vecB[2];dest[3]=vecA[3]+vecB[3];return dest;};vec4.subtract=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]-vecB[0];dest[1]=vecA[1]-vecB[1];dest[2]=vecA[2]-vecB[2];dest[3]=vecA[3]-vecB[3];return dest;};vec4.multiply=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]*vecB[0];dest[1]=vecA[1]*vecB[1];dest[2]=vecA[2]*vecB[2];dest[3]=vecA[3]*vecB[3];return dest;};vec4.divide=function(vecA,vecB,dest){if(!dest){dest=vecB;}dest[0]=vecA[0]/vecB[0];dest[1]=vecA[1]/vecB[1];dest[2]=vecA[2]/vecB[2];dest[3]=vecA[3]/vecB[3];return dest;};vec4.scale=function(vecA,_693,dest){if(!dest){dest=vecA;}dest[0]=vecA[0]*_693;dest[1]=vecA[1]*_693;dest[2]=vecA[2]*_693;dest[3]=vecA[3]*_693;return dest;};vec4.dot=function(vec,vec2){return vec[0]*vec2[0]+vec[1]*vec2[1]+vec[2]*vec2[2]+vec[3]*vec2[3];};vec4.set=function(vec,dest){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];dest[3]=vec[3];return dest;};vec4.set4=function(x,y,z,w,dest){dest[0]=x;dest[1]=y;dest[2]=z;dest[3]=w;return dest;};vec4.negate=function(vec,dest){if(!dest){dest=vec;}dest[0]=-vec[0];dest[1]=-vec[1];dest[2]=-vec[2];dest[3]=-vec[3];return dest;};vec4.lerp=function(vecA,vecB,lerp,dest){if(!dest){dest=vecA;}dest[0]=vecA[0]+lerp*(vecB[0]-vecA[0]);dest[1]=vecA[1]+lerp*(vecB[1]-vecA[1]);dest[2]=vecA[2]+lerp*(vecB[2]-vecA[2]);dest[3]=vecA[3]+lerp*(vecB[3]-vecA[3]);return dest;};vec4.str=function(vec){return "["+vec[0]+", "+vec[1]+", "+vec[2]+", "+vec[3]+"]";};var _694=_65d?"":"d";root["glMath"+_694]=_65e;root["vec2"+_694]=vec2;root["vec3"+_694]=vec3;root["vec4"+_694]=vec4;root["mat2"+_694]=mat2;root["mat3"+_694]=mat3;root["mat4"+_694]=mat4;root["quat4"+_694]=_66a;}));});},"WebScene/lib/ShadowMap":function(){define("WebScene/lib/ShadowMap",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/GLVBO,WebScene/lib/Util"],function(_695,dojo,_696){dojo.provide("WebScene.lib.ShadowMap");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.GLVBO");dojo.require("WebScene.lib.Util");ShadowMap=function(_697,gl){var _698=false;var _699=undefined;var _69a=undefined;var _69b=undefined;var fbo=undefined;var _69c=mat4.create();var _69d=mat4.create();var _69e=vec2.create();var _69f=mat4.create();var _6a0=undefined;this.getIsSupported=function(){return gl.getExtension("OES_standard_derivatives");};this.setEnableState=function(_6a1){assert(_6a1!==this.getEnableState());if(_6a1){this.enable();}else{this.disable();}};this.getEnableState=function(){return _699!==undefined;};this.enable=function(){assert(!this.getEnableState());assert(this.getIsSupported());_699=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,_699);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);this.setSize(2048);_69b=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,_69b);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,_69a,_69a);fbo=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,_699,0);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,_69b);glCheckFramebufferStatus(gl.FRAMEBUFFER,gl);gl.bindRenderbuffer(gl.RENDERBUFFER,null);gl.bindFramebuffer(gl.FRAMEBUFFER,null);};this.disable=function(){assert(this.getEnableState());gl.deleteFramebuffer(fbo);gl.deleteRenderbuffer(_69b);gl.deleteTexture(_699);fbo=undefined;_69b=undefined;_699=undefined;};this.setSize=function(_6a2){gl.bindTexture(gl.TEXTURE_2D,_699);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,_6a2,_6a2,0,gl.RGBA,gl.UNSIGNED_BYTE,null);_69a=_6a2;};var _6a3=mat4d.create();var _6a4=mat4d.create();var tmpP=vec4d.create();var _6a5=new Array(8);for(var i=0;i<8;++i){_6a5[i]=vec4d.create();}var _6a6=vec3.create();var _6a7=vec3.create();var tmpQ=vec2.create();var _6a8=vec2.create();var _6a9=vec2.create();var _6aa=vec2.create();var _6ab=vec2.create();var _6ac=new Array();this.prepare=function(view,proj,_6ad,_6ae,_6af){assert(this.getEnableState());var minZ=Number.MAX_VALUE;var maxZ=-Number.MAX_VALUE;for(var i=0;i<_6ae.length;++i){if(!_6ae[i].getCastShadow()){continue;}if(!_6af.get(_6ae[i].getIndex())){continue;}var _6b0=_6ae[i].getBSRadius();var _6b1=_6ae[i].getCenter();var z=view[2]*_6b1[0]+view[6]*_6b1[1]+view[10]*_6b1[2]+view[14];var z0=z-_6b0;var z1=z+_6b0;if(_6b0>75){if(z1>-16){z1=-16;}if(z1>maxZ){maxZ=z1;}_6ac.push(z0);continue;}if(z0<minZ){minZ=z0;}if(z1>maxZ){maxZ=z1;}}var _6b2=maxZ*32;for(var i=0;i<_6ac.length;++i){var z0=_6ac[i];if(z0<_6b2){z0=_6b2;}if(z0<minZ){minZ=z0;}}_6ac.length=0;minZ=(proj[10]*minZ+proj[14])/Math.abs(proj[11]*minZ+proj[15]);maxZ=(proj[10]*maxZ+proj[14])/Math.abs(proj[11]*maxZ+proj[15]);var tmp=minZ;minZ=maxZ;maxZ=tmp;minZ=Math.max(minZ,-1);maxZ=Math.min(maxZ,1);if(minZ>=maxZ){minZ=-0.01;maxZ=0.01;}mat4.multiply(proj,view,_6a3);mat4.inverse(_6a3,_6a4);for(var i=0;i<8;++i){var x=(i%4)==0||(i%4)==3?-1:1;var y=(i%4)==0||(i%4)==1?-1:1;var z=i<4?minZ:maxZ;vec4.set4(x,y,z,1,tmpP);mat4.multiplyVec4(_6a4,tmpP,_6a5[i]);for(var j=0;j<3;++j){_6a5[i][j]/=_6a5[i][3];}}mat4.lookAt([0,0,0],[-_6ad[0],-_6ad[1],-_6ad[2]],[0,1,0],_69c);for(var i=0;i<8;++i){mat4.multiplyVec3(_69c,_6a5[i]);}vec3.set(_6a5[0],_6a6);vec3.set(_6a5[0],_6a7);for(var i=1;i<8;++i){for(var j=0;j<3;++j){_6a6[j]=Math.min(_6a6[j],_6a5[i][j]);_6a7[j]=Math.max(_6a7[j],_6a5[i][j]);}}_6a7[2]+=200;vec2.set2(-_6a7[2],-_6a6[2],_69e);var warp=true;if(warp){var _6b3=Math.sin(Math.acos(view[2]*_6ad[0]+view[6]*_6ad[1]+view[10]*_6ad[2]));var near=1/_6a5[0][3];var far=1/_6a5[4][3];var eta=near+Math.sqrt(near*far);eta/=_6b3;_6b4(_6a5,eta,_6b3,tmpQ,_6a8,_6a9,_6aa,_6ab);_6b5(tmpQ,_6a8,_6aa,_6ab,_69d);_69d[10]=2/(_6a6[2]-_6a7[2]);_69d[14]=-(_6a6[2]+_6a7[2])/(_6a6[2]-_6a7[2]);}else{mat4.ortho(_6a6[0],_6a7[0],_6a6[1],_6a7[1],_69e[0],_69e[1],_69d);}gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);_6a0=gl.getParameter(gl.VIEWPORT);gl.viewport(1,1,_69a-2,_69a-2);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);mat4.multiply(_69d,_69c,_69f);};this.getMvMat=function(){return _69c;};this.getProjMat=function(){return _69d;};this.getNearFar=function(){return _69e;};this.finish=function(fbo){assert(this.getEnableState());gl.useProgram(null);gl.viewport(_6a0[0],_6a0[1],_6a0[2],_6a0[3]);gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);if(_698){gl.bindTexture(gl.TEXTURE_2D,_699);gl.generateMipmap(gl.TEXTURE_2D);}};this.setUniforms=function(_6b6){var _6b7=this.getEnableState();_6b6.use();gl.activeTexture(gl.TEXTURE3);gl.bindTexture(gl.TEXTURE_2D,_6b7?_699:null);gl.activeTexture(gl.TEXTURE0);_6b6.uniform1i("depthTex",3);if(_6b7){_6b6.uniform1f("depthHalfPixelSz",0.5/_69a);_6b6.uniformMatrix4fv("lightMat",_69f);}else{_6b6.uniform1f("depthHalfPixelSz",-1);}};var x=0;var y=0;var _6b8=256;var _6b9=256;var data=new Float32Array(4*2*2);data[0]=x;data[1]=y;data[2]=0;data[3]=0;data[4]=x+_6b8;data[5]=y;data[6]=1;data[7]=0;data[8]=x;data[9]=y+_6b9;data[10]=0;data[11]=1;data[12]=x+_6b8;data[13]=y+_6b9;data[14]=1;data[15]=1;var _6ba=new Object();_6ba[VertexAttrConstants.POSITION]=0;_6ba[VertexAttrConstants.UV0]=2;var _6bb=new GLVBO(data,_6ba,4,gl);this.drawQuad=function(proj){assert(this.getEnableState());var _6bc=_697.get("showDepth");gl.disable(gl.DEPTH_TEST);_6bc.use();_6bc.uniformMatrix4fv("proj",proj);_6bc.uniform1i("depthTex",0);gl.bindTexture(gl.TEXTURE_2D,_699);_6bc.enableVertexAttribArrays();_6bb.bind();_6bb.setPointers(_6bc);gl.drawArrays(gl.TRIANGLE_STRIP,0,_6bb.getNum());gl.bindBuffer(gl.ARRAY_BUFFER,null);_6bc.disableVertexAttribArrays();gl.useProgram(null);gl.enable(gl.DEPTH_TEST);};var _6bd=vec2.create();var _6be=vec2.create();var tmpM=[vec2.create(),vec2.create(),vec2.create(),vec2.create()];var _6bf=vec2.create();var _6c0=vec2.create();var _6c1=vec2.create();var _6c2=vec2.create();var _6c3=vec2.create();var _6c4=vec2.create();var _6c5=vec2.create();function _6b4(_6c6,eta,_6c7,q,t0,t1,t2,t3){vec2.set2(0,0,_6bd);for(var i=0;i<4;++i){vec2.add(_6bd,_6c6[i],_6bd);}vec2.scale(_6bd,0.25);vec2.set2(0,0,_6be);for(var i=4;i<8;++i){vec2.add(_6be,_6c6[i],_6be);}vec2.scale(_6be,0.25);vec2.lerp(_6c6[4],_6c6[5],0.5,tmpM[0]);vec2.lerp(_6c6[5],_6c6[6],0.5,tmpM[1]);vec2.lerp(_6c6[6],_6c6[7],0.5,tmpM[2]);vec2.lerp(_6c6[7],_6c6[4],0.5,tmpM[3]);var _6c8=0;var dMin=vec2.dist2(tmpM[0],_6bd);for(var i=1;i<4;++i){var d=vec2.dist2(tmpM[i],_6bd);if(d<dMin){dMin=d;_6c8=i;}}vec2.subtract(tmpM[_6c8],_6c6[_6c8+4],_6bf);var _6c9=_6bf[0];_6bf[0]=-_6bf[1];_6bf[1]=_6c9;vec2.subtract(_6be,_6bd,_6c0);vec2.lerp(_6bf,_6c0,_6c7);vec2.normalize(_6bf);var _6ca,_6cb;_6ca=_6cb=vec2.dot(vec2.subtract(_6c6[0],_6bd,_6c1),_6bf);for(var i=1;i<8;++i){var p=vec2.dot(vec2.subtract(_6c6[i],_6bd,_6c1),_6bf);if(p<_6ca){_6ca=p;}else{if(p>_6cb){_6cb=p;}}}vec2.set(_6bd,q);vec2.scale(_6bf,_6ca-eta,_6c1);vec2.add(q,_6c1,q);var _6cc=-1;var _6cd=1;var _6ce=0;var _6cf=0;for(var i=0;i<8;++i){vec2.subtract(_6c6[i],q,_6c2);vec2.normalize(_6c2);var area=_6bf[0]*_6c2[1]-_6bf[1]*_6c2[0];if(area>0){if(area>_6cc){_6cc=area;_6ce=i;}}else{if(area<_6cd){_6cd=area;_6cf=i;}}}verify(_6cc>0,"leftArea");verify(_6cd<0,"rightArea");vec2.scale(_6bf,_6ca,_6c3);vec2.add(_6c3,_6bd,_6c3);vec2.scale(_6bf,_6cb,_6c4);vec2.add(_6c4,_6bd,_6c4);_6c5[0]=-_6bf[1];_6c5[1]=_6bf[0];var is0=rayRay2D(q,_6c6[_6cf],_6c4,vec2.add(_6c4,_6c5,_6c1),1,t0);var is1=rayRay2D(q,_6c6[_6ce],_6c4,_6c1,1,t1);var is2=rayRay2D(q,_6c6[_6ce],_6c3,vec2.add(_6c3,_6c5,_6c1),1,t2);var is3=rayRay2D(q,_6c6[_6cf],_6c3,_6c1,1,t3);verify(is0,"rayRay");verify(is1,"rayRay");verify(is2,"rayRay");verify(is3,"rayRay");};function elem(row,col){return 3*col+row;};var _6d0=vec3.create();function row(mat,i){vec3.set3(mat[i],mat[i+3],mat[i+6],_6d0);return _6d0;};var _6d1=vec2.create();var _6d2=mat3.create();function _6b5(q,t0,t2,t3,_6d3){vec2.scale(vec2.subtract(t2,t3,_6d1),0.5);_6d2[0]=_6d1[0];_6d2[1]=_6d1[1];_6d2[2]=0;_6d2[3]=_6d1[1];_6d2[4]=-_6d1[0];_6d2[5]=0;_6d2[6]=_6d1[0]*_6d1[0]+_6d1[1]*_6d1[1];_6d2[7]=_6d1[0]*_6d1[1]-_6d1[1]*_6d1[0];_6d2[8]=1;_6d2[elem(0,2)]=-vec2.dot(row(_6d2,0),q);_6d2[elem(1,2)]=-vec2.dot(row(_6d2,1),q);var a=vec2.dot(row(_6d2,0),t2)+_6d2[elem(0,2)];var b=vec2.dot(row(_6d2,1),t2)+_6d2[elem(1,2)];var c=vec2.dot(row(_6d2,0),t3)+_6d2[elem(0,2)];var d=vec2.dot(row(_6d2,1),t3)+_6d2[elem(1,2)];a=-(a+c)/(b+d);_6d2[elem(0,0)]+=_6d2[elem(1,0)]*a;_6d2[elem(0,1)]+=_6d2[elem(1,1)]*a;_6d2[elem(0,2)]+=_6d2[elem(1,2)]*a;a=1/(vec2.dot(row(_6d2,0),t2)+_6d2[elem(0,2)]);b=1/(vec2.dot(row(_6d2,1),t2)+_6d2[elem(1,2)]);_6d2[elem(0,0)]*=a;_6d2[elem(0,1)]*=a;_6d2[elem(0,2)]*=a;_6d2[elem(1,0)]*=b;_6d2[elem(1,1)]*=b;_6d2[elem(1,2)]*=b;_6d2[elem(2,0)]=_6d2[elem(1,0)];_6d2[elem(2,1)]=_6d2[elem(1,1)];_6d2[elem(2,2)]=_6d2[elem(1,2)];_6d2[elem(1,2)]+=1;a=vec2.dot(row(_6d2,1),t0)+_6d2[elem(1,2)];b=vec2.dot(row(_6d2,2),t0)+_6d2[elem(2,2)];c=vec2.dot(row(_6d2,1),t2)+_6d2[elem(1,2)];d=vec2.dot(row(_6d2,2),t2)+_6d2[elem(2,2)];a=-0.5*(a/b+c/d);_6d2[elem(1,0)]+=_6d2[elem(2,0)]*a;_6d2[elem(1,1)]+=_6d2[elem(2,1)]*a;_6d2[elem(1,2)]+=_6d2[elem(2,2)]*a;a=vec2.dot(row(_6d2,1),t0)+_6d2[elem(1,2)];b=vec2.dot(row(_6d2,2),t0)+_6d2[elem(2,2)];c=-b/a;_6d2[elem(1,0)]*=c;_6d2[elem(1,1)]*=c;_6d2[elem(1,2)]*=c;_6d3[0]=_6d2[0];_6d3[1]=_6d2[1];_6d3[2]=0;_6d3[3]=_6d2[2];_6d3[4]=_6d2[3];_6d3[5]=_6d2[4];_6d3[6]=0;_6d3[7]=_6d2[5];_6d3[8]=0;_6d3[9]=0;_6d3[10]=1;_6d3[11]=0;_6d3[12]=_6d2[6];_6d3[13]=_6d2[7];_6d3[14]=0;_6d3[15]=_6d2[8];};};});},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(_6d4,has,lang,_6d5){function _6d6(_6d7,_6d8,_6d9){var _6da="";if(_6d7&&_6d7.stack){_6da+=_6d7.stack;}if(_6d8&&_6d8.stack){_6da+="\n    ----------------------------------------\n    rejected"+_6d8.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ");}if(_6d9&&_6d9.stack){_6da+="\n    ----------------------------------------\n"+_6d9.stack;}console.error(_6d7,_6da);};function _6db(_6dc,_6dd,_6de,_6df){if(!_6dd){_6d6(_6dc,_6de,_6df);}};var _6e0=[];var _6e1=false;var _6e2=1000;function _6e3(_6e4,_6e5,_6e6,_6e7){if(_6e5){_6d5.some(_6e0,function(obj,ix){if(obj.error===_6e4){_6e0.splice(ix,1);return true;}});}else{if(!_6d5.some(_6e0,function(obj){return obj.error===_6e4;})){_6e0.push({error:_6e4,rejection:_6e6,deferred:_6e7,timestamp:new Date().getTime()});}}if(!_6e1){_6e1=setTimeout(_6e8,_6e2);}};function _6e8(){var now=new Date().getTime();var _6e9=now-_6e2;_6e0=_6d5.filter(_6e0,function(obj){if(obj.timestamp<_6e9){_6d6(obj.error,obj.rejection,obj.deferred);return false;}return true;});if(_6e0.length){_6e1=setTimeout(_6e8,_6e0[0].timestamp+_6e2-now);}};return function(_6ea){var _6eb=has("config-useDeferredInstrumentation");if(_6eb){_6d4.on("resolved",lang.hitch(console,"log","resolved"));_6d4.on("rejected",lang.hitch(console,"log","rejected"));_6d4.on("progress",lang.hitch(console,"log","progress"));var args=[];if(typeof _6eb==="string"){args=_6eb.split(",");_6eb=args.shift();}if(_6eb==="report-rejections"){_6ea.instrumentRejected=_6db;}else{if(_6eb==="report-unhandled-rejections"||_6eb===true||_6eb===1){_6ea.instrumentRejected=_6e3;_6e2=parseInt(args[0],10)||_6e2;}else{throw new Error("Unsupported instrumentation usage <"+_6eb+">");}}}};});},"esri/geometry":function(){define("esri/geometry",["dijit","dojo","dojox","dojo/require!esri/main,dojox/gfx/_base,esri/WKIDUnitConversion,esri/geometry/utils"],function(_6ec,dojo,_6ed){dojo.provide("esri.geometry");dojo.require("esri.main");dojo.require("dojox.gfx._base");dojo.require("esri.WKIDUnitConversion");dojo.require("esri.geometry.utils");esri.Units={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};(function(){var _6ee="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]";var _6ef=[-20037508.342788905,20037508.342788905];var _6f0=[-20037508.342787,20037508.342787];dojo.declare("esri.SpatialReference",null,{constructor:function(json){if(json){if(dojo.isObject(json)){dojo.mixin(this,json);}else{if(dojo.isString(json)){this.wkt=json;}else{this.wkid=json;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_6ef,origin:_6f0,dx:0.00001},"102100":{wkTemplate:_6ee,valid:_6ef,origin:_6f0,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_6ef,origin:_6f0,dx:0.00001},"3857":{wkTemplate:_6ee,valid:_6ef,origin:_6f0,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return dojo.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return dojo.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(inSR){var _6f1=false;if(inSR){_6f1=((this.isWebMercator()&&inSR.wkid===4326)||(inSR.isWebMercator()&&this.wkid===4326));}return _6f1;},isWebMercator:function(){return this._isWebMercator();},equals:function(inSR){var _6f2=false;if(inSR){if(this===inSR){_6f2=true;}if(this.wkid||inSR.wkid){_6f2=(this.wkid===inSR.wkid)||(this.isWebMercator()&&inSR.isWebMercator());}else{if(this.wkt&&inSR.wkt){_6f2=(this.wkt.toUpperCase()===inSR.wkt.toUpperCase());}}}return _6f2;},toJson:function(){if(this.wkid!==null){return {wkid:this.wkid};}else{if(this.wkt!==null){return {wkt:this.wkt};}}return null;}});}());dojo.mixin(esri.geometry,(function(){var _6f3=6378137,PI=3.141592653589793,_6f4=57.29577951308232,_6f5=0.017453292519943,_6f6=Math.floor,log=Math.log,sin=Math.sin,exp=Math.exp,atan=Math.atan;function _6f7(rad){return rad*_6f4;};function _6f8(deg){return deg*_6f5;};function _6f9(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _6fa=_6f8(lat);return [_6f8(lng)*_6f3,_6f3/2*log((1+sin(_6fa))/(1-sin(_6fa)))];};function _6fb(x,y,_6fc){var _6fd=_6f7(x/_6f3);if(_6fc){return [_6fd,_6f7((PI/2)-(2*atan(exp(-1*y/_6f3))))];}return [_6fd-(_6f6((_6fd+180)/360)*360),_6f7((PI/2)-(2*atan(exp(-1*y/_6f3))))];};function _6fe(geom,func,sr,_6ff){if(geom instanceof esri.geometry.Point){var pt=func(geom.x,geom.y,_6ff);return new esri.geometry.Point(pt[0],pt[1],new esri.SpatialReference(sr));}else{if(geom instanceof esri.geometry.Extent){var min=func(geom.xmin,geom.ymin,_6ff),max=func(geom.xmax,geom.ymax,_6ff);return new esri.geometry.Extent(min[0],min[1],max[0],max[1],new esri.SpatialReference(sr));}else{if(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon){var _700=geom instanceof esri.geometry.Polyline,_701=_700?geom.paths:geom.rings,_702=[],_703;dojo.forEach(_701,function(_704){_702.push(_703=[]);dojo.forEach(_704,function(iPt){_703.push(func(iPt[0],iPt[1],_6ff));});});if(_700){return new esri.geometry.Polyline({paths:_702,spatialReference:sr});}else{return new esri.geometry.Polygon({rings:_702,spatialReference:sr});}}else{if(geom instanceof esri.geometry.Multipoint){var oPts=[];dojo.forEach(geom.points,function(iPt){oPts.push(func(iPt[0],iPt[1],_6ff));});return new esri.geometry.Multipoint({points:oPts,spatialReference:sr});}}}}};var _705=39.37,_706=20015077/180,ecd=esri.config.defaults,_707=esri.WKIDUnitConversion;return {xyToLngLat:_6fb,lngLatToXY:_6f9,geographicToWebMercator:function(geom){return _6fe(geom,_6f9,{wkid:102100});},webMercatorToGeographic:function(geom,_708){return _6fe(geom,_6fb,{wkid:4326},_708);},getScale:function(map){var _709,_70a,wkid,wkt;if(arguments.length>1){_709=arguments[0];_70a=arguments[1];wkid=arguments[2];}else{_709=map.extent;_70a=map.width;var sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}}var _70b;if(wkid){_70b=_707.values[_707[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _70c=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_70c&&_70c[1]){_70b=parseFloat(_70c[1].split(",")[1]);}}}return esri.geometry._getScale(_709,_70a,_70b);},_getScale:function(_70d,_70e,_70f){return (_70d&&_70e)?((_70d.getWidth()/_70e)*(_70f||_706)*_705*ecd.screenDPI):0;},getExtentForScale:function(map,_710){var wkid,wkt,sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}var _711;if(wkid){_711=_707.values[_707[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _712=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_712&&_712[1]){_711=parseFloat(_712[1].split(",")[1]);}}}return esri.geometry._getExtentForScale(map.extent,map.width,_711,_710,true);},_getExtentForScale:function(_713,_714,wkid,_715,_716){var _717;if(_716){_717=wkid;}else{_717=_707.values[_707[wkid]];}return _713.expand(((_715*_714)/((_717||_706)*_705*ecd.screenDPI))/_713.getWidth());}};}()),{defaultPoint:{type:"point",x:0,y:0},defaultMultipoint:{type:"multipoint",points:null},defaultExtent:{type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},defaultPolyline:{type:"polyline",paths:null},defaultPolygon:{type:"polygon",rings:null},_rectToExtent:function(rect){return new esri.geometry.Extent(parseFloat(rect.x),parseFloat(rect.y)-parseFloat(rect.height),parseFloat(rect.x)+parseFloat(rect.width),parseFloat(rect.y),rect.spatialReference);},_extentToRect:function(_718){return new esri.geometry.Rect(_718.xmin,_718.ymax,_718.getWidth(),_718.getHeight(),_718.spatialReference);},fromJson:function(json){if(json.x!==undefined&&json.y!==undefined){return new esri.geometry.Point(json);}else{if(json.paths!==undefined){return new esri.geometry.Polyline(json);}else{if(json.rings!==undefined){return new esri.geometry.Polygon(json);}else{if(json.points!==undefined){return new esri.geometry.Multipoint(json);}else{if(json.xmin!==undefined&&json.ymin!==undefined&&json.xmax!==undefined&&json.ymax!==undefined){return new esri.geometry.Extent(json);}}}}}},getJsonType:function(_719){if(_719 instanceof esri.geometry.Point){return "esriGeometryPoint";}else{if(_719 instanceof esri.geometry.Polyline){return "esriGeometryPolyline";}else{if(_719 instanceof esri.geometry.Polygon){return "esriGeometryPolygon";}else{if(_719 instanceof esri.geometry.Extent){return "esriGeometryEnvelope";}else{if(_719 instanceof esri.geometry.Multipoint){return "esriGeometryMultipoint";}}}}}return null;},getGeometryType:function(_71a){if(_71a==="esriGeometryPoint"){return esri.geometry.Point;}else{if(_71a==="esriGeometryPolyline"){return esri.geometry.Polyline;}else{if(_71a==="esriGeometryPolygon"){return esri.geometry.Polygon;}else{if(_71a==="esriGeometryEnvelope"){return esri.geometry.Extent;}else{if(_71a==="esriGeometryMultipoint"){return esri.geometry.Multipoint;}}}}}return null;},isClockwise:function(arr){var area=0,i,il=arr.length,func=dojo.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){area+=func(arr[i],arr[(i+1)%il]);}return (area/2)<=0;},toScreenPoint:function(ext,wd,ht,pt,_71b){var _71c=ext.spatialReference,ptSR=pt.spatialReference,_71d=esri.geometry,x=pt.x,y=pt.y,_71e;if(_71c&&ptSR&&!_71c.equals(ptSR)&&_71c._canProject(ptSR)){_71e=_71c.isWebMercator()?_71d.lngLatToXY(x,y):_71d.xyToLngLat(x,y,true);x=_71e[0];y=_71e[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_71b){x=Math.round(x);y=Math.round(y);}return new _71d.ScreenPoint(x,y);},toScreenGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_71f=dojo.forEach,_720=Math.round;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(_720((g.x-x)*rwd),_720((y-g.y)*rht));}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(),mpp=mp.points;_71f(g.points,function(pt,i){mpp[i]=[_720((pt[0]-x)*rwd),_720((y-pt[1])*rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(_720((g.xmin-x)*rwd),_720((y-g.ymin)*rht),_720((g.xmax-x)*rwd),_720((y-g.ymax)*rwd));}else{if(g instanceof esri.geometry.Polyline){var _721=new esri.geometry.Polyline(),_722=_721.paths,_723;_71f(g.paths,function(path,i){_723=(_722[i]=[]);_71f(path,function(pt,j){_723[j]=[_720((pt[0]-x)*rwd),_720((y-pt[1])*rht)];});});return _721;}else{if(g instanceof esri.geometry.Polygon){var pgon=new esri.geometry.Polygon(),_724=pgon.rings,_725;_71f(g.rings,function(ring,i){_725=(_724[i]=[]);_71f(ring,function(pt,j){_725[j]=[_720((pt[0]-x)*rwd),_720((y-pt[1])*rht)];});});return pgon;}}}}}},_toScreenPath:(function(){var _726=(function(){if(dojo.isIE<9){return function(x,y,rwd,rht,dx,dy,_727,_728,_729){var _72a=[],_72b=Math.round,p,pl=_727.length,path,_72c,_72d,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){path=_727[p];pt=_728?_728(path[0][0],path[0][1],_729):path[0];if((_72d=path.length)>1){x1=_72b(((pt[0]-x)*rwd)+dx);y1=_72b(((y-pt[1])*rht)+dy);pt=_728?_728(path[1][0],path[1][1],_729):path[1];x2=_72b(((pt[0]-x)*rwd)+dx);y2=_72b(((y-pt[1])*rht)+dy);_72a.push("M",x1+","+y1,"L",x2+","+y2);for(_72c=2;_72c<_72d;_72c++){pt=_728?_728(path[_72c][0],path[_72c][1],_729):path[_72c];x1=_72b(((pt[0]-x)*rwd)+dx);y1=_72b(((y-pt[1])*rht)+dy);_72a.push(x1+","+y1);}}else{x1=_72b(((pt[0]-x)*rwd)+dx);y1=_72b(((y-pt[1])*rht)+dy);_72a.push("M",x1+","+y1);}}return _72a;};}else{return function(x,y,rwd,rht,dx,dy,_72e,_72f,_730){var _731=[],i,j,il,jl,path,pt,_732=Math.round;for(i=0,il=_72e?_72e.length:0;i<il;i++){path=_72e[i];_731.push("M");for(j=0,jl=path?path.length:0;j<jl;j++){pt=_72f?_72f(path[j][0],path[j][1],_730):path[j];_731.push(_732(((pt[0]-x)*rwd)+dx)+","+_732(((y-pt[1])*rht)+dy));}}return _731;};}}());return function(ext,wd,ht,g,dx,dy){var _733=esri.geometry,_734=g instanceof _733.Polyline,_735=ext.spatialReference,_736=g.spatialReference,_737,_738;if(_735&&_736&&!_735.equals(_736)&&_735._canProject(_736)){if(_735.isWebMercator()){_737=_733.lngLatToXY;}else{_737=_733.xyToLngLat;_738=true;}}return _726(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_734?g.paths:g.rings,_737,_738);};}()),toMapPoint:function(ext,wd,ht,pt){return new esri.geometry.Point(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);},toMapGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_739=dojo.forEach;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(sr),mpp=mp.points;_739(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof esri.geometry.Polyline){var _73a=new esri.geometry.Polyline(sr),_73b=_73a.paths,_73c;_739(g.paths,function(path,i){_73c=(_73b[i]=[]);_739(path,function(pt,j){_73c[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _73a;}else{if(g instanceof esri.geometry.Polygon){var pgon=new esri.geometry.Polygon(sr),_73d=pgon.rings,_73e;_739(g.rings,function(ring,i){_73e=(_73d[i]=[]);_739(ring,function(pt,j){_73e[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return pgon;}}}}}},getLength:function(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);},_getLength:function(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);},getMidpoint:function(pt0,pt1){return esri.geometry.getPointOnLine(pt0,pt1,0.5);},getPointOnLine:function(pt0,pt1,_73f){if(pt0 instanceof esri.geometry.Point){return new esri.geometry.Point(pt0.x+_73f*(pt1.x-pt0.x),pt0.y+_73f*(pt1.y-pt0.y));}else{return [pt0[0]+_73f*(pt1[0]-pt0[0]),pt0[1]+_73f*(pt1[1]-pt0[1])];}},_equals:function(n1,n2){return Math.abs(n1-n2)<1e-8;},getLineIntersection:function(_740,_741,_742,_743,sr){var pt=esri.geometry._getLineIntersection([_740.x,_740.y],[_741.x,_741.y],[_742.x,_742.y],[_743.x,_743.y]);if(pt){pt=new esri.geometry.Point(pt[0],pt[1],sr);}return pt;},_getLineIntersection:function(p0,p1,p2,p3){var _744=10000000000,x,y,a0=esri.geometry._equals(p0[0],p1[0])?_744:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=esri.geometry._equals(p2[0],p3[0])?_744:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(esri.geometry._equals(a0,a1)){if(!esri.geometry._equals(b0,b1)){return null;}else{if(esri.geometry._equals(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(esri.geometry._equals(a0,_744)){x=p0[0];y=a1*x+b1;}else{if(esri.geometry._equals(a1,_744)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];},_getLineIntersection2:function(_745,_746){var p1=_745[0],p2=_745[1],p3=_746[0],p4=_746[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_747=(y43*x21)-(x43*y21),ua,ub,px,py;if(_747===0){return false;}ua=((x43*y13)-(y43*x13))/_747;ub=((x21*y13)-(y21*x13))/_747;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}},_pointLineDistance:function(_748,line){var p1=line[0],p2=line[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_748[0],y3=_748[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,sqrt=Math.sqrt,pow=Math.pow,mag=sqrt(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return sqrt(pow(x3-x,2)+pow(y3-y,2));}});dojo.declare("esri.geometry.Geometry",null,{spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},_initSR:function(){if(!this.spatialReference){this.setSpatialReference(new esri.SpatialReference(4326));}},getExtent:function(){return null;}});dojo.declare("esri.geometry.Point",esri.geometry.Geometry,{constructor:function(x,y,_749){dojo.mixin(this,esri.geometry.defaultPoint);if(dojo.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(dojo.isObject(x)){dojo.mixin(this,x);if(esri.isDefined(this.latitude)){this.y=this.latitude;}if(esri.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_749;}}this._initSR();},offset:function(x,y){return new esri.geometry.Point(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_74a){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=esri.geometry.lngLatToXY(_74a,this.y)[0];}else{if(sr.wkid===4326){this.x=_74a;}}}return this;},setLatitude:function(_74b){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=esri.geometry.lngLatToXY(this.x,_74b)[1];}else{if(sr.wkid===4326){this.y=_74b;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_74c;if(sr){if(sr._isWebMercator()){_74c=esri.geometry.xyToLngLat(this.x,this.y)[0];}else{if(sr.wkid===4326){_74c=this.x;}}}return _74c;},getLatitude:function(){var sr=this.spatialReference,_74d;if(sr){if(sr._isWebMercator()){_74d=esri.geometry.xyToLngLat(this.x,this.y)[1];}else{if(sr.wkid===4326){_74d=this.y;}}}return _74d;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var info=sr._getInfo();if(info){var _74e=info.valid[0],_74f=info.valid[1],_750=2*_74f,_751;if(x>_74f){_751=Math.ceil(Math.abs(x-_74f)/_750);x-=(_751*_750);}else{if(x<_74e){_751=Math.ceil(Math.abs(x-_74e)/_750);x+=(_751*_750);}}}}return new esri.geometry.Point(x,this.y,sr);},toJson:function(){var json={x:this.x,y:this.y},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.ScreenPoint",esri.geometry.Point,{_initSR:function(){},offset:function(x,y){return new esri.geometry.ScreenPoint(this.x+x,this.y+y);}});dojo.declare("esri.geometry.Polyline",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultPolyline);this.paths=[];this._path=0;if(obj){if(obj.paths){dojo.mixin(this,obj);}else{this.spatialReference=obj;}this.spatialReference=new esri.SpatialReference(this.spatialReference);}this._initSR();},_extent:null,addPath:function(_752){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(dojo.isArray(_752[0])){dojo.forEach(_752,this._addPointArr,this);}else{dojo.forEach(_752,this._addPoint,this);}return this;},_addPointArr:function(_753){this.paths[this._path].push(_753);},_addPoint:function(_754){this.paths[this._path].push([_754.x,_754.y]);},_insertPoints:function(_755,_756){this._extent=null;this._path=_756;if(!this.paths[this._path]){this.paths[this._path]=[];}dojo.forEach(_755,this._addPoint,this);},_validateInputs:function(_757,_758){if((_757!==null&&_757!==undefined)&&(_757<0||_757>=this.paths.length)){return false;}if((_758!==null&&_757!==undefined)&&(_758<0||_758>=this.paths[_757].length)){return false;}return true;},getPoint:function(_759,_75a){if(this._validateInputs(_759,_75a)){return new esri.geometry.Point(this.paths[_759][_75a],this.spatialReference);}},setPoint:function(_75b,_75c,_75d){if(this._validateInputs(_75b,_75c)){this._extent=null;this.paths[_75b][_75c]=[_75d.x,_75d.y];return this;}},insertPoint:function(_75e,_75f,_760){if(this._validateInputs(_75e)&&esri._isDefined(_75f)&&(_75f>=0&&_75f<=this.paths[_75e].length)){this._extent=null;this.paths[_75e].splice(_75f,0,[_760.x,_760.y]);return this;}},removePath:function(_761){if(this._validateInputs(_761,null)){this._extent=null;var arr=this.paths.splice(_761,1)[0],i,il=arr.length,_762=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _762(arr[i],sr);}return arr;}},removePoint:function(_763,_764){if(this._validateInputs(_763,_764)){this._extent=null;return new esri.geometry.Point(this.paths[_763].splice(_764,1)[0],this.spatialReference);}},getExtent:function(){var _765;if(this._extent){_765=new esri.geometry.Extent(this._extent);_765._partwise=this._partwise;return _765;}var _766=this.paths,pal=_766.length;if(!pal||!_766[0].length){return;}var path,_767,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_766[0][0][0]),ymin=(ymax=_766[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_768=[],_769,_76a,_76b,_76c;for(pa=0;pa<pal;pa++){path=_766[pa];_769=(_76a=path[0]&&path[0][0]);_76b=(_76c=path[0]&&path[0][1]);ptl=path.length;for(pt=0;pt<ptl;pt++){_767=path[pt];x=_767[0];y=_767[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_769=min(_769,x);_76b=min(_76b,y);_76a=max(_76a,x);_76c=max(_76c,y);}_768.push(new esri.geometry.Extent({xmin:_769,ymin:_76b,xmax:_76a,ymax:_76c,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};this._partwise=_768.length>1?_768:null;_765=new esri.geometry.Extent(this._extent);_765._partwise=this._partwise;return _765;},toJson:function(){var json={paths:dojo.clone(this.paths)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Polygon",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultPolygon);this.rings=[];this._ring=0;if(obj){if(obj.rings){dojo.mixin(this,obj);}else{this.spatialReference=obj;}this.spatialReference=new esri.SpatialReference(this.spatialReference);}this._initSR();},_extent:null,addRing:function(_76d){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(dojo.isArray(_76d[0])){dojo.forEach(_76d,this._addPointArr,this);}else{dojo.forEach(_76d,this._addPoint,this);}return this;},_addPointArr:function(_76e){this.rings[this._ring].push(_76e);},_addPoint:function(_76f){this.rings[this._ring].push([_76f.x,_76f.y]);},_insertPoints:function(_770,_771){this._extent=null;this._ring=_771;if(!this.rings[this._ring]){this.rings[this._ring]=[];}dojo.forEach(_770,this._addPoint,this);},_validateInputs:function(_772,_773){if((_772!==null&&_772!==undefined)&&(_772<0||_772>=this.rings.length)){return false;}if((_773!==null&&_772!==undefined)&&(_773<0||_773>=this.rings[_772].length)){return false;}return true;},getPoint:function(_774,_775){if(this._validateInputs(_774,_775)){return new esri.geometry.Point(this.rings[_774][_775],this.spatialReference);}},setPoint:function(_776,_777,_778){if(this._validateInputs(_776,_777)){this._extent=null;this.rings[_776][_777]=[_778.x,_778.y];return this;}},insertPoint:function(_779,_77a,_77b){if(this._validateInputs(_779)&&esri._isDefined(_77a)&&(_77a>=0&&_77a<=this.rings[_779].length)){this._extent=null;this.rings[_779].splice(_77a,0,[_77b.x,_77b.y]);return this;}},removeRing:function(_77c){if(this._validateInputs(_77c,null)){this._extent=null;var arr=this.rings.splice(_77c,1)[0],i,il=arr.length,_77d=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _77d(arr[i],sr);}return arr;}},removePoint:function(_77e,_77f){if(this._validateInputs(_77e,_77f)){this._extent=null;return new esri.geometry.Point(this.rings[_77e].splice(_77f,1)[0],this.spatialReference);}},getExtent:function(){var _780;if(this._extent){_780=new esri.geometry.Extent(this._extent);_780._partwise=this._partwise;return _780;}var _781=this.rings,pal=_781.length;if(!pal||!_781[0].length){return;}var ring,_782,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_781[0][0][0]),ymin=(ymax=_781[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_783=[],_784,_785,_786,_787;for(pa=0;pa<pal;pa++){ring=_781[pa];_784=(_785=ring[0]&&ring[0][0]);_786=(_787=ring[0]&&ring[0][1]);ptl=ring.length;for(pt=0;pt<ptl;pt++){_782=ring[pt];x=_782[0];y=_782[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_784=min(_784,x);_786=min(_786,y);_785=max(_785,x);_787=max(_787,y);}_783.push(new esri.geometry.Extent({xmin:_784,ymin:_786,xmax:_785,ymax:_787,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:(sr?sr.toJson():null)};this._partwise=_783.length>1?_783:null;_780=new esri.geometry.Extent(this._extent);_780._partwise=this._partwise;return _780;},contains:function(_788){var _789=this.rings,ring,_78a=false,pi,pj,_78b,j,i,pa,pal=_789.length,_78c=this.spatialReference,_78d=_788.spatialReference,_78e,x=_788.x,y=_788.y;if(_78c&&_78d&&!_78c.equals(_78d)&&_78c._canProject(_78d)){_78e=_78c.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_78e[0];y=_78e[1];}for(pa=0;pa<pal;pa++){ring=_789[pa];_78b=ring.length;j=0;for(i=0;i<_78b;i++){j++;if(j===_78b){j=0;}pi=ring[i];pj=ring[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_78a=!_78a;}}}return _78a;},toJson:function(){var json={rings:dojo.clone(this.rings)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Multipoint",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultMultipoint);this.points=[];if(obj){if(obj.points){dojo.mixin(this,obj);}else{this.spatialReference=obj;}this.spatialReference=new esri.SpatialReference(this.spatialReference);}this._initSR();},_extent:null,addPoint:function(_78f){this._extent=null;if(dojo.isArray(_78f)){this.points.push(_78f);}else{this.points.push([_78f.x,_78f.y]);}return this;},removePoint:function(_790){if(this._validateInputs(_790)){this._extent=null;return new esri.geometry.Point(this.points.splice(_790,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new esri.geometry.Extent(this._extent);}var _791=this.points,il=_791.length;if(!il){return;}var _792=_791[0],xmax,ymax,xmin=(xmax=_792[0]),ymin=(ymax=_792[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_792=_791[i];x=_792[0];y=_792[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};return new esri.geometry.Extent(this._extent);},_validateInputs:function(_793){if(_793===null||_793<0||_793>=this.points.length){return false;}return true;},getPoint:function(_794){if(this._validateInputs(_794)){var _795=this.points[_794];return new esri.geometry.Point(_795[0],_795[1],this.spatialReference);}},setPoint:function(_796,_797){if(this._validateInputs(_796)){this._extent=null;this.points[_796]=[_797.x,_797.y];return this;}},toJson:function(){var json={points:dojo.clone(this.points)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Extent",esri.geometry.Geometry,{constructor:function(xmin,ymin,xmax,ymax,_798){dojo.mixin(this,esri.geometry.defaultExtent);if(dojo.isObject(xmin)){dojo.mixin(this,xmin);this.spatialReference=new esri.SpatialReference(this.spatialReference);}else{this.update(xmin,ymin,xmax,ymax,_798);}this._initSR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new esri.geometry.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_799){var _79a=this.getCenter(),dx=_799.x-_79a.x,dy=_799.y-_79a.y;return new esri.geometry.Extent(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(xmin,ymin,xmax,ymax,_79b){this.xmin=xmin;this.ymin=ymin;this.xmax=xmax;this.ymax=ymax;this.spatialReference=_79b;return this;},offset:function(ox,oy){return new esri.geometry.Extent(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_79c){var _79d=(1-_79c)/2,_79e=this.getWidth()*_79d,_79f=this.getHeight()*_79d;return new esri.geometry.Extent(this.xmin+_79e,this.ymin+_79f,this.xmax-_79e,this.ymax-_79f,this.spatialReference);},intersects:function(_7a0){var type=_7a0.type,_7a1=this.spatialReference,_7a2=_7a0.spatialReference;if(_7a1&&_7a2&&!_7a1.equals(_7a2)&&_7a1._canProject(_7a2)){_7a0=_7a1.isWebMercator()?esri.geometry.geographicToWebMercator(_7a0):esri.geometry.webMercatorToGeographic(_7a0,true);}switch(type){case "point":return this.contains(_7a0);case "multipoint":return this._intersectsMultipoint(_7a0);case "extent":return this._intersectsExtent(_7a0);case "polygon":return this._intersectsPolygon(_7a0);case "polyline":return this._intersectsPolyline(_7a0);}},_intersectsMultipoint:function(_7a3){var len=_7a3.points.length,i;for(i=0;i<len;i++){if(this.contains(_7a3.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_7a4){var xmin,ymin,_7a5,_7a6,_7a7=false;if(this.xmin<=_7a4.xmin){xmin=_7a4.xmin;if(this.xmax<xmin){_7a7=true;}else{_7a5=Math.min(this.xmax,_7a4.xmax)-xmin;}}else{xmin=this.xmin;if(_7a4.xmax<xmin){_7a7=true;}else{_7a5=Math.min(this.xmax,_7a4.xmax)-xmin;}}if(this.ymin<=_7a4.ymin){ymin=_7a4.ymin;if(this.ymax<ymin){_7a7=true;}else{_7a6=Math.min(this.ymax,_7a4.ymax)-ymin;}}else{ymin=this.ymin;if(_7a4.ymax<ymin){_7a7=true;}else{_7a6=Math.min(this.ymax,_7a4.ymax)-ymin;}}if(_7a7){return null;}return new esri.geometry.Extent(xmin,ymin,xmin+_7a5,ymin+_7a6,this.spatialReference);},_intersectsPolygon:function(_7a8){var _7a9=[this.xmin,this.ymax],_7aa=[this.xmax,this.ymax],_7ab=[this.xmin,this.ymin],_7ac=[this.xmax,this.ymin],_7ad=[_7a9,_7aa,_7ab,_7ac],_7ae=[[_7ab,_7a9],[_7a9,_7aa],[_7aa,_7ac],[_7ac,_7ab]],i,j,_7af=_7a8.rings,_7b0=_7af.length,ring,len,_7b1=new esri.geometry.Point(0,0,this.spatialReference);len=_7ad.length;for(i=0;i<len;i++){_7b1.update(_7ad[i][0],_7ad[i][1]);if(_7a8.contains(_7b1)){return true;}}_7b1.setSpatialReference(_7a8.spatialReference);var pi,pj;for(i=0;i<_7b0;i++){ring=_7af[i];len=ring.length;if(!len){continue;}pi=ring[0];_7b1.update(pi[0],pi[1]);if(this.contains(_7b1)){return true;}for(j=1;j<len;j++){pj=ring[j];_7b1.update(pj[0],pj[1]);if(this.contains(_7b1)||this._intersectsLine([pi,pj],_7ae)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_7b2){var _7b3=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_7b4=_7b2.paths,_7b5=_7b4.length,path,len;var pi,pj,_7b6=new esri.geometry.Point(0,0,_7b2.spatialReference);for(i=0;i<_7b5;i++){path=_7b4[i];len=path.length;if(!len){continue;}pi=path[0];_7b6.update(pi[0],pi[1]);if(this.contains(_7b6)){return true;}for(j=1;j<len;j++){pj=path[j];_7b6.update(pj[0],pj[1]);if(this.contains(_7b6)||this._intersectsLine([pi,pj],_7b3)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_7b7){var _7b8=esri.geometry._getLineIntersection2,i,len=_7b7.length;for(i=0;i<len;i++){if(_7b8(line,_7b7[i])){return true;}}return false;},contains:function(_7b9){if(!_7b9){return false;}var type=_7b9.type;if(type==="point"){var _7ba=this.spatialReference,_7bb=_7b9.spatialReference,_7bc,x=_7b9.x,y=_7b9.y;if(_7ba&&_7bb&&!_7ba.equals(_7bb)&&_7ba._canProject(_7bb)){_7bc=_7ba.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_7bc[0];y=_7bc[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_7b9);}}return false;},_containsExtent:function(_7bd){var xmin=_7bd.xmin,ymin=_7bd.ymin,xmax=_7bd.xmax,ymax=_7bd.ymax,sr=_7bd.spatialReference,pt1=new esri.geometry.Point(xmin,ymin,sr),pt2=new esri.geometry.Point(xmin,ymax,sr),pt3=new esri.geometry.Point(xmax,ymax,sr),pt4=new esri.geometry.Point(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_7be){return new esri.geometry.Extent(Math.min(this.xmin,_7be.xmin),Math.min(this.ymin,_7be.ymin),Math.max(this.xmax,_7be.xmax),Math.max(this.ymax,_7be.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new esri.geometry.Extent(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new esri.SpatialReference(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var EG=esri.geometry,_7bf=EG.fromJson(this.toJson()),sr=_7bf.spatialReference;info=info||sr._getInfo();if(info){var _7c0=this._getCM(info);if(_7c0){var _7c1=sr._isWebMercator()?EG.webMercatorToGeographic(_7c0):_7c0;_7bf.xmin-=_7c0.x;_7bf.xmax-=_7c0.x;if(!sr._isWebMercator()){_7c1.x=this._normalizeX(_7c1.x,info).x;}_7bf.spatialReference.wkt=esri.substitute({Central_Meridian:_7c1.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_7bf.spatialReference.wkid=null;}}this._shifted=_7bf;}return this._shifted;},_getCM:function(info){var _7c2,_7c3=info.valid[0],_7c4=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _7c5=(xmin>=_7c3&&xmin<=_7c4),_7c6=(xmax>=_7c3&&xmax<=_7c4);if(!(_7c5&&_7c6)){_7c2=this.getCenter();}return _7c2;},_normalize:function(_7c7,_7c8,info){var EG=esri.geometry,_7c9=EG.fromJson(this.toJson()),sr=_7c9.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _7ca=dojo.map(this._getParts(info),function(part){return part.extent;});if(_7ca.length>2){if(_7c7){return this._shiftCM(info);}else{return _7c9.update(info.valid[0],_7c9.ymin,info.valid[1],_7c9.ymax,sr);}}else{if(_7ca.length===2){if(_7c7){return this._shiftCM(info);}else{return _7c8?_7ca:new EG.Polygon({"rings":dojo.map(_7ca,function(_7cb){return [[_7cb.xmin,_7cb.ymin],[_7cb.xmin,_7cb.ymax],[_7cb.xmax,_7cb.ymax],[_7cb.xmax,_7cb.ymin],[_7cb.xmin,_7cb.ymin]];}),"spatialReference":sr});}}else{return _7ca[0]||_7c9;}}}}return _7c9;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_7cc=this.getWidth(),_7cd=xmin,_7ce=xmax,_7cf=0,_7d0=0,nrml,_7d1=[],_7d2,_7d3,_7d4;info=info||sr._getInfo();_7d2=info.valid[0];_7d3=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_7cf=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_7d0=nrml.frameId;_7d4=(xmin===xmax&&_7cc>0);if(_7cc>(2*_7d3)){var E1=new esri.geometry.Extent(_7cd<_7ce?xmin:xmax,ymin,_7d3,ymax,sr),E2=new esri.geometry.Extent(_7d2,ymin,_7cd<_7ce?xmax:xmin,ymax,sr),E3=new esri.geometry.Extent(0,ymin,_7d3,ymax,sr),E4=new esri.geometry.Extent(_7d2,ymin,0,ymax,sr),k,_7d5=[],_7d6=[];if(E1.contains(E3)){_7d5.push(_7cf);}if(E1.contains(E4)){_7d6.push(_7cf);}if(E2.contains(E3)){_7d5.push(_7d0);}if(E2.contains(E4)){_7d6.push(_7d0);}for(k=_7cf+1;k<_7d0;k++){_7d5.push(k);_7d6.push(k);}_7d1.push({extent:E1,frameIds:[_7cf]},{extent:E2,frameIds:[_7d0]},{extent:E3,frameIds:_7d5},{extent:E4,frameIds:_7d6});}else{if((xmin>xmax)||_7d4){_7d1.push({extent:new esri.geometry.Extent(xmin,ymin,_7d3,ymax,sr),frameIds:[_7cf]},{extent:new esri.geometry.Extent(_7d2,ymin,xmax,ymax,sr),frameIds:[_7d0]});}else{_7d1.push({extent:new esri.geometry.Extent(xmin,ymin,xmax,ymax,sr),frameIds:[_7cf]});}}this._parts=_7d1;}return this._parts;},_normalizeX:function(x,info){var _7d7=0,_7d8=info.valid[0],_7d9=info.valid[1],_7da=2*_7d9,_7db;if(x>_7d9){_7db=Math.ceil(Math.abs(x-_7d9)/_7da);x-=(_7db*_7da);_7d7=_7db;}else{if(x<_7d8){_7db=Math.ceil(Math.abs(x-_7d8)/_7da);x+=(_7db*_7da);_7d7=-_7db;}}return {x:x,frameId:_7d7};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Rect",esri.geometry.Geometry,{constructor:function(json,y,_7dc,_7dd,_7de){dojo.mixin(this,_6ed.gfx.defaultRect);if(dojo.isObject(json)){dojo.mixin(this,json);this.spatialReference=new esri.SpatialReference(this.spatialReference);}else{this.x=json;this.y=y;this.width=_7dc;this.height=_7dd;this.spatialReference=_7de;}this._initSR();},getCenter:function(){return new esri.geometry.Point(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new esri.geometry.Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return esri.geometry._rectToExtent(this);},update:function(x,y,_7df,_7e0,_7e1){this.x=x;this.y=y;this.width=_7df;this.height=_7e0;this.spatialReference=_7e1;return this;}});});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-construct","./dom-style","./has","./ready","./_base/window"],function(_7e2,_7e3,_7e4,_7e5,_7e6,has,_7e7,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_7e3.blankGif||_7e2.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_7e6.getComputedStyle(div),_7e8=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_7e8&&(_7e8=="none"||_7e8=="url(invalid-url:)"));_7e5.destroy(div);return hc;});_7e7(90,function(){if(has("highcontrast")){_7e4.add(win.body(),"dj_a11y");}});return has;});},"WebScene/lib/JSONGet":function(){define("WebScene/lib/JSONGet",["dijit","dojo","dojox","dojo/require!WebScene/lib/clarinet,WebScene/lib/rawinflate"],function(_7e9,dojo,_7ea){dojo.provide("WebScene.lib.JSONGet");dojo.require("WebScene.lib.clarinet");dojo.require("WebScene.lib.rawinflate");jsonGet=function(url,_7eb,_7ec,_7ed,_7ee){var that=this;this.i18n=dojo.mixin({},dojo.i18n.getLocalization("WebScene","cewebviewer").common);dojo.mixin(this.i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").viewerPage);var _7ef=_7ed.itemSize||_7ee;var _7f0=url+"?gzipHeader=true";if(url.indexOf("?")>0){_7f0=url+"&gzipHeader=true";}if(_7ef){var _7f1=true;if(_7f2(_7ef)){_7f3(_7ef);}else{_7f4(_7f1,_7ef);}}else{_7f5(_7f0);}function _7f5(hurl){var xhrh=new XMLHttpRequest();xhrh.open("HEAD",hurl);xhrh.onreadystatechange=function(){if(this.readyState===this.DONE){if(this.status===200){var _7f6=_7f7(this);if(_7f2(_7f6.size)){_7f3(_7f6.size);}else{_7f4(_7f6.gzipEncoding,_7f6.size);}}else{_7ec("error",that.i18n.unableToLoadData,dojo.string.substitute(that.i18n.errorStatus,{status:this.status,url:hurl}));}}};xhrh.send();};function _7f3(_7f8){_7ec("log",this.i18n.fallbackLoaderMsg,"");_7f9(false,"arraybuffer",true,_7f8);};function _7f4(gzip,_7fa){var _7fb=gzip?"text":"arraybuffer";_7f9(gzip,_7fb,false,_7fa);};function _7f9(gzip,_7fc,_7fd,_7fe){gzip=_7ed.gzip!==undefined?_7ed.gzip:gzip;_7fc=_7ed.responseType!==undefined?_7ed.responseType:_7fc;_7fd=_7ed.streamParse!==undefined?_7ed.streamParse:_7fd;var xhr=new XMLHttpRequest();if(gzip){xhr.open("GET",_7f0,true);}else{xhr.open("GET",url,true);}xhr.responseType=_7fc;xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==0){_7ec("error",that.i18n.unableToLoadData,": "+url);}if(xhr.status==200){_7ec("download","",_7fe,_7fe);processResponse(xhr,url,_7eb,_7ec);}else{if(_7ec){_7ec("error",that.i18n.unableToLoadURL,dojo.string.substitute(that.i18n.errorStatus,{status:xhr.status,url:url}));}}}};if(_7ec){xhr.addEventListener("progress",function(evt){var _7ff=gzip?evt.loaded/6:evt.loaded;var _800=evt.lengthComputable?evt.total:_7fe;_7ec("download","",_7ff,_800);});}xhr.send(null);processResponse=function(){var _801=32*1024;var _802=200;var _803=new Array(_801);var _804,_805=undefined;if(xhr.responseType==="arraybuffer"){_804=new Uint8Array(xhr.response,0,1)[0];_805=_804!==123;}else{_804=xhr.responseText[0];_805=_804!=="{";}var _806=gzip?that.i18n.reqUnzip:that.i18n.reqGzip;var got=_805?that.i18n.gotGzip:that.i18n.gotUnzip;_7ec("log",_806+got,"");if(xhr.responseType==="arraybuffer"){var _807=new _808();if(_805){var _809=RawDeflate.readHeader(xhr.response);if(!_809.valid){_7ec("error",that.i18n.gzipInvalid,url);return;}if(_7fd){_7ec("log",that.i18n.customUnzipAndStream,"");_80a(_809.data,_807,0,_809.uncompressedSize);}else{_7ec("info",that.i18n.reading+"...","");var uz;setTimeout(function(){uz=RawDeflate.inflate(_809.data);_7ec("log",that.i18n.unpackingDone,"");},0);setTimeout(function(){try{if(uz===undefined){_7ec("error",that.i18n.unpackerEmpty);return;}_7eb(JSON.parse(uz));}catch(e){_7ec("error",that.i18n.wsDataInvalid," JSON parse error: "+e);}},0);}}else{if(!_7fd){_7ec("error",that.i18n.nativeCantProcess,url);}else{_7ec("log",that.i18n.streamParseOnUnzippedAB,"");_80b(new Uint8Array(xhr.response),_807,0);}}}else{if(_7fd){_7ec("error",that.i18n.streamPOnlyOnAB,url);return;}if(_805){_7ec("error",that.i18n.zipOnlyAB,url);return;}_7ec("info",that.i18n.reading+"... "," (native parser) "+url);setTimeout(function(){try{if(xhr.responseText===undefined){_7ec("error",that.i18n.xhrEmpty);return;}_7eb(JSON.parse(xhr.responseText));}catch(e){_7ec("error",that.i18n.wsDataInvalid,"JSON parse error: "+e);}},0);}function _80b(arr,_80c,_80d){var t0=Date.now();while(true){if(Date.now()-t0>=_802||_80d==arr.length){break;}var end=Math.min(_80d+_801,arr.length);_80c.write(_80e(arr,_80d,end));_80d=end;}if(_80d==arr.length){var _80f=_80c.close();if(_7ec){_7ec("success","",_80f);}_7eb(_80f);}else{if(_7ec){_7ec("parse","",_80d,arr.length);}setTimeout(function(){_80b(arr,_80c,_80d);},0);}};function _80a(arr,_810,_811,_812){if(_811===0){RawDeflate.inflate_stream_begin(arr);}var t0=Date.now();while(true){var data=RawDeflate.inflate_stream(_801);if(data.length>0){_810.write(_80e(data,0,data.length));_811+=data.length;}else{RawDeflate.inflate_stream_end();var _813=_810.close();if(_7ec){_7ec("success","",_813);}_7eb(_813);return;}if(Date.now()-t0>=_802){if(_7ec){_7ec("parse","",_811,_812);}setTimeout(function(){_80a(arr,_810,_811,_812);},0);return;}}};function _808(){var _814=clarinet.parser();var _815=new Object;var _816="result";var _817=new Array();var _818=new Array();_818.push(_815);var _819=_815;_814.onerror=function(e){_7ec("error",that.i18n.wsDataInvalid,"clarinet parser error in "+url+": "+e);};_814.onvalue=function(v){if(_817.length!==0){_817[_817.length-1].push(v);}else{_815[_816]=v;}};_814.onopenobject=function(key){_818.push(_815);_815[_816]=new Object();_815=_815[_816];_814.onkey(key);};_814.onkey=function(key){_816=key;};_814.oncloseobject=function(){_815=_818.pop();};_814.onopenarray=function(){if(_817.length===0){_815[_816]=new Array();_817.push(_815[_816]);}else{var arr=new Array();_817[_817.length-1].push(arr);_817.push(arr);}};_814.onclosearray=function(){_817.pop();};_814.onend=function(){};this.write=function(str){_814.write(str);};this.close=function(){_814.close();return _819["result"];};};function _80e(arr,_81a,end){for(var i=_81a;i<end;++i){_803[i-_81a]=String.fromCharCode(arr[i]);}_803.length=end-_81a;return _803.join("");};};};function _7f2(_81b){return true;};function _7f7(_81c){var size=_81c.getResponseHeader("Content-Length")?parseFloat(_81c.getResponseHeader("Content-Length")):undefined;var _81d=_81c.getResponseHeader("Content-Encoding")=="gzip";if(!_81d){_7ec("log",that.i18n.noGzipEnc,"");}return {"size":size,"gzipEncoding":_81d};};};jsonGetEsri=function(url,_81e,_81f){esri.config.defaults.io.proxyUrl="../proxy.php";esri.request({url:url,}).then(function(json){_81f("success","");_81e(json);},function(_820){_81f("error","Error while loading scene file",_820);});};});},"dojo/aspect":function(){define("dojo/aspect",[],function(){"use strict";var _821,_822=0;function _823(_824,type,_825,_826){var _827=_824[type];var _828=type=="around";var _829;if(_828){var _82a=_825(function(){return _827.advice(this,arguments);});_829={remove:function(){_829.cancelled=true;},advice:function(_82b,args){return _829.cancelled?_827.advice(_82b,args):_82a.apply(_82b,args);}};}else{_829={remove:function(){var _82c=_829.previous;var next=_829.next;if(!next&&!_82c){delete _824[type];}else{if(_82c){_82c.next=next;}else{_824[type]=next;}if(next){next.previous=_82c;}}},id:_822++,advice:_825,receiveArguments:_826};}if(_827&&!_828){if(type=="after"){var next=_827;while(next){_827=next;next=next.next;}_827.next=_829;_829.previous=_827;}else{if(type=="before"){_824[type]=_829;_829.next=_827;_827.previous=_829;}}}else{_824[type]=_829;}return _829;};function _82d(type){return function(_82e,_82f,_830,_831){var _832=_82e[_82f],_833;if(!_832||_832.target!=_82e){_82e[_82f]=_833=function(){var _834=_822;var args=arguments;var _835=_833.before;while(_835){args=_835.advice.apply(this,args)||args;_835=_835.next;}if(_833.around){var _836=_833.around.advice(this,args);}var _837=_833.after;while(_837&&_837.id<_834){if(_837.receiveArguments){var _838=_837.advice.apply(this,args);_836=_838===_821?_836:_838;}else{_836=_837.advice.call(this,_836,args);}_837=_837.next;}return _836;};if(_832){_833.around={advice:function(_839,args){return _832.apply(_839,args);}};}_833.target=_82e;}var _83a=_823((_833||_832),type,_830,_831);_830=null;return _83a;};};var _83b=_82d("after");var _83c=_82d("before");var _83d=_82d("around");return {before:_83c,around:_83d,after:_83b};});},"dojo/_base/window":function(){define("dojo/_base/window",["./kernel","./lang","../sniff"],function(dojo,lang,has){var ret={global:dojo.global,doc:this["document"]||null,body:function(doc){doc=doc||dojo.doc;return doc.body||doc.getElementsByTagName("body")[0];},setContext:function(_83e,_83f){dojo.global=ret.global=_83e;dojo.doc=ret.doc=_83f;},withGlobal:function(_840,_841,_842,_843){var _844=dojo.global;try{dojo.global=ret.global=_840;return ret.withDoc.call(null,_840.document,_841,_842,_843);}finally{dojo.global=ret.global=_844;}},withDoc:function(_845,_846,_847,_848){var _849=ret.doc,oldQ=has("quirks"),_84a=has("ie"),isIE,mode,pwin;try{dojo.doc=ret.doc=_845;dojo.isQuirks=has.add("quirks",dojo.doc.compatMode=="BackCompat",true,true);if(has("ie")){if((pwin=_845.parentWindow)&&pwin.navigator){isIE=parseFloat(pwin.navigator.appVersion.split("MSIE ")[1])||undefined;mode=_845.documentMode;if(mode&&mode!=5&&Math.floor(isIE)!=mode){isIE=mode;}dojo.isIE=has.add("ie",isIE,true,true);}}if(_847&&typeof _846=="string"){_846=_847[_846];}return _846.apply(_847,_848||[]);}finally{dojo.doc=ret.doc=_849;dojo.isQuirks=has.add("quirks",oldQ,true,true);dojo.isIE=has.add("ie",_84a,true,true);}}};1&&lang.mixin(dojo,ret);return ret;});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"dojo/NodeList-dom":function(){define(["./_base/kernel","./query","./_base/array","./_base/lang","./dom-class","./dom-construct","./dom-geometry","./dom-attr","./dom-style"],function(dojo,_84b,_84c,lang,_84d,_84e,_84f,_850,_851){var _852=function(a){return a.length==1&&(typeof a[0]=="string");};var _853=function(node){var p=node.parentNode;if(p){p.removeChild(node);}};var _854=_84b.NodeList,awc=_854._adaptWithCondition,aafe=_854._adaptAsForEach,aam=_854._adaptAsMap;function _855(_856){return function(node,name,_857){if(arguments.length==2){return _856[typeof name=="string"?"get":"set"](node,name);}return _856.set(node,name,_857);};};lang.extend(_854,{_normalize:function(_858,_859){var _85a=_858.parse===true;if(typeof _858.template=="string"){var _85b=_858.templateFunc||(dojo.string&&dojo.string.substitute);_858=_85b?_85b(_858.template,_858):_858;}var type=(typeof _858);if(type=="string"||type=="number"){_858=_84e.toDom(_858,(_859&&_859.ownerDocument));if(_858.nodeType==11){_858=lang._toArray(_858.childNodes);}else{_858=[_858];}}else{if(!lang.isArrayLike(_858)){_858=[_858];}else{if(!lang.isArray(_858)){_858=lang._toArray(_858);}}}if(_85a){_858._runParse=true;}return _858;},_cloneNode:function(node){return node.cloneNode(true);},_place:function(ary,_85c,_85d,_85e){if(_85c.nodeType!=1&&_85d=="only"){return;}var _85f=_85c,_860;var _861=ary.length;for(var i=_861-1;i>=0;i--){var node=(_85e?this._cloneNode(ary[i]):ary[i]);if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!_860){_860=_85f.ownerDocument.createElement("div");}_860.appendChild(node);dojo.parser.parse(_860);node=_860.firstChild;while(_860.firstChild){_860.removeChild(_860.firstChild);}}if(i==_861-1){_84e.place(node,_85f,_85d);}else{_85f.parentNode.insertBefore(node,_85f);}_85f=node;}},position:aam(_84f.position),attr:awc(_855(_850),_852),style:awc(_855(_851),_852),addClass:aafe(_84d.add),removeClass:aafe(_84d.remove),toggleClass:aafe(_84d.toggle),replaceClass:aafe(_84d.replace),empty:aafe(_84e.empty),removeAttr:aafe(_850.remove),marginBox:aam(_84f.getMarginBox),place:function(_862,_863){var item=_84b(_862)[0];return this.forEach(function(node){_84e.place(node,item,_863);});},orphan:function(_864){return (_864?_84b._filterResult(this,_864):this).forEach(_853);},adopt:function(_865,_866){return _84b(_865).place(this[0],_866)._stash(this);},query:function(_867){if(!_867){return this;}var ret=new _854;this.map(function(node){_84b(_867,node).forEach(function(_868){if(_868!==undefined){ret.push(_868);}});});return ret._stash(this);},filter:function(_869){var a=arguments,_86a=this,_86b=0;if(typeof _869=="string"){_86a=_84b._filterResult(this,a[0]);if(a.length==1){return _86a._stash(this);}_86b=1;}return this._wrap(_84c.filter(_86a,a[_86b],a[_86b+1]),this);},addContent:function(_86c,_86d){_86c=this._normalize(_86c,this[0]);for(var i=0,node;(node=this[i]);i++){this._place(_86c,node,_86d,i>0);}return this;}});return _854;});},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(dojo,on,has,dom){if(on._fixEvent){var _86e=on._fixEvent;on._fixEvent=function(evt,se){evt=_86e(evt,se);if(evt){dom.normalizeEvent(evt);}return evt;};}var ret={fix:function(evt,_86f){if(on._fixEvent){return on._fixEvent(evt,_86f);}return evt;},stop:function(evt){if(has("dom-addeventlistener")||(evt&&evt.preventDefault)){evt.preventDefault();evt.stopPropagation();}else{evt=evt||window.event;evt.cancelBubble=true;on._preventDefault.call(evt);}}};if(1){dojo.fixEvent=ret.fix;dojo.stopEvent=ret.stop;}return ret;});},"WebScene/app/DualVisualizer":function(){define("WebScene/app/DualVisualizer",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/Renderer,WebScene/lib/ShadowMap,WebScene/lib/SSAOHelper,WebScene/lib/Util"],function(_870,dojo,_871){dojo.provide("WebScene.app.DualVisualizer");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Renderer");dojo.require("WebScene.lib.ShadowMap");dojo.require("WebScene.lib.SSAOHelper");dojo.require("WebScene.lib.Util");DualVisualizer=function(_872,_873,_874,_875,gl){var _876=new Renderer(_872,_873,_874,_875,gl);var _877=new Renderer(_872,_873,_874,_875,gl);var _878=new ShadowMap(_872,gl);var _879=new ShadowMap(_872,gl);var _87a=new SSAOHelper(_872,_875,gl);var _87b=new SSAOHelper(_872,_875,gl);var _87c=0.5;var _87d=new Object();var _87e=new Object();var _87f=new Array();var _880=new Array();this.dispose=function(){_876.dispose();_877.dispose();if(_878.getEnableState()){_878.disable();}if(_879.getEnableState()){_879.disable();}if(_87a.getEnableState()){_87a.disable();}if(_87b.getEnableState()){_87b.disable();}};this.setLightingData=function(data){_881(_876,_877,"setLightingData",data);};this.getLightingData=function(){return _876.getLightingData();};this.setData=function(data){if(data.centerLinePos!=undefined){verify(data.centerLinePos>0&&data.centerLinePos<1,"centerLinePos should be within range ]0, 1[");_87c=Math.min(Math.max(data.centerLinePos,0.01),0.99);}if(data.shadowMap!==undefined&&data.shadowMap!==_878.getEnableState()){_881(_878,_879,"setEnableState",data.shadowMap);}if(data.ssao!==undefined&&data.ssao!==_87a.getEnableState()){_881(_87a,_87b,"setEnableState",data.ssao);}if(data.ssaoAttenuation!==undefined){_881(_87a,_87b,"setAttenuation",data.ssaoAttenuation);}if(data.ssaoRadius!==undefined){_881(_87a,_87b,"setRadius",data.ssaoRadius);}if(data.ssaoFilterRadius!==undefined){_881(_87a,_87b,"setFilterRadius",data.ssaoFilterRadius);}if(data.ssaoSamples!==undefined){_881(_87a,_87b,"setSamples",data.ssaoSamples);}};this.getData=function(){var _882=new Object();if(_878.getIsSupported()){_882.shadowMap=_878.getEnableState();}if(_87a.getIsSupported()){_882.ssao=_87a.getEnableState();_882.ssaoAttenuation=_87a.getAttenuation();_882.ssaoRadius=_87a.getRadius();_882.ssaoFilterRadius=_87a.getFilterRadius();_882.ssaoSamples=_87a.getSamples();}_882.centerLinePos=_87c;return _882;};this.setContent=function(_883,_884,idx){if(idx===undefined||idx===0){_876.setContent(_883);_87d=_883;_87f=_884;}else{_877.setContent(_883);_87e=_883;_880=_884;}};this.getContent=function(idx){if(idx===0){return _87f;}if(idx===1){return _880;}var _885=new Object();for(var i=0;i<_87f.length;++i){_885[_87f[i]]=undefined;}for(var i=0;i<_880.length;++i){_885[_880[i]]=undefined;}return Object.keys(_885);};this.getContentRenderGeometries=function(){return object2array(mergeObjects(array2object(_87d,"getUniqueName"),array2object(_87e,"getUniqueName")));};this.getPickContent=function(_886,_887){if(_886[0]<_887[2]*_87c){return _87f;}return _880;};this.setSelection=function(_888){_881(_876,_877,"setSelection",_888);};var _889=mat4.create();var _88a=vec4.create();this.render=function(view,proj,_88b,_88c,fovX,_88d,_88e,fbo){if(_875.getLoadingCount()!==0){return;}var w2=_88c[2]*_87c;w2=Math.max(w2,2);w2=Math.min(w2,_88c[2]-2);var sx0=1/_87c;var sx1=1/(1-_87c);var tx0=sx0*(1-_87c);var tx1=-sx1*_87c;_88f(proj,tx0,sx0,_889);vec4.set4(_88c[0],_88c[1],w2,_88c[3],_88a);_890(view,_889,_88b,_88a,_87c*fovX,_88d,_88e,_87d,_876,_878,_87a,fbo);_88f(proj,tx1,sx1,_889);vec4.set4(_88c[0]+w2,_88c[1],_88c[2]-w2,_88c[3],_88a);_890(view,_889,_88b,_88a,(1-_87c)*fovX,_88d,_88e,_87e,_877,_879,_87b,fbo);gl.viewport(_88c[0],_88c[1],_88c[2],_88c[3]);};function _890(view,proj,_891,_892,fovX,_893,_894,_895,_896,_897,_898,fbo){gl.viewport(_892[0],_892[1],_892[2],_892[3]);if(_897.getEnableState()){_897.prepare(view,proj,_893,_895,_894);_896.renderSimple(_897.getMvMat(),_897.getProjMat(),_897.getNearFar(),_894,"materialDepth");_897.finish(fbo);}_897.setUniforms(_872.get("default"));_897.setUniforms(_872.get("defaultTextured"));if(_898.getEnableState()){_898.prepare0(_892);_896.renderSimple(view,proj,_891,_894,"materialNormal");_898.prepare1();_896.renderSimple(view,proj,_891,_894,"materialDepth");_898.finish(_891,fovX,fbo);}_898.setUniforms(_872.get("default"));_898.setUniforms(_872.get("defaultTextured"));_896.render(view,proj,_891,_894);};function _88f(proj,tx,sx,_899){mat4.identity(_899);mat4.translate(_899,[tx,0,0],_899);mat4.scale(_899,[sx,1,1],_899);mat4.multiply(_899,proj,_899);};function _881(_89a,_89b,_89c,arg0){_89a[_89c](arg0);_89b[_89c](arg0);};};});},"dojo/errors/create":function(){define(["../_base/lang"],function(lang){return function(name,ctor,base,_89d){base=base||Error;var _89e=function(_89f){if(base===Error){if(Error.captureStackTrace){Error.captureStackTrace(this,_89e);}var err=Error.call(this,_89f),prop;for(prop in err){if(err.hasOwnProperty(prop)){this[prop]=err[prop];}}this.message=_89f;this.stack=err.stack;}else{base.apply(this,arguments);}if(ctor){ctor.apply(this,arguments);}};_89e.prototype=lang.delegate(base.prototype,_89d);_89e.prototype.name=name;_89e.prototype.constructor=_89e;return _89e;};});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_8a0,keys,_8a1,has,_8a2,win,_8a3){var ret=_8a1("dijit._OnDijitClickMixin",null,{connect:function(obj,_8a4,_8a5){return this.inherited(arguments,[obj,_8a4=="ondijitclick"?_8a3:_8a4,_8a5]);}});ret.a11yclick=_8a3;return ret;});},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(dom,has,_8a6,lang,win){var trim=lang.trim;var each=_8a6.forEach;var _8a7=function(){return win.doc;};var _8a8=(_8a7().compatMode)=="BackCompat";var _8a9=">~+";var _8aa=false;var _8ab=function(){return true;};var _8ac=function(_8ad){if(_8a9.indexOf(_8ad.slice(-1))>=0){_8ad+=" * ";}else{_8ad+=" ";}var ts=function(s,e){return trim(_8ad.slice(s,e));};var _8ae=[];var _8af=-1,_8b0=-1,_8b1=-1,_8b2=-1,_8b3=-1,inId=-1,_8b4=-1,_8b5,lc="",cc="",_8b6;var x=0,ql=_8ad.length,_8b7=null,_8b8=null;var _8b9=function(){if(_8b4>=0){var tv=(_8b4==x)?null:ts(_8b4,x);_8b7[(_8a9.indexOf(tv)<0)?"tag":"oper"]=tv;_8b4=-1;}};var _8ba=function(){if(inId>=0){_8b7.id=ts(inId,x).replace(/\\/g,"");inId=-1;}};var _8bb=function(){if(_8b3>=0){_8b7.classes.push(ts(_8b3+1,x).replace(/\\/g,""));_8b3=-1;}};var _8bc=function(){_8ba();_8b9();_8bb();};var _8bd=function(){_8bc();if(_8b2>=0){_8b7.pseudos.push({name:ts(_8b2+1,x)});}_8b7.loops=(_8b7.pseudos.length||_8b7.attrs.length||_8b7.classes.length);_8b7.oquery=_8b7.query=ts(_8b6,x);_8b7.otag=_8b7.tag=(_8b7["oper"])?null:(_8b7.tag||"*");if(_8b7.tag){_8b7.tag=_8b7.tag.toUpperCase();}if(_8ae.length&&(_8ae[_8ae.length-1].oper)){_8b7.infixOper=_8ae.pop();_8b7.query=_8b7.infixOper.query+" "+_8b7.query;}_8ae.push(_8b7);_8b7=null;};for(;lc=cc,cc=_8ad.charAt(x),x<ql;x++){if(lc=="\\"){continue;}if(!_8b7){_8b6=x;_8b7={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return _8aa?this.otag:this.tag;}};_8b4=x;}if(_8b5){if(cc==_8b5){_8b5=null;}continue;}else{if(cc=="'"||cc=="\""){_8b5=cc;continue;}}if(_8af>=0){if(cc=="]"){if(!_8b8.attr){_8b8.attr=ts(_8af+1,x);}else{_8b8.matchFor=ts((_8b1||_8af+1),x);}var cmf=_8b8.matchFor;if(cmf){if((cmf.charAt(0)=="\"")||(cmf.charAt(0)=="'")){_8b8.matchFor=cmf.slice(1,-1);}}if(_8b8.matchFor){_8b8.matchFor=_8b8.matchFor.replace(/\\/g,"");}_8b7.attrs.push(_8b8);_8b8=null;_8af=_8b1=-1;}else{if(cc=="="){var _8be=("|~^$*".indexOf(lc)>=0)?lc:"";_8b8.type=_8be+cc;_8b8.attr=ts(_8af+1,x-_8be.length);_8b1=x+1;}}}else{if(_8b0>=0){if(cc==")"){if(_8b2>=0){_8b8.value=ts(_8b0+1,x);}_8b2=_8b0=-1;}}else{if(cc=="#"){_8bc();inId=x+1;}else{if(cc=="."){_8bc();_8b3=x;}else{if(cc==":"){_8bc();_8b2=x;}else{if(cc=="["){_8bc();_8af=x;_8b8={};}else{if(cc=="("){if(_8b2>=0){_8b8={name:ts(_8b2+1,x),value:null};_8b7.pseudos.push(_8b8);}_8b0=x;}else{if((cc==" ")&&(lc!=cc)){_8bd();}}}}}}}}}return _8ae;};var _8bf=function(_8c0,_8c1){if(!_8c0){return _8c1;}if(!_8c1){return _8c0;}return function(){return _8c0.apply(window,arguments)&&_8c1.apply(window,arguments);};};var _8c2=function(i,arr){var r=arr||[];if(i){r.push(i);}return r;};var _8c3=function(n){return (1==n.nodeType);};var _8c4="";var _8c5=function(elem,attr){if(!elem){return _8c4;}if(attr=="class"){return elem.className||_8c4;}if(attr=="for"){return elem.htmlFor||_8c4;}if(attr=="style"){return elem.style.cssText||_8c4;}return (_8aa?elem.getAttribute(attr):elem.getAttribute(attr,2))||_8c4;};var _8c6={"*=":function(attr,_8c7){return function(elem){return (_8c5(elem,attr).indexOf(_8c7)>=0);};},"^=":function(attr,_8c8){return function(elem){return (_8c5(elem,attr).indexOf(_8c8)==0);};},"$=":function(attr,_8c9){return function(elem){var ea=" "+_8c5(elem,attr);var _8ca=ea.lastIndexOf(_8c9);return _8ca>-1&&(_8ca==(ea.length-_8c9.length));};},"~=":function(attr,_8cb){var tval=" "+_8cb+" ";return function(elem){var ea=" "+_8c5(elem,attr)+" ";return (ea.indexOf(tval)>=0);};},"|=":function(attr,_8cc){var _8cd=_8cc+"-";return function(elem){var ea=_8c5(elem,attr);return ((ea==_8cc)||(ea.indexOf(_8cd)==0));};},"=":function(attr,_8ce){return function(elem){return (_8c5(elem,attr)==_8ce);};}};var _8cf=(typeof _8a7().firstChild.nextElementSibling=="undefined");var _8d0=!_8cf?"nextElementSibling":"nextSibling";var _8d1=!_8cf?"previousElementSibling":"previousSibling";var _8d2=(_8cf?_8c3:_8ab);var _8d3=function(node){while(node=node[_8d1]){if(_8d2(node)){return false;}}return true;};var _8d4=function(node){while(node=node[_8d0]){if(_8d2(node)){return false;}}return true;};var _8d5=function(node){var root=node.parentNode;root=root.nodeType!=7?root:root.nextSibling;var i=0,tret=root.children||root.childNodes,ci=(node["_i"]||node.getAttribute("_i")||-1),cl=(root["_l"]||(typeof root.getAttribute!=="undefined"?root.getAttribute("_l"):-1));if(!tret){return -1;}var l=tret.length;if(cl==l&&ci>=0&&cl>=0){return ci;}if(has("ie")&&typeof root.setAttribute!=="undefined"){root.setAttribute("_l",l);}else{root["_l"]=l;}ci=-1;for(var te=root["firstElementChild"]||root["firstChild"];te;te=te[_8d0]){if(_8d2(te)){if(has("ie")){te.setAttribute("_i",++i);}else{te["_i"]=++i;}if(node===te){ci=i;}}}return ci;};var _8d6=function(elem){return !((_8d5(elem))%2);};var _8d7=function(elem){return ((_8d5(elem))%2);};var _8d8={"checked":function(name,_8d9){return function(elem){return !!("checked" in elem?elem.checked:elem.selected);};},"disabled":function(name,_8da){return function(elem){return elem.disabled;};},"enabled":function(name,_8db){return function(elem){return !elem.disabled;};},"first-child":function(){return _8d3;},"last-child":function(){return _8d4;},"only-child":function(name,_8dc){return function(node){return _8d3(node)&&_8d4(node);};},"empty":function(name,_8dd){return function(elem){var cn=elem.childNodes;var cnl=elem.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if((nt===1)||(nt==3)){return false;}}return true;};},"contains":function(name,_8de){var cz=_8de.charAt(0);if(cz=="\""||cz=="'"){_8de=_8de.slice(1,-1);}return function(elem){return (elem.innerHTML.indexOf(_8de)>=0);};},"not":function(name,_8df){var p=_8ac(_8df)[0];var _8e0={el:1};if(p.tag!="*"){_8e0.tag=1;}if(!p.classes.length){_8e0.classes=1;}var ntf=_8e1(p,_8e0);return function(elem){return (!ntf(elem));};},"nth-child":function(name,_8e2){var pi=parseInt;if(_8e2=="odd"){return _8d7;}else{if(_8e2=="even"){return _8d6;}}if(_8e2.indexOf("n")!=-1){var _8e3=_8e2.split("n",2);var pred=_8e3[0]?((_8e3[0]=="-")?-1:pi(_8e3[0])):1;var idx=_8e3[1]?pi(_8e3[1]):0;var lb=0,ub=-1;if(pred>0){if(idx<0){idx=(idx%pred)&&(pred+(idx%pred));}else{if(idx>0){if(idx>=pred){lb=idx-idx%pred;}idx=idx%pred;}}}else{if(pred<0){pred*=-1;if(idx>0){ub=idx;idx=idx%pred;}}}if(pred>0){return function(elem){var i=_8d5(elem);return (i>=lb)&&(ub<0||i<=ub)&&((i%pred)==idx);};}else{_8e2=idx;}}var _8e4=pi(_8e2);return function(elem){return (_8d5(elem)==_8e4);};}};var _8e5=(has("ie")&&(has("ie")<9||has("quirks")))?function(cond){var clc=cond.toLowerCase();if(clc=="class"){cond="className";}return function(elem){return (_8aa?elem.getAttribute(cond):elem[cond]||elem[clc]);};}:function(cond){return function(elem){return (elem&&elem.getAttribute&&elem.hasAttribute(cond));};};var _8e1=function(_8e6,_8e7){if(!_8e6){return _8ab;}_8e7=_8e7||{};var ff=null;if(!("el" in _8e7)){ff=_8bf(ff,_8c3);}if(!("tag" in _8e7)){if(_8e6.tag!="*"){ff=_8bf(ff,function(elem){return (elem&&((_8aa?elem.tagName:elem.tagName.toUpperCase())==_8e6.getTag()));});}}if(!("classes" in _8e7)){each(_8e6.classes,function(_8e8,idx,arr){var re=new RegExp("(?:^|\\s)"+_8e8+"(?:\\s|$)");ff=_8bf(ff,function(elem){return re.test(elem.className);});ff.count=idx;});}if(!("pseudos" in _8e7)){each(_8e6.pseudos,function(_8e9){var pn=_8e9.name;if(_8d8[pn]){ff=_8bf(ff,_8d8[pn](pn,_8e9.value));}});}if(!("attrs" in _8e7)){each(_8e6.attrs,function(attr){var _8ea;var a=attr.attr;if(attr.type&&_8c6[attr.type]){_8ea=_8c6[attr.type](a,attr.matchFor);}else{if(a.length){_8ea=_8e5(a);}}if(_8ea){ff=_8bf(ff,_8ea);}});}if(!("id" in _8e7)){if(_8e6.id){ff=_8bf(ff,function(elem){return (!!elem&&(elem.id==_8e6.id));});}}if(!ff){if(!("default" in _8e7)){ff=_8ab;}}return ff;};var _8eb=function(_8ec){return function(node,ret,bag){while(node=node[_8d0]){if(_8cf&&(!_8c3(node))){continue;}if((!bag||_8ed(node,bag))&&_8ec(node)){ret.push(node);}break;}return ret;};};var _8ee=function(_8ef){return function(root,ret,bag){var te=root[_8d0];while(te){if(_8d2(te)){if(bag&&!_8ed(te,bag)){break;}if(_8ef(te)){ret.push(te);}}te=te[_8d0];}return ret;};};var _8f0=function(_8f1){_8f1=_8f1||_8ab;return function(root,ret,bag){var te,x=0,tret=root.children||root.childNodes;while(te=tret[x++]){if(_8d2(te)&&(!bag||_8ed(te,bag))&&(_8f1(te,x))){ret.push(te);}}return ret;};};var _8f2=function(node,root){var pn=node.parentNode;while(pn){if(pn==root){break;}pn=pn.parentNode;}return !!pn;};var _8f3={};var _8f4=function(_8f5){var _8f6=_8f3[_8f5.query];if(_8f6){return _8f6;}var io=_8f5.infixOper;var oper=(io?io.oper:"");var _8f7=_8e1(_8f5,{el:1});var qt=_8f5.tag;var _8f8=("*"==qt);var ecs=_8a7()["getElementsByClassName"];if(!oper){if(_8f5.id){_8f7=(!_8f5.loops&&_8f8)?_8ab:_8e1(_8f5,{el:1,id:1});_8f6=function(root,arr){var te=dom.byId(_8f5.id,(root.ownerDocument||root));if(!te||!_8f7(te)){return;}if(9==root.nodeType){return _8c2(te,arr);}else{if(_8f2(te,root)){return _8c2(te,arr);}}};}else{if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&_8f5.classes.length&&!_8a8){_8f7=_8e1(_8f5,{el:1,classes:1,id:1});var _8f9=_8f5.classes.join(" ");_8f6=function(root,arr,bag){var ret=_8c2(0,arr),te,x=0;var tret=root.getElementsByClassName(_8f9);while((te=tret[x++])){if(_8f7(te,root)&&_8ed(te,bag)){ret.push(te);}}return ret;};}else{if(!_8f8&&!_8f5.loops){_8f6=function(root,arr,bag){var ret=_8c2(0,arr),te,x=0;var tag=_8f5.getTag(),tret=tag?root.getElementsByTagName(tag):[];while((te=tret[x++])){if(_8ed(te,bag)){ret.push(te);}}return ret;};}else{_8f7=_8e1(_8f5,{el:1,tag:1,id:1});_8f6=function(root,arr,bag){var ret=_8c2(0,arr),te,x=0;var tag=_8f5.getTag(),tret=tag?root.getElementsByTagName(tag):[];while((te=tret[x++])){if(_8f7(te,root)&&_8ed(te,bag)){ret.push(te);}}return ret;};}}}}else{var _8fa={el:1};if(_8f8){_8fa.tag=1;}_8f7=_8e1(_8f5,_8fa);if("+"==oper){_8f6=_8eb(_8f7);}else{if("~"==oper){_8f6=_8ee(_8f7);}else{if(">"==oper){_8f6=_8f0(_8f7);}}}}return _8f3[_8f5.query]=_8f6;};var _8fb=function(root,_8fc){var _8fd=_8c2(root),qp,x,te,qpl=_8fc.length,bag,ret;for(var i=0;i<qpl;i++){ret=[];qp=_8fc[i];x=_8fd.length-1;if(x>0){bag={};ret.nozip=true;}var gef=_8f4(qp);for(var j=0;(te=_8fd[j]);j++){gef(te,ret,bag);}if(!ret.length){break;}_8fd=ret;}return ret;};var _8fe={},_8ff={};var _900=function(_901){var _902=_8ac(trim(_901));if(_902.length==1){var tef=_8f4(_902[0]);return function(root){var r=tef(root,[]);if(r){r.nozip=true;}return r;};}return function(root){return _8fb(root,_902);};};var _903=has("ie")?"commentStrip":"nozip";var qsa="querySelectorAll";var _904=!!_8a7()[qsa];var _905=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g;var _906=function(_907,pre,ch,post){return ch?(pre?pre+" ":"")+ch+(post?" "+post:""):_907;};var _908=/([^[]*)([^\]]*])?/g;var _909=function(_90a,_90b,att){return _90b.replace(_905,_906)+(att||"");};var _90c=function(_90d,_90e){_90d=_90d.replace(_908,_909);if(_904){var _90f=_8ff[_90d];if(_90f&&!_90e){return _90f;}}var _910=_8fe[_90d];if(_910){return _910;}var qcz=_90d.charAt(0);var _911=(-1==_90d.indexOf(" "));if((_90d.indexOf("#")>=0)&&(_911)){_90e=true;}var _912=(_904&&(!_90e)&&(_8a9.indexOf(qcz)==-1)&&(!has("ie")||(_90d.indexOf(":")==-1))&&(!(_8a8&&(_90d.indexOf(".")>=0)))&&(_90d.indexOf(":contains")==-1)&&(_90d.indexOf(":checked")==-1)&&(_90d.indexOf("|=")==-1));if(_912){var tq=(_8a9.indexOf(_90d.charAt(_90d.length-1))>=0)?(_90d+" *"):_90d;return _8ff[_90d]=function(root){try{if(!((9==root.nodeType)||_911)){throw "";}var r=root[qsa](tq);r[_903]=true;return r;}catch(e){return _90c(_90d,true)(root);}};}else{var _913=_90d.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return _8fe[_90d]=((_913.length<2)?_900(_90d):function(root){var _914=0,ret=[],tp;while((tp=_913[_914++])){ret=ret.concat(_900(tp)(root));}return ret;});}};var _915=0;var _916=has("ie")?function(node){if(_8aa){return (node.getAttribute("_uid")||node.setAttribute("_uid",++_915)||_915);}else{return node.uniqueID;}}:function(node){return (node._uid||(node._uid=++_915));};var _8ed=function(node,bag){if(!bag){return 1;}var id=_916(node);if(!bag[id]){return bag[id]=1;}return 0;};var _917="_zipIdx";var _918=function(arr){if(arr&&arr.nozip){return arr;}var ret=[];if(!arr||!arr.length){return ret;}if(arr[0]){ret.push(arr[0]);}if(arr.length<2){return ret;}_915++;var x,te;if(has("ie")&&_8aa){var _919=_915+"";arr[0].setAttribute(_917,_919);for(x=1;te=arr[x];x++){if(arr[x].getAttribute(_917)!=_919){ret.push(te);}te.setAttribute(_917,_919);}}else{if(has("ie")&&arr.commentStrip){try{for(x=1;te=arr[x];x++){if(_8c3(te)){ret.push(te);}}}catch(e){}}else{if(arr[0]){arr[0][_917]=_915;}for(x=1;te=arr[x];x++){if(arr[x][_917]!=_915){ret.push(te);}te[_917]=_915;}}}return ret;};var _91a=function(_91b,root){root=root||_8a7();var od=root.ownerDocument||root;_8aa=(od.createElement("div").tagName==="div");var r=_90c(_91b)(root);if(r&&r.nozip){return r;}return _918(r);};_91a.filter=function(_91c,_91d,root){var _91e=[],_91f=_8ac(_91d),_920=(_91f.length==1&&!/[^\w#\.]/.test(_91d))?_8e1(_91f[0]):function(node){return _8a6.indexOf(_91a(_91d,dom.byId(root)),node)!=-1;};for(var x=0,te;te=_91c[x];x++){if(_920(te)){_91e.push(te);}}return _91e;};return _91a;});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_921,_922,_923){var _924={};lang.setObject("dojo.dnd.autoscroll",_924);_924.getViewport=_923.getBox;_924.V_TRIGGER_AUTOSCROLL=32;_924.H_TRIGGER_AUTOSCROLL=32;_924.V_AUTOSCROLL_VALUE=16;_924.H_AUTOSCROLL_VALUE=16;var _925,doc=win.doc,_926=Infinity,_927=Infinity;_924.autoScrollStart=function(d){doc=d;_925=_923.getBox(doc);var html=win.body(doc).parentNode;_926=Math.max(html.scrollHeight-_925.h,0);_927=Math.max(html.scrollWidth-_925.w,0);};_924.autoScroll=function(e){var v=_925||_923.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_924.H_TRIGGER_AUTOSCROLL){dx=-_924.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_924.H_TRIGGER_AUTOSCROLL){dx=Math.min(_924.H_AUTOSCROLL_VALUE,_927-html.scrollLeft);}}if(e.clientY<_924.V_TRIGGER_AUTOSCROLL){dy=-_924.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_924.V_TRIGGER_AUTOSCROLL){dy=Math.min(_924.V_AUTOSCROLL_VALUE,_926-html.scrollTop);}}window.scrollBy(dx,dy);};_924._validNodes={"div":1,"p":1,"td":1};_924._validOverflow={"auto":1,"scroll":1};_924.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_928,_929;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _924._validNodes)){var s=_922.getComputedStyle(n),_92a=(s.overflow.toLowerCase() in _924._validOverflow),_92b=(s.overflowX.toLowerCase() in _924._validOverflow),_92c=(s.overflowY.toLowerCase() in _924._validOverflow);if(_92a||_92b||_92c){b=_921.getContentBox(n,s);t=_921.position(n,true);}if(_92a||_92b){w=Math.min(_924.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_928=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_92a||_92c){h=Math.min(_924.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_929=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_924.autoScroll(e);};return _924;});},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(_92d,_92e){var _92f=_92e.prototype.onMove;return _92d("dojo.dnd.TimedMoveable",_92e,{timeout:40,constructor:function(node,_930){if(!_930){_930={};}if(_930.timeout&&typeof _930.timeout=="number"&&_930.timeout>=0){this.timeout=_930.timeout;}},onMoveStop:function(_931){if(_931._timer){clearTimeout(_931._timer);_92f.call(this,_931,_931._leftTop);}_92e.prototype.onMoveStop.apply(this,arguments);},onMove:function(_932,_933){_932._leftTop=_933;if(!_932._timer){var _934=this;_932._timer=setTimeout(function(){_932._timer=null;_92f.call(_934,_932,_932._leftTop);},this.timeout);}}});});},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(lang,_935,dom){var _936="className";var cls,_937=/\s+/,a1=[""];function _938(s){if(typeof s=="string"||s instanceof String){if(s&&!_937.test(s)){a1[0]=s;return a1;}var a=s.split(_937);if(a.length&&!a[0]){a.shift();}if(a.length&&!a[a.length-1]){a.pop();}return a;}if(!s){return [];}return _935.filter(s,function(x){return x;});};var _939={};cls={contains:function containsClass(node,_93a){return ((" "+dom.byId(node)[_936]+" ").indexOf(" "+_93a+" ")>=0);},add:function addClass(node,_93b){node=dom.byId(node);_93b=_938(_93b);var cls=node[_936],_93c;cls=cls?" "+cls+" ":" ";_93c=cls.length;for(var i=0,len=_93b.length,c;i<len;++i){c=_93b[i];if(c&&cls.indexOf(" "+c+" ")<0){cls+=c+" ";}}if(_93c<cls.length){node[_936]=cls.substr(1,cls.length-2);}},remove:function removeClass(node,_93d){node=dom.byId(node);var cls;if(_93d!==undefined){_93d=_938(_93d);cls=" "+node[_936]+" ";for(var i=0,len=_93d.length;i<len;++i){cls=cls.replace(" "+_93d[i]+" "," ");}cls=lang.trim(cls);}else{cls="";}if(node[_936]!=cls){node[_936]=cls;}},replace:function replaceClass(node,_93e,_93f){node=dom.byId(node);_939[_936]=node[_936];cls.remove(_939,_93f);cls.add(_939,_93e);if(node[_936]!==_939[_936]){node[_936]=_939[_936];}},toggle:function toggleClass(node,_940,_941){node=dom.byId(node);if(_941===undefined){_940=_938(_940);for(var i=0,len=_940.length,c;i<len;++i){c=_940[i];cls[cls.contains(node,c)?"remove":"add"](node,c);}}else{cls[_941?"add":"remove"](node,_940);}return _941;}};return cls;});},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(dojo,lang,has){if(!1){return has;}dojo._name="browser";lang.mixin(dojo,{isBrowser:true,isFF:has("ff"),isIE:has("ie"),isKhtml:has("khtml"),isWebKit:has("webkit"),isMozilla:has("mozilla"),isMoz:has("mozilla"),isOpera:has("opera"),isSafari:has("safari"),isChrome:has("chrome"),isMac:has("mac"),isIos:has("ios"),isAndroid:has("android"),isWii:has("wii"),isQuirks:has("quirks"),isAir:has("air")});dojo.locale=dojo.locale||(has("ie")?navigator.userLanguage:navigator.language).toLowerCase();return has;});},"dojo/has":function(){define(["require","module"],function(_942,_943){var has=_942.has||function(){};if(!1){var _944=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,_945=this,doc=_944&&document,_946=doc&&doc.createElement("DiV"),_947=(_943.config&&_943.config())||{};has=function(name){return typeof _947[name]=="function"?(_947[name]=_947[name](_945,doc,_946)):_947[name];};has.cache=_947;has.add=function(name,test,now,_948){(typeof _947[name]=="undefined"||_948)&&(_947[name]=test);return now&&has(name);};1||has.add("host-browser",_944);1||has.add("dom",_944);1||has.add("dojo-dom-ready-api",1);1||has.add("dojo-sniff",1);}if(1){has.add("dom-addeventlistener",!!document.addEventListener);has.add("touch","ontouchstart" in document);has.add("device-width",screen.availWidth||innerWidth);var form=document.createElement("form");has.add("dom-attributes-explicit",form.attributes.length==0);has.add("dom-attributes-specified-flag",form.attributes.length>0&&form.attributes.length<40);}has.clearElement=function(_949){_949.innerHTML="";return _949;};has.normalize=function(id,_94a){var _94b=id.match(/[\?:]|[^:\?]*/g),i=0,get=function(skip){var term=_94b[i++];if(term==":"){return 0;}else{if(_94b[i++]=="?"){if(!skip&&has(term)){return get();}else{get(true);return get(skip);}}return term||0;}};id=get();return id&&_94a(id);};has.load=function(id,_94c,_94d){if(id){_94c([id],_94d);}else{_94d();}};return has;});},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,_94e){dojo.cookie=function(name,_94f,_950){var c=document.cookie,ret;if(arguments.length==1){var _951=c.match(new RegExp("(?:^|; )"+_94e.escapeString(name)+"=([^;]*)"));ret=_951?decodeURIComponent(_951[1]):undefined;}else{_950=_950||{};var exp=_950.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_950.expires=d;}if(exp&&exp.toUTCString){_950.expires=exp.toUTCString();}_94f=encodeURIComponent(_94f);var _952=name+"="+_94f,_953;for(_953 in _950){_952+="; "+_953;var _954=_950[_953];if(_954!==true){_952+="="+_954;}}document.cookie=_952;}return ret;};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};return dojo.cookie;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"WebScene/lib/Material":function(){define("WebScene/lib/Material",["dijit","dojo","dojox"],function(_955,dojo,_956){dojo.provide("WebScene.lib.Material");var _957=0;Material=function(_958,raw,_959,_95a,_95b,_95c,_95d,_95e,_95f,_960,_961){this.id=_957++;this.getId=function(){return this.id;};this.dispose=function(){raw=undefined;};this.getTexture=function(){return _958;};this.getRaw=function(){return raw;};this.isTransparent=function(){return _959;};this.getAmbient=function(){return _95a;};this.getDiffuse=function(){return _95b;};this.getSpecular=function(){return _95c;};this.getShininess=function(){return _95d;};this.getOpacity=function(){return _95e;};this.getPolygonOffset=function(){return _95f;};this.getNeedNormals=function(){return _960;};this.getNeedTexCoords=function(){return _961;};};});},"dijit/_base/popup":function(){define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(_962,win,_963){var _964=_963._createWrapper;_963._createWrapper=function(_965){if(!_965.declaredClass){_965={_popupWrapper:(_965.parentNode&&_962.contains(_965.parentNode,"dijitPopup"))?_965.parentNode:null,domNode:_965,destroy:function(){},ownerDocument:_965.ownerDocument,ownerDocumentBody:win.body(_965.ownerDocument)};}return _964.call(this,_965);};var _966=_963.open;_963.open=function(args){if(args.orient&&typeof args.orient!="string"&&!("length" in args.orient)){var ary=[];for(var key in args.orient){ary.push({aroundCorner:key,corner:args.orient[key]});}args.orient=ary;}return _966.call(this,args);};return _963;});},"dojo/request/util":function(){define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang"],function(_967,_968,_969,_96a,_96b,_96c,lang){_967.deepCopy=function deepCopy(_96d,_96e){for(var name in _96e){var tval=_96d[name],sval=_96e[name];if(tval!==sval){if(tval&&typeof tval==="object"&&sval&&typeof sval==="object"){_967.deepCopy(tval,sval);}else{_96d[name]=sval;}}}return _96d;};_967.deepCreate=function deepCreate(_96f,_970){_970=_970||{};var _971=lang.delegate(_96f),name,_972;for(name in _96f){_972=_96f[name];if(_972&&typeof _972==="object"){_971[name]=_967.deepCreate(_972,_970[name]);}}return _967.deepCopy(_971,_970);};var _973=Object.freeze||function(obj){return obj;};function _974(_975){return _973(_975);};_967.deferred=function deferred(_976,_977,_978,_979,_97a,last){var def=new _96a(function(_97b){_977&&_977(def,_976);if(!_97b||!(_97b instanceof _968)&&!(_97b instanceof _969)){return new _969("Request canceled",_976);}return _97b;});def.response=_976;def.isValid=_978;def.isReady=_979;def.handleResponse=_97a;function _97c(_97d){_97d.response=_976;throw _97d;};var _97e=def.then(_974).otherwise(_97c);if(_967.notify){_97e.then(lang.hitch(_967.notify,"emit","load"),lang.hitch(_967.notify,"emit","error"));}var _97f=_97e.then(function(_980){return _980.data||_980.text;});var _981=_973(lang.delegate(_97f,{response:_97e}));if(last){def.then(function(_982){last.call(def,_982);},function(_983){last.call(def,_976,_983);});}def.promise=_981;def.then=_981.then;return def;};_967.addCommonMethods=function addCommonMethods(_984,_985){_96c.forEach(_985||["GET","POST","PUT","DELETE"],function(_986){_984[(_986==="DELETE"?"DEL":_986).toLowerCase()]=function(url,_987){_987=lang.delegate(_987||{});_987.method=_986;return _984(url,_987);};});};_967.parseArgs=function parseArgs(url,_988,_989){var data=_988.data,_98a=_988.query;if(data&&!_989){if(typeof data==="object"){_988.data=_96b.objectToQuery(data);}}if(_98a){if(typeof _98a==="object"){_98a=_96b.objectToQuery(_98a);}if(_988.preventCache){_98a+=(_98a?"&":"")+"request.preventCache="+(+(new Date));}}else{if(_988.preventCache){_98a="request.preventCache="+(+(new Date));}}if(url&&_98a){url+=(~url.indexOf("?")?"&":"?")+_98a;}return {url:url,options:_988,getHeader:function(_98b){return null;}};};_967.checkStatus=function(stat){stat=stat||0;return (stat>=200&&stat<300)||stat===304||stat===1223||!stat;};});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_98c=function(){var n=null,_98d=arguments,uri=[_98d[0]];for(var i=1;i<_98d.length;i++){if(!_98d[i]){continue;}var _98e=new _98c(_98d[i]+""),_98f=new _98c(uri[0]+"");if(_98e.path==""&&!_98e.scheme&&!_98e.authority&&!_98e.query){if(_98e.fragment!=n){_98f.fragment=_98e.fragment;}_98e=_98f;}else{if(!_98e.scheme){_98e.scheme=_98f.scheme;if(!_98e.authority){_98e.authority=_98f.authority;if(_98e.path.charAt(0)!="/"){var path=_98f.path.substring(0,_98f.path.lastIndexOf("/")+1)+_98e.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_98e.path=segs.join("/");}}}}uri=[];if(_98e.scheme){uri.push(_98e.scheme,":");}if(_98e.authority){uri.push("//",_98e.authority);}uri.push(_98e.path);if(_98e.query){uri.push("?",_98e.query);}if(_98e.fragment){uri.push("#",_98e.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_98c.prototype.toString=function(){return this.uri;};return dojo._Url=_98c;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"WebScene/lib/Object3D":function(){define("WebScene/lib/Object3D",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix"],function(_990,dojo,_991){dojo.provide("WebScene.lib.Object3D");dojo.require("WebScene.lib.gl-matrix");Object3D=function(_992,_993,_994,_995,_996,_997,name){var _998=undefined;var _999=undefined;var _99a=undefined;var _99b=undefined;this.getGeometryNames=function(){return _992;};this.getMaterialNames=function(){return _994;};this.getTransformations=function(){return _995;};this.getCastShadow=function(){return _996;};this.getMetadata=function(){return _997;};this.getName=function(){return name;};this.getBBMin=function(){_99c();return _998;};this.getBBMax=function(){_99c();return _999;};this.getCenter=function(){_99c();return _99a;};this.getBSRadiusApprox=function(){_99c();return _99b;};var _99c=function(){if(_998!=undefined){return;}_998=vec3.create();_999=vec3.create();mat4.multiplyVec3(_995[0],_993[_992[0]].getBBMin(0),_998);mat4.multiplyVec3(_995[0],_993[_992[0]].getBBMax(0),_999);var p0=vec3.create();var p1=vec3.create();for(var i=0;i<_992.length;++i){var _99d=_993[_992[i]];for(var j=0,num=_99d.getNumGroups();j<num;++j){mat4.multiplyVec3(_995[i],_99d.getBBMin(j),p0);mat4.multiplyVec3(_995[i],_99d.getBBMax(j),p1);for(var k=0;k<3;++k){_998[k]=Math.min(_998[k],p0[k]);_999[k]=Math.max(_999[k],p1[k]);}}}_99a=vec3.create();vec3.lerp(_998,_999,0.5,_99a);_99b=0;for(var i=0;i<_992.length;++i){var _99d=_993[_992[i]];for(var j=0,num=_99d.getNumGroups();j<num;++j){mat4.multiplyVec3(_995[i],_99d.getCenter(j),p0);_99b=Math.max(_99b,vec3.dist(p0,_99a)+_99d.getBSRadius(j));}}};};});},"WebScene/app/View":function(){define("WebScene/app/View",["dijit","dojo","dojox","dojo/require!WebScene/app/Viewport,WebScene/lib/gl-matrix,WebScene/lib/GLFBO,WebScene/lib/GLMaterial,WebScene/lib/GLSLProgram,WebScene/lib/GLSLShader,WebScene/lib/GLTexture,WebScene/lib/GLVBO,WebScene/lib/Util,WebScene/lib/webgl-utils"],function(_99e,dojo,_99f){dojo.provide("WebScene.app.View");dojo.require("WebScene.app.Viewport");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.GLFBO");dojo.require("WebScene.lib.GLMaterial");dojo.require("WebScene.lib.GLSLProgram");dojo.require("WebScene.lib.GLSLShader");dojo.require("WebScene.lib.GLTexture");dojo.require("WebScene.lib.GLVBO");dojo.require("WebScene.lib.Util");dojo.require("WebScene.lib.webgl-utils");var _9a0=false;var _9a1=0;View=function(_9a2,_9a3,_9a4,_9a5){var _9a6=document.createElement("canvas");_9a6.setAttribute("id","canvas3d");var _9a7=WebGLUtils.setupWebGL(_9a6,{alpha:false});var gl=_9a7[0];assert(gl);if(!gl){_9a4("error","could not init gl",_9a7[1]);}var _9a8=false;var _9a9=undefined;var _9aa=_9ab();var _9ac=new GLVBORep();var _9ad=new GLMaterialRep();var _9ae=new GLTextureRep();var _9af=[0,1,0];var that=this;var _9b0=new Viewport(_9aa,_9ac,_9ad,_9ae,_9a3,_9a5,function(a,b,c){that.getPickRay(a,b,c);},gl);this.setRunning=function(_9b1){_9a8=_9b1;if(!dojo.byId("canvas3d")){_9a2.appendChild(_9a6);}};this.enableFPSCounter=function(on,_9b2){if(on){_9a9=new FPSCounter(_9b2);}else{_9a9=undefined;}};_9b3();this.setLights=function(_9b4,_9b5){var al=_9b4;var dl=_9b5;var _9b6=[al.color[0],al.color[1],al.color[2],al.intensity];var _9b7=[dl.color[0],dl.color[1],dl.color[2],dl.intensity];_9af=azimuthElevationAngle2Direction(deg2rad(dl.azimuthAngle),deg2rad(dl.elevationAngle));_9b0.setLightingData(new LightingData(_9b6,_9b7,_9af));};this.setMode=function(mode){_9b0.setMode(mode);};this.setData=function(data){_9b0.setData(data);};this.getData=function(){return _9b0.getData();};this.setContent=function(_9b8,_9b9,idx){_9b0.setContent(_9b8,_9b9,idx);};this.getContent=function(idx){return _9b0.getContent(idx);};this.setSelection=function(_9ba){_9b0.setSelection(_9ba);};this.frame=function(_9bb,_9bc){_9b0.frame(_9bb,_9bc);};this.setCamera=function(eye,_9bd,_9be){_9b0.setCamera(eye,_9bd,_9be);};this.getCamera=function(_9bf){return _9b0.getCamera(_9bf);};this.setFovX=function(fov,_9c0){_9b0.setFovX(fov,_9c0);};this.getFovX=function(){return _9b0.getFovX();};this.addCameraListener=function(_9c1){return _9b0.addCameraListener(_9c1);};this.removeCameraListener=function(_9c2){_9b0.removeCameraListener(_9c2);};this.getTrackball=function(){return _9b0.getTrackball();};this.getPickRay=function(_9c3,_9c4,_9c5){_9b0.getPickRay(_9c3,_9c4,_9c5);};this.getPickContent=function(_9c6){return _9b0.getPickContent(_9c6);};this.getCanvas=function(){return _9a6;};this.renderScreenshots=function(_9c7,_9c8,_9c9){var vp=new Viewport(_9aa,_9ac,_9ad,_9ae,_9a3,_9a5,function(a,b,c){that.getPickRay(a,b,c);},gl);vp.setLightingData(_9b0.getLightingData());vp.setData(_9b0.getData());vp.setContent(_9b0.getContentRenderGeometries());vp.setWindowSize([_9c7,_9c8]);var fbo=new GLFBO(gl.RGBA,gl.UNSIGNED_BYTE,true,gl.NEAREST,gl);fbo.setSize(_9c7,_9c8);fbo.bind();var wh4=_9c7*_9c8*4;var _9ca=new Array(_9c9.length);for(var i=0,_9cb=_9c9.length;i<_9cb;++i){vp.setCamera(_9c9[i][0],_9c9[i][1],true);if(_9c9[i].length>=3){vp.setFovX(_9c9[i][2],true);}gl.clearColor(1,1,1,1);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);vp.render(0,_9af,fbo.getGLName());var _9cc=new Uint8Array(wh4);gl.readPixels(0,0,_9c7,_9c8,gl.RGBA,gl.UNSIGNED_BYTE,_9cc);for(var j=3;j<wh4;j+=4){_9cc[j]=255;}_9ca[i]=_9cc;}gl.bindFramebuffer(gl.FRAMEBUFFER,null);fbo.dispose();gl.viewport(0,0,_9a6.width,_9a6.height);vp.dispose();return _9ca;};this.getAllTexturesLoaded=function(){return _9ae.getLoadingCount()===0;};function _9cd(x,y,_9ce){if(!_9ce){_9ce=vec2.create();}_9ce[0]=x-_9a2.getBoundingClientRect().left;_9ce[1]=_9a6.height-(y-_9a2.getBoundingClientRect().top);return _9ce;};var _9cf=Date.now();function _9b3(){window.requestAnimFrame(_9b3,_9a6);if(!_9a8){return;}_9d0();gl.clearColor(1,1,1,1);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);var time=Date.now();var dt=(time-_9cf)*0.001;_9cf=time;if(_9a9!==undefined){var fps=_9a9.step(time);if(fps){console.log(fps);}}_9b0.render(dt,_9af,null);};function _9d0(){var dims=dojo.position(_9a2);if(dims.w===_9a6.width&&dims.h===_9a6.height){return;}_9a6.width=dims.w;_9a6.height=dims.h;_9b0.setWindowSize(vec2.createFrom(_9a6.width,_9a6.height));};function _9ab(){var _9d1=new GLSLProgramRep();var _9d2=VertexAttrConstants.POSITION;var _9d3=VertexAttrConstants.NORMAL;var uv0=VertexAttrConstants.UV0;var _9d4="\n"+"vec4 float2rgba(const in float v) {\n"+"\tvec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * v;\n"+"\tenc = fract(enc);\n"+"\tenc -= enc.yzww * vec4(1.0/255.0, 1.0/255.0, 1.0/255.0, 0.0);\n"+"\treturn enc;\n"+"}\n"+"\n";var _9d5="\n"+"float rgba2float(vec4 rgba) {\n"+"\treturn dot(rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0));\n"+"}\n"+"\n";var _9d6="\n"+"#extension GL_OES_standard_derivatives : enable\n"+"\n"+"float calcFragDepth(const in float depth) {"+"\tconst float SLOPE_SCALE = 2.0;\n"+"\tconst float BIAS = 2.0 * .000015259;\t\t// 1 / (2^16 - 1)\n"+"\tfloat m = max(abs(dFdx(depth)), abs(dFdy(depth)));\n"+"\tfloat result = depth + SLOPE_SCALE * m + BIAS;\n"+"\treturn clamp(result, .0, .999999);\n"+"}\n"+"\n";var _9d7=_9d5+"float evalShadow(const in vec3 lvpos, const in sampler2D depthTex, const in float halfPxSz) {\n"+"   if (halfPxSz < .0) return .0;\n"+"   if (lvpos.z >= 1.0) return .0;\n"+"\n"+"   float texSize = .5 / halfPxSz;\n"+"\n"+"   vec2 st = fract((vec2(halfPxSz) + lvpos.xy) * texSize);\n"+"\n"+"   float s00 = rgba2float(texture2D(depthTex, lvpos.xy + vec2(-halfPxSz, -halfPxSz))) < lvpos.z ? 1.0 : .0;\n"+"   float s10 = rgba2float(texture2D(depthTex, lvpos.xy + vec2(halfPxSz, -halfPxSz))) < lvpos.z ? 1.0 : .0;\n"+"   float s11 = rgba2float(texture2D(depthTex, lvpos.xy + vec2(halfPxSz, halfPxSz))) < lvpos.z ? 1.0 : .0;\n"+"   float s01 = rgba2float(texture2D(depthTex, lvpos.xy + vec2(-halfPxSz, halfPxSz))) < lvpos.z ? 1.0 : .0;\n"+"\n"+"   return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n"+"}\n"+"\n";var _9d8="uniform mat4 proj;\n"+"uniform mat4 view;\n"+"uniform mat4 model;\n"+"uniform mat4 modelNormal;\n"+"attribute vec3 "+_9d2+";\n"+"attribute vec3 "+_9d3+";\n"+"varying vec3 vpos;\n"+"varying vec3 vnormal;\n"+"\n"+"void main(void) {\n"+"   vpos = (model * vec4("+_9d2+", 1.0)).xyz;\n"+"   vnormal = normalize((modelNormal * vec4("+_9d3+", 1.0)).xyz);\n"+"\tgl_Position = proj * view * vec4(vpos, 1.0);\n";var _9d9="uniform vec3 camPos;\n"+"uniform vec4 lightAmbient;\n"+"uniform vec4 lightDiffuse;\n"+"uniform vec3 lightDirection;\n"+"uniform vec3 ambient;\n"+"uniform vec3 diffuse;\n"+"uniform vec3 specular;\n"+"uniform float shininess;\n"+"uniform float opacity;\n"+"uniform mat4 lightMat;\n"+"uniform sampler2D depthTex;\n"+"uniform sampler2D ssaoTex;\n"+"uniform vec4 viewportPixelSz;\n"+"uniform float depthHalfPixelSz;\n"+"varying vec3 vpos;\n"+"varying vec3 vnormal;\n"+_9d7+"void main() {\n"+"\tvec3 a = ambient * lightAmbient.rgb * lightAmbient.w;\n"+"   vec4 lv = lightMat * vec4(vpos, 1.0);\n"+"   lv.xy /= lv.w;\n"+"   vec3 lvpos = .5 * lv.xyz + vec3(.5);\n"+"   float shadow = evalShadow(lvpos, depthTex, depthHalfPixelSz);\n"+"\tvec3 d = (1.0 - shadow) * diffuse * lightDiffuse.rgb * lightDiffuse.w * clamp(dot(vnormal, lightDirection), .0, 1.0);\n"+"   d = clamp(d, diffuse * lightAmbient.rgb * lightAmbient.w, diffuse * 1.1);\n"+"\t\n"+"\tvec3 reflDir = normalize(reflect(vpos - camPos, vnormal));\n"+"\tfloat specDot = max(dot(reflDir, lightDirection), .0);\n"+"\tvec3 s = (1.0 - shadow) * specular * pow(specDot, shininess);\n"+"   float ssao = viewportPixelSz.w < .0 ? 1.0 : texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n"+"\t\n";var _9da=new GLSLShader(gl.VERTEX_SHADER,_9d8+"}\n",gl);var _9db=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+_9d9+"   gl_FragColor = vec4(ssao * (a + d) + s, opacity);\n"+"}\n",gl);var _9dc=new GLSLProgram(new Array(_9da,_9db),[_9d2,_9d3],[3,3],gl);var _9dd=new GLSLShader(gl.VERTEX_SHADER,"attribute vec2 "+uv0+";\n"+"varying vec2 vtc;\n"+_9d8+"\tvtc = "+uv0+";\n"+"}\n",gl);var _9de=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"uniform sampler2D tex;\n"+"varying vec2 vtc;\n"+_9d9+"   vec4 texColor = texture2D(tex, vtc);\n"+"\tif (texColor.a < .33) discard;\n"+"   gl_FragColor = vec4(ssao * texColor.rgb * (a + d) + s, texColor.a * opacity);\n"+"}\n",gl);var _9df=new GLSLProgram(new Array(_9dd,_9de),[_9d2,_9d3,uv0],[3,3,2],gl);var _9e0=new GLSLShader(gl.VERTEX_SHADER,"uniform mat4 proj;\n"+"uniform mat4 view;\n"+"uniform mat4 model;\n"+"attribute vec3 "+_9d2+";\n"+"\n"+"void main(void) {\n"+"\tgl_Position = proj * view * vec4((model * vec4("+_9d2+", 1.0)).xyz, 1.0);\n"+"}\n",gl);var _9e1=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"uniform vec4 color;\n"+"\n"+"void main() {\n"+"\tgl_FragColor = color;\n"+"}\n",gl);var _9e2=new GLSLProgram(new Array(_9e0,_9e1),[_9d2],[3],gl);var _9e3=new GLSLShader(gl.VERTEX_SHADER,"uniform mat4 proj;\n"+"uniform mat4 view;\n"+"uniform mat4 model;\n"+"attribute vec3 "+_9d2+";\n"+"attribute vec2 "+uv0+";\n"+"varying vec2 vtc;\n"+"\n"+"void main(void) {\n"+"\tgl_Position = proj * view * vec4((model * vec4(position, 1.0)).xyz, 1.0);\n"+"   vtc = "+uv0+";\n"+"}\n",gl);var _9e4=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"uniform sampler2D tex;\n"+"uniform float colorScale;\n"+"varying vec2 vtc;\n"+"\n"+"void main() {\n"+"   vec4 texColor = texture2D(tex, vtc);\n"+"\tgl_FragColor = vec4(texColor.rgb * colorScale, texColor.a);\n"+"}\n",gl);var _9e5=new GLSLProgram(new Array(_9e3,_9e4),[_9d2,uv0],[3,2],gl);var _9e6="uniform mat4 proj;\n"+"uniform mat4 view;\n"+"uniform mat4 model;\n"+"uniform vec2 nearFar;\n"+"attribute vec3 "+_9d2+";\n"+"varying float depth;\n"+"\n"+"void main(void) {\n"+"   vec4 eye = view * model * vec4("+_9d2+", 1.0);\n"+"\tgl_Position = proj * eye;\n"+"   depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n";var _9e7=new GLSLShader(gl.VERTEX_SHADER,_9e6+"}\n",gl);var _9e8=new GLSLShader(gl.VERTEX_SHADER,"attribute vec2 "+uv0+";\n"+"varying vec2 vtc;\n"+_9e6+"   vtc = "+uv0+";\n"+"}\n",gl);var _9e9="uniform mat4 proj;\n"+"uniform mat4 view;\n"+"uniform mat4 model;\n"+"uniform mat4 viewNormal;\n"+"uniform mat4 modelNormal;\n"+"attribute vec3 "+_9d2+";\n"+"attribute vec3 "+_9d3+";\n"+"varying vec3 vnormal;\n"+"\n"+"void main(void) {\n"+"\tgl_Position = proj * view * model * vec4("+_9d2+", 1.0);\n"+"   vnormal = normalize((viewNormal * modelNormal * vec4("+_9d3+", 1.0)).xyz);\n";var _9ea=new GLSLShader(gl.VERTEX_SHADER,_9e9+"}\n",gl);var _9eb=new GLSLShader(gl.VERTEX_SHADER,"attribute vec2 "+uv0+";\n"+"varying vec2 vtc;\n"+_9e9+"   vtc = "+uv0+";\n"+"}\n",gl);var _9ec="varying float depth;\n"+"\n"+"void main() {\n";var _9ed=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+_9d6+_9d4+_9ec+"\tgl_FragColor = float2rgba(calcFragDepth(depth));\n"+"}\n",gl);var _9ee=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"uniform sampler2D tex;\n"+"varying vec2 vtc;\n"+_9d6+_9d4+"\n"+_9ec+"   if (texture2D(tex, vtc).a < .33) discard;\n"+"\tgl_FragColor = float2rgba(calcFragDepth(depth));\n"+"}\n",gl);var _9ef=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"varying vec3 vnormal;\n"+"void main() {\n"+"   vec3 normal = normalize(vnormal);\n"+"   if (gl_FrontFacing == false) normal = -normal;\n"+"\tgl_FragColor = vec4(vec3(.5) + .5 * normal, 1.0);\n"+"}\n",gl);var _9f0=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"varying vec3 vnormal;\n"+"varying vec2 vtc;\n"+"uniform sampler2D tex;\n"+"void main() {\n"+"   if (texture2D(tex, vtc).a < .33) discard;\n"+"   vec3 normal = normalize(vnormal);\n"+"   if (gl_FrontFacing == false) normal = -normal;\n"+"\tgl_FragColor = vec4(vec3(.5) + .5 * normal, 1.0);\n"+"}\n",gl);var _9f1=new GLSLProgram(new Array(_9e7,_9ed),[_9d2],[3],gl);var _9f2=new GLSLProgram(new Array(_9e8,_9ee),[_9d2,uv0],[3,2],gl);var _9f3=new GLSLProgram(new Array(_9ea,_9ef),[_9d2,_9d3],[3,3],gl);var _9f4=new GLSLProgram(new Array(_9eb,_9f0),[_9d2,_9d3,uv0],[3,3,2],gl);var _9f5=new GLSLShader(gl.VERTEX_SHADER,"uniform mat4 proj;\n"+"attribute vec2 "+_9d2+";\n"+"attribute vec2 "+uv0+";\n"+"varying vec2 vtc;\n"+"\n"+"void main(void) {\n"+"\tgl_Position = proj * vec4("+_9d2+".x, "+_9d2+".y, .0, 1.0);\n"+"\tvtc = "+uv0+";\n"+"}\n",gl);var _9f6=new GLSLShader(gl.FRAGMENT_SHADER,"precision highp float;\n"+"\n"+"uniform sampler2D depthTex;\n"+"varying vec2 vtc;\n"+_9d5+"void main() {\n"+"\tgl_FragColor = vec4(rgba2float(texture2D(depthTex, vtc)));\n"+"}\n",gl);var _9f7=new GLSLProgram(new Array(_9f5,_9f6),[_9d2,uv0],[2,2],gl);var _9f8=new GLSLShader(gl.VERTEX_SHADER,"attribute vec2 "+_9d2+";\n"+"varying vec2 uv;\n"+"\n"+"void main(void) {\n"+"\tgl_Position = vec4("+_9d2+".x, "+_9d2+".y, .0, 1.0);\n"+"\tuv = "+_9d2+" * .5 + vec2(.5);\n"+"}\n",gl);function _9f9(_9fa){return "precision highp float;\n"+"\n"+"uniform sampler2D rnm;\n"+"uniform sampler2D normalMap;\n"+"uniform sampler2D depthMap;\n"+"uniform float     ssaoAtt;\n"+"uniform vec2      rnmScale;\n"+"uniform float     radius;\n"+"uniform vec2      nearFar;\n"+"uniform vec3      pSphere[64];\n"+"\n"+"varying vec2      uv;\n"+"\n"+"const   int       samples = "+_9fa+";\n"+"const   float     strength = .07;\n"+"const   float     falloff = .000002;\n"+"\n"+_9d5+"void main(void) {\n"+"   vec3 fres = normalize((texture2D(rnm, uv * rnmScale).xyz * 2.0) - vec3(1.0));\n"+"   float currentPixelDepth = rgba2float(texture2D(depthMap, uv));\n"+"   vec3 ep = vec3(uv.xy, currentPixelDepth);\n"+"   vec3 norm = vec3(-1.0) + 2.0 * texture2D(normalMap, uv).xyz;\n"+"   float bl = .0;\n"+"   float f = mix(nearFar.x, nearFar.y, currentPixelDepth) / nearFar.x;\n"+"   float radD = radius / f;\n"+"   radD = min(radD, .5);\n"+"   float depthDifference;\n"+"   vec3 ray;\n"+"\n"+"   for(int i = 0; i < samples; ++i) {\n"+"      ray = radD*reflect(pSphere[i], fres);\n"+"      vec2 tc = ep.xy + sign(dot(ray, norm) ) * ray.xy;\n"+"      if (tc.x >= .0 && tc.y >= .0 && tc.x <= 1.0 && tc.y <= 1.0) {\n"+"         float occluderDepth = rgba2float(texture2D(depthMap, tc));\n"+"         vec3 occluderNormal = vec3(-1.0) + 2.0 * texture2D(normalMap, tc).xyz;\n"+"         depthDifference = currentPixelDepth - occluderDepth;\n"+"         bl += step(falloff, depthDifference) * (1.0 - dot(occluderNormal, norm)) * (1.0 - smoothstep(falloff, strength, depthDifference));\n"+"      };\n"+"   }\n"+"\n"+"   float ao = 1.0 + bl * (-1.38 / float(samples)) * ssaoAtt;\n"+"   gl_FragColor.a = ao;\n"+"}\n";};var _9fb=new GLSLShader(gl.FRAGMENT_SHADER,_9f9(8),gl);var _9fc=new GLSLShader(gl.FRAGMENT_SHADER,_9f9(16),gl);var _9fd=new GLSLShader(gl.FRAGMENT_SHADER,_9f9(32),gl);var _9fe=new GLSLShader(gl.FRAGMENT_SHADER,_9f9(64),gl);var _9ff=new GLSLProgram(new Array(_9f8,_9fb),[_9d2],[2],gl);var _a00=new GLSLProgram(new Array(_9f8,_9fc),[_9d2],[2],gl);var _a01=new GLSLProgram(new Array(_9f8,_9fd),[_9d2],[2],gl);var _a02=new GLSLProgram(new Array(_9f8,_9fe),[_9d2],[2],gl);var _a03="precision highp float;\n"+"\n"+"uniform sampler2D tex;\n"+"uniform float blurSize;\n"+"uniform int radius;\n"+"varying vec2 uv;\n"+"\n"+"void main() {\n"+"   int rad = radius - 1;\n"+"\n"+"   vec4 sum = vec4(0.0);\n"+"   int i = -rad;\n"+"   for (int k = 0; k <= 20; ++k) {\n"+"      float fi = float(i++);\n";var _a04="      if (i == radius) break;\n"+"   }\n"+"\n"+"   gl_FragColor = sum / float(radius * radius);\n"+"}\n";var _a05=new GLSLShader(gl.FRAGMENT_SHADER,_a03+"      sum += texture2D(tex, vec2(uv.x + fi * blurSize, uv.y)) * (float(rad) - abs(fi) + 1.0);\n"+_a04,gl);var _a06=new GLSLShader(gl.FRAGMENT_SHADER,_a03+"      sum += texture2D(tex, vec2(uv.x, uv.y + fi * blurSize)) * (float(rad) - abs(fi) + 1.0);\n"+_a04,gl);var _a07=new GLSLProgram(new Array(_9f8,_a05),[_9d2],[2],gl);var _a08=new GLSLProgram(new Array(_9f8,_a06),[_9d2],[2],gl);_9d1.add("default",_9dc);_9d1.add("defaultTextured",_9df);_9d1.add("simple",_9e2);_9d1.add("texOnly",_9e5);_9d1.add("depth",_9f1);_9d1.add("depthTextured",_9f2);_9d1.add("normal",_9f3);_9d1.add("normalTextured",_9f4);_9d1.add("showDepth",_9f7);_9d1.add("ssao8",_9ff);_9d1.add("ssao16",_a00);_9d1.add("ssao32",_a01);_9d1.add("ssao64",_a02);_9d1.add("blurH",_a07);_9d1.add("blurV",_a08);return _9d1;};};});},"dojo/domReady":function(){define(["./has"],function(has){var _a09=this,doc=document,_a0a={"loaded":1,"complete":1},_a0b=typeof doc.readyState!="string",_a0c=!!_a0a[doc.readyState];if(_a0b){doc.readyState="loading";}if(!_a0c){var _a0d=[],_a0e=[],_a0f=function(evt){evt=evt||_a09.event;if(_a0c||(evt.type=="readystatechange"&&!_a0a[doc.readyState])){return;}_a0c=1;if(_a0b){doc.readyState="complete";}while(_a0d.length){(_a0d.shift())(doc);}},on=function(node,_a10){node.addEventListener(_a10,_a0f,false);_a0d.push(function(){node.removeEventListener(_a10,_a0f,false);});};if(!has("dom-addeventlistener")){on=function(node,_a11){_a11="on"+_a11;node.attachEvent(_a11,_a0f);_a0d.push(function(){node.detachEvent(_a11,_a0f);});};var div=doc.createElement("div");try{if(div.doScroll&&_a09.frameElement===null){_a0e.push(function(){try{div.doScroll("left");return 1;}catch(e){}});}}catch(e){}}on(doc,"DOMContentLoaded");on(_a09,"load");if("onreadystatechange" in doc){on(doc,"readystatechange");}else{if(!_a0b){_a0e.push(function(){return _a0a[doc.readyState];});}}if(_a0e.length){var _a12=function(){if(_a0c){return;}var i=_a0e.length;while(i--){if(_a0e[i]()){_a0f("poller");return;}}setTimeout(_a12,30);};_a12();}}function _a13(_a14){if(_a0c){_a14(doc);}else{_a0d.push(_a14);}};_a13.load=function(id,req,load){_a13(load);};return _a13;});},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(dojo,_a15,has,xhr){var _a16;if(1){_a16=function(url,sync,load){xhr("GET",{url:url,sync:!!sync,load:load,headers:dojo.config.textPluginHeaders||{}});};}else{if(_a15.getText){_a16=_a15.getText;}else{console.error("dojo/text plugin failed to load because loader does not support getText");}}var _a17={},_a18=function(text){if(text){text=text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _a19=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_a19){text=_a19[1];}}else{text="";}return text;},_a1a={},_a1b={};dojo.cache=function(_a1c,url,_a1d){var key;if(typeof _a1c=="string"){if(/\//.test(_a1c)){key=_a1c;_a1d=url;}else{key=_a15.toUrl(_a1c.replace(/\./g,"/")+(url?("/"+url):""));}}else{key=_a1c+"";_a1d=url;}var val=(_a1d!=undefined&&typeof _a1d!="string")?_a1d.value:_a1d,_a1e=_a1d&&_a1d.sanitize;if(typeof val=="string"){_a17[key]=val;return _a1e?_a18(val):val;}else{if(val===null){delete _a17[key];return null;}else{if(!(key in _a17)){_a16(key,true,function(text){_a17[key]=text;});}return _a1e?_a18(_a17[key]):_a17[key];}}};return {dynamic:true,normalize:function(id,_a1f){var _a20=id.split("!"),url=_a20[0];return (/^\./.test(url)?_a1f(url):url)+(_a20[1]?"!"+_a20[1]:"");},load:function(id,_a21,load){var _a22=id.split("!"),_a23=_a22.length>1,_a24=_a22[0],url=_a21.toUrl(_a22[0]),_a25="url:"+url,text=_a1a,_a26=function(text){load(_a23?_a18(text):text);};if(_a24 in _a17){text=_a17[_a24];}else{if(_a25 in _a21.cache){text=_a21.cache[_a25];}else{if(url in _a17){text=_a17[url];}}}if(text===_a1a){if(_a1b[url]){_a1b[url].push(_a26);}else{var _a27=_a1b[url]=[_a26];_a16(url,!_a21.async,function(text){_a17[_a24]=_a17[url]=text;for(var i=0;i<_a27.length;){_a27[i++](text);}delete _a1b[url];});}}else{_a26(text);}}};});},"dojo/dom":function(){define(["./sniff","./_base/lang","./_base/window"],function(has,lang,win){if(has("ie")<=7){try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}}var dom={};if(has("ie")){dom.byId=function(id,doc){if(typeof id!="string"){return id;}var _a28=doc||win.doc,te=id&&_a28.getElementById(id);if(te&&(te.attributes.id.value==id||te.id==id)){return te;}else{var eles=_a28.all[id];if(!eles||eles.nodeName){eles=[eles];}var i=0;while((te=eles[i++])){if((te.attributes&&te.attributes.id&&te.attributes.id.value==id)||te.id==id){return te;}}}};}else{dom.byId=function(id,doc){return ((typeof id=="string")?(doc||win.doc).getElementById(id):id)||null;};}dom.isDescendant=function(node,_a29){try{node=dom.byId(node);_a29=dom.byId(_a29);while(node){if(node==_a29){return true;}node=node.parentNode;}}catch(e){}return false;};dom.setSelectable=function(node,_a2a){node=dom.byId(node);if(has("mozilla")){node.style.MozUserSelect=_a2a?"":"none";}else{if(has("khtml")||has("webkit")){node.style.KhtmlUserSelect=_a2a?"auto":"none";}else{if(has("ie")){var v=(node.unselectable=_a2a?"":"on"),cs=node.getElementsByTagName("*"),i=0,l=cs.length;for(;i<l;++i){cs.item(i).unselectable=v;}}}}};return dom;});},"WebScene/lib/GLSLProgram":function(){define("WebScene/lib/GLSLProgram",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(_a2b,dojo,_a2c){dojo.provide("WebScene.lib.GLSLProgram");dojo.require("WebScene.lib.Util");GLSLProgram=function(_a2d,_a2e,_a2f,gl){var _a30=undefined;var _a31=undefined;var _a32=undefined;var init=function(){if(_a30!==undefined){return;}_a30=gl.createProgram();for(var i=0;i<_a2d.length;++i){gl.attachShader(_a30,_a2d[i].getGLName());}gl.linkProgram(_a30);if(!gl.getProgramParameter(_a30,gl.LINK_STATUS)){console.error("Could not initialize shader\n"+"VALIDATE_STATUS: "+gl.getProgramParameter(_a30,gl.VALIDATE_STATUS)+", gl error ["+gl.getError()+"]");}_a31=new Object();_a32=new Object();};this.getAttrNames=function(){init();return _a2e;};this.getAttrSizes=function(){init();return _a2f;};this.use=function(){init();gl.useProgram(_a30);};this.enableVertexAttribArrays=function(){init();for(var i=0;i<_a2e.length;++i){gl.enableVertexAttribArray(this.getAttribLocation(_a2e[i]));}};this.disableVertexAttribArrays=function(){init();for(var i=0;i<_a2e.length;++i){gl.disableVertexAttribArray(this.getAttribLocation(_a2e[i]));}};this.getLocation=function(name){init();if(_a31[name]==undefined){_a31[name]=gl.getUniformLocation(_a30,name);}return _a31[name];};this.getAttribLocation=function(name){init();if(_a32[name]==undefined){_a32[name]=gl.getAttribLocation(_a30,name);}return _a32[name];};this.uniform1i=function(name,_a33){gl.uniform1i(this.getLocation(name,gl),_a33);};this.uniform1f=function(name,_a34){gl.uniform1f(this.getLocation(name,gl),_a34);};this.uniform2f=function(name,val0,val1){gl.uniform2f(this.getLocation(name,gl),val0,val1);};this.uniform2fv=function(name,_a35){gl.uniform2fv(this.getLocation(name,gl),_a35);};this.uniform3f=function(name,val0,val1,val2){gl.uniform3f(this.getLocation(name,gl),val0,val1,val2);};this.uniform3fv=function(name,_a36){gl.uniform3fv(this.getLocation(name,gl),_a36);};this.uniform4f=function(name,_a37,_a38,_a39,_a3a){gl.uniform4f(this.getLocation(name,gl),_a37,_a38,_a39,_a3a);};this.uniform4fv=function(name,_a3b){gl.uniform4fv(this.getLocation(name,gl),_a3b);};this.uniformMatrix4fv=function(name,_a3c){gl.uniformMatrix4fv(this.getLocation(name,gl),false,_a3c);};this.dispose=function(){if(_a30===undefined){return;}for(var i=0;i<_a2d.length;++i){var _a3d=_a2d[i].getGLName();gl.detachShader(_a30,_a3d);gl.deleteShader(_a3d);}gl.deleteProgram(_a30);};};GLSLProgramRep=function(){var _a3e=new Object();this.add=function(name,_a3f){assert(_a3e[name]==undefined);_a3e[name]=_a3f;};this.get=function(name){return _a3e[name];};};});},"WebScene/lib/GLSLShader":function(){define("WebScene/lib/GLSLShader",["dijit","dojo","dojox"],function(_a40,dojo,_a41){dojo.provide("WebScene.lib.GLSLShader");GLSLShader=function(type,_a42,gl){var _a43=undefined;var init=function(){if(_a43!==undefined){return;}_a43=gl.createShader(type);gl.shaderSource(_a43,_a42);gl.compileShader(_a43);if(!gl.getShaderParameter(_a43,gl.COMPILE_STATUS)){console.error(gl.getShaderInfoLog(_a43));console.error(_a42);}};this.getGLName=function(){init();return _a43;};};});},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(dojo,has){return dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:has("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:has("mac")&&!has("air")?(has("safari")?91:224):17};});},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(_a44,lang,_a45,has,_a46){var html=_a46.doc.documentElement,ie=has("ie"),_a47=has("opera"),maj=Math.floor,ff=has("ff"),_a48=_a44.boxModel.replace(/-/,""),_a49={"dj_ie":ie,"dj_ie6":maj(ie)==6,"dj_ie7":maj(ie)==7,"dj_ie8":maj(ie)==8,"dj_ie9":maj(ie)==9,"dj_quirks":has("quirks"),"dj_iequirks":ie&&has("quirks"),"dj_opera":_a47,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ff3":maj(ff)==3};_a49["dj_"+_a48]=true;var _a4a="";for(var clz in _a49){if(_a49[clz]){_a4a+=clz+" ";}}html.className=lang.trim(html.className+" "+_a4a);_a45(90,function(){if(!_a44.isBodyLtr()){var _a4b="dj_rtl dijitRtl "+_a4a.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_a4b+"dj_rtl dijitRtl "+_a4a.replace(/ /g,"-rtl "));}});return has;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_a4c,lang){var _a4d={};lang.setObject("dojo.string",_a4d);_a4d.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_a4d.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_a4d.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_a4d.substitute=function(_a4e,map,_a4f,_a50){_a50=_a50||_a4c.global;_a4f=_a4f?lang.hitch(_a50,_a4f):function(v){return v;};return _a4e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_a51,key,_a52){var _a53=lang.getObject(key,false,map);if(_a52){_a53=lang.getObject(_a52,false,_a50).call(_a50,_a53,key);}return _a4f(_a53,key).toString();});};_a4d.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _a4d;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_a54,_a55,fx,dom,_a56,_a57,_a58,lang,_a59,on,has,_a5a,_a5b,_a5c,_a5d,_a5e,_a5f,_a60){var _a61=_a55("dijit._MasterTooltip",[_a5c,_a5d],{duration:_a5a.defaultDuration,templateString:_a5f,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _a5e(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_a62,_a63,_a64,rtl,_a65){if(this.aroundNode&&this.aroundNode===_a63&&this.containerNode.innerHTML==_a62){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_a62;if(_a65){this.set("textDir",_a65);}this.containerNode.align=rtl?"right":"left";var pos=_a5b.around(this.domNode,_a63,_a64&&_a64.length?_a64:_a66.defaultPosition,!rtl,lang.hitch(this,"orient"));var _a67=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_a67.y+((_a67.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_a67.x+((_a67.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_a58.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_a63;},orient:function(node,_a68,_a69,_a6a,_a6b){this.connectorNode.style.top="";var _a6c=_a6a.h,_a6d=_a6a.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_a68+"-"+_a69];this.domNode.style.width="auto";var size=_a57.position(this.domNode);if(has("ie")==9){size.w+=2;}var _a6e=Math.min((Math.max(_a6d,1)),size.w);_a57.setMarginBox(this.domNode,{w:_a6e});if(_a69.charAt(0)=="B"&&_a68.charAt(0)=="B"){var bb=_a57.position(node);var _a6f=this.connectorNode.offsetHeight;if(bb.h>_a6c){var _a70=_a6c-((_a6b.h+_a6f)>>1);this.connectorNode.style.top=_a70+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_a6b.h/2-_a6f/2,0),bb.h-_a6f)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_a6d);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_a71){if(this._onDeck&&this._onDeck[1]==_a71){this._onDeck=null;}else{if(this.aroundNode===_a71){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_a54.forEach(node.children,function(_a72){this._setAutoTextDir(_a72);},this);},_setTextDirAttr:function(_a73){this._set("textDir",_a73);if(_a73=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_a60.showTooltip=function(_a74,_a75,_a76,rtl,_a77){if(_a76){_a76=_a54.map(_a76,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_a66._masterTT){_a60._masterTT=_a66._masterTT=new _a61();}return _a66._masterTT.show(_a74,_a75,_a76,rtl,_a77);};_a60.hideTooltip=function(_a78){return _a66._masterTT&&_a66._masterTT.hide(_a78);};var _a66=_a55("dijit.Tooltip",_a5c,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_a79){_a54.forEach(this._connections||[],function(_a7a){_a54.forEach(_a7a,function(_a7b){_a7b.remove();});},this);this._connectIds=_a54.filter(lang.isArrayLike(_a79)?_a79:(_a79?[_a79]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_a54.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_a7c=this.selector,_a7d=_a7c?function(_a7e){return on.selector(_a7c,_a7e);}:function(_a7f){return _a7f;},self=this;return [on(node,_a7d(_a59.enter),function(){self._onHover(this);}),on(node,_a7d("focusin"),function(){self._onHover(this);}),on(node,_a7d(_a59.leave),lang.hitch(self,"_onUnHover")),on(node,_a7d("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_a79);},addTarget:function(node){var id=node.id||node;if(_a54.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_a54.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_a56.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_a54.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_a80){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_a80);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_a81){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _a82=this.getContent(_a81);if(!_a82){return;}_a66.show(_a82,_a81,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_a81;this.onShow(_a81,this.position);},close:function(){if(this._connectNode){_a66.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_a54.forEach(this._connections||[],function(_a83){_a54.forEach(_a83,function(_a84){_a84.remove();});},this);this.inherited(arguments);}});_a66._MasterTooltip=_a61;_a66.show=_a60.showTooltip;_a66.hide=_a60.hideTooltip;_a66.defaultPosition=["after-centered","before-centered"];return _a66;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_a85,lang,_a86,_a87,_a88,_a89,_a8a,_a8b,_a8c){return _a85("dijit.form.DropDownButton",[_a89,_a8a,_a8b],{baseClass:"dijitDropDownButton",templateString:_a8c,_fillContent:function(){if(this.srcNodeRef){var _a8d=_a86("*",this.srcNodeRef);this.inherited(arguments,[_a8d[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _a8e=_a86("[widgetId]",this.dropDownContainer)[0];this.dropDown=_a87.byNode(_a8e);delete this.dropDownContainer;}if(this.dropDown){_a88.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _a8f=this.dropDown;return (!!_a8f&&(!_a8f.href||_a8f.isLoaded));},loadDropDown:function(_a90){var _a91=this.dropDown;var _a92=_a91.on("load",lang.hitch(this,function(){_a92.remove();_a90();}));_a91.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_a93,_a94,keys,has,_a95){return _a93("dijit.form._FormValueMixin",_a95,{readOnly:false,_setReadOnlyAttr:function(_a96){_a94.set(this.focusNode,"readOnly",_a96);this.focusNode.setAttribute("aria-readonly",_a96);this._set("readOnly",_a96);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_a97,_a98){this._handleOnChange(_a97,_a98);},_handleOnChange:function(_a99,_a9a){this._set("value",_a99);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_a9b,_a9c,_a9d,_a9e,lang,_a9f,has,_aa0,a11y){return _a9c("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_aa1){this._set("disabled",_aa1);_a9d.set(this.focusNode,"disabled",_aa1);if(this.valueNode){_a9d.set(this.valueNode,"disabled",_aa1);}this.focusNode.setAttribute("aria-disabled",_aa1?"true":"false");if(_aa1){this._set("hovering",false);this._set("active",false);var _aa2="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_a9b.forEach(lang.isArray(_aa2)?_aa2:[_aa2],function(_aa3){var node=this[_aa3];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _aa4=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_aa5);this.disconnect(_aa4);});var _aa5=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_aa5);this.disconnect(_aa4);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_aa0.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_a9e.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_aa6,_aa7){if(this._lastValueReported==undefined&&(_aa7===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_aa6;}this._pendingOnChange=this._pendingOnChange||(typeof _aa6!=typeof this._lastValueReported)||(this.compare(_aa6,this._lastValueReported)!=0);if((this.intermediateChanges||_aa7||_aa7===undefined)&&this._pendingOnChange){this._lastValueReported=_aa6;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_aa6);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_aa8,keys,_aa9,has,_aaa,win){var _aab=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_aab=evt.target;},true);}else{(function(){var _aac=function(evt){_aab=evt.srcElement;};win.doc.attachEvent("onkeydown",_aac);_aaa.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_aac);});})();}function _aad(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_aae){if(/input|button/i.test(node.nodeName)){return on(node,"click",_aae);}else{var _aaf=[on(node,"keydown",function(e){if(_aad(e)){_aab=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_aad(e)&&e.target==_aab){_aab=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_aae.call(this,e);})];if(has("touch")){var _ab0;_aaf.push(on(node,"touchend",function(e){var _ab1=e.target;_ab0=setTimeout(function(){_ab0=null;on.emit(_ab1,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_ab0){clearTimeout(_ab0);}}));}return {remove:function(){_aa8.forEach(_aaf,function(h){h.remove();});if(_ab0){clearTimeout(_ab0);_ab0=null;}}};}};return ret;});},"WebScene/lib/clarinet":function(){define("WebScene/lib/clarinet",["dijit","dojo","dojox"],function(_ab2,dojo,_ab3){dojo.provide("WebScene.lib.clarinet");(function(_ab4){var env,_ab5;if(typeof process==="object"&&process.env){env=process.env;}else{env=window;}if(typeof FastList==="function"){_ab5=FastList;}else{_ab5=Array;}_ab4.parser=function(opt){return new _ab6(opt);};_ab4.CParser=_ab6;_ab4.CStream=_ab7;_ab4.createStream=_ab8;_ab4.MAX_BUFFER_LENGTH=64*1024;_ab4.DEBUG=(env.CDEBUG==="debug");_ab4.INFO=(env.CDEBUG==="debug"||env.CDEBUG==="info");_ab4.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var _ab9=["textNode","numberNode"],_aba=_ab4.EVENTS.filter(function(ev){return ev!=="error"&&ev!=="end";}),_abb;if(!Object.create){Object.create=function(o){function f(){this["__proto__"]=o;};f.prototype=o;return new f;};}if(!Object.getPrototypeOf){Object.getPrototypeOf=function(o){return o["__proto__"];};}if(!Object.keys){Object.keys=function(o){var a=[];for(var i in o){if(o.hasOwnProperty(i)){a.push(i);}}return a;};}function _abc(_abd){var _abe=Math.max(_ab4.MAX_BUFFER_LENGTH,10),_abf=0;for(var i=0,l=_ab9.length;i<l;i++){var len=_abd[_ab9[i]].length;if(len>_abe){switch(_ab9[i]){case "text":closeText(_abd);break;default:_ac0(_abd,"Max buffer length exceeded: "+_ab9[i]);}}_abf=Math.max(_abf,len);}_abd.bufferCheckPosition=(_ab4.MAX_BUFFER_LENGTH-_abf)+_abd.position;};function _ac1(_ac2){for(var i=0,l=_ab9.length;i<l;i++){_ac2[_ab9[i]]="";}};var _ac3=/[\\"\n]/g;function _ab6(opt){if(!(this instanceof _ab6)){return new _ab6(opt);}var _ac4=this;_ac1(_ac4);_ac4.bufferCheckPosition=_ab4.MAX_BUFFER_LENGTH;_ac4.q=_ac4.c=_ac4.p="";_ac4.opt=opt||{};_ac4.closed=_ac4.closedRoot=_ac4.sawRoot=false;_ac4.tag=_ac4.error=null;_ac4.state=0;_ac4.stack=new _ab5();_ac4.position=_ac4.column=0;_ac4.line=1;_ac4.slashed=false;_ac4.unicodeI=0;_ac4.unicodeS=null;emit(_ac4,"onready");};_ab6.prototype={end:function(){end(this);},write:_ac5,resume:function(){this.error=null;return this;},close:function(){return this.write(null);}};_abb=function(){};function _ab8(opt){return new _ab7(opt);};function _ab7(opt){if(!(this instanceof _ab7)){return new _ab7(opt);}_abb.apply(me);this._parser=new _ab6(opt);this.writable=true;this.readable=true;var me=this;this._parser.onend=function(){me.emit("end");};this._parser.onerror=function(er){me.emit("error",er);me._parser.error=null;};_aba.forEach(function(ev){Object.defineProperty(me,"on"+ev,{get:function(){return me._parser["on"+ev];},set:function(h){if(!h){me.removeAllListeners(ev);me._parser["on"+ev]=h;return h;}me.on(ev,h);},enumerable:true,configurable:false});});};_ab7.prototype=Object.create(_abb.prototype,{constructor:{value:_ab7}});_ab7.prototype.write=function(data){this._parser.write(data.toString());this.emit("data",data);return true;};_ab7.prototype.end=function(_ac6){if(_ac6&&_ac6.length){this._parser.write(_ac6.toString());}this._parser.end();return true;};_ab7.prototype.on=function(ev,_ac7){var me=this;if(!me._parser["on"+ev]&&_aba.indexOf(ev)!==-1){me._parser["on"+ev]=function(){var args=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);args.splice(0,0,ev);me.emit.apply(me,args);};}return _abb.prototype.on.call(me,ev,_ac7);};function emit(_ac8,_ac9,data){if(_ab4.INFO){console.log("-- emit",_ac9,data);}if(_ac8[_ac9]){_ac8[_ac9](data);}};function _aca(_acb,_acc,data){_acd(_acb);emit(_acb,_acc,data);};function _acd(_ace,_acf){_ace.textNode=_ad0(_ace.opt,_ace.textNode);if(_ace.textNode){emit(_ace,(_acf?_acf:"onvalue"),_ace.textNode);}_ace.textNode="";};function _ad1(_ad2){if(_ad2.numberNode){emit(_ad2,"onvalue",parseFloat(_ad2.numberNode));}_ad2.numberNode="";};function _ad0(opt,text){if(opt.trim){text=text.trim();}if(opt.normalize){text=text.replace(/\s+/g," ");}return text;};function _ac0(_ad3,er){_acd(_ad3);er+="\nLine: "+_ad3.line+"\nColumn: "+_ad3.column+"\nChar: "+_ad3.c;er=new Error(er);_ad3.error=er;emit(_ad3,"onerror",er);return _ad3;};function end(_ad4){if(_ad4.state!==1){_ac0(_ad4,"Unexpected end");}_acd(_ad4);_ad4.c="";_ad4.closed=true;emit(_ad4,"onend");_ab6.call(_ad4,_ad4.opt);return _ad4;};function _ac5(_ad5){var _ad6=this;if(this.error){throw this.error;}if(_ad6.closed){return _ac0(_ad6,"Cannot write after close. Assign an onready handler.");}if(_ad5===null){return end(_ad6);}var i=0,c=_ad5[0],p=_ad6.p;if(_ab4.DEBUG){console.log("write -> ["+_ad5+"]");}while(c){p=c;_ad6.c=c=_ad5.charAt(i++);if(p!==c){_ad6.p=p;}else{p=_ad6.p;}if(!c){break;}if(_ab4.DEBUG){console.log(i,c,_ab4.STATE[_ad6.state]);}_ad6.position++;if(c==="\n"){_ad6.line++;_ad6.column=0;}else{_ad6.column++;}switch(_ad6.state){case 0:if(c==="{"){_ad6.state=2;}else{if(c==="["){_ad6.state=4;}else{if(c!=="\r"&&c!=="\n"&&c!==" "&&c!=="\t"){_ac0(_ad6,"Non-whitespace before {[.");}}}continue;case 10:case 2:if(c==="\r"||c==="\n"||c===" "||c==="\t"){continue;}if(_ad6.state===10){_ad6.stack.push(11);}else{if(c==="}"){emit(_ad6,"onopenobject");emit(_ad6,"oncloseobject");_ad6.state=_ad6.stack.pop()||1;continue;}else{_ad6.stack.push(3);}}if(c==="\""){_ad6.state=7;}else{_ac0(_ad6,"Malformed object key should start with \"");}continue;case 11:case 3:if(c==="\r"||c==="\n"||c===" "||c==="\t"){continue;}var _ad7=(_ad6.state===11)?"key":"object";if(c===":"){if(_ad6.state===3){_ad6.stack.push(3);_acd(_ad6,"onopenobject");}else{_acd(_ad6,"onkey");}_ad6.state=1;}else{if(c==="}"){_aca(_ad6,"oncloseobject");_ad6.state=_ad6.stack.pop()||1;}else{if(c===","){if(_ad6.state===3){_ad6.stack.push(3);}_acd(_ad6);_ad6.state=10;}else{_ac0(_ad6,"Bad object");}}}continue;case 4:case 1:if(c==="\r"||c==="\n"||c===" "||c==="\t"){continue;}if(_ad6.state===4){emit(_ad6,"onopenarray");_ad6.state=1;if(c==="]"){emit(_ad6,"onclosearray");_ad6.state=_ad6.stack.pop()||1;continue;}else{_ad6.stack.push(5);}}if(c==="\""){_ad6.state=7;}else{if(c==="{"){_ad6.state=2;}else{if(c==="["){_ad6.state=4;}else{if(c==="t"){_ad6.state=12;}else{if(c==="f"){_ad6.state=15;}else{if(c==="n"){_ad6.state=19;}else{if(c==="-"){_ad6.numberNode+=c;}else{if(c==="0"){_ad6.numberNode+=c;_ad6.state=23;}else{if("123456789".indexOf(c)!==-1){_ad6.numberNode+=c;_ad6.state=23;}else{_ac0(_ad6,"Bad value");}}}}}}}}}continue;case 5:if(c===","){_ad6.stack.push(5);_acd(_ad6,"onvalue");_ad6.state=1;}else{if(c==="]"){_aca(_ad6,"onclosearray");_ad6.state=_ad6.stack.pop()||1;}else{if(c==="\r"||c==="\n"||c===" "||c==="\t"){continue;}else{_ac0(_ad6,"Bad array");}}}continue;case 7:var _ad8=i-1,_ad9=_ad6.slashed,_ada=_ad6.unicodeI;STRING_BIGLOOP:while(true){if(_ab4.DEBUG){console.log(i,c,_ab4.STATE[_ad6.state],_ad9);}while(_ada>0){_ad6.unicodeS+=c;c=_ad5.charAt(i++);if(_ada===4){_ad6.textNode+=String.fromCharCode(parseInt(_ad6.unicodeS,16));_ada=0;_ad8=i-1;}else{_ada++;}if(!c){break STRING_BIGLOOP;}}if(c==="\""&&!_ad9){_ad6.state=_ad6.stack.pop()||1;_ad6.textNode+=_ad5.substring(_ad8,i-1);if(!_ad6.textNode){emit(_ad6,"onvalue","");}break;}if(c==="\\"&&!_ad9){_ad9=true;_ad6.textNode+=_ad5.substring(_ad8,i-1);c=_ad5.charAt(i++);if(!c){break;}}if(_ad9){_ad9=false;if(c==="n"){_ad6.textNode+="\n";}else{if(c==="r"){_ad6.textNode+="\r";}else{if(c==="t"){_ad6.textNode+="\t";}else{if(c==="f"){_ad6.textNode+="\f";}else{if(c==="b"){_ad6.textNode+="\b";}else{if(c==="u"){_ada=1;_ad6.unicodeS="";}else{_ad6.textNode+=c;}}}}}}c=_ad5.charAt(i++);_ad8=i-1;if(!c){break;}else{continue;}}_ac3.lastIndex=i;var _adb=_ac3.exec(_ad5);if(_adb===null){i=_ad5.length+1;_ad6.textNode+=_ad5.substring(_ad8,i-1);break;}i=_adb.index+1;c=_ad5.charAt(_adb.index);if(!c){_ad6.textNode+=_ad5.substring(_ad8,i-1);break;}}_ad6.slashed=_ad9;_ad6.unicodeI=_ada;continue;case 12:if(c===""){continue;}if(c==="r"){_ad6.state=13;}else{_ac0(_ad6,"Invalid true started with t"+c);}continue;case 13:if(c===""){continue;}if(c==="u"){_ad6.state=14;}else{_ac0(_ad6,"Invalid true started with tr"+c);}continue;case 14:if(c===""){continue;}if(c==="e"){emit(_ad6,"onvalue",true);_ad6.state=_ad6.stack.pop()||1;}else{_ac0(_ad6,"Invalid true started with tru"+c);}continue;case 15:if(c===""){continue;}if(c==="a"){_ad6.state=16;}else{_ac0(_ad6,"Invalid false started with f"+c);}continue;case 16:if(c===""){continue;}if(c==="l"){_ad6.state=17;}else{_ac0(_ad6,"Invalid false started with fa"+c);}continue;case 17:if(c===""){continue;}if(c==="s"){_ad6.state=18;}else{_ac0(_ad6,"Invalid false started with fal"+c);}continue;case 18:if(c===""){continue;}if(c==="e"){emit(_ad6,"onvalue",false);_ad6.state=_ad6.stack.pop()||1;}else{_ac0(_ad6,"Invalid false started with fals"+c);}continue;case 19:if(c===""){continue;}if(c==="u"){_ad6.state=20;}else{_ac0(_ad6,"Invalid null started with n"+c);}continue;case 20:if(c===""){continue;}if(c==="l"){_ad6.state=21;}else{_ac0(_ad6,"Invalid null started with nu"+c);}continue;case 21:if(c===""){continue;}if(c==="l"){emit(_ad6,"onvalue",null);_ad6.state=_ad6.stack.pop()||1;}else{_ac0(_ad6,"Invalid null started with nul"+c);}continue;case 22:if(c==="."){_ad6.numberNode+=c;_ad6.state=23;}else{_ac0(_ad6,"Leading zero not followed by .");}continue;case 23:if("0123456789".indexOf(c)!==-1){_ad6.numberNode+=c;}else{if(c==="."){if(_ad6.numberNode.indexOf(".")!==-1){_ac0(_ad6,"Invalid number has two dots");}_ad6.numberNode+=c;}else{if(c==="e"||c==="E"){if(_ad6.numberNode.indexOf("e")!==-1||_ad6.numberNode.indexOf("E")!==-1){_ac0(_ad6,"Invalid number has two exponential");}_ad6.numberNode+=c;}else{if(c==="+"||c==="-"){if(!(p==="e"||p==="E")){_ac0(_ad6,"Invalid symbol in number");}_ad6.numberNode+=c;}else{_ad1(_ad6);i--;_ad6.state=_ad6.stack.pop()||1;}}}}continue;default:_ac0(_ad6,"Unknown state: "+_ad6.state);}}if(_ad6.position>=_ad6.bufferCheckPosition){_abc(_ad6);}return _ad6;};})(typeof exports==="undefined"?clarinet={}:exports);});},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has"],function(JSON,_adc,_add,has){has.add("activex",typeof ActiveXObject!=="undefined");var _ade;if(has("activex")){var dp=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];_ade=function(_adf){var _ae0=_adf.data;if(!_ae0||!_ae0.documentElement){var text=_adf.text;_add.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(text);_ae0=dom;}catch(e){return false;}return true;});}return _ae0;};}var _ae1={"javascript":function(_ae2){return _adc.eval(_ae2.text||"");},"json":function(_ae3){return JSON.parse(_ae3.text||null);},"xml":_ade};function _ae4(_ae5){var _ae6=_ae1[_ae5.options.handleAs];_ae5.data=_ae6?_ae6(_ae5):(_ae5.data||_ae5.text);return _ae5;};_ae4.register=function(name,_ae7){_ae1[name]=_ae7;};return _ae4;});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_ae8){var _ae9=_ae8.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_ae9==1&&date.isLeapYear(_ae8)){return 29;}return days[_ae9];};date.isLeapYear=function(_aea){var year=_aea.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_aeb){var str=_aeb.toString();var tz="";var _aec;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_aec=str.match(pat))){tz=_aec[1];}else{str=_aeb.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_aec=str.match(pat))){tz=_aec[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_aed,_aee,_aef){_aed=new Date(+_aed);_aee=new Date(+(_aee||new Date()));if(_aef=="date"){_aed.setHours(0,0,0,0);_aee.setHours(0,0,0,0);}else{if(_aef=="time"){_aed.setFullYear(0,0,0);_aee.setFullYear(0,0,0);}}if(_aed>_aee){return 1;}if(_aed<_aee){return -1;}return 0;};date.add=function(date,_af0,_af1){var sum=new Date(+date);var _af2=false;var _af3="Date";switch(_af0){case "day":break;case "weekday":var days,_af4;var mod=_af1%5;if(!mod){days=(_af1>0)?5:-5;_af4=(_af1>0)?((_af1-5)/5):((_af1+5)/5);}else{days=mod;_af4=parseInt(_af1/5);}var strt=date.getDay();var adj=0;if(strt==6&&_af1>0){adj=1;}else{if(strt==0&&_af1<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_af1>0)?2:-2;}_af1=(7*_af4)+days+adj;break;case "year":_af3="FullYear";_af2=true;break;case "week":_af1*=7;break;case "quarter":_af1*=3;case "month":_af2=true;_af3="Month";break;default:_af3="UTC"+_af0.charAt(0).toUpperCase()+_af0.substring(1)+"s";}if(_af3){sum["set"+_af3](sum["get"+_af3]()+_af1);}if(_af2&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_af5,_af6,_af7){_af6=_af6||new Date();_af7=_af7||"day";var _af8=_af6.getFullYear()-_af5.getFullYear();var _af9=1;switch(_af7){case "quarter":var m1=_af5.getMonth();var m2=_af6.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_af8*4);_af9=q2-q1;break;case "weekday":var days=Math.round(date.difference(_af5,_af6,"day"));var _afa=parseInt(date.difference(_af5,_af6,"week"));var mod=days%7;if(mod==0){days=_afa*5;}else{var adj=0;var aDay=_af5.getDay();var bDay=_af6.getDay();_afa=parseInt(days/7);mod=days%7;var _afb=new Date(_af5);_afb.setDate(_afb.getDate()+(_afa*7));var _afc=_afb.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_afc+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_afc+mod)<0:adj=2;}}}days+=adj;days-=(_afa*2);}_af9=days;break;case "year":_af9=_af8;break;case "month":_af9=(_af6.getMonth()-_af5.getMonth())+(_af8*12);break;case "week":_af9=parseInt(date.difference(_af5,_af6,"day")/7);break;case "day":_af9/=24;case "hour":_af9/=60;case "minute":_af9/=60;case "second":_af9/=1000;case "millisecond":_af9*=_af6.getTime()-_af5.getTime();}return Math.round(_af9);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_afd,_afe,_aff){return _aff("dijit.Destroyable",null,{destroy:function(_b00){this._destroyed=true;},own:function(){_afd.forEach(arguments,function(_b01){var _b02="destroyRecursive" in _b01?"destroyRecursive":"destroy" in _b01?"destroy":"remove";_b01._odh=_afe.before(this,"destroy",function(_b03){_b01._odh.remove();_b01[_b02](_b03);});_afe.after(_b01,_b02,function(){_b01._odh.remove();});},this);return arguments;}});});},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","dojo/sniff","../registry","../Viewport","./utils"],function(_b04,_b05,_b06,_b07,_b08,lang,_b09,has,_b0a,_b0b,_b0c){return _b05("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _b0d=this.getParent();this._childOfLayoutWidget=_b0d&&_b0d.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.own(_b0b.on("resize",lang.hitch(this,"resize")));}},_checkIfSingleChild:function(){var _b0e=[],_b0f=false;_b09("> *",this.containerNode).some(function(node){var _b10=_b0a.byNode(node);if(_b10&&_b10.resize){_b0e.push(_b10);}else{if(node.offsetHeight){_b0f=true;}}});this._singleChild=_b0e.length==1&&!_b0f?_b0e[0]:null;_b06.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_b11,_b12){this._resizeCalled=true;this._scheduleLayout(_b11,_b12);},_scheduleLayout:function(_b13,_b14){if(this._isShown()){this._layout(_b13,_b14);}else{this._needLayout=true;this._changeSize=_b13;this._resultSize=_b14;}},_layout:function(_b15,_b16){delete this._needLayout;if(!this._wasShown&&this.open!==false){this._onShow();}if(_b15){_b07.setMarginBox(this.domNode,_b15);}var cn=this.containerNode;if(cn===this.domNode){var mb=_b16||{};lang.mixin(mb,_b15||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_b07.getMarginBox(cn),mb);}this._contentBox=_b0c.marginBox2contentBox(cn,mb);}else{this._contentBox=_b07.getContentBox(cn);}this._layoutChildren();},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_b07.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{_b04.forEach(this.getChildren(),function(_b17){if(_b17.resize){_b17.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_b18=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_b06.contains(node,"dijitHidden")&&_b18&&_b18.style&&(_b18.style.display!="none");}}},_onShow:function(){this._wasShown=true;if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);}});});},"dijit/WidgetSet":function(){define("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(_b19,_b1a,_b1b,_b1c){var _b1d=_b1a("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_b1e){if(this._hash[_b1e.id]){throw new Error("Tried to register widget with id=="+_b1e.id+" but that id is already registered");}this._hash[_b1e.id]=_b1e;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_b1f){_b1f=_b1f||_b1b.global;var i=0,id;for(id in this._hash){func.call(_b1f,this._hash[id],i++,this._hash);}return this;},filter:function(_b20,_b21){_b21=_b21||_b1b.global;var res=new _b1d(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_b20.call(_b21,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new _b1d(),id,_b22;for(id in this._hash){_b22=this._hash[id];if(_b22.declaredClass==cls){res.add(_b22);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_b23){return _b19.map(this.toArray(),func,_b23);},every:function(func,_b24){_b24=_b24||_b1b.global;var x=0,i;for(i in this._hash){if(!func.call(_b24,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_b25){_b25=_b25||_b1b.global;var x=0,i;for(i in this._hash){if(func.call(_b25,this._hash[i],x++,this._hash)){return true;}}return false;}});_b19.forEach(["forEach","filter","byClass","map","every","some"],function(func){_b1c[func]=_b1d.prototype[func];});return _b1d;});},"dojo/dnd/Moveable":function(){define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_b26,_b27,_b28,lang,dom,_b29,_b2a,on,_b2b,_b2c,dnd,_b2d,win){var _b2e=_b27("dojo.dnd.Moveable",[_b2a],{handle:"",delay:0,skip:false,constructor:function(node,_b2f){this.node=dom.byId(node);if(!_b2f){_b2f={};}this.handle=_b2f.handle?dom.byId(_b2f.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_b2f.delay>0?_b2f.delay:0;this.skip=_b2f.skip;this.mover=_b2f.mover?_b2f.mover:_b2d;this.events=[on(this.handle,_b2c.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_b30,node,Ctor){return new Ctor(node,_b30);},destroy:function(){_b26.forEach(this.events,function(_b31){_b31.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_b2c.move,lang.hitch(this,"onMouseMove")),on(this.handle,_b2c.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_b28.stop(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_b28.stop(e);},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}_b28.stop(e);},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){_b28.stop(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_b32){_b2b.publish("/dnd/move/start",_b32);_b29.add(win.body(),"dojoMove");_b29.add(this.node,"dojoMoveItem");},onMoveStop:function(_b33){_b2b.publish("/dnd/move/stop",_b33);_b29.remove(win.body(),"dojoMove");_b29.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_b34,_b35){this.onMoving(_b34,_b35);var s=_b34.node.style;s.left=_b35.l+"px";s.top=_b35.t+"px";this.onMoved(_b34,_b35);},onMoving:function(){},onMoved:function(){}});return _b2e;});},"dijit/TooltipDialog":function(){require({cache:{"url:dijit/templates/TooltipDialog.html":"<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" data-dojo-attach-point=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\n</div>\n"}});define("dijit/TooltipDialog",["dojo/_base/declare","dojo/dom-class","dojo/_base/event","dojo/keys","dojo/_base/lang","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(_b36,_b37,_b38,keys,lang,_b39,_b3a,_b3b,_b3c,_b3d,_b3e,_b3f){return _b36("dijit.TooltipDialog",[_b3a,_b3d,_b3c,_b3b],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:_b3e,_setTitleAttr:function(_b40){this.containerNode.title=_b40;this._set("title",_b40);},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");},orient:function(node,_b41,_b42){var newC={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_b41+"-"+_b42];_b37.replace(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC;},focus:function(){this._getFocusItems(this.containerNode);_b39.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);var _b43=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_b43.y+((_b43.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_b43.x+((_b43.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;if(evt.charOrCode===keys.TAB){this._getFocusItems(this.containerNode);}var _b44=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==keys.ESCAPE){this.defer("onCancel");_b38.stop(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===keys.TAB){if(!_b44){_b39.focus(this._lastFocusItem);}_b38.stop(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===keys.TAB&&!evt.shiftKey){if(!_b44){_b39.focus(this._firstFocusItem);}_b38.stop(evt);}else{if(evt.charOrCode===keys.TAB){evt.stopPropagation();}}}}}});});},"dojo/ready":function(){define("dojo/ready",["./_base/kernel","./has","require","./domReady","./_base/lang"],function(dojo,has,_b45,_b46,lang){var _b47=0,_b48,_b49=[],_b4a=0,_b4b=function(){_b47=1;dojo._postLoad=dojo.config.afterOnLoad=true;if(_b49.length){_b48(_b4c);}},_b4c=function(){if(_b47&&!_b4a&&_b49.length){_b4a=1;var f=_b49.shift();try{f();}finally{_b4a=0;}_b4a=0;if(_b49.length){_b48(_b4c);}}};_b45.on("idle",_b4c);_b48=function(){if(_b45.idle()){_b4c();}};var _b4d=dojo.ready=dojo.addOnLoad=function(_b4e,_b4f,_b50){var _b51=lang._toArray(arguments);if(typeof _b4e!="number"){_b50=_b4f;_b4f=_b4e;_b4e=1000;}else{_b51.shift();}_b50=_b50?lang.hitch.apply(dojo,_b51):function(){_b4f();};_b50.priority=_b4e;for(var i=0;i<_b49.length&&_b4e>=_b49[i].priority;i++){}_b49.splice(i,0,_b50);_b48();};1||has.add("dojo-config-addOnLoad",1);if(1){var dca=dojo.config.addOnLoad;if(dca){_b4d[(lang.isArray(dca)?"apply":"call")](dojo,dca);}}if(1&&dojo.config.parseOnLoad&&!dojo.isAsync){_b4d(99,function(){if(!dojo.parser){dojo.deprecated("Add explicit require(['dojo/parser']);","","2.0");_b45(["dojo/parser"]);}});}if(1){_b46(_b4b);}else{_b4b();}return _b4d;});},"dojo/_base/Deferred":function(){define(["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(dojo,_b52,_b53,_b54,has,lang,when){var _b55=function(){};var _b56=Object.freeze||function(){};var _b57=dojo.Deferred=function(_b58){var _b59,_b5a,_b5b,head,_b5c;var _b5d=(this.promise=new _b53());function _b5e(_b5f){if(_b5a){throw new Error("This deferred has already been resolved");}_b59=_b5f;_b5a=true;_b60();};function _b60(){var _b61;while(!_b61&&_b5c){var _b62=_b5c;_b5c=_b5c.next;if((_b61=(_b62.progress==_b55))){_b5a=false;}var func=(_b5b?_b62.error:_b62.resolved);if(has("config-useDeferredInstrumentation")){if(_b5b&&_b52.instrumentRejected){_b52.instrumentRejected(_b59,!!func);}}if(func){try{var _b63=func(_b59);if(_b63&&typeof _b63.then==="function"){_b63.then(lang.hitch(_b62.deferred,"resolve"),lang.hitch(_b62.deferred,"reject"),lang.hitch(_b62.deferred,"progress"));continue;}var _b64=_b61&&_b63===undefined;if(_b61&&!_b64){_b5b=_b63 instanceof Error;}_b62.deferred[_b64&&_b5b?"reject":"resolve"](_b64?_b59:_b63);}catch(e){_b62.deferred.reject(e);}}else{if(_b5b){_b62.deferred.reject(_b59);}else{_b62.deferred.resolve(_b59);}}}};this.resolve=this.callback=function(_b65){this.fired=0;this.results=[_b65,null];_b5e(_b65);};this.reject=this.errback=function(_b66){_b5b=true;this.fired=1;if(has("config-useDeferredInstrumentation")){if(_b52.instrumentRejected){_b52.instrumentRejected(_b66,!!_b5c);}}_b5e(_b66);this.results=[null,_b66];};this.progress=function(_b67){var _b68=_b5c;while(_b68){var _b69=_b68.progress;_b69&&_b69(_b67);_b68=_b68.next;}};this.addCallbacks=function(_b6a,_b6b){this.then(_b6a,_b6b,_b55);return this;};_b5d.then=this.then=function(_b6c,_b6d,_b6e){var _b6f=_b6e==_b55?this:new _b57(_b5d.cancel);var _b70={resolved:_b6c,error:_b6d,progress:_b6e,deferred:_b6f};if(_b5c){head=head.next=_b70;}else{_b5c=head=_b70;}if(_b5a){_b60();}return _b6f.promise;};var _b71=this;_b5d.cancel=this.cancel=function(){if(!_b5a){var _b72=_b58&&_b58(_b71);if(!_b5a){if(!(_b72 instanceof Error)){_b72=new _b54(_b72);}_b72.log=false;_b71.reject(_b72);}}};_b56(_b5d);};lang.extend(_b57,{addCallback:function(_b73){return this.addCallbacks(lang.hitch.apply(dojo,arguments));},addErrback:function(_b74){return this.addCallbacks(null,lang.hitch.apply(dojo,arguments));},addBoth:function(_b75){var _b76=lang.hitch.apply(dojo,arguments);return this.addCallbacks(_b76,_b76);},fired:-1});_b57.when=dojo.when=when;return _b57;});},"dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_b77,_b78,_b79,_b7a,lang,on,has,_b7b){var _b7c=(_b7b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_b7d,node,_b7e,obj,_b7f,_b80,_b81){if(obj!=this._obj){this.stop();this._initialDelay=_b80||500;this._subsequentDelay=_b7f||0.9;this._minDelay=_b81||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_b7d,_b7e);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_b82,_b83,_b84,_b85,_b86,_b87){if(_b82.keyCode){_b82.charOrCode=_b82.keyCode;_b7a.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_b82.charCode){_b82.charOrCode=String.fromCharCode(_b82.charCode);_b7a.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _b88=[on(node,_b78._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_b82.charOrCode&&(_b82.ctrlKey===undefined||_b82.ctrlKey==evt.ctrlKey)&&(_b82.altKey===undefined||_b82.altKey==evt.altKey)&&(_b82.metaKey===undefined||_b82.metaKey==(evt.metaKey||false))&&(_b82.shiftKey===undefined||_b82.shiftKey==evt.shiftKey)){_b79.stop(evt);_b7c.trigger(evt,_b83,node,_b84,_b82,_b85,_b86,_b87);}else{if(_b7c._obj==_b82){_b7c.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_b7c._obj==_b82){_b7c.stop();}}))];return {remove:function(){_b77.forEach(_b88,function(h){h.remove();});}};},addMouseListener:function(node,_b89,_b8a,_b8b,_b8c,_b8d){var _b8e=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_b7c.trigger(evt,_b89,node,_b8a,node,_b8b,_b8c,_b8d);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_b7c.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_b7c.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_b7c.trigger(evt,_b89,node,_b8a,node,_b8b,_b8c,_b8d);setTimeout(lang.hitch(this,_b7c.stop),50);}}))];return {remove:function(){_b77.forEach(_b8e,function(h){h.remove();});}};},addListener:function(_b8f,_b90,_b91,_b92,_b93,_b94,_b95,_b96){var _b97=[this.addKeyListener(_b90,_b91,_b92,_b93,_b94,_b95,_b96),this.addMouseListener(_b8f,_b92,_b93,_b94,_b95,_b96)];return {remove:function(){_b77.forEach(_b97,function(h){h.remove();});}};}});return _b7c;});},"esri/WKIDUnitConversion":function(){define("esri/WKIDUnitConversion",["dijit","dojo","dojox"],function(_b98,dojo,_b99){dojo.provide("esri.WKIDUnitConversion");esri.WKIDUnitConversion={values:[1,0.2011661949,0.3047997101815088,0.3048006096012192,0.3048,0.304797265,0.9143985307444408,20.11678249437587,0.9143984146160287,20.11676512155263,0.3047994715386762,0.91439523,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:1,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:2,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:3,2157:0,2158:0,2159:2,2160:2,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:3,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:4,2223:4,2224:4,2225:3,2226:3,2227:3,2228:3,2229:3,2230:3,2231:3,2232:3,2233:3,2234:3,2235:3,2236:3,2237:3,2238:3,2239:3,2240:3,2241:3,2242:3,2243:3,2244:3,2245:3,2246:3,2247:3,2248:3,2249:3,2250:3,2251:4,2252:4,2253:4,2254:3,2255:3,2256:4,2257:3,2258:3,2259:3,2260:3,2261:3,2262:3,2263:3,2264:3,2265:4,2266:4,2267:3,2268:3,2269:4,2270:4,2271:3,2272:3,2273:4,2274:3,2275:3,2276:3,2277:3,2278:3,2279:3,2280:4,2281:4,2282:4,2283:3,2284:3,2285:3,2286:3,2287:3,2288:3,2289:3,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:5,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:4,2868:4,2869:4,2870:3,2871:3,2872:3,2873:3,2874:3,2875:3,2876:3,2877:3,2878:3,2879:3,2880:3,2881:3,2882:3,2883:3,2884:3,2885:3,2886:3,2887:3,2888:3,2891:3,2892:3,2893:3,2894:3,2895:3,2896:4,2897:4,2898:4,2899:3,2900:3,2901:4,2902:3,2903:3,2904:3,2905:3,2906:3,2907:3,2908:3,2909:4,2910:4,2911:3,2912:3,2913:4,2914:4,2915:3,2916:3,2917:3,2918:3,2919:3,2920:3,2921:4,2922:4,2923:4,2924:3,2925:3,2926:3,2927:3,2928:3,2929:3,2930:3,2931:0,2932:0,2933:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:3,2965:3,2966:3,2967:3,2968:3,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2991:0,2992:4,2993:0,2994:4,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:4,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:3,3090:0,3091:3,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:3,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3148:0,3149:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:3,3360:0,3361:4,3362:0,3363:3,3364:0,3365:3,3366:5,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:3,3405:0,3406:0,3407:5,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:3,3418:3,3419:3,3420:3,3421:3,3422:3,3423:3,3424:3,3425:3,3426:3,3427:3,3428:3,3429:3,3430:3,3431:3,3432:3,3433:3,3434:3,3435:3,3436:3,3437:3,3438:3,3439:0,3440:0,3441:3,3442:3,3443:3,3444:3,3445:3,3446:3,3447:0,3448:0,3449:0,3450:0,3453:3,3456:3,3457:3,3458:3,3459:3,3460:0,3461:0,3462:0,3463:0,3464:0,3560:3,3561:3,3562:3,3563:3,3564:3,3565:3,3566:3,3567:3,3568:3,3569:3,3570:3,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:3,3583:0,3584:3,3585:0,3586:3,3587:0,3588:4,3589:0,3590:4,3591:0,3592:0,3593:4,3594:0,3595:0,3596:0,3597:0,3598:3,3599:0,3600:3,3601:0,3602:0,3603:0,3604:0,3605:4,3606:0,3607:0,3608:3,3609:0,3610:3,3611:0,3612:3,3613:0,3614:3,3615:0,3616:3,3617:0,3618:3,3619:0,3620:3,3621:0,3622:3,3623:0,3624:3,3625:0,3626:3,3627:0,3628:3,3629:0,3630:3,3631:0,3632:3,3633:0,3634:4,3635:0,3636:4,3637:0,3638:0,3639:0,3640:3,3641:0,3642:3,3643:0,3644:4,3645:0,3646:4,3647:0,3648:4,3649:0,3650:3,3651:0,3652:3,3653:0,3654:3,3655:0,3656:4,3657:0,3658:3,3659:0,3660:3,3661:0,3662:3,3663:0,3664:3,3665:0,3666:0,3667:0,3668:3,3669:0,3670:3,3671:0,3672:3,3673:0,3674:3,3675:0,3676:4,3677:3,3678:0,3679:4,3680:3,3681:0,3682:4,3683:3,3684:0,3685:0,3686:3,3687:0,3688:3,3689:0,3690:3,3691:0,3692:3,3693:0,3694:0,3695:0,3696:3,3697:0,3698:3,3699:0,3700:3,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:3,3729:3,3730:3,3731:3,3732:3,3733:3,3734:3,3735:3,3736:3,3737:3,3738:3,3739:3,3753:3,3754:3,3755:3,3756:3,3757:3,3758:3,3759:3,3760:3,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3851:0,3852:0,3857:0,3890:0,3891:0,3892:0,3893:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3670:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:3,3992:3,3994:0,3995:0,3996:0,3997:0,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:0,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:6,24371:6,24372:6,24373:6,24374:6,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:6,24383:0,24500:0,24547:0,24548:0,24571:7,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:3,26730:3,26731:3,26732:3,26733:3,26734:3,26735:3,26736:3,26737:3,26738:3,26739:3,26740:3,26741:3,26742:3,26743:3,26744:3,26745:3,26746:3,26747:3,26748:3,26749:3,26750:3,26751:3,26752:3,26753:3,26754:3,26755:3,26756:3,26757:3,26758:3,26759:3,26760:3,26761:3,26762:3,26763:3,26764:3,26765:3,26766:3,26767:3,26768:3,26769:3,26770:3,26771:3,26772:3,26773:3,26774:3,26775:3,26776:3,26777:3,26778:3,26779:3,26780:3,26781:3,26782:3,26783:3,26784:3,26785:3,26786:3,26787:3,26788:3,26789:3,26790:3,26791:3,26792:3,26793:3,26794:3,26795:3,26796:3,26797:3,26798:3,26799:3,26801:3,26802:3,26803:3,26811:3,26812:3,26813:3,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:8,27292:8,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29738:0,29739:0,29849:0,29850:0,29871:9,29872:10,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:1,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:3,32002:3,32003:3,32005:3,32006:3,32007:3,32008:3,32009:3,32010:3,32011:3,32012:3,32013:3,32014:3,32015:3,32016:3,32017:3,32018:3,32019:3,32020:3,32021:3,32022:3,32023:3,32024:3,32025:3,32026:3,32027:3,32028:3,32029:3,32030:3,32031:3,32033:3,32034:3,32035:3,32036:3,32037:3,32038:3,32039:3,32040:3,32041:3,32042:3,32043:3,32044:3,32045:3,32046:3,32047:3,32048:3,32049:3,32050:3,32051:3,32052:3,32053:3,32054:3,32055:3,32056:3,32057:3,32058:3,32059:3,32060:3,32061:0,32062:0,32064:3,32065:3,32066:3,32067:3,32074:3,32075:3,32076:3,32077:3,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:3,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:3,32165:3,32166:3,32167:3,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:3,32665:3,32666:3,32667:3,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:3,65062:3,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:12,102069:13,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:3,102119:4,102120:3,102121:3,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102218:0,102219:3,102220:3,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102300:0,102304:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102330:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102361:0,102363:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102440:0,102441:0,102442:0,102443:0,102444:0,102461:3,102462:3,102463:3,102464:3,102465:3,102466:3,102467:3,102468:3,102469:0,102491:0,102492:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102591:0,102592:0,102601:0,102602:0,102603:0,102604:3,102605:0,102606:0,102607:0,102608:0,102609:0,102629:3,102630:3,102631:3,102632:3,102633:3,102634:3,102635:3,102636:3,102637:3,102638:3,102639:3,102640:3,102641:3,102642:3,102643:3,102644:3,102645:3,102646:3,102648:3,102649:3,102650:3,102651:3,102652:3,102653:3,102654:3,102655:3,102656:3,102657:3,102658:3,102659:3,102660:3,102661:3,102662:3,102663:3,102664:3,102665:3,102666:3,102667:3,102668:3,102669:3,102670:3,102671:3,102672:3,102673:3,102674:3,102675:3,102676:3,102677:3,102678:3,102679:3,102680:3,102681:3,102682:3,102683:3,102684:3,102685:3,102686:3,102687:3,102688:3,102689:3,102690:3,102691:3,102692:3,102693:3,102694:3,102695:3,102696:3,102697:3,102698:3,102700:3,102704:3,102707:3,102708:3,102709:3,102710:3,102711:3,102712:3,102713:3,102714:3,102715:3,102716:3,102717:3,102718:3,102719:3,102720:3,102721:3,102722:3,102723:3,102724:3,102725:3,102726:3,102727:3,102728:3,102729:3,102730:3,102733:3,102734:3,102735:3,102736:3,102737:3,102738:3,102739:3,102740:3,102741:3,102742:3,102743:3,102744:3,102745:3,102746:3,102747:3,102748:3,102749:3,102750:3,102751:3,102752:3,102753:3,102754:3,102755:3,102756:3,102757:3,102758:3,102761:3,102763:3,102766:3,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103400:3,103401:3,103402:3,103403:3,103404:3,103405:3,103406:3,103407:3,103408:3,103409:3,103410:3,103411:3,103412:3,103413:3,103414:3,103415:3,103416:3,103417:3,103418:3,103419:3,103420:3,103421:3,103422:3,103423:3,103424:3,103425:3,103426:3,103427:3,103428:3,103429:3,103430:3,103431:3,103432:3,103433:3,103434:3,103435:3,103436:3,103437:3,103438:3,103439:3,103440:3,103441:3,103442:3,103443:3,103444:3,103445:3,103446:3,103447:3,103448:3,103449:3,103450:3,103451:3,103452:3,103453:3,103454:3,103455:3,103456:3,103457:3,103458:3,103459:3,103460:3,103461:3,103462:3,103463:3,103464:3,103465:3,103466:3,103467:3,103468:3,103469:3,103470:3,103471:3,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103584:0,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103700:3,103701:3,103702:3,103703:3,103704:3,103705:3,103706:3,103707:3,103708:3,103709:3,103710:3,103711:3,103712:3,103713:3,103714:3,103715:3,103716:3,103717:3,103718:3,103719:3,103720:3,103721:3,103722:3,103723:3,103724:3,103725:3,103726:3,103727:3,103728:3,103729:3,103730:3,103731:3,103732:3,103733:3,103734:3,103735:3,103736:3,103737:3,103738:3,103739:3,103740:3,103741:3,103742:3,103743:3,103744:3,103745:3,103746:3,103747:3,103748:3,103749:3,103750:3,103751:3,103752:3,103753:3,103754:3,103755:3,103756:3,103757:3,103758:3,103759:3,103760:3,103761:3,103762:3,103763:3,103764:3,103765:3,103766:3,103767:3,103768:3,103769:3,103770:3,103771:3,103772:3,103773:3,103774:3,103775:3,103776:3,103777:3,103778:3,103779:3,103780:3,103781:3,103782:3,103783:3,103784:3,103785:3,103786:3,103787:3,103788:3,103789:3,103790:3,103791:3,103792:3,103793:3,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:3,103901:3,103902:3,103903:3,103904:3,103905:3,103906:3,103907:3,103908:3,103909:3,103910:3,103911:3,103912:3,103913:3,103914:3,103915:3,103916:3,103917:3,103918:3,103919:3,103920:3,103921:3,103922:3,103923:3,103924:3,103925:3,103926:3,103927:3,103928:3,103929:3,103930:3,103931:3,103932:3,103933:3,103934:3,103935:3,103936:3,103937:3,103938:3,103939:3,103940:3,103941:3,103942:3,103943:3,103944:3,103945:3,103946:3,103947:3,103948:3,103949:3,103950:3,103951:3,103952:3,103953:3,103954:3,103955:3,103956:3,103957:3,103958:3,103959:3,103960:3,103961:3,103962:3,103963:3,103964:3,103965:3,103966:3,103967:3,103968:3,103969:3,103970:3,103971:3};});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _b9a={};lang.setObject("dojo.cldr.supplemental",_b9a);_b9a.getFirstDayOfWeek=function(_b9b){var _b9c={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _b9d=_b9a._region(_b9b);var dow=_b9c[_b9d];return (dow===undefined)?1:dow;};_b9a._region=function(_b9e){_b9e=i18n.normalizeLocale(_b9e);var tags=_b9e.split("-");var _b9f=tags[1];if(!_b9f){_b9f={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_b9f.length==4){_b9f=tags[2];}}return _b9f;};_b9a.getWeekend=function(_ba0){var _ba1={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_ba2={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_ba3=_b9a._region(_ba0),_ba4=_ba1[_ba3],end=_ba2[_ba3];if(_ba4===undefined){_ba4=6;}if(end===undefined){end=0;}return {start:_ba4,end:end};};return _b9a;});},"dojo/request/script":function(){define("dojo/request/script",["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_ba5,_ba6,util,_ba7,lang,on,dom,_ba8,has,win){has.add("script-readystatechange",function(_ba9,_baa){var _bab=_baa.createElement("script");return typeof _bab["onreadystatechange"]!=="undefined"&&(typeof _ba9["opera"]==="undefined"||_ba9["opera"].toString()!=="[object Opera]");});var mid=_ba5.id.replace(/[\/\.\-]/g,"_"),_bac=0,_bad=has("script-readystatechange")?"readystatechange":"load",_bae=/complete|loaded/,_baf=this[mid+"_callbacks"]={},_bb0=[];function _bb1(id,url,_bb2){var doc=(_bb2||win.doc),_bb3=doc.createElement("script");_bb3.type="text/javascript";_bb3.src=url;_bb3.id=id;_bb3.async=true;_bb3.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_bb3);};function _bb4(id,_bb5,_bb6){_ba8.destroy(dom.byId(id,_bb5));if(_baf[id]){if(_bb6){_baf[id]=function(){delete _baf[id];};}else{delete _baf[id];}}};function _bb7(dfd){var _bb8=dfd.response;_bb0.push({id:dfd.id,frameDoc:_bb8.options.frameDoc});_bb8.options.frameDoc=null;};function _bb9(dfd,_bba){if(dfd.canDelete){_bbb._remove(dfd.id,_bba.options.frameDoc,true);}};function _bbc(_bbd){if(_bb0&&_bb0.length){_ba7.forEach(_bb0,function(_bbe){_bbb._remove(_bbe.id,_bbe.frameDoc);_bbe.frameDoc=null;});_bb0=[];}return _bbd.options.jsonp?!_bbd.data:true;};function _bbf(_bc0){return !!this.scriptLoaded;};function _bc1(_bc2){var _bc3=_bc2.options.checkString;return _bc3&&eval("typeof("+_bc3+") !== \"undefined\"");};function _bc4(_bc5,_bc6){if(this.canDelete){_bb7(this);}if(_bc6){this.reject(_bc6);}else{this.resolve(_bc5);}};function _bbb(url,_bc7,_bc8){var _bc9=util.parseArgs(url,util.deepCopy({},_bc7));url=_bc9.url;_bc7=_bc9.options;var dfd=util.deferred(_bc9,_bb9,_bbc,_bc7.jsonp?null:(_bc7.checkString?_bc1:_bbf),_bc4);lang.mixin(dfd,{id:mid+(_bac++),canDelete:false});if(_bc7.jsonp){var _bca=new RegExp("[?&]"+_bc7.jsonp+"=");if(!_bca.test(url)){url+=_bca+(_bc7.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_baf[dfd.id]=function(json){_bc9.data=json;dfd.handleResponse(_bc9);};}if(util.notify){util.notify.emit("send",_bc9,dfd.promise.cancel);}if(!_bc7.canAttach||_bc7.canAttach(dfd)){var node=_bbb._attach(dfd.id,url,_bc7.frameDoc);if(!_bc7.jsonp&&!_bc7.checkString){var _bcb=on(node,_bad,function(evt){if(evt.type==="load"||_bae.test(node.readyState)){_bcb.remove();dfd.scriptLoaded=evt;}});}}_ba6(dfd);return _bc8?dfd:dfd.promise;};_bbb.get=_bbb;_bbb._attach=_bb1;_bbb._remove=_bb4;_bbb._callbacksProperty=mid+"_callbacks";return _bbb;});},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_bcc,_bcd,_bce,_bcf,dom,_bd0,_bd1,_bd2,_bd3,_bd4,keys,lang,on,has,_bd5,_bd6,_bd7){function _bd8(){if(this._popupWrapper){_bd1.destroy(this._popupWrapper);delete this._popupWrapper;}};var _bd9=_bcf(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_bda){var _bdb=_bda._popupWrapper,node=_bda.domNode;if(!_bdb){_bdb=_bd1.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_bda.ownerDocumentBody);_bdb.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_bda._popupWrapper=_bdb;_bcd.after(_bda,"destroy",_bd8,true);}return _bdb;},moveOffScreen:function(_bdc){var _bdd=this._createWrapper(_bdc);_bd3.set(_bdd,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_bde){var _bdf=this._createWrapper(_bde);_bd3.set(_bdf,"display","none");},getTopPopup:function(){var _be0=this._stack;for(var pi=_be0.length-1;pi>0&&_be0[pi].parent===_be0[pi-1].widget;pi--){}return _be0[pi];},open:function(args){var _be1=this._stack,_be2=args.popup,_be3=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_bd2.isBodyLtr(_be2.ownerDocument),_be4=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_be1.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_be1[_be1.length-1].widget.domNode))){this.close(_be1[_be1.length-1].widget);}var _be5=this._createWrapper(_be2);_bd0.set(_be5,{id:id,style:{zIndex:this._beginZIndex+_be1.length},"class":"dijitPopup "+(_be2.baseClass||_be2["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_be2.bgIframe){_be2.bgIframe=new _bd6(_be5);}}var best=_be4?_bd5.around(_be5,_be4,_be3,ltr,_be2.orient?lang.hitch(_be2,"orient"):null):_bd5.at(_be5,args,_be3=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_be5.style.display="";_be5.style.visibility="visible";_be2.domNode.style.visibility="visible";var _be6=[];_be6.push(on(_be5,_bce._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_bd4.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_bd4.stop(evt);var _be7=this.getTopPopup();if(_be7&&_be7.onCancel){_be7.onCancel();}}}})));if(_be2.onCancel&&args.onCancel){_be6.push(_be2.on("cancel",args.onCancel));}_be6.push(_be2.on(_be2.onExecute?"execute":"change",lang.hitch(this,function(){var _be8=this.getTopPopup();if(_be8&&_be8.onExecute){_be8.onExecute();}})));_be1.push({widget:_be2,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_be6});if(_be2.onOpen){_be2.onOpen(best);}return best;},close:function(_be9){var _bea=this._stack;while((_be9&&_bcc.some(_bea,function(elem){return elem.widget==_be9;}))||(!_be9&&_bea.length)){var top=_bea.pop(),_beb=top.widget,_bec=top.onClose;if(_beb.onClose){_beb.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_beb&&_beb.domNode){this.hide(_beb);}if(_bec){_bec();}}}});return (_bd7.popup=new _bd9());});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_bed,_bee,lang,_bef,_bf0){var _bf1={};_bed.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_bf1[name]=_bef[name];});lang.mixin(_bf1,{defaultDuration:_bee["defaultDuration"]||200});lang.mixin(_bf0,_bf1);return _bf0;});},"url:dijit/templates/TooltipDialog.html":"<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" data-dojo-attach-point=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\n</div>\n","dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_bf2,_bf3,_bf4,lang,has,win,dom,_bf5,_bf6,_bf7,on,_bf8,dnd,_bf9){return _bf3("dojo.dnd.Mover",[_bf7],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[on(d,_bf8.move,lang.hitch(this,"onFirstMove")),on(d,_bf8.move,lang.hitch(this,"onMouseMove")),on(d,_bf8.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_bf4.stop),on(d.body,"selectstart",_bf4.stop)];_bf9.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_bf9.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);_bf4.stop(e);},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_bf4.stop(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_bf5.getMarginBox(this.node);var b=win.doc.body;var bs=_bf6.getComputedStyle(b);var bm=_bf5.getMarginBox(b,bs);var bc=_bf5.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_bf2.forEach(this.events,function(_bfa){_bfa.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_bfb,_bfc,_bfd,_bfe,_bff,lang,on,has,win){var _c00=new function(){var _c01=[];this.pop=function(){var _c02;if(_c01.length){_c02=_c01.pop();_c02.style.display="";}else{if(has("ie")<9){var burl=_bfd["dojoBlankHtmlUrl"]||_bfb.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_c02=win.doc.createElement(html);}else{_c02=_bfe.create("iframe");_c02.src="javascript:\"\"";_c02.className="dijitBackgroundIframe";_c02.setAttribute("role","presentation");_bff.set(_c02,"opacity",0.1);}_c02.tabIndex=-1;}return _c02;};this.push=function(_c03){_c03.style.display="none";_c01.push(_c03);};}();_bfc.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _c04=(this.iframe=_c00.pop());node.appendChild(_c04);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_bff.set(_c04,{width:"100%",height:"100%"});}}};lang.extend(_bfc.BackgroundIframe,{resize:function(node){if(this.iframe){_bff.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_c00.push(this.iframe);delete this.iframe;}}});return _bfc.BackgroundIframe;});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_c05,_c06,_c07,has,_c08,lang,_c09,_c0a,_c0b,_c0c){if(has("dijit-legacy-requires")){_c09(0,function(){var _c0d=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_c05(_c0d);});}return _c06("dijit.form.Button",[_c0a,_c0b],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_c0c,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_c0e){if(_c0e&&(!this.params||!("label" in this.params))){var _c0f=lang.trim(_c0e.innerHTML);if(_c0f){this.label=_c0f;}}},_setShowLabelAttr:function(val){if(this.containerNode){_c07.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_c10){_c08.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_c10);},_setLabelAttr:function(_c11){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_c12,_c13,_c14,_c15,_c16,_c17,dom,_c18,_c19,_c1a,_c1b,_c1c,has,_c1d,lang,on,_c1e,_c1f,_c20,win,_c21,_c22){has.add("dijit-legacy-requires",!_c1d.isAsync);if(has("dijit-legacy-requires")){_c1e(0,function(){var _c23=["dijit/_base/manager"];_c12(_c23);});}var _c24={};function _c25(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _c26(attr){return function(val){_c18[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _c17("dijit._WidgetBase",[_c1f,_c21],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_c26("lang"),dir:"",_setDirAttr:_c26("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_c15.blankGif||_c12.toUrl("dojo/resources/blank.gif"),postscript:function(_c27,_c28){this.create(_c27,_c28);},create:function(_c29,_c2a){this.srcNodeRef=dom.byId(_c2a);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_c29){this.params=_c29;lang.mixin(this,_c29);}this.postMixInProperties();if(!this.id){this.id=_c22.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_c22.add(this);this.buildRendering();var _c2b;if(this.domNode){this._applyAttributes();var _c2c=this.srcNodeRef;if(_c2c&&_c2c.parentNode&&this.domNode!==_c2c){_c2c.parentNode.replaceChild(this.domNode,_c2c);_c2b=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_c2b){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _c2d=ctor.prototype;for(var _c2e in _c2d){if(_c2e in this.attributeMap){continue;}var _c2f="_set"+_c2e.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_c2f in _c2d){list.push(_c2e);}}}_c13.forEach(list,function(attr){if(this.params&&attr in this.params){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(var _c30 in this.params){this.set(_c30,this.params[_c30]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _c31=this.baseClass.split(" ");if(!this.isLeftToRight()){_c31=_c31.concat(_c13.map(_c31,function(name){return name+"Rtl";}));}_c19.add(this.domNode,_c31);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_c13.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_c32){this._beingDestroyed=true;this.destroyDescendants(_c32);this.destroy(_c32);},destroy:function(_c33){this._beingDestroyed=true;this.uninitialize();function _c34(w){if(w.destroyRecursive){w.destroyRecursive(_c33);}else{if(w.destroy){w.destroy(_c33);}}};_c13.forEach(this._connects,lang.hitch(this,"disconnect"));_c13.forEach(this._supportingWidgets,_c34);if(this.domNode){_c13.forEach(_c22.findWidgets(this.domNode,this.containerNode),_c34);}this.destroyRendering(_c33);_c22.remove(this.id);this._destroyed=true;},destroyRendering:function(_c35){if(this.bgIframe){this.bgIframe.destroy(_c35);delete this.bgIframe;}if(this.domNode){if(_c35){_c18.remove(this.domNode,"widgetId");}else{_c1a.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_c35){_c1a.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_c36){_c13.forEach(this.getChildren(),function(_c37){if(_c37.destroyRecursive){_c37.destroyRecursive(_c36);}});},uninitialize:function(){return false;},_setStyleAttr:function(_c38){var _c39=this.domNode;if(lang.isObject(_c38)){_c1c.set(_c39,_c38);}else{if(_c39.style.cssText){_c39.style.cssText+="; "+_c38;}else{_c39.style.cssText=_c38;}}this._set("style",_c38);},_attrToDom:function(attr,_c3a,_c3b){_c3b=arguments.length>=3?_c3b:this.attributeMap[attr];_c13.forEach(lang.isArray(_c3b)?_c3b:[_c3b],function(_c3c){var _c3d=this[_c3c.node||_c3c||"domNode"];var type=_c3c.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_c3a)){_c3a=lang.hitch(this,_c3a);}var _c3e=_c3c.attribute?_c3c.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_c3d.tagName){_c18.set(_c3d,_c3e,_c3a);}else{_c3d.set(_c3e,_c3a);}break;case "innerText":_c3d.innerHTML="";_c3d.appendChild(this.ownerDocument.createTextNode(_c3a));break;case "innerHTML":_c3d.innerHTML=_c3a;break;case "class":_c19.replace(_c3d,_c3a,this[attr]);break;}},this);},get:function(name){var _c3f=this._getAttrNames(name);return this[_c3f.g]?this[_c3f.g]():this[name];},set:function(name,_c40){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _c41=this._getAttrNames(name),_c42=this[_c41.s];if(lang.isFunction(_c42)){var _c43=_c42.apply(this,Array.prototype.slice.call(arguments,1));}else{var _c44=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_c44].tagName,_c45=_c24[tag]||(_c24[tag]=_c25(this[_c44])),map=name in this.attributeMap?this.attributeMap[name]:_c41.s in this?this[_c41.s]:((_c41.l in _c45&&typeof _c40!="function")||/^aria-|^data-|^role$/.test(name))?_c44:null;if(map!=null){this._attrToDom(name,_c40,map);}this._set(name,_c40);}return _c43||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_c46){var _c47=this[name];this[name]=_c46;if(this._created&&_c46!==_c47){if(this._watchCallbacks){this._watchCallbacks(name,_c47,_c46);}this.emit("attrmodified-"+name,{detail:{prevValue:_c47,newValue:_c46}});}},emit:function(type,_c48,_c49){_c48=_c48||{};if(_c48.bubbles===undefined){_c48.bubbles=true;}if(_c48.cancelable===undefined){_c48.cancelable=true;}if(!_c48.detail){_c48.detail={};}_c48.detail.widget=this;var ret,_c4a=this["on"+type];if(_c4a){ret=_c4a.apply(this,_c49?_c49:[_c48]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_c48);}return ret;},on:function(type,func){var _c4b=this._onMap(type);if(_c4b){return _c14.after(this,_c4b,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_c22.findWidgets(this.containerNode):[];},getParent:function(){return _c22.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_c4c,_c4d){return this.own(_c16.connect(obj,_c4c,this,_c4d))[0];},disconnect:function(_c4e){_c4e.remove();},subscribe:function(t,_c4f){return this.own(_c20.subscribe(t,lang.hitch(this,_c4f)))[0];},unsubscribe:function(_c50){_c50.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_c1b.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_c1c.get(this.domNode,"display")!="none");},placeAt:function(_c51,_c52){var _c53=!_c51.tagName&&_c22.byId(_c51);if(_c53&&_c53.addChild&&(!_c52||typeof _c52==="number")){_c53.addChild(this,_c52);}else{var ref=_c53?(_c53.containerNode&&!/after|before|replace/.test(_c52||"")?_c53.containerNode:_c53.domNode):dom.byId(_c51,this.ownerDocument);_c1a.place(this.domNode,ref,_c52);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_c54){return _c54;},applyTextDir:function(){},defer:function(fcn,_c55){var _c56=setTimeout(lang.hitch(this,function(){_c56=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_c55||0);return {remove:function(){if(_c56){clearTimeout(_c56);_c56=null;}return null;}};}});});},"dojo/_base/html":function(){define("dojo/_base/html",["./kernel","../dom","../dom-style","../dom-attr","../dom-prop","../dom-class","../dom-construct","../dom-geometry"],function(dojo,dom,_c57,attr,prop,cls,ctr,geom){dojo.byId=dom.byId;dojo.isDescendant=dom.isDescendant;dojo.setSelectable=dom.setSelectable;dojo.getAttr=attr.get;dojo.setAttr=attr.set;dojo.hasAttr=attr.has;dojo.removeAttr=attr.remove;dojo.getNodeProp=attr.getNodeProp;dojo.attr=function(node,name,_c58){if(arguments.length==2){return attr[typeof name=="string"?"get":"set"](node,name);}return attr.set(node,name,_c58);};dojo.hasClass=cls.contains;dojo.addClass=cls.add;dojo.removeClass=cls.remove;dojo.toggleClass=cls.toggle;dojo.replaceClass=cls.replace;dojo._toDom=dojo.toDom=ctr.toDom;dojo.place=ctr.place;dojo.create=ctr.create;dojo.empty=function(node){ctr.empty(node);};dojo._destroyElement=dojo.destroy=function(node){ctr.destroy(node);};dojo._getPadExtents=dojo.getPadExtents=geom.getPadExtents;dojo._getBorderExtents=dojo.getBorderExtents=geom.getBorderExtents;dojo._getPadBorderExtents=dojo.getPadBorderExtents=geom.getPadBorderExtents;dojo._getMarginExtents=dojo.getMarginExtents=geom.getMarginExtents;dojo._getMarginSize=dojo.getMarginSize=geom.getMarginSize;dojo._getMarginBox=dojo.getMarginBox=geom.getMarginBox;dojo.setMarginBox=geom.setMarginBox;dojo._getContentBox=dojo.getContentBox=geom.getContentBox;dojo.setContentSize=geom.setContentSize;dojo._isBodyLtr=dojo.isBodyLtr=geom.isBodyLtr;dojo._docScroll=dojo.docScroll=geom.docScroll;dojo._getIeDocumentElementOffset=dojo.getIeDocumentElementOffset=geom.getIeDocumentElementOffset;dojo._fixIeBiDiScrollLeft=dojo.fixIeBiDiScrollLeft=geom.fixIeBiDiScrollLeft;dojo.position=geom.position;dojo.marginBox=function marginBox(node,box){return box?geom.setMarginBox(node,box):geom.getMarginBox(node);};dojo.contentBox=function contentBox(node,box){return box?geom.setContentSize(node,box):geom.getContentBox(node);};dojo.coords=function(node,_c59){dojo.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");node=dom.byId(node);var s=_c57.getComputedStyle(node),mb=geom.getMarginBox(node,s);var abs=geom.position(node,_c59);mb.x=abs.x;mb.y=abs.y;return mb;};dojo.getProp=prop.get;dojo.setProp=prop.set;dojo.prop=function(node,name,_c5a){if(arguments.length==2){return prop[typeof name=="string"?"get":"set"](node,name);}return prop.set(node,name,_c5a);};dojo.getStyle=_c57.get;dojo.setStyle=_c57.set;dojo.getComputedStyle=_c57.getComputedStyle;dojo.__toPixelValue=dojo.toPixelValue=_c57.toPixelValue;dojo.style=function(node,name,_c5b){switch(arguments.length){case 1:return _c57.get(node);case 2:return _c57[typeof name=="string"?"get":"set"](node,name);}return _c57.set(node,name,_c5b);};return dojo;});},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var _c5c={},u;function _c5d(fn){return _c5c[fn]=new Function("item","index","array",fn);};function _c5e(some){var _c5f=!some;return function(a,fn,o){var i=0,l=a&&a.length||0,_c60;if(l&&typeof a=="string"){a=a.split("");}if(typeof fn=="string"){fn=_c5c[fn]||_c5d(fn);}if(o){for(;i<l;++i){_c60=!fn.call(o,a[i],i,a);if(some^_c60){return !_c60;}}}else{for(;i<l;++i){_c60=!fn(a[i],i,a);if(some^_c60){return !_c60;}}}return _c5f;};};function _c61(up){var _c62=1,_c63=0,_c64=0;if(!up){_c62=_c63=_c64=-1;}return function(a,x,from,last){if(last&&_c62>0){return _c65.lastIndexOf(a,x,from);}var l=a&&a.length||0,end=up?l+_c64:_c63,i;if(from===u){i=up?_c63:l+_c64;}else{if(from<0){i=l+from;if(i<0){i=_c63;}}else{i=from>=l?l+_c64:from;}}if(l&&typeof a=="string"){a=a.split("");}for(;i!=end;i+=_c62){if(a[i]==x){return i;}}return -1;};};var _c65={every:_c5e(false),some:_c5e(true),indexOf:_c61(true),lastIndexOf:_c61(false),forEach:function(arr,_c66,_c67){var i=0,l=arr&&arr.length||0;if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _c66=="string"){_c66=_c5c[_c66]||_c5d(_c66);}if(_c67){for(;i<l;++i){_c66.call(_c67,arr[i],i,arr);}}else{for(;i<l;++i){_c66(arr[i],i,arr);}}},map:function(arr,_c68,_c69,Ctr){var i=0,l=arr&&arr.length||0,out=new (Ctr||Array)(l);if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _c68=="string"){_c68=_c5c[_c68]||_c5d(_c68);}if(_c69){for(;i<l;++i){out[i]=_c68.call(_c69,arr[i],i,arr);}}else{for(;i<l;++i){out[i]=_c68(arr[i],i,arr);}}return out;},filter:function(arr,_c6a,_c6b){var i=0,l=arr&&arr.length||0,out=[],_c6c;if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _c6a=="string"){_c6a=_c5c[_c6a]||_c5d(_c6a);}if(_c6b){for(;i<l;++i){_c6c=arr[i];if(_c6a.call(_c6b,_c6c,i,arr)){out.push(_c6c);}}}else{for(;i<l;++i){_c6c=arr[i];if(_c6a(_c6c,i,arr)){out.push(_c6c);}}}return out;},clearCache:function(){_c5c={};}};1&&lang.mixin(dojo,_c65);return _c65;});},"dojo/promise/Promise":function(){define(["../_base/lang"],function(lang){"use strict";function _c6d(){throw new TypeError("abstract");};return lang.extend(function Promise(){},{then:function(_c6e,_c6f,_c70){_c6d();},cancel:function(_c71,_c72){_c6d();},isResolved:function(){_c6d();},isRejected:function(){_c6d();},isFulfilled:function(){_c6d();},isCanceled:function(){_c6d();},always:function(_c73){return this.then(_c73,_c73);},otherwise:function(_c74){return this.then(null,_c74);},trace:function(){return this;},traceRejected:function(){return this;},toString:function(){return "[object Promise]";}});});},"dojo/errors/RequestTimeoutError":function(){define("dojo/errors/RequestTimeoutError",["./create","./RequestError"],function(_c75,_c76){return _c75("RequestTimeoutError",null,_c76,{dojoType:"timeout"});});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","WebScene/app/StageUtils":function(){define("WebScene/app/StageUtils",["dijit","dojo","dojox"],function(_c77,dojo,_c78){dojo.provide("WebScene.app.StageUtils");WebScene.Utils=function(){};WebScene.Utils.Search=function(){var _c79=_c79||{};this.frame=_c79.frameResult!==undefined?_c79.frameResult:true;this.highlight=_c79.highlightResult!==undefined?_c79.highlightResult:true;this.cycleThroughResults=_c79.cycleThroughResults!==undefined?_c79.cycleThroughResults:true;this.searchVisibleOnly=_c79.searchVisibleOnly!==undefined?_c79.searchVisibleOnly:false;this.searchInNames=_c79.searchInNames!==undefined?_c79.searchInNames:true;this.searchInLayers=_c79.searchInLayers!==undefined?_c79.searchInLayers:true;this.searchInAttributes=_c79.searchInAttributes!==undefined?_c79.searchInAttributes:true;this.searchInMaterials=_c79.searchInMaterials!==undefined?_c79.searchInMaterials:true;var that=this;var _c7a="";var _c7b=0;this.findSingleMatch=function(_c7c,_c7d,_c7e){var hits=this.findMatches(_c7c,_c7d,_c7e);if(hits.length>0){if(this.cycleThroughResults){_c7b=_c7a==_c7d?(_c7b+1)%hits.length:0;}_c7a=_c7d;if(this.highlight){stage.selectObject(hits[_c7b]);}if(this.frame){stage.frame(hits[_c7b]);}return hits[_c7b];}};this.findMatches=function(_c7f,_c80,_c81){var hits={"visible":[],"hidden":{}};var _c82=new RegExp(_c80,"i");var _c83=_c7f.getObjects();var _c84=_c7f.getLayers();for(var key in _c83){var _c85=_c83[key];if(that.searchVisibleOnly){continue;}var _c86=WebScene.Utils.getLayer(_c81.getLayers(),_c85).name;var _c87=WebScene.Utils.isObjectVisible(_c81,_c85);var _c88=_c89(_c82,key,_c85,_c84);if(_c88&&_c87){hits.visible.push([_c85,_c88]);}else{if(_c88&&!_c87){if(!(_c86 in hits.hidden)){hits.hidden[_c86]=0;}hits.hidden[_c86]+=1;}}}return hits;};function _c89(_c8a,_c8b,_c8c,_c8d){if(that.searchInNames){if(_c8a.test(_c8b)){return {"name":_c8b};}}if(that.searchInLayers){var _c8e=WebScene.Utils.getLayer(_c8d,_c8c).name;if(_c8a.test(_c8e)){return {"layer":_c8e};}}if(that.searchInAttributes&&_c8c.getMetadata()!==undefined){for(var key in _c8c.metadata){if(_c8a.test(key)){return {"metadataN":key,"metadataV":_c8c.metadata[key]};}if(_c8a.test(_c8c.metadata[key])){return {"metadataN":key,"metadataV":_c8c.metadata[key]};}}var _c8f=_c8c.getMetadata().attributes;if(_c8f!==undefined){for(var key in _c8f){if(_c8a.test(key)){return {"attributeN":key,"attributeV":_c8f[key]};}if(_c8a.test(_c8f[key])){return {"attributeN":key,"attributeV":_c8f[key]};}}}var _c90=_c8c.getMetadata().reports;if(_c90!==undefined){for(var key in _c90){if(_c8a.test(key)){return {"reportN":key,"reportV":_c90[key]};}if(_c8a.test(_c90[key])){return {"reportN":key,"reportV":_c90[key]};}}}}if(that.searchInMaterials&&_c8c.materials!==undefined){var m;for(var j=0;m=_c8c.materials[j],j<_c8c.materials.length;j++){if(_c8a.test(m)){return {"material":m};}}}return false;};};WebScene.Utils.setLayerVisibility=function(_c91,_c92,mode,_c93){var _c94=_c91.getViewContent();var idx=_c94.indexOf(_c92);if(mode==1){if(idx==-1){_c94.push(_c92);}}else{if(idx>=0){_c94.splice(idx,1);}}_c91.setViewContent(_c94,_c93||0);};WebScene.Utils.getVisibleLayers=function(_c95){var _c96=[];for(var name in _c95){var _c97=_c95[name].layers;for(var i=0;i<_c97.length;++i){if(_c95[name].vis&&_c95[name].layers[i].vis){_c96.push(_c95[name].layers[i].name);}}}return _c96;};WebScene.Utils.getInitialLayerStates=function(_c98){var _c99=WebScene.Utils.getLayerGroups(_c98.getLayers());var conf=_c98.getConfiguration().scene.layerVis;var nLG=0;for(var n in _c99){nLG++;for(var m in _c99[n].layers){nLG++;}}applyConf=false;if(conf&&nLG!==conf.length){conf=false;}if(conf){var l=0;for(var name in _c99){_c99[name].vis=conf[l++]===1;var _c9a=_c99[name].layers;for(var i=0;i<_c9a.length;++i){_c9a[i].vis=conf[l++]===1;}}}else{for(var name in _c99){_c99[name].vis=false;var _c9a=_c99[name].layers;for(var i=0;i<_c9a.length;++i){if(_c9a[i].vis){_c99[name].vis=true;break;}}}}return _c99;};WebScene.Utils.isLayerVisible=function(_c9b,_c9c){return _c9b.getViewContent().indexOf(_c9c)>=0;};WebScene.Utils.isObjectVisible=function(_c9d,_c9e){var _c9f=WebScene.Utils.getLayer(_c9d.getLayers(),_c9e);return WebScene.Utils.isLayerVisible(_c9d,_c9f.name);};WebScene.Utils.getLayer=function(_ca0,_ca1){return _ca0[_ca1.getMetadata().ceLayer];};WebScene.Utils.isLayerPickable=function(_ca2){return _ca2.interaction!=="LOCKED";};WebScene.Utils.getLayerGroups=function(_ca3){var _ca4={};var i=0;for(var _ca5 in _ca3){var _ca6=true;var _ca7=_ca3[_ca5];var _ca8=_ca7["group"];if(_ca8===""){_ca8="_ng_"+_ca5;_ca6=false;i++;}if(_ca4[_ca8]==undefined){_ca4[_ca8]={};_ca4[_ca8]["layers"]=[];}_ca4[_ca8]["grouped"]=_ca6;_ca4[_ca8]["layers"].push({name:_ca7.name,vis:_ca7.state!=="HIDDEN"});_ca4[_ca8]["name"]=_ca8;}return _ca4;};WebScene.Utils.Configuration=function(_ca9,_caa){this.scene={};this.scene["3dWebScene"]=undefined;this.scene.camera;this.scene.layerVis;this.scene.shadows;this.scene.ao;this.scene.reducedUI;this.scene.portal;this.scene.autoplay;this.load={};this.load.itemSize;this.load.streamParse;this.load.responseType;this.load.noglcheck;this.load.gzip;this.load.cookienoread;this.load.cookienowrite;this.loadFromUrl=function(){var qs=dojo.queryToObject(dojo.doc.location.search.substr((dojo.doc.location.search[0]==="?"?1:0)));this.scene["3dWebScene"]=qs["3dWebScene"]||this.scene["3dWebScene"];this.scene.camera=_cab(qs);this.scene.layerVis=_cac(qs);this.scene.shadows=qs["shadows"]=="off"?false:qs["shadows"]=="on"?true:undefined;this.scene.ao=qs["ao"]=="off"?false:qs["ao"]=="on"?true:undefined;this.scene.reducedUI=("reducedUI" in qs)?true:undefined;this.scene.portal=("portal" in qs)?qs.portal:undefined;this.scene.autoplay=("autoplay" in qs)?true:undefined;this.load.itemSize=qs["itemSize"]?parseInt(qs["itemSize"]):undefined;this.load.responseType=qs["responseType"]||this.load.responseType;this.load.streamParse=("nativeParse" in qs)?false:this.load.streamParse;this.load.noglcheck=("noglcheck" in qs)?true:undefined;this.load.gzip=qs["gzip"]=="true"?true:qs["gzip"]=="false"?false:undefined;this.load.cookienoread=("cookienoread" in qs)?true:undefined;this.load.cookienowrite=("cookienowrite" in qs)?true:undefined;};this.updateLayerVis=function(_cad){var _cae=[];var i=0;for(var l in _cad){var _caf=_cad[l];_cae.push(_caf.vis?1:0);for(var key in _caf.layers){var l=_caf.layers[key];_cae.push(l.vis?1:0);}}this.scene.layerVis=_cae;};this.toUrl=function(){var _cb0=_ca9.getCamera();var _cb1=document.location.protocol+"//"+document.location.host+document.location.pathname;var _cb2="";if(this.scene["3dWebScene"]){_cb2+="&3dWebScene="+this.scene["3dWebScene"];}if(this.scene.portal){_cb2+="&portal="+this.scene.portal;}var camP=UIUtils.croundv(_cb0[0]);var camT=UIUtils.croundv(_cb0[1]);var _cb3=[UIUtils.cround(_ca9.getFovX())];_cb2+="&view="+camT.concat(camP).concat(_cb3).join(",");_cb2+="&lyr="+this.scene.layerVis.join(",");var _cb4=_cb1+"?"+_cb2;var _cb5=_cb1+encodeURIComponent("?")+encodeURIComponent(_cb2);return {direct:_cb4,encoded:_cb5,base:_cb1};};function _cab(qs){if("view" in qs){var bm=qs["view"].split(",");if(bm.length!=7){return false;}for(var i in bm){bm[i]=parseFloat(bm[i]);}return {target:bm.slice(0,3),position:bm.slice(3,6),fov:bm.slice(6,7)};}};function _cac(qs){if("lyr" in qs){try{return JSON.parse("["+qs["lyr"]+"]");}catch(err){return false;}}else{return false;}};};WebScene.Utils.evalServer=function(){var _cb6;var host;var req=new XMLHttpRequest();req.open("GET",document.location,false);req.send(null);var _cb7=req.getResponseHeader("Server");var ip=parseFloat(document.location.hostname);if(_cb7){_cb7=_cb7.toLowerCase();if(_cb7.search("jetty")==0&&document.location.hostname=="localhost"&&document.location.port>50000){_cb6="ce";}}if(document.location.hostname=="localhost"){host="local";}else{if(ip>=10&&ip<11||ip>=172.16&&ip<172.32||ip>=192.168&&ip<192.169){host="local";}else{host="remote";}}return {host:host,client:_cb6};};});},"dijit/_base/sniff":function(){define("dijit/_base/sniff",["dojo/uacss"],function(){});},"dojo/_base/config":function(){define(["../has","require"],function(has,_cb8){var _cb9={};if(1){var src=_cb8.rawConfig,p;for(p in src){_cb9[p]=src[p];}}else{var _cba=function(_cbb,_cbc,_cbd){for(p in _cbb){p!="has"&&has.add(_cbc+p,_cbb[p],0,_cbd);}};_cb9=1?_cb8.rawConfig:this.dojoConfig||this.djConfig||{};_cba(_cb9,"config",1);_cba(_cb9.has,"",1);}return _cb9;});},"dojo/_base/browser":function(){if(require.has){require.has.add("config-selectorEngine","acme");}define(["../ready","./kernel","./connect","./unload","./window","./event","./html","./NodeList","../query","./xhr","./fx"],function(dojo){return dojo;});},"WebScene/lib/Trackball":function(){define("WebScene/lib/Trackball",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/Util"],function(_cbe,dojo,_cbf){dojo.provide("WebScene.lib.Trackball");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Util");Trackball=function(eye,_cc0,_cc1,_cc2,_cc3){var UP=vec3d.createFrom(0,1,0);var _cc4=4;var _cc5=[vec3d.create(eye),vec3d.create(_cc0)];var _cc6=[vec3d.create(eye),vec3d.create(_cc0)];var _cc7=mat4d.create();var _cc8=[];mat4d.lookAt(_cc5[0],_cc5[1],UP,_cc7);var _cc9=false;var _cca=new Trackball.DEFAULT_INTERPOLATION();this.setWindowSize=function(_ccb){this.windowSize=_ccb;};this.step=function(dt){if(!arraysEqual(_cc5[0],_cc6[0])||!arraysEqual(_cc5[1],_cc6[1])){if(!_ccc()){_cca.interpolate(_cc5,_cc6,dt);}if(!_ccc()){_ccd();}else{this.setCurrentToTarget();}}mat4d.lookAt(_cc5[0],_cc5[1],UP,_cc7);};this.setInterpolation=function(_cce){_cca=_cce;};this.getMatrix=function(){return _cc7;};this.addCameraListener=function(_ccf){assert(_cc8.indexOf(_ccf)===-1);_cc8.push(_ccf);return [_cc4,_cc1];},this.removeCameraListener=function(_cd0){var idx=_cc8.indexOf(_cd0);assert(idx!==-1);_cc8.splice(idx,idx);},this.trackballMapping=function(_cd1,_cd2){_cd2[0]=_cd1[0]/this.windowSize[0];_cd2[1]=_cd1[1]/this.windowSize[1];};var _cd3=vec2d.create();this.tumbleBegin=function(_cd4){if(_cc9){this.setPoiAuto(_cd4);}this.trackballMapping(_cd4,_cd3);};var _cd5=3;var _cd6=vec2d.create();var _cd7=vec3d.create();var _cd8=mat4d.create();var _cd9=vec3d.create();this.tumble=function(_cda){this.trackballMapping(_cda,_cd6);var _cdb=(_cd6[1]-_cd3[1])*_cd5;var _cdc=(_cd6[0]-_cd3[0])*_cd5;vec3d.subtract(_cc6[0],_cc6[1],_cd7);var _cdd=-Math.asin(_cd7[1]/vec3d.length(_cd7));if(Math.abs(_cdd+_cdb)>=Math.PI*0.5){if(_cdd<0){_cdb=Math.max(_cdb,0);}else{_cdb=Math.min(_cdb,0);}}mat4d.identity(_cd8);mat4d.rotateY(_cd8,-_cdc);mat4d.multiplyVec3(_cd8,_cd7);vec3d.cross(_cd7,UP,_cd9);mat4d.rotate(_cd8,-_cdb,_cd9);mat4d.multiplyVec3(_cd8,_cd7);vec3d.add(_cc6[1],_cd7,_cc6[0]);vec3d.set(_cd6,_cd3);_cde();this.setCurrentToTarget();};var _cdf=Math.PI/9;var _ce0=_cdf;var _ce1=vec2d.create();var _ce2=vec4d.create();var tmpP=vec3d.create();var tmpN=vec3d.create();var _ce3=vec3d.create();this.panBegin=function(_ce4){if(!pick(_ce4,true).getMinResult().getIntersectionPoint(tmpP)){vec3d.set(_cc6[1],tmpP);}vec3d.normalize(vec3d.subtract(_cc6[0],_cc6[1],tmpN));if(tmpN[1]<0){vec3d.negate(tmpN);}var _ce5=Math.asin(tmpN[1]);if(_ce5<_cdf){tmpN[1]=0;vec3d.normalize(tmpN);}else{if(_ce5>=_ce0){vec3d.set3(0,1,0,tmpN);}else{tmpN[1]=0;vec3d.normalize(tmpN);vec3d.set3(0,1,0,_ce3);vec3d.lerp(tmpN,_ce3,(_ce5-_cdf)/(_ce0-_cdf));vec3d.normalize(tmpN);}}createPlane(tmpP,tmpN,_ce2);vec2d.set(_ce4,_ce1);};var _ce6=vec3d.create();var _ce7=vec3d.create();var _ce8=vec3d.create();var _ce9=vec3d.create();this.pan=function(_cea){_cc3(_ce1,_ce6,_ce7);vec3d.subtract(_ce7,_ce6);if(!rayPlane(_ce6,_ce7,_ce2,_ce8)){return;}_cc3(_cea,_ce6,_ce7);vec3d.subtract(_ce7,_ce6);if(!rayPlane(_ce6,_ce7,_ce2,_ce9)){return;}vec3d.subtract(_ce9,_ce8);vec3d.subtract(_cc6[0],_ce9);vec3d.subtract(_cc6[1],_ce9);vec2d.set(_cea,_ce1);_cde();this.setCurrentToTarget();};this.panEnd=function(_ceb){this.setPoiAuto(_ceb);};var _cec=vec3d.create();var _ced=vec3d.create();var _cee=vec3d.create();this.setPoiAuto=function(_cef){var _cf0=_cc2(_cc6[0],_cc6[1],_cef,true);if(!_cf0.getMinResult().getIntersectionPoint(_cec)||!_cf0.getMaxResult().getIntersectionPoint(_ced)){return;}var T=5;var _cf1=_cf0.getMinResult().dist-T;var _cf2=_cf0.getMaxResult().dist+T;var _cf3=vec3d.dist(_cc6[0],_cc6[1]);if(_cf3<=_cf1||_cf3>=_cf2){_cf0.getMaxResult().dist=undefined;_cf0.intersectObject(_cf0.getMinResult().name);assert(_cf0.getMaxResult().dist!==undefined);_cf0.getMaxResult().getIntersectionPoint(_ced);vec3d.lerp(_cec,_ced,0.5,_cee);this.setEyeAndCenter(_cc6[0],_cee);this.setCurrentToTarget();}};var _cf4=true;var _cf5=false;var _cf6=0.0015;var _cf7=vec3d.create();var _cf8=vec3d.create();this.zoom=function(_cf9,_cfa){vec3.set(_cc6[1],_cf8);var _cfb=false;if(_cf4&&_cf9>0||_cf5&&_cf9<0){_cfb=pick(_cfa,true).getMinResult().getIntersectionPoint(_cf8);}vec3d.subtract(_cf8,_cc6[0],_cf7);var w=_cf9*_cf6;var _cfc=vec3d.length(_cf7)*(1-w);if(_cf9>=0&&_cfc<_cc4){return;}if(_cf9<0&&_cfc>_cc1){return;}vec3d.scale(_cf7,w);vec3d.add(_cc6[0],_cf7);vec3d.lerp(_cc6[1],_cf8,w);_cde();if(_cfb){_cc9=true;}};this.frame=function(ctr,_cfd){var dir=vec3d.subtract(_cc6[0],_cc6[1]);vec3d.normalize(dir);vec3d.scale(dir,4*_cfd);vec3d.set(ctr,_cc6[1]);vec3d.add(ctr,dir,_cc6[0]);_cde();};this.setEyeAndCenter=function(neye,_cfe){vec3d.set(neye,_cc6[0]);vec3d.set(_cfe,_cc6[1]);_cde();};this.getEyeAndCenter=function(){return _cc6;};this.getCurrentEyeAndCenter=function(){return _cc5;};this.setCurrentToTarget=function(){vec3d.set(_cc6[0],_cc5[0]);vec3d.set(_cc6[1],_cc5[1]);_cff();};function _ccd(){for(var i=0;i<_cc8.length;++i){if(_cc8[i].currentViewChanged!==undefined){_cc8[i].currentViewChanged(_cc5[0],_cc5[1]);}}};function _cff(){_ccd();for(var i=0;i<_cc8.length;++i){if(_cc8[i].currentViewReachedTarget!==undefined){_cc8[i].currentViewReachedTarget(_cc5[0],_cc5[1]);}}};function _cde(){_cc9=false;for(var i=0;i<_cc8.length;++i){if(_cc8[i].targetViewChanged!==undefined){_cc8[i].targetViewChanged(_cc6[0],_cc6[1]);}}};var _d00=undefined;var _d01=vec2d.createFrom(-1,-1);var _d02=vec3d.create();var _d03=vec3d.create();function pick(_d04,all){if(_d00!==undefined&&arraysEqual(_d04,_d01)){return _d00;}_cc3(_d04,_d02,_d03);_d00=_cc2(_d02,_d03,_d04,all);vec2d.set(_d04,_d01);return _d00;};function _ccc(){return vec3d.dist(_cc5[0],_cc6[0])<0.1&&vec3d.dist(_cc5[1],_cc6[1])<0.1;};};Trackball.DEFAULT_INTERPOLATION=function(){this.interpolate=function(_d05,_d06,dt){var w=Math.min(5*dt,0.3);vec3d.lerp(_d05[0],_d06[0],w,_d05[0]);vec3d.lerp(_d05[1],_d06[1],w,_d05[1]);};};Trackball.EASE_IN_OUT_INTERPOLATION=function(_d07,_d08){_d07=_d07||250;_d08=_d08||_d07;var _d09=0;var _d0a=0;this.interpolate=function(_d0b,_d0c,dt){_d09=_d0d(_d0b[0],_d0c[0],dt,_d09);_d0a=_d0d(_d0b[1],_d0c[1],dt,_d0a);};var _d0d=function(_d0e,_d0f,dt,_d10){var dist=vec3d.dist(_d0e,_d0f);if(dist<0.1){vec3d.set(_d0f,_d0e);return 0;}var _d11=Math.min(Math.sqrt(dist*_d08),_d07);_d10=Math.min(_d10+_d08*dt,_d11);var w=Math.min(_d10/dist*dt,1);vec3d.lerp(_d0e,_d0f,w);return _d10;};this.calculateInterpolationTime=function(_d12){var _d13=Math.min(_d12/2,Math.pow(_d07,2)/(2*_d08));var _d14=Math.sqrt(2*_d13/_d08);return 2*_d14+(_d12-2*_d13)/_d07;};};});},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(has,_d15,_d16,_d17){var i,p,_d18={},_d19={},dojo={config:_d15,global:this,dijit:_d18,dojox:_d19};var _d1a={dojo:["dojo",dojo],dijit:["dijit",_d18],dojox:["dojox",_d19]},_d1b=(_d16.map&&_d16.map[_d17.id.match(/[^\/]+/)[0]]),item;for(p in _d1b){if(_d1a[p]){_d1a[p][0]=_d1b[p];}else{_d1a[p]=[_d1b[p],{}];}}for(p in _d1a){item=_d1a[p];item[1]._scopeName=item[0];if(!_d15.noGlobals){this[item[0]]=item[1];}}dojo.scopeMap=_d1a;dojo.baseUrl=dojo.config.baseUrl=_d16.baseUrl;dojo.isAsync=!1||_d16.async;dojo.locale=_d15.locale;var rev="$Rev: 29458 $".match(/\d+/);dojo.version={major:1,minor:8,patch:0,flag:"",revision:rev?+rev[0]:NaN,toString:function(){var v=dojo.version;return v.major+"."+v.minor+"."+v.patch+v.flag+" ("+v.revision+")";}};1||has.add("extend-dojo",1);(Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}"))(dojo);if(0){dojo.exit=function(_d1c){quit(_d1c);};}else{dojo.exit=function(){};}1||has.add("dojo-guarantee-console",1);if(1){typeof console!="undefined"||(console={});var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var tn;i=0;while((tn=cn[i++])){if(!console[tn]){(function(){var tcn=tn+"";console[tcn]=("log" in console)?function(){var a=Array.apply({},arguments);a.unshift(tcn+":");console["log"](a.join(" "));}:function(){};console[tcn]._fake=true;})();}}}has.add("dojo-debug-messages",!!_d15.isDebug);dojo.deprecated=dojo.experimental=function(){};if(has("dojo-debug-messages")){dojo.deprecated=function(_d1d,_d1e,_d1f){var _d20="DEPRECATED: "+_d1d;if(_d1e){_d20+=" "+_d1e;}if(_d1f){_d20+=" -- will be removed in version: "+_d1f;}console.warn(_d20);};dojo.experimental=function(_d21,_d22){var _d23="EXPERIMENTAL: "+_d21+" -- APIs subject to change without notice.";if(_d22){_d23+=" "+_d22;}console.warn(_d23);};}1||has.add("dojo-modulePaths",1);if(1){if(_d15.modulePaths){dojo.deprecated("dojo.modulePaths","use paths configuration");var _d24={};for(p in _d15.modulePaths){_d24[p.replace(/\./g,"/")]=_d15.modulePaths[p];}_d16({paths:_d24});}}1||has.add("dojo-moduleUrl",1);if(1){dojo.moduleUrl=function(_d25,url){dojo.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var _d26=null;if(_d25){_d26=_d16.toUrl(_d25.replace(/\./g,"/")+(url?("/"+url):"")+"/*.*").replace(/\/\*\.\*/,"")+(url?"":"/");}return _d26;};}dojo._hasResource={};return dojo;});},"WebScene/lib/Util":function(){define("WebScene/lib/Util",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix"],function(_d27,dojo,_d28){dojo.provide("WebScene.lib.Util");dojo.require("WebScene.lib.gl-matrix");VertexAttrConstants={POSITION:"position",NORMAL:"normal",UV0:"uv0"};function _d29(_d2a){this.message=_d2a;this.toString=function(){return "AssertException: "+this.message;};};window.assert=function(exp,_d2b){if(!exp){console.log(new Error("dummy").stack);throw new _d29(_d2b);}};window.verify=function(exp,_d2c){if(!exp){console.log("Verify failed: "+_d2c);console.log(new Error("dummy").stack);}};window.texImage2D=function(_d2d,_d2e,gl){gl.bindTexture(gl.TEXTURE_2D,_d2d);if(!isPowerOfTwo(_d2e.width)||!isPowerOfTwo(_d2e.height)){var _d2f=document.createElement("canvas");_d2f.width=nextHighestPowerOfTwo(_d2e.width);_d2f.height=nextHighestPowerOfTwo(_d2e.height);var ctx=_d2f.getContext("2d");ctx.drawImage(_d2e,0,0,_d2e.width,_d2e.height,0,0,_d2f.width,_d2f.height);_d2e=_d2f;}gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,_d2e);gl.generateMipmap(gl.TEXTURE_2D);gl.bindTexture(gl.TEXTURE_2D,null);return _d2d;};window.isPowerOfTwo=function(x){return (x&(x-1))==0;};window.nextHighestPowerOfTwo=function(x){--x;for(var i=1;i<32;i<<=1){x=x|x>>i;}return x+1;};window.lerp=function(_d30,_d31,w){return _d30+(_d31-_d30)*w;};window.fallbackIfUndefined=function(_d32,_d33){return _d32==undefined?_d33:_d32;};window.hex2rgb=function(hex){hex=Math.floor(hex);var r=(hex>>16&255)/255;var g=(hex>>8&255)/255;var b=(hex&255)/255;return [r,g,b];};window.deg2rad=function(deg){return deg/180*Math.PI;};window.rad2deg=function(rad){return rad*180/Math.PI;};window.azimuthElevationAngle2Direction=function(_d34,_d35){var a=1.5*Math.PI-_d34;var e=0.5*Math.PI-_d35;var x=Math.cos(a)*Math.sin(e);var y=Math.cos(e);var z=Math.sin(a)*Math.sin(e);return [x,y,z];};window.fovx2fovy=function(fovx,_d36,_d37){return 2*Math.atan(_d37*Math.tan(fovx*0.5)/_d36);};window.rayPlane=function(p,d,_d38,_d39){var dot=vec3.dot(_d38,d);if(dot==0){return false;}var t=-(vec3.dot(_d38,p)+_d38[3])/dot;vec3.add(p,vec3.scale(d,t,_d39),_d39);return true;};window.createPlane=function(p,n,_d3a){vec4.set4(n[0],n[1],n[2],-vec3.dot(n,p),_d3a);};window.rayTriangle3D=function(o,d,v0,v1,v2,i0,i1,i2,_d3b){var EPS5=0.00001;if(!_d3b){_d3b=vec3.create();}var e1x=v1[i1]-v0[i0];var e1y=v1[i1+1]-v0[i0+1];var e1z=v1[i1+2]-v0[i0+2];var e2x=v2[i2]-v0[i0];var e2y=v2[i2+1]-v0[i0+1];var e2z=v2[i2+2]-v0[i0+2];var px=d[1]*e2z-e2y*d[2];var py=d[2]*e2x-e2z*d[0];var pz=d[0]*e2y-e2x*d[1];var a=e1x*px+e1y*py+e1z*pz;if(a>-EPS5&&a<EPS5){return false;}var f=1/a;var sx=o[0]-v0[i0];var sy=o[1]-v0[i0+1];var sz=o[2]-v0[i0+2];_d3b[1]=f*(sx*px+sy*py+sz*pz);if(_d3b[1]<0||_d3b[1]>1){return false;}var qx=sy*e1z-e1y*sz;var qy=sz*e1x-e1z*sx;var qz=sx*e1y-e1x*sy;_d3b[2]=f*(d[0]*qx+d[1]*qy+d[2]*qz);if(_d3b[2]<0||_d3b[1]+_d3b[2]>1){return false;}_d3b[0]=f*(e2x*qx+e2y*qy+e2z*qz);return true;};window.rayRay2D=function(p1,p2,p3,p4,y,_d3c){if(!_d3c){_d3c=vec2.create();}var _d3d=(p4[y]-p3[y])*(p2[0]-p1[0])-(p4[0]-p3[0])*(p2[y]-p1[y]);var nom1=(p4[0]-p3[0])*(p1[y]-p3[y])-(p4[y]-p3[y])*(p1[0]-p3[0]);if(_d3d==0){return false;}var ua=nom1/_d3d;_d3c[0]=p1[0]+ua*(p2[0]-p1[0]);_d3c[1]=p1[y]+ua*(p2[y]-p1[y]);return true;};var _d3e=mat4d.create();var _d3f=[vec4.createFrom(-1,-1,-1,1),vec4.createFrom(1,-1,-1,1),vec4.createFrom(1,1,-1,1),vec4.createFrom(-1,1,-1,1),vec4.createFrom(-1,-1,1,1),vec4.createFrom(1,-1,1,1),vec4.createFrom(1,1,1,1),vec4.createFrom(-1,1,1,1)];var _d40=vec4d.create();window.matrix2frustum=function(view,proj,_d41){mat4.multiply(proj,view,_d3e);mat4.inverse(_d3e);for(var i=0;i<8;++i){mat4.multiplyVec4(_d3e,_d3f[i],_d40);vec3.set3(_d40[0]/_d40[3],_d40[1]/_d40[3],_d40[2]/_d40[3],_d41[i]);}};var _d42=new Array(8);for(var i=0;i<8;++i){_d42[i]=vec3d.create();}window.matrix2frustumPlanes=function(view,proj,_d43){matrix2frustum(view,proj,_d42);point2plane(_d42[4],_d42[0],_d42[3],_d43[0]);point2plane(_d42[1],_d42[5],_d42[6],_d43[1]);point2plane(_d42[4],_d42[5],_d42[1],_d43[2]);point2plane(_d42[3],_d42[2],_d42[6],_d43[3]);point2plane(_d42[0],_d42[1],_d42[2],_d43[4]);point2plane(_d42[5],_d42[4],_d42[7],_d43[5]);};var _d44=vec3.create();var _d45=vec3.create();window.point2plane=function(p0,p1,p2,_d46){vec3.subtract(p0,p1,_d44);vec3.subtract(p2,p1,_d45);vec3.cross(_d45,_d44,_d46);vec3.normalize(_d46);_d46[3]=-vec3.dot(_d46,p0);};function _d47(_d48,_d49,uvs,i0,i1,i2,dest,_d4a){for(var i=0;i<3;++i){var idx=i===0?i0:i===1?i1:i2;dest[_d4a]=_d48[3*idx];dest[_d4a+1]=_d48[3*idx+1];dest[_d4a+2]=_d48[3*idx+2];dest[_d4a+3]=_d49[3*idx];dest[_d4a+4]=_d49[3*idx+1];dest[_d4a+5]=_d49[3*idx+2];dest[_d4a+6]=uvs[2*idx];dest[_d4a+7]=uvs[2*idx+1];_d4a+=8;}};window.createSphereGeometry=function(_d4b,_d4c,_d4d,_d4e,_d4f,_d50,_d51){_d4b=_d4b||50;_d4e=_d4e!==undefined?_d4e:0;_d4f=_d4f!==undefined?_d4f:Math.PI*2;_d50=_d50!==undefined?_d50:0;_d51=_d51!==undefined?_d51:Math.PI;var _d52=Math.max(3,Math.floor(_d4c)||8);var _d53=Math.max(2,Math.floor(_d4d)||6);var numV=(_d52+1)*(_d53+1);var _d54=new Float32Array(numV*3);var _d55=new Float32Array(numV*3);var uvs=new Float32Array(numV*2);var x,y,_d56=[];var _d57=vec3.create();var cur=0;for(y=0;y<=_d53;y++){var _d58=[];for(x=0;x<=_d52;x++){var u=x/_d52;var v=y/_d53;var xpos=-_d4b*Math.cos(_d4e+u*_d4f)*Math.sin(_d50+v*_d51);var ypos=_d4b*Math.cos(_d50+v*_d51);var zpos=_d4b*Math.sin(_d4e+u*_d4f)*Math.sin(_d50+v*_d51);_d54[3*cur]=xpos;_d54[3*cur+1]=ypos;_d54[3*cur+2]=zpos;vec3.set3(xpos,ypos,zpos,_d57);vec3.normalize(_d57);_d55[3*cur]=_d57[0];_d55[3*cur+1]=_d57[1];_d55[3*cur+2]=_d57[2];uvs[2*cur]=u;uvs[2*cur+1]=v;_d58.push(cur);++cur;}_d56.push(_d58);}var _d59=new Float32Array(_d52*2*(_d53-1)*3*8);cur=0;for(y=0;y<_d53;y++){for(x=0;x<_d52;x++){var v1=_d56[y][x+1];var v2=_d56[y][x];var v3=_d56[y+1][x];var v4=_d56[y+1][x+1];if(Math.abs(_d54[3*v1+1])==_d4b){_d47(_d54,_d55,uvs,v1,v3,v4,_d59,cur);cur+=24;}else{if(Math.abs(_d54[3*v3+1])==_d4b){_d47(_d54,_d55,uvs,v1,v2,v3,_d59,cur);cur+=24;}else{_d47(_d54,_d55,uvs,v1,v2,v3,_d59,cur);_d47(_d54,_d55,uvs,v3,v4,v1,_d59,cur+24);cur+=48;}}}}assert(cur===_d59.length);var _d5a=new Object();_d5a[VertexAttrConstants.POSITION]=0;_d5a[VertexAttrConstants.NORMAL]=3;_d5a[VertexAttrConstants.UV0]=6;return [new InterleavedData(_d59,_d5a,8)];};window.setIfDefined=function(name,src,dst){if(src[name]!=undefined){dst[name]=src[name];}};window.array2object=function(_d5b,_d5c){var _d5d=new Object();if(_d5c!==undefined){for(var i=0,_d5e=_d5b.length;i<_d5e;++i){_d5d[_d5b[i][_d5c]()]=_d5b[i];}}else{for(var i=0,_d5e=_d5b.length;i<_d5e;++i){_d5d[_d5b[i]]=_d5b[i];}}return _d5d;};window.object2array=function(_d5f){var _d60=new Array();for(var name in _d5f){_d60.push(_d5f[name]);}return _d60;};window.mergeObjects=function(_d61,_d62){var _d63=new Object();for(var name in _d61){_d63[name]=_d61[name];}for(var name in _d62){_d63[name]=_d62[name];}return _d63;};window.subtractObjects=function(_d64,_d65){var _d66=new Object();for(var name in _d64){if(_d65[name]==undefined){_d66[name]=_d64[name];}}return _d66;};window.arraysEqual=function(arr0,arr1){if(arr0.length!==arr1.length){return false;}for(var i=0,_d67=arr0.length;i<_d67;++i){if(arr0[i]!==arr1[i]){return false;}}return true;};window.byteBuffer2base64image=function(_d68,_d69,_d6a,type,args){var _d6b=_d69*4;assert(_d68.length===_d6b*_d6a,"buffer length must match image resolution");var _d6c=document.createElement("canvas");_d6c.width=_d69;_d6c.height=_d6a;var ctx=_d6c.getContext("2d");var _d6d=ctx.getImageData(0,0,_d69,_d6a);var data=_d6d.data;for(var i=0;i<_d6a;++i){var dst=i*_d6b;var src=(_d6a-1-i)*_d6b;for(var j=0;j<_d6b;++j){data[dst++]=_d68[src++];}}ctx.putImageData(_d6d,0,0);return _d6c.toDataURL(type,args);};window.glCheckError=function(msg,gl){var _d6e=gl.getError();if(_d6e!=gl.NO_ERROR){alert(msg+": gl error "+_d6e);}};window.glCheckFramebufferStatus=function(_d6f,gl){var _d70=gl.checkFramebufferStatus(_d6f);if(_d70!=gl.FRAMEBUFFER_COMPLETE){console.log("Framebuffer error 0x"+_d70);}};window.handleGLError=function(err,_d71,args){alert(WebGLDebugUtils.glEnumToString(err)+" was caused by call to: "+_d71+"("+WebGLDebugUtils.glFunctionArgsToString(_d71,args)+")");};window.validateNoneOfTheArgsAreUndefined=function(_d72,args){for(var ii=0;ii<args.length;++ii){if(args[ii]===undefined){console.error("undefined passed to gl."+_d72+"("+WebGLDebugUtils.glFunctionArgsToString(_d72,args)+")");}}};window.FPSCounter=function(_d73){var _d74=Date.now();var _d75=0;var _d76=0;this.step=function(time){++_d75;if(time-_d74>1000){_d76=_d75;_d74=time;_d75=0;return _d73(_d76);}};};});},"WebScene/lib/Geometry":function(){define("WebScene/lib/Geometry",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(_d77,dojo,_d78){dojo.provide("WebScene.lib.Geometry");dojo.require("WebScene.lib.Util");var _d79=0;InterleavedData=function(data,_d7a,_d7b){this.data=data;this.attr2offset=_d7a;this.stride=_d7b;this.id=_d79++;this.getCount=function(){return data.length/_d7b;};};createInterleavedData=function(_d7c,_d7d,uvs){assert(_d7c.length%3==0);var size=_d7c.length;var _d7e=new Object();_d7e[VertexAttrConstants.POSITION]=0;var _d7f=3;if(_d7d!==undefined){assert(_d7d.length==_d7c.length);size+=_d7d.length;_d7e[VertexAttrConstants.NORMAL]=_d7f;_d7f+=3;}if(uvs!==undefined){assert(uvs.length/2==_d7c.length/3);size+=uvs.length;_d7e[VertexAttrConstants.UV0]=_d7f;_d7f+=2;}var data=new Float32Array(size);function _d80(src,dst,_d81,_d82,num){if(arr===undefined){return;}var c=0;for(var i=_d81,_d83=src.length;i<_d83;i+=_d82){for(var j=0;j<num;++j){dst[i+j]=_d7d[c++];}}};_d80(_d7c,data,_d7e[VertexAttrConstants.POSITION],_d7f,3);_d80(_d7d,data,_d7e[VertexAttrConstants.NORMAL],_d7f,3);_d80(uvs,data,_d7e[VertexAttrConstants.UV0],_d7f,2);return new InterleavedData(data,_d7e,_d7f);};var _d84=0;Geometry=function(_d85){var _d86=undefined;var _d87=undefined;var _d88=undefined;var _d89=undefined;var id=_d84++;this.getId=function(){return id;};this.getInterleavedData=function(){return _d85;};this.getNumGroups=function(){return _d85.length;};this.getBBMin=function(_d8a){_d8b();return _d86[_d8a];};this.getBBMax=function(_d8c){_d8b();return _d87[_d8c];};this.getCenter=function(_d8d){_d8b();return _d88[_d8d];};this.getBSRadius=function(_d8e){_d8b();return _d89[_d8e];};var _d8b=function(){if(_d86!=undefined){return;}var ida=_d85;assert(ida.length>=1);_d86=new Array(ida.length);_d87=new Array(ida.length);for(var i=0;i<ida.length;++i){if(ida[i].data.length>=3){_d86[i]=vec3.create(ida[i].data);_d87[i]=vec3.create(ida[i].data);for(var j=0,_d8f=ida[i].data.length;j<_d8f;j+=ida[i].stride){for(var k=0;k<3;++k){var _d90=ida[i].data[j+k];_d86[i][k]=Math.min(_d86[i][k],_d90);_d87[i][k]=Math.max(_d87[i][k],_d90);}}}else{verify(false,"empty geometry group, fix exporter!");}}var _d91=undefined;for(var i=0;i<ida.length;++i){if(_d86[i]!==undefined){_d91=_d86[i];break;}}assert(_d91!==undefined);for(var i=0;i<ida.length;++i){if(_d86[i]===undefined){_d86[i]=_d91;_d87[i]=_d91;}}_d88=new Array(ida.length);for(var i=0;i<ida.length;++i){_d88[i]=vec3.create();vec3.lerp(_d86[i],_d87[i],0.5,_d88[i]);}_d89=new Array(ida.length);for(var i=0;i<ida.length;++i){_d89[i]=0;for(var j=0,_d8f=ida[i].data.length;j<_d8f;j+=ida[i].stride){var dx=ida[i].data[j]-_d88[i][0];var dy=ida[i].data[j+1]-_d88[i][1];var dz=ida[i].data[j+2]-_d88[i][2];_d89[i]=Math.max(_d89[i],dx*dx+dy*dy+dz*dz);}_d89[i]=Math.sqrt(_d89[i]);}};};});},"WebScene/lib/bitset":function(){define("WebScene/lib/bitset",["dijit","dojo","dojox"],function(_d92,dojo,_d93){dojo.provide("WebScene.lib.bitset");(function(){BitSet=(function(){function _d94(){this.bitsPerWord=32;this.addressBitsPerWord=5;this.store=[];};_d94.prototype.wordIndex=function(pos){return pos>>this.addressBitsPerWord;};_d94.prototype.set=function(pos){return this.store[this.wordIndex(pos-1)]|=1<<pos-1;};_d94.prototype.clear=function(pos){return this.store[this.wordIndex(pos-1)]&=255^(1<<pos-1);};_d94.prototype.clearAll=function(){for(var i=0;i<this.store.length;++i){this.store[i]=0;}};_d94.prototype.get=function(pos){return (this.store[this.wordIndex(pos-1)]&(1<<pos-1))!==0;};_d94.prototype.length=function(){if(this.wordLength()===0){return 0;}else{return this.bitsPerWord*(this.wordLength()-1)+(this.store[this.wordLength()-1].toString(2).length+1);}};_d94.prototype.wordLength=function(){var _d95,pos,_d96;_d95=this.store.length;for(pos=_d96=this.store.length-1;_d96<=0?pos<=0:pos>=0;_d96<=0?pos++:pos--){if(this.store[pos]!==0){break;}_d95--;}return _d95;};_d94.prototype.store=function(){return this.store;};_d94.prototype.cardinality=function(){var pos,sum,_d97;sum=0;for(pos=0,_d97=this.length();0<=_d97?pos<=_d97:pos>=_d97;0<=_d97?pos++:pos--){if(this.get(pos)){sum++;}}return sum;};_d94.prototype.toString=function(){var pos,_d98,_d99;_d98=[];for(pos=0,_d99=this.length();0<=_d99?pos<=_d99:pos>=_d99;0<=_d99?pos++:pos--){if(this.get(pos)){_d98.push(pos);}}return "{"+(_d98.join(","))+"}";};_d94.prototype.toBinaryString=function(){var lpad;var _d9a=this;lpad=function(str,_d9b,_d9c){while(str.length<_d9c){str=_d9b+str;}return str;};if(this.wordLength()>0){return this.store.map(function(word){return lpad(word.toString(2),"0",_d9a.bitsPerWord);}).join("");}else{return lpad("",0,this.bitsPerWord);}};_d94.prototype.or=function(set){var pos,_d9d,_d9e;if(this===set){return;}_d9d=Math.min(this.wordLength(),set.wordLength());for(pos=0,_d9e=_d9d-1;0<=_d9e?pos<=_d9e:pos>=_d9e;0<=_d9e?pos++:pos--){this.store[pos]|=set.store[pos];}if(_d9d<set.wordLength()){this.store=this.store.concat(set.store.slice(_d9d,set.wordLength()));}return null;};_d94.prototype.and=function(set){var pos,_d9f,_da0,_da1;if(this===set){return;}for(pos=_d9f=this.wordLength,_da0=set.wordLength();_d9f<=_da0?pos<=_da0:pos>=_da0;_d9f<=_da0?pos++:pos--){this.store[pos]=0;}for(pos=0,_da1=this.wordLength();0<=_da1?pos<=_da1:pos>=_da1;0<=_da1?pos++:pos--){this.store[pos]&=set.store[pos];}return null;};_d94.prototype.andNot=function(set){var pos,_da2;for(pos=0,_da2=Math.min(this.wordLength(),set.wordLength)-1;0<=_da2?pos<=_da2:pos>=_da2;0<=_da2?pos++:pos--){this.store[pos]&=~set.store[pos];}return null;};_d94.prototype.xor=function(set){var pos,_da3;if(this===set){return;}for(pos=0,_da3=this.wordLength();0<=_da3?pos<=_da3:pos>=_da3;0<=_da3?pos++:pos--){this.store[pos]^=set.store[pos];}return null;};return _d94;})();}).call(this);});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _da4={};lang.setObject("dojo.regexp",_da4);_da4.escapeString=function(str,_da5){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_da5&&_da5.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_da4.buildGroupRE=function(arr,re,_da6){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _da4.group(b.join("|"),_da6);};_da4.group=function(_da7,_da8){return "("+(_da8?"?:":"")+_da7+")";};return _da4;});},"dojo/main":function(){define(["./_base/kernel","./has","require","./sniff","./_base/lang","./_base/array","./_base/config","./ready","./_base/declare","./_base/connect","./_base/Deferred","./_base/json","./_base/Color","./has!dojo-firebug?./_firebug/firebug","./_base/browser","./_base/loader"],function(_da9,has,_daa,_dab,lang,_dac,_dad,_dae){if(_dad.isDebug){_daa(["./_firebug/firebug"]);}1||has.add("dojo-config-require",1);if(1){var deps=_dad.require;if(deps){deps=_dac.map(lang.isArray(deps)?deps:[deps],function(item){return item.replace(/\./g,"/");});if(_da9.isAsync){_daa(deps);}else{_dae(1,function(){_daa(deps);});}}}return _da9;});},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_daf,_db0,_db1,lang,on,_db2){return _db0("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_db3){var res=[];_daf.forEach(_db3||this.getChildren(),function(_db4){if("value" in _db4){res.push(_db4);}else{res=res.concat(this._getDescendantFormWidgets(_db4.getChildren()));}},this);return res;},reset:function(){_daf.forEach(this._getDescendantFormWidgets(),function(_db5){if(_db5.reset){_db5.reset();}});},validate:function(){var _db6=false;return _daf.every(_daf.map(this._getDescendantFormWidgets(),function(_db7){_db7._hasBeenBlurred=true;var _db8=_db7.disabled||!_db7.validate||_db7.validate();if(!_db8&&!_db6){_db2.scrollIntoView(_db7.containerNode||_db7.domNode);_db7.focus();_db6=true;}return _db8;}),function(item){return item;});},setValues:function(val){_db1.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_daf.forEach(this._getDescendantFormWidgets(),function(_db9){if(!_db9.name){return;}var _dba=map[_db9.name]||(map[_db9.name]=[]);_dba.push(_db9);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _dbb=map[name],_dbc=lang.getObject(name,false,obj);if(_dbc===undefined){continue;}if(!lang.isArray(_dbc)){_dbc=[_dbc];}if(typeof _dbb[0].checked=="boolean"){_daf.forEach(_dbb,function(w){w.set("value",_daf.indexOf(_dbc,w.value)!=-1);});}else{if(_dbb[0].multiple){_dbb[0].set("value",_dbc);}else{_daf.forEach(_dbb,function(w,i){w.set("value",_dbc[i]);});}}}},getValues:function(){_db1.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_daf.forEach(this._getDescendantFormWidgets(),function(_dbd){var name=_dbd.name;if(!name||_dbd.disabled){return;}var _dbe=_dbd.get("value");if(typeof _dbd.checked=="boolean"){if(/Radio/.test(_dbd.declaredClass)){if(_dbe!==false){lang.setObject(name,_dbe,obj);}else{_dbe=lang.getObject(name,false,obj);if(_dbe===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_dbe!==false){ary.push(_dbe);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_dbe);}else{lang.setObject(name,[prev,_dbe],obj);}}else{lang.setObject(name,_dbe,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _dbf=_daf.map(this._descendants,function(w){return w.get("state")||"";});return _daf.indexOf(_dbf,"Error")>=0?"Error":_daf.indexOf(_dbf,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){},connectChildren:function(_dc0){this._descendants=this._getDescendantFormWidgets();_daf.forEach(this._descendants,function(_dc1){if(!_dc1._started){_dc1.startup();}});if(!_dc0){this._onChildChange();}},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled"){this._set("state",this._getState());}if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer){this._onChangeDelayTimer.remove();}this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"));},10);}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){if(evt.target==self.domNode){return;}self._onChildChange(evt.type.replace("attrmodified-",""));}));this.watch("state",function(attr,_dc2,_dc3){this.onValidStateChange(_dc3=="");});},destroy:function(){this.inherited(arguments);}});});},"WebScene/app/AgolUtils":function(){define("WebScene/app/AgolUtils",["dijit","dojo","dojox","dojo/require!esri/main,esri/arcgis/Portal"],function(_dc4,dojo,_dc5){dojo.provide("WebScene.app.AgolUtils");dojo.require("esri.main");dojo.require("esri.arcgis.Portal");AgolUtils=function(){};AgolUtils.Store=function(_dc6,item){var that=this;this.item=item;this.itemId=item.id;this.cred=esri.id.credentials[0];this.itemUrl=AgolUtils.URLs().contentitem+this.itemId;this.userItem;this.folderId;this.getUserItem=function(){this.portal.queryItems({q:"id:"+this.itemId}).then(function(r){if(r.results.length===0){console.error("could not get user item: "+fail);return;}that.userItem=r.results[0];},function(fail){console.error("could not get user item: "+fail);});};this.getItemFolder=function(_dc7){if(!this.canModify()){return;}var _dc8=AgolUtils.URLs().sharing+"content/users/"+this.item.owner;function _dc9(_dca,_dcb){for(var i=0;i<_dca.length;i++){if(_dca[i].id===_dc7){that.folderId=_dcb;return true;}}return false;};esri.request({url:_dc8,content:{f:"json"}}).then(function(r){if(_dc9(r.items,-1)){return;}for(var f=0;f<r.folders.length;f++){if(that.folderId!==undefined){return;}var _dcc=_dc8+"/"+r.folders[f].id;esri.request({url:_dcc,content:{f:"json"}}).then(function(r2){_dc9(r2.items,r2.currentFolder.id);});}});};function _dcd(_dce){if(dojo.cookie.isSupported){var exp=_dce.credential.expires;var _dcf={email:_dce.username,privacy:_dce.access,token:_dce.credential.token,ssl:_dce.credential.ssl,culture:_dce.culture||_dce.portal.culture,region:_dce.region||_dce.portal.region,expires:exp};if(_dce.orgId&&_dce.role){_dcf.accountId=_dce.orgId;_dcf.role=_dce.role.replace("org_","account_");}dojo.cookie("esri_auth",dojo.toJson(_dcf),{expires:new Date(exp).toUTCString(),path:"/",domain:document.domain});}};this.userIsOwner=function(){if(!this.portal.user){return false;}return this.item.owner&&this.item.owner==this.portal.user.username;};this.canModify=function(){if(!this.portal.user){return false;}var _dd0=this.portal.user.role&&UIUtils.endsWith(this.portal.user.role,"admin");return (this.userIsOwner()||_dd0);};this.itemIsPublic=function(){return this.item.access=="public";};this.refreshItem=function(){var dfd=AgolUtils.loadItem(this.itemId);dfd.then(function(r){that.item=r;_dc6.getAgoItem().item=r;});return dfd;};this.signIn=function(){var _dd1=esri.id._doPortalSignIn;esri.id._doPortalSignIn=function(){return false;};function _dd2(){that.portal.signIn().then(function(r){dojo.publish("/portal/signedin",[{cred:r}]);that.cred=r.credential;esri.id._doPortalSignIn=_dd1;that.getUserItem();that.getItemFolder(that.itemId);if(!esri.id._hasPortalSession()&&!_dc6.getConfiguration().load.cookienowrite){_dcd(r);}if(r.orgId&&r.portal.portalMode=="multitenant"){var prot=(location.protocol=="https:"||r.portal.allSSL)?"https://":"http://";var _dd3=r.portal.urlKey||"";var _dd4=_dd3+"."+r.portal.customBaseUrl;if((location.protocol+"//"+location.host).toLowerCase()==(prot+_dd4).toLowerCase()){return;}var _dd5=prot+_dd4+location.pathname+location.search;var _dd6=r.credential.expires||dojo.fromJson(dojo.cookie("esri_auth")).expires;var _dd7=AgolUtils.URLs().portal+"/sharing/tools/bridge?url="+encodeURIComponent(_dd5)+"&exp="+Math.ceil((new Date(_dd6)-new Date())/1000);location.href=_dd7;}},function(_dd8){console.error("unexpected case: portal sign in failed, although auth credentials are there");});};if(!this.portal){this.portal=new esri.arcgis.Portal(AgolUtils.URLs().portal);dojo.connect(this.portal,"onLoad",function(_dd9){_dd2();});}else{_dd2();}};this.signOut=function(_dda){this.portal.signOut().then(function(){that.cred=undefined;dojo.publish("/portal/signedout",[]);AgolUtils.deleteCookie();if(_dda){_dda();}});};if(esri.config.defaults.io.corsEnabledServers.indexOf(AgolUtils.URLs().host)==-1){esri.config.defaults.io.corsEnabledServers.push(AgolUtils.URLs().host);}this.cred=esri.id.findCredential(this.itemUrl);if(this.cred){that.signIn();}else{if(!_dc6.getConfiguration().load.cookienoread&&esri.id._hasPortalSession()){esri.id.getCredential(AgolUtils.URLs().sharing).then(function(r){that.cred=r;that.signIn();});}else{this.portal=new esri.arcgis.Portal(AgolUtils.URLs().portal);}}esri.setRequestPreCallback(function(args){var _ddb=/\/sharing\/generateToken/ig;if(_ddb.test(args.url)){var _ddc=document.domain;var _ddd=_ddc.split(".");if(_ddd.length>1){_ddc=_ddd[_ddd.length-2]+"."+_ddd[_ddd.length-1];}args.content.referer=_ddc;}return args;});};AgolUtils.deleteCookie=function(){if(dojo.cookie.isSupported){dojo.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});}};AgolUtils.URLs=function(){var qs=dojo.queryToObject(dojo.doc.location.search.substr((dojo.doc.location.search[0]==="?"?1:0)));var base=location.host+"/";if(qs["portal"]!==undefined&&qs["portal"]!==""){base=qs["portal"]+"/";}var urls={sharing:location.protocol+"//"+base+"sharing/rest/",homeitem:location.protocol+"//"+base+"home/item.html",contentitem:location.protocol+"//"+base+"sharing/rest/content/items/",comments:location.protocol+"//"+base+"sharing/rest/content/items/"+""+"/comments?f=json",portal:location.protocol+"//"+base,generate:"https://"+base+"/sharing/rest/generateToken",host:base};return urls;};AgolUtils.getDataUrl=function(itm){var _dde=AgolUtils.URLs().contentitem+itm.id+"/";var _ddf=_dde+"data";var _de0=esri.id.findCredential(_dde);var tkn;if(_de0){tkn=_de0.token;_ddf=_ddf+"?token="+tkn;}return {url:_ddf,cred:_de0};};AgolUtils.loadItem=function(_de1){function _de2(){var _de3=AgolUtils.URLs().sharing+"content/items/"+_de1+"/";return esri.request({url:_de3,content:{"f":"json"},handleAs:"json"});};return _de2();};AgolUtils.addComment=function(_de4,text,_de5,_de6){if(!_de4.getAgoItem().store.userItem){_de6;console.error("no userItem");}_de4.getAgoItem().store.userItem.addComment(text).then(_de5,_de6);};AgolUtils.getComments=function(_de7,_de8){var _de9=AgolUtils.URLs().contentitem+_de8+"/comments/";var _dea={"f":"json"};if(_de7.getAgoItem().store.cred){_dea["token"]=_de7.getAgoItem().store.cred.token;}function _deb(r){return (r);};return esri.request({url:_de9,content:_dea,handleAs:"json",load:_deb});};AgolUtils.setRating=function(_dec,_ded){var _dee=_dec.getAgoItem().store;var _def=_dee.itemUrl+"/addRating";var _df0={"f":"json",rating:_ded};if(_dee.cred){_df0["token"]=_dee.cred.token;}return esri.request({url:_def,content:_df0,handleAs:"json",},{usePost:true});};AgolUtils.getRating=function(_df1){var item=_df1.getAgoItem().store.item;return {avg:item.avgRating,num:item.numRatings,views:item.numViews,comments:item.numComments};};AgolUtils.uploadThumbnail=function(_df2,_df3,_df4,_df5){var blob=UIUtils.dataURItoBlob(_df3);var _df6=blob.type.split("/")[1]||"png";var _df7="thumbnail."+_df6;var _df8=new FormData();_df8.append("thumbnail",UIUtils.dataURItoBlob(_df3),_df7);var _df9=_df2.getAgoItem().store;var _dfa=_df9.folderId!==-1?"/"+_df9.folderId:"";var url=AgolUtils.URLs().sharing+"content/users/"+_df9.item.owner+"/"+_dfa+"/items/"+_df9.itemId;url+="/update?f=json";if(_df9.cred){url+="&token="+_df9.cred.token;}function _dfb(_dfc,io){_df2.getAgoItem().store.refreshItem();_df4(_dfc,io);};esri.request({url:url,form:_df8,handleAs:"text",load:_dfb,error:_df5});};AgolUtils.getAuth=function(_dfd){return _dfd.getAgoItem().store.cred;};});},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(_dfe,dojo,has){"use strict";if(1){var _dff=window.ScriptEngineMajorVersion;has.add("jscript",_dff&&(_dff()+ScriptEngineMinorVersion()/10));has.add("event-orientationchange",has("touch")&&!has("android"));has.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);}var on=function(_e00,type,_e01,_e02){if(_e00.on&&typeof type!="function"){return _e00.on(type,_e01);}return on.parse(_e00,type,_e01,_e03,_e02,this);};on.pausable=function(_e04,type,_e05,_e06){var _e07;var _e08=on(_e04,type,function(){if(!_e07){return _e05.apply(this,arguments);}},_e06);_e08.pause=function(){_e07=true;};_e08.resume=function(){_e07=false;};return _e08;};on.once=function(_e09,type,_e0a,_e0b){var _e0c=on(_e09,type,function(){_e0c.remove();return _e0a.apply(this,arguments);});return _e0c;};on.parse=function(_e0d,type,_e0e,_e0f,_e10,_e11){if(type.call){return type.call(_e11,_e0d,_e0e);}if(type.indexOf(",")>-1){var _e12=type.split(/\s*,\s*/);var _e13=[];var i=0;var _e14;while(_e14=_e12[i++]){_e13.push(_e0f(_e0d,_e14,_e0e,_e10,_e11));}_e13.remove=function(){for(var i=0;i<_e13.length;i++){_e13[i].remove();}};return _e13;}return _e0f(_e0d,type,_e0e,_e10,_e11);};var _e15=/^touch/;function _e03(_e16,type,_e17,_e18,_e19){var _e1a=type.match(/(.*):(.*)/);if(_e1a){type=_e1a[2];_e1a=_e1a[1];return on.selector(_e1a,type).call(_e19,_e16,_e17);}if(has("touch")){if(_e15.test(type)){_e17=_e1b(_e17);}if(!has("event-orientationchange")&&(type=="orientationchange")){type="resize";_e16=window;_e17=_e1b(_e17);}}if(_e1c){_e17=_e1c(_e17);}if(_e16.addEventListener){var _e1d=type in _e1e,_e1f=_e1d?_e1e[type]:type;_e16.addEventListener(_e1f,_e17,_e1d);return {remove:function(){_e16.removeEventListener(_e1f,_e17,_e1d);}};}type="on"+type;if(_e20&&_e16.attachEvent){return _e20(_e16,type,_e17);}throw new Error("Target must be an event emitter");};on.selector=function(_e21,_e22,_e23){return function(_e24,_e25){var _e26=typeof _e21=="function"?{matches:_e21}:this,_e27=_e22.bubble;function _e28(_e29){_e26=_e26&&_e26.matches?_e26:dojo.query;while(!_e26.matches(_e29,_e21,_e24)){if(_e29==_e24||_e23===false||!(_e29=_e29.parentNode)||_e29.nodeType!=1){return;}}return _e29;};if(_e27){return on(_e24,_e27(_e28),_e25);}return on(_e24,_e22,function(_e2a){var _e2b=_e28(_e2a.target);return _e2b&&_e25.call(_e2b,_e2a);});};};function _e2c(){this.cancelable=false;};function _e2d(){this.bubbles=false;};var _e2e=[].slice,_e2f=on.emit=function(_e30,type,_e31){var args=_e2e.call(arguments,2);var _e32="on"+type;if("parentNode" in _e30){var _e33=args[0]={};for(var i in _e31){_e33[i]=_e31[i];}_e33.preventDefault=_e2c;_e33.stopPropagation=_e2d;_e33.target=_e30;_e33.type=type;_e31=_e33;}do{_e30[_e32]&&_e30[_e32].apply(_e30,args);}while(_e31&&_e31.bubbles&&(_e30=_e30.parentNode));return _e31&&_e31.cancelable&&_e31;};var _e1e={};if(!has("event-stopimmediatepropagation")){var _e34=function(){this.immediatelyStopped=true;this.modified=true;};var _e1c=function(_e35){return function(_e36){if(!_e36.immediatelyStopped){_e36.stopImmediatePropagation=_e34;return _e35.apply(this,arguments);}};};}if(has("dom-addeventlistener")){_e1e={focusin:"focus",focusout:"blur"};if(has("opera")){_e1e.keydown="keypress";}on.emit=function(_e37,type,_e38){if(_e37.dispatchEvent&&document.createEvent){var _e39=_e37.ownerDocument.createEvent("HTMLEvents");_e39.initEvent(type,!!_e38.bubbles,!!_e38.cancelable);for(var i in _e38){var _e3a=_e38[i];if(!(i in _e39)){_e39[i]=_e38[i];}}return _e37.dispatchEvent(_e39)&&_e39;}return _e2f.apply(on,arguments);};}else{on._fixEvent=function(evt,_e3b){if(!evt){var w=_e3b&&(_e3b.ownerDocument||_e3b.document||_e3b).parentWindow||window;evt=w.event;}if(!evt){return evt;}if(_e3c&&evt.type==_e3c.type){evt=_e3c;}if(!evt.target){evt.target=evt.srcElement;evt.currentTarget=(_e3b||evt.srcElement);if(evt.type=="mouseover"){evt.relatedTarget=evt.fromElement;}if(evt.type=="mouseout"){evt.relatedTarget=evt.toElement;}if(!evt.stopPropagation){evt.stopPropagation=_e3d;evt.preventDefault=_e3e;}switch(evt.type){case "keypress":var c=("charCode" in evt?evt.charCode:evt.keyCode);if(c==10){c=0;evt.keyCode=13;}else{if(c==13||c==27){c=0;}else{if(c==3){c=99;}}}evt.charCode=c;_e3f(evt);break;}}return evt;};var _e3c,_e40=function(_e41){this.handle=_e41;};_e40.prototype.remove=function(){delete _dojoIEListeners_[this.handle];};var _e42=function(_e43){return function(evt){evt=on._fixEvent(evt,this);var _e44=_e43.call(this,evt);if(evt.modified){if(!_e3c){setTimeout(function(){_e3c=null;});}_e3c=evt;}return _e44;};};var _e20=function(_e45,type,_e46){_e46=_e42(_e46);if(((_e45.ownerDocument?_e45.ownerDocument.parentWindow:_e45.parentWindow||_e45.window||window)!=top||has("jscript")<5.8)&&!has("config-_allow_leaks")){if(typeof _dojoIEListeners_=="undefined"){_dojoIEListeners_=[];}var _e47=_e45[type];if(!_e47||!_e47.listeners){var _e48=_e47;_e47=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");_e47.listeners=[];_e45[type]=_e47;_e47.global=this;if(_e48){_e47.listeners.push(_dojoIEListeners_.push(_e48)-1);}}var _e49;_e47.listeners.push(_e49=(_e47.global._dojoIEListeners_.push(_e46)-1));return new _e40(_e49);}return _dfe.after(_e45,type,_e46,true);};var _e3f=function(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode;};var _e3d=function(){this.cancelBubble=true;};var _e3e=on._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey){try{this.keyCode=0;}catch(e){}}this.defaultPrevented=true;this.returnValue=false;};}if(has("touch")){var _e4a=function(){};var _e4b=window.orientation;var _e1b=function(_e4c){return function(_e4d){var _e4e=_e4d.corrected;if(!_e4e){var type=_e4d.type;try{delete _e4d.type;}catch(e){}if(_e4d.type){_e4a.prototype=_e4d;var _e4e=new _e4a;_e4e.preventDefault=function(){_e4d.preventDefault();};_e4e.stopPropagation=function(){_e4d.stopPropagation();};}else{_e4e=_e4d;_e4e.type=type;}_e4d.corrected=_e4e;if(type=="resize"){if(_e4b==window.orientation){return null;}_e4b=window.orientation;_e4e.type="orientationchange";return _e4c.call(this,_e4e);}if(!("rotation" in _e4e)){_e4e.rotation=0;_e4e.scale=1;}var _e4f=_e4e.changedTouches[0];for(var i in _e4f){delete _e4e[i];_e4e[i]=_e4f[i];}}return _e4c.call(this,_e4e);};};}return on;});},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/_base/xhr","dojo/i18n","dojo/when"],function(_e50,lang,_e51,_e52,_e53,_e54,html,_e55,_e56,_e57,_e58,dom,_e59,xhr,i18n,when){return _e57("dijit.layout.ContentPane",[_e51,_e52,_e53],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_e50._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,create:function(_e5a,_e5b){if((!_e5a||!_e5a.template)&&_e5b&&!("href" in _e5a)&&!("content" in _e5a)){_e5b=dom.byId(_e5b);var df=_e5b.ownerDocument.createDocumentFragment();while(_e5b.firstChild){df.appendChild(_e5b.firstChild);}_e5a=lang.delegate(_e5a,{content:df});}this.inherited(arguments,[_e5a,_e5b]);},postMixInProperties:function(){this.inherited(arguments);var _e5c=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_e54.substitute(this.loadingMessage,_e5c);this.errorMessage=_e54.substitute(this.errorMessage,_e5c);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!_e59.get(this.domNode,"role")){this.domNode.setAttribute("role","group");}},startup:function(){this.inherited(arguments);if(this._contentSetter){_e56.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},_startChildren:function(){_e56.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});if(this._contentSetter){_e56.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){_e50.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new _e58(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){_e50.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new _e58(lang.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.then(lang.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},destroy:function(){this.cancel();this.inherited(arguments);},destroyRecursive:function(_e5d){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new _e58(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _e5e={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs)){lang.mixin(_e5e,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_e5e)),_e5f;hand.then(function(html){_e5f=html;try{self._isDownloaded=true;return self._setContent(html,false);}catch(err){self._onError("Content",err);}},function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return _e5f;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(_e60){if(this.isLoaded){this._onUnloadHandler();}var _e61=this._contentSetter;_e56.forEach(this.getChildren(),function(_e62){if(_e62.destroyRecursive){_e62.destroyRecursive(_e60);}else{if(_e62.destroy){_e62.destroy(_e60);}}_e62._destroyed=true;});if(_e61){_e56.forEach(_e61.parseResults,function(_e63){if(!_e63._destroyed){if(_e63.destroyRecursive){_e63.destroyRecursive(_e60);}else{if(_e63.destroy){_e63.destroy(_e60);}}_e63._destroyed=true;}});delete _e61.parseResults;}if(!_e60){html._emptyNode(this.containerNode);}delete this._singleChild;},_setContent:function(cont,_e64){this.destroyDescendants();var _e65=this._contentSetter;if(!(_e65&&_e65 instanceof html._ContentSetter)){_e65=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var _e66=this.onContentError(e);try{this.containerNode.innerHTML=_e66;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _e67=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=_e65.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_e67);var self=this;return when(p&&p.then?p:_e65.parseDeferred,function(){delete self._contentSetterParams;if(!_e64){if(self._started){self._startChildren();self._scheduleLayout();}self._onLoadHandler(cont);}});},_onError:function(type,err,_e68){this.onLoadDeferred.reject(err);var _e69=this["on"+type+"Error"].call(this,err);if(_e68){console.error(_e68,err);}else{if(_e69){this._setContent(_e69,true);}}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(){},onDownloadError:function(){return this.errorMessage;},onDownloadEnd:function(){}});});},"dojo/_base/fx":function(){define(["./kernel","./config","./lang","../Evented","./Color","./connect","./sniff","../dom","../dom-style"],function(dojo,_e6a,lang,_e6b,_e6c,_e6d,has,dom,_e6e){var _e6f=lang.mixin;var _e70={};var _e71=_e70._Line=function(_e72,end){this.start=_e72;this.end=end;};_e71.prototype.getValue=function(n){return ((this.end-this.start)*n)+this.start;};var _e73=_e70.Animation=function(args){_e6f(this,args);if(lang.isArray(this.curve)){this.curve=new _e71(this.curve[0],this.curve[1]);}};_e73.prototype=new _e6b();lang.extend(_e73,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _e74=this._percent,_e75=this.easing;return _e75?_e75(_e74):_e74;},_fire:function(evt,args){var a=args||[];if(this[evt]){if(_e6a.debugAtAllCosts){this[evt].apply(this,a);}else{try{this[evt].apply(this,a);}catch(e){console.error("exception in animation handler for:",evt);console.error(e);}}}return this;},play:function(_e76,_e77){var _e78=this;if(_e78._delayTimer){_e78._clearTimer();}if(_e77){_e78._stopTimer();_e78._active=_e78._paused=false;_e78._percent=0;}else{if(_e78._active&&!_e78._paused){return _e78;}}_e78._fire("beforeBegin",[_e78.node]);var de=_e76||_e78.delay,_e79=lang.hitch(_e78,"_play",_e77);if(de>0){_e78._delayTimer=setTimeout(_e79,de);return _e78;}_e79();return _e78;},_play:function(_e7a){var _e7b=this;if(_e7b._delayTimer){_e7b._clearTimer();}_e7b._startTime=new Date().valueOf();if(_e7b._paused){_e7b._startTime-=_e7b.duration*_e7b._percent;}_e7b._active=true;_e7b._paused=false;var _e7c=_e7b.curve.getValue(_e7b._getStep());if(!_e7b._percent){if(!_e7b._startRepeatCount){_e7b._startRepeatCount=_e7b.repeat;}_e7b._fire("onBegin",[_e7c]);}_e7b._fire("onPlay",[_e7c]);_e7b._cycle();return _e7b;},pause:function(){var _e7d=this;if(_e7d._delayTimer){_e7d._clearTimer();}_e7d._stopTimer();if(!_e7d._active){return _e7d;}_e7d._paused=true;_e7d._fire("onPause",[_e7d.curve.getValue(_e7d._getStep())]);return _e7d;},gotoPercent:function(_e7e,_e7f){var _e80=this;_e80._stopTimer();_e80._active=_e80._paused=true;_e80._percent=_e7e;if(_e7f){_e80.play();}return _e80;},stop:function(_e81){var _e82=this;if(_e82._delayTimer){_e82._clearTimer();}if(!_e82._timer){return _e82;}_e82._stopTimer();if(_e81){_e82._percent=1;}_e82._fire("onStop",[_e82.curve.getValue(_e82._getStep())]);_e82._active=_e82._paused=false;return _e82;},status:function(){if(this._active){return this._paused?"paused":"playing";}return "stopped";},_cycle:function(){var _e83=this;if(_e83._active){var curr=new Date().valueOf();var step=_e83.duration===0?1:(curr-_e83._startTime)/(_e83.duration);if(step>=1){step=1;}_e83._percent=step;if(_e83.easing){step=_e83.easing(step);}_e83._fire("onAnimate",[_e83.curve.getValue(step)]);if(_e83._percent<1){_e83._startTimer();}else{_e83._active=false;if(_e83.repeat>0){_e83.repeat--;_e83.play(null,true);}else{if(_e83.repeat==-1){_e83.play(null,true);}else{if(_e83._startRepeatCount){_e83.repeat=_e83._startRepeatCount;_e83._startRepeatCount=0;}}}_e83._percent=0;_e83._fire("onEnd",[_e83.node]);!_e83.repeat&&_e83._stopTimer();}}return _e83;},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer;}});var ctr=0,_e84=null,_e85={run:function(){}};lang.extend(_e73,{_startTimer:function(){if(!this._timer){this._timer=_e6d.connect(_e85,"run",this,"_cycle");ctr++;}if(!_e84){_e84=setInterval(lang.hitch(_e85,"run"),this.rate);}},_stopTimer:function(){if(this._timer){_e6d.disconnect(this._timer);this._timer=null;ctr--;}if(ctr<=0){clearInterval(_e84);_e84=null;ctr=0;}}});var _e86=has("ie")?function(node){var ns=node.style;if(!ns.width.length&&_e6e.get(node,"width")=="auto"){ns.width="auto";}}:function(){};_e70._fade=function(args){args.node=dom.byId(args.node);var _e87=_e6f({properties:{}},args),_e88=(_e87.properties.opacity={});_e88.start=!("start" in _e87)?function(){return +_e6e.get(_e87.node,"opacity")||0;}:_e87.start;_e88.end=_e87.end;var anim=_e70.animateProperty(_e87);_e6d.connect(anim,"beforeBegin",lang.partial(_e86,_e87.node));return anim;};_e70.fadeIn=function(args){return _e70._fade(_e6f({end:1},args));};_e70.fadeOut=function(args){return _e70._fade(_e6f({end:0},args));};_e70._defaultEasing=function(n){return 0.5+((Math.sin((n+1.5)*Math.PI))/2);};var _e89=function(_e8a){this._properties=_e8a;for(var p in _e8a){var prop=_e8a[p];if(prop.start instanceof _e6c){prop.tempColor=new _e6c();}}};_e89.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],_e8b=prop.start;if(_e8b instanceof _e6c){ret[p]=_e6c.blendColors(_e8b,prop.end,r,prop.tempColor).toCss();}else{if(!lang.isArray(_e8b)){ret[p]=((prop.end-_e8b)*r)+_e8b+(p!="opacity"?prop.units||"px":0);}}}return ret;};_e70.animateProperty=function(args){var n=args.node=dom.byId(args.node);if(!args.easing){args.easing=dojo._defaultEasing;}var anim=new _e73(args);_e6d.connect(anim,"beforeBegin",anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height"){this.node.display="block";}var prop=this.properties[p];if(lang.isFunction(prop)){prop=prop(n);}prop=pm[p]=_e6f({},(lang.isObject(prop)?prop:{end:prop}));if(lang.isFunction(prop.start)){prop.start=prop.start(n);}if(lang.isFunction(prop.end)){prop.end=prop.end(n);}var _e8c=(p.toLowerCase().indexOf("color")>=0);function _e8d(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined){return v;}v=_e6e.get(node,p);return (p=="opacity")?+v:(_e8c?v:parseFloat(v));};if(!("end" in prop)){prop.end=_e8d(n,p);}else{if(!("start" in prop)){prop.start=_e8d(n,p);}}if(_e8c){prop.start=new _e6c(prop.start);prop.end=new _e6c(prop.end);}else{prop.start=(p=="opacity")?+prop.start:parseFloat(prop.start);}}this.curve=new _e89(pm);});_e6d.connect(anim,"onAnimate",lang.hitch(_e6e,"set",anim.node));return anim;};_e70.anim=function(node,_e8e,_e8f,_e90,_e91,_e92){return _e70.animateProperty({node:node,duration:_e8f||_e73.prototype.duration,properties:_e8e,easing:_e90,onEnd:_e91}).play(_e92||0);};if(1){_e6f(dojo,_e70);dojo._Animation=_e73;}return _e70;});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/layout/utils":function(){define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","../main"],function(_e93,_e94,_e95,_e96,lang,_e97){var _e98=lang.getObject("layout",true,_e97);_e98.marginBox2contentBox=function(node,mb){var cs=_e96.getComputedStyle(node);var me=_e95.getMarginExtents(node,cs);var pb=_e95.getPadBorderExtents(node,cs);return {l:_e96.toPixelValue(node,cs.paddingLeft),t:_e96.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};function _e99(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_e9a,dim){var _e9b=_e9a.resize?_e9a.resize(dim):_e95.setMarginBox(_e9a.domNode,dim);if(_e9b){lang.mixin(_e9a,_e9b);}else{lang.mixin(_e9a,_e95.getMarginBox(_e9a.domNode));lang.mixin(_e9a,dim);}};_e98.layoutChildren=function(_e9c,dim,_e9d,_e9e,_e9f){dim=lang.mixin({},dim);_e94.add(_e9c,"dijitLayoutContainer");_e9d=_e93.filter(_e9d,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(_e93.filter(_e9d,function(item){return item.region=="center"||item.layoutAlign=="client";}));_e93.forEach(_e9d,function(_ea0){var elm=_ea0.domNode,pos=(_ea0.region||_ea0.layoutAlign);if(!pos){throw new Error("No region setting for "+_ea0.id);}var _ea1=elm.style;_ea1.left=dim.l+"px";_ea1.top=dim.t+"px";_ea1.position="absolute";_e94.add(elm,"dijitAlign"+_e99(pos));var _ea2={};if(_e9e&&_e9e==_ea0.id){_ea2[_ea0.region=="top"||_ea0.region=="bottom"?"h":"w"]=_e9f;}if(pos=="top"||pos=="bottom"){_ea2.w=dim.w;size(_ea0,_ea2);dim.h-=_ea0.h;if(pos=="top"){dim.t+=_ea0.h;}else{_ea1.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_ea2.h=dim.h;size(_ea0,_ea2);dim.w-=_ea0.w;if(pos=="left"){dim.l+=_ea0.w;}else{_ea1.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_ea0,dim);}}}});};return {marginBox2contentBox:_e98.marginBox2contentBox,layoutChildren:_e98.layoutChildren};});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","WebScene/lib/Base64":function(){define("WebScene/lib/Base64",["dijit","dojo","dojox"],function(_ea3,dojo,_ea4){dojo.provide("WebScene.lib.Base64");Base64Binary={_char2idx:{"A":0,"B":1,"C":2,"D":3,"E":4,"F":5,"G":6,"H":7,"I":8,"J":9,"K":10,"L":11,"M":12,"N":13,"O":14,"P":15,"Q":16,"R":17,"S":18,"T":19,"U":20,"V":21,"W":22,"X":23,"Y":24,"Z":25,"a":26,"b":27,"c":28,"d":29,"e":30,"f":31,"g":32,"h":33,"i":34,"j":35,"k":36,"l":37,"m":38,"n":39,"o":40,"p":41,"q":42,"r":43,"s":44,"t":45,"u":46,"v":47,"w":48,"x":49,"y":50,"z":51,"0":52,"1":53,"2":54,"3":55,"4":56,"5":57,"6":58,"7":59,"8":60,"9":61,"+":62,"/":63,"=":64},decode:function(_ea5){var _ea6=this._char2idx[_ea5.charAt(_ea5.length-1)];var _ea7=this._char2idx[_ea5.charAt(_ea5.length-2)];var _ea8=(_ea5.length/4)*3;if(_ea6==64){_ea8--;}if(_ea7==64){_ea8--;}var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;var j=0;var ab=new ArrayBuffer(_ea8);var _ea9=new Uint8Array(ab);_ea5=_ea5.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(i=0;i<_ea8;i+=3){enc1=this._char2idx[_ea5.charAt(j++)];enc2=this._char2idx[_ea5.charAt(j++)];enc3=this._char2idx[_ea5.charAt(j++)];enc4=this._char2idx[_ea5.charAt(j++)];chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;_ea9[i]=chr1;if(enc3!=64){_ea9[i+1]=chr2;}if(enc4!=64){_ea9[i+2]=chr3;}}return ab;},decodeFloat32:function(_eaa){return new Float32Array(this.decode(_eaa));},decodeUint32:function(_eab){return new Uint32Array(this.decode(_eab));},decodeInt32:function(_eac){return new Int32Array(this.decode(_eac));}};});},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(lang,_ead,_eae){"use strict";var _eaf=new _eae;var emit=_eaf.emit;_eaf.emit=null;function _eb0(args){setTimeout(function(){emit.apply(_eaf,args);},0);};_ead.prototype.trace=function(){var args=lang._toArray(arguments);this.then(function(_eb1){_eb0(["resolved",_eb1].concat(args));},function(_eb2){_eb0(["rejected",_eb2].concat(args));},function(_eb3){_eb0(["progress",_eb3].concat(args));});return this;};_ead.prototype.traceRejected=function(){var args=lang._toArray(arguments);this.otherwise(function(_eb4){_eb0(["rejected",_eb4].concat(args));});return this;};return _eaf;});},"esri/IdentityManager":function(){define("esri/IdentityManager",["dijit","dojo","dojox","dojo/require!dijit/Dialog,dijit/form/Button,dijit/form/ValidationTextBox,esri/utils,esri/IdentityManagerBase"],function(_eb5,dojo,_eb6){dojo.provide("esri.IdentityManager");dojo.require("dijit.Dialog");dojo.require("dijit.form.Button");dojo.require("dijit.form.ValidationTextBox");dojo.require("esri.utils");dojo.require("esri.IdentityManagerBase");dojo.declare("esri.IdentityManager",[esri.IdentityManagerBase],{constructor:function(_eb7){dojo.mixin(this,_eb7);},_dialogContent:"<div class='dijitDialogPaneContentArea'>"+"<div style='padding-bottom: 5px; word-wrap: break-word;'>${info}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<div class='esriErrorMsg' style='display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'>${invalidUser}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<table style='width: 100%;'>"+"<tr>"+"<td><label>${lblUser}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"<tr>"+"<td><label>${lblPwd}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"</table>"+"</div>"+"<div class='dijitDialogPaneActionBar'>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdSubmit\"'>${lblOk}</button>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdCancel\"'>${lblCancel}</button>"+"</div>",onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(_eb8,_eb9,_eba){if(!this._nls){this._nls=esri.bundle.identity;}if(!this._loginDialog){this._loginDialog=(this.dialog=this._createLoginDialog());this.onDialogCreate();}var dlg=this._loginDialog,_ebb=_eba&&_eba.error,_ebc=_eba&&_eba.token,dfd=new dojo.Deferred(function(){dlg.onCancel();});if(dlg.open){var err=new Error("BUSY");err.code="IdentityManager."+1;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}esri.hide(dlg.errMsg_);if(_ebb){if(_ebb.code==403&&_ebc){dojo.attr(dlg.errMsg_,"innerHTML",this._nls.forbidden);esri.show(dlg.errMsg_);}}dlg.dfd_=dfd;dlg.serverInfo_=_eb9;dlg.resUrl_=_eb8;dlg.admin_=_eba&&_eba.isAdmin;dojo.attr(dlg.resLink_,{"title":_eb8,"innerHTML":"("+(this.getResourceName(_eb8)||this._nls.lblItem)+")"});dojo.attr(dlg.serverLink_,{"title":_eb9.server,"innerHTML":(_eb9.server.toLowerCase().indexOf("arcgis.com")!==-1?"ArcGIS Online":_eb9.server)+" "});dlg.txtPwd_.set("value","");dlg.show();return dfd;},_createLoginDialog:function(){var nls=this._nls,_ebd=esri.substitute(nls,this._dialogContent);_ebd=esri.substitute({resource:"<span class='resLink' style='word-wrap: break-word;'></span>",server:"<span class='serverLink' style='word-wrap: break-word;'></span>"},_ebd);var dlg=new _eb5.Dialog({title:nls.title,content:_ebd,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(evt){if(evt.charOrCode===dojo.keys.ENTER){this.execute_();}},execute_:function(){var usr=this.txtUser_.get("value"),pwd=this.txtPwd_.get("value"),dfd=this.dfd_,dlg=this;if(!usr||!pwd){return;}this.btnSubmit_.set("label",nls.lblSigning);var _ebe=esri.id.findCredential(dlg.serverInfo_.server,usr),_ebf=function(_ec0){dlg.btnSubmit_.set("label",nls.lblOk);dlg.btnSubmit_.set("disabled",false);esri.hide(dlg.errMsg_);dlg.hide();_eb5.Dialog._DialogLevelManager.hide(dlg);var _ec1=dlg.serverInfo_;dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;var _ec2,_ec3,cred=_ebe,ssl;if(_ec0){_ec2=_ec0.token;_ec3=esri._isDefined(_ec0.expires)?Number(_ec0.expires):null;ssl=!!_ec0.ssl;if(cred){cred.userId=usr;cred.token=_ec2;cred.expires=_ec3;cred.validity=_ec1.shortLivedTokenValidity;cred.ssl=ssl;}else{cred=new esri.Credential({userId:usr,server:_ec1.server,token:_ec2,expires:_ec3,ssl:ssl,isAdmin:dlg.admin_,validity:_ec1.shortLivedTokenValidity});}}dfd.callback(cred);};if(_ebe&&!_ebe._enqueued){_ebf();return;}dlg.btnSubmit_.set("disabled",true);dlg.generateDfd_=esri.id.generateToken(this.serverInfo_,{username:usr,password:pwd},{isAdmin:this.admin_}).addCallback(_ebf).addErrback(function(_ec4){dlg.btnSubmit_.set("disabled",false);dlg.generateDfd_=null;dlg.btnSubmit_.set("label",nls.lblOk);dojo.attr(dlg.errMsg_,"innerHTML",(_ec4&&_ec4.code)?nls.invalidUser:nls.noAuthService);esri.show(dlg.errMsg_);});},cancel_:function(){if(dlg.generateDfd_){dlg.generateDfd_.cancel();}var dfd=dlg.dfd_,_ec5=dlg.resUrl_,_ec6=dlg.serverInfo_;dlg.btnSubmit_.set("disabled",false);dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;esri.hide(dlg.errMsg_);_eb5.Dialog._DialogLevelManager.hide(dlg);dlg.esriIdMgr_.onDialogCancel({resourceUrl:_ec5,serverInfo:_ec6});var err=new Error("ABORTED");err.code="IdentityManager."+2;err.log=dojo.config.isDebug;dfd.errback(err);}});var _ec7=dlg.domNode;dlg.txtUser_=_eb5.byNode(dojo.query(".esriIdUser",_ec7)[0]);dlg.txtPwd_=_eb5.byNode(dojo.query(".esriIdPwd",_ec7)[0]);dlg.btnSubmit_=_eb5.byNode(dojo.query(".esriIdSubmit",_ec7)[0]);dlg.btnCancel_=_eb5.byNode(dojo.query(".esriIdCancel",_ec7)[0]);dlg.resLink_=dojo.query(".resLink",_ec7)[0];dlg.serverLink_=dojo.query(".serverLink",_ec7)[0];dlg.errMsg_=dojo.query(".esriErrorMsg",_ec7)[0];dlg.connect(dlg.txtUser_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.txtPwd_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.btnSubmit_,"onClick",dlg.execute_);dlg.connect(dlg.btnCancel_,"onClick",dlg.onCancel);dlg.connect(dlg,"onCancel",dlg.cancel_);return dlg;}});esri.id=new esri.IdentityManager();});},"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"header\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n","dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(has,dom){var _ec8,_ec9={};if(has("webkit")){_ec8=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null);}}return s||{};};}else{if(has("ie")&&(has("ie")<9||has("quirks"))){_ec8=function(node){return node.nodeType==1&&node.currentStyle?node.currentStyle:{};};}else{_ec8=function(node){return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{};};}}_ec9.getComputedStyle=_ec8;var _eca;if(!has("ie")){_eca=function(_ecb,_ecc){return parseFloat(_ecc)||0;};}else{_eca=function(_ecd,_ece){if(!_ece){return 0;}if(_ece=="medium"){return 4;}if(_ece.slice&&_ece.slice(-2)=="px"){return parseFloat(_ece);}var s=_ecd.style,rs=_ecd.runtimeStyle,cs=_ecd.currentStyle,_ecf=s.left,_ed0=rs.left;rs.left=cs.left;try{s.left=_ece;_ece=s.pixelLeft;}catch(e){_ece=0;}s.left=_ecf;rs.left=_ed0;return _ece;};}_ec9.toPixelValue=_eca;var astr="DXImageTransform.Microsoft.Alpha";var af=function(n,f){try{return n.filters.item(astr);}catch(e){return f?{}:null;}};var _ed1=has("ie")<9||(has("ie")&&has("quirks"))?function(node){try{return af(node).Opacity/100;}catch(e){return 1;}}:function(node){return _ec8(node).opacity;};var _ed2=has("ie")<9||(has("ie")&&has("quirks"))?function(node,_ed3){var ov=_ed3*100,_ed4=_ed3==1;node.style.zoom=_ed4?"":1;if(!af(node)){if(_ed4){return _ed3;}node.style.filter+=" progid:"+astr+"(Opacity="+ov+")";}else{af(node,1).Opacity=ov;}af(node,1).Enabled=!_ed4;if(node.tagName.toLowerCase()=="tr"){for(var td=node.firstChild;td;td=td.nextSibling){if(td.tagName.toLowerCase()=="td"){_ed2(td,_ed3);}}}return _ed3;}:function(node,_ed5){return node.style.opacity=_ed5;};var _ed6={left:true,top:true};var _ed7=/margin|padding|width|height|max|min|offset/;function _ed8(node,type,_ed9){type=type.toLowerCase();if(has("ie")){if(_ed9=="auto"){if(type=="height"){return node.offsetHeight;}if(type=="width"){return node.offsetWidth;}}if(type=="fontweight"){switch(_ed9){case 700:return "bold";case 400:default:return "normal";}}}if(!(type in _ed6)){_ed6[type]=_ed7.test(type);}return _ed6[type]?_eca(node,_ed9):_ed9;};var _eda=has("ie")?"styleFloat":"cssFloat",_edb={"cssFloat":_eda,"styleFloat":_eda,"float":_eda};_ec9.get=function getStyle(node,name){var n=dom.byId(node),l=arguments.length,op=(name=="opacity");if(l==2&&op){return _ed1(n);}name=_edb[name]||name;var s=_ec9.getComputedStyle(n);return (l==1)?s:_ed8(n,name,s[name]||n.style[name]);};_ec9.set=function setStyle(node,name,_edc){var n=dom.byId(node),l=arguments.length,op=(name=="opacity");name=_edb[name]||name;if(l==3){return op?_ed2(n,_edc):n.style[name]=_edc;}for(var x in name){_ec9.set(node,x,name[x]);}return _ec9.getComputedStyle(n);};return _ec9;});},"dojo/dom-construct":function(){define(["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr","./on"],function(_edd,dojo,has,win,dom,attr,on){var _ede={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},_edf=/<\s*([\w\:]+)/,_ee0={},_ee1=0,_ee2="__"+dojo._scopeName+"ToDomId";for(var _ee3 in _ede){if(_ede.hasOwnProperty(_ee3)){var tw=_ede[_ee3];tw.pre=_ee3=="option"?"<select multiple=\"multiple\">":"<"+tw.join("><")+">";tw.post="</"+tw.reverse().join("></")+">";}}function _ee4(node,ref){var _ee5=ref.parentNode;if(_ee5){_ee5.insertBefore(node,ref);}};function _ee6(node,ref){var _ee7=ref.parentNode;if(_ee7){if(_ee7.lastChild==ref){_ee7.appendChild(node);}else{_ee7.insertBefore(node,ref.nextSibling);}}};var _ee8=null,_ee9;on(window,"unload",function(){_ee8=null;});_edd.toDom=function toDom(frag,doc){doc=doc||win.doc;var _eea=doc[_ee2];if(!_eea){doc[_ee2]=_eea=++_ee1+"";_ee0[_eea]=doc.createElement("div");}frag+="";var _eeb=frag.match(_edf),tag=_eeb?_eeb[1].toLowerCase():"",_eec=_ee0[_eea],wrap,i,fc,df;if(_eeb&&_ede[tag]){wrap=_ede[tag];_eec.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i){_eec=_eec.firstChild;}}else{_eec.innerHTML=frag;}if(_eec.childNodes.length==1){return _eec.removeChild(_eec.firstChild);}df=doc.createDocumentFragment();while(fc=_eec.firstChild){df.appendChild(fc);}return df;};_edd.place=function place(node,_eed,_eee){_eed=dom.byId(_eed);if(typeof node=="string"){node=/^\s*</.test(node)?_edd.toDom(node,_eed.ownerDocument):dom.byId(node);}if(typeof _eee=="number"){var cn=_eed.childNodes;if(!cn.length||cn.length<=_eee){_eed.appendChild(node);}else{_ee4(node,cn[_eee<0?0:_eee]);}}else{switch(_eee){case "before":_ee4(node,_eed);break;case "after":_ee6(node,_eed);break;case "replace":_eed.parentNode.replaceChild(node,_eed);break;case "only":_edd.empty(_eed);_eed.appendChild(node);break;case "first":if(_eed.firstChild){_ee4(node,_eed.firstChild);break;}default:_eed.appendChild(node);}}return node;};_edd.create=function create(tag,_eef,_ef0,pos){var doc=win.doc;if(_ef0){_ef0=dom.byId(_ef0);doc=_ef0.ownerDocument;}if(typeof tag=="string"){tag=doc.createElement(tag);}if(_eef){attr.set(tag,_eef);}if(_ef0){_edd.place(tag,_ef0,pos);}return tag;};_edd.empty=has("ie")?function(node){node=dom.byId(node);for(var c;c=node.lastChild;){_edd.destroy(c);}}:function(node){dom.byId(node).innerHTML="";};_edd.destroy=function destroy(node){node=dom.byId(node);try{var doc=node.ownerDocument;if(!_ee8||_ee9!=doc){_ee8=doc.createElement("div");_ee9=doc;}_ee8.appendChild(node.parentNode?node.parentNode.removeChild(node):node);_ee8.innerHTML="";}catch(e){}};});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_ef1,_ef2,_ef3){return _ef2("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_ef4,_ef5){var _ef6=this.containerNode;if(_ef5&&typeof _ef5=="number"){var _ef7=this.getChildren();if(_ef7&&_ef7.length>=_ef5){_ef6=_ef7[_ef5-1].domNode;_ef5="after";}}_ef3.place(_ef4.domNode,_ef6,_ef5);if(this._started&&!_ef4._started){_ef4.startup();}},removeChild:function(_ef8){if(typeof _ef8=="number"){_ef8=this.getChildren()[_ef8];}if(_ef8){var node=_ef8.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_ef9,dir){var _efa=this.getChildren(),idx=_ef1.indexOf(this.getChildren(),_ef9);return _efa[idx+dir];},getIndexOfChild:function(_efb){return _ef1.indexOf(this.getChildren(),_efb);}});});},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(_efc,_efd){"use strict";return function when(_efe,_eff,_f00,_f01){var _f02=_efe&&typeof _efe.then==="function";var _f03=_f02&&_efe instanceof _efd;if(!_f02){if(_eff){return _eff(_efe);}else{return new _efc().resolve(_efe);}}else{if(!_f03){var _f04=new _efc(_efe.cancel);_efe.then(_f04.resolve,_f04.reject,_f04.progress);_efe=_f04.promise;}}if(_eff||_f00||_f01){return _efe.then(_eff,_f00,_f01);}return _efe;};});},"dojo/html":function(){define("dojo/html",["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_f05,lang,_f06,_f07,dom,_f08,_f09){var html={};lang.setObject("dojo.html",html);var _f0a=0;html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};html._emptyNode=_f08.empty;html._setNodeContent=function(node,cont){_f08.empty(node);if(cont){if(typeof cont=="string"){cont=_f08.toDom(cont,node.ownerDocument);}if(!cont.nodeType&&lang.isArrayLike(cont)){for(var _f0b=cont.length,i=0;i<cont.length;i=_f0b==cont.length?i+1:0){_f08.place(cont[i],node,"last");}}else{_f08.place(cont,node,"last");}}return node;};html._ContentSetter=_f07("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_f05._scopeName,startup:true,constructor:function(_f0c,node){lang.mixin(this,_f0c||{});node=this.node=dom.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_f0a++].join("_");}},set:function(cont,_f0d){if(undefined!==cont){this.content=cont;}if(_f0d){this._mixin(_f0d);}this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then){return ret;}else{return this.node;}},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=html._setNodeContent(node,this.content);}catch(e){var _f0e=this.onContentError(e);try{node.innerHTML=_f0e;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved()){this.parseDeferred.cancel();}delete this.parseDeferred;}if(this.parseResults&&this.parseResults.length){_f06.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent){cont=html._secureForInnerHtml(cont);}if(this.extractContent){var _f0f=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_f0f){cont=_f0f[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content;},onContentError:function(err){return "Error occurred setting content: "+err;},onExecError:function(err){return "Error occurred executing scripts: "+err;},_mixin:function(_f10){var _f11={},key;for(key in _f10){if(key in _f11){continue;}this[key]=_f10[key];}},_parse:function(){var _f12=this.node;try{var _f13={};_f06.forEach(["dir","lang","textDir"],function(name){if(this[name]){_f13[name]=this[name];}},this);var self=this;this.parseDeferred=_f09.parse({rootNode:_f12,noStart:!this.startup,inherited:_f13,scope:this.parserScope}).then(function(_f14){return self.parseResults=_f14;});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_f15){var _f16=this["on"+type+"Error"].call(this,err);if(_f15){console.error(_f15,err);}else{if(_f16){html._setNodeContent(this.node,_f16,true);}}}});html.set=function(node,cont,_f17){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_f17){return html._setNodeContent(node,cont,true);}else{var op=new html._ContentSetter(lang.mixin(_f17,{content:cont,node:node}));return op.set();}};return html;});},"WebScene/lib/GLFBO":function(){define("WebScene/lib/GLFBO",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(_f18,dojo,_f19){dojo.provide("WebScene.lib.GLFBO");dojo.require("WebScene.lib.Util");GLFBO=function(_f1a,type,_f1b,_f1c,gl){var _f1d=gl.createFramebuffer();var _f1e=gl.createTexture();var _f1f=_f1b?gl.createRenderbuffer():undefined;gl.bindTexture(gl.TEXTURE_2D,_f1e);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,_f1c);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,_f1c);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);var dimI=0;var dimJ=0;this.dispose=function(){gl.deleteFramebuffer(_f1d);gl.deleteTexture(_f1e);if(_f1f!=undefined){gl.deleteRenderbuffer(_f1f);}};this.setSize=function(_f20,_f21){if(_f20===dimI&&_f21===dimJ){return;}dimI=_f20;dimJ=_f21;gl.bindTexture(gl.TEXTURE_2D,_f1e);gl.texImage2D(gl.TEXTURE_2D,0,_f1a,dimI,dimJ,0,_f1a,type,null);if(_f1f!=undefined){gl.bindRenderbuffer(gl.RENDERBUFFER,_f1f);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,dimI,dimJ);}gl.bindFramebuffer(gl.FRAMEBUFFER,_f1d);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,_f1e,0);if(_f1f!=undefined){gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,_f1f);}glCheckFramebufferStatus(gl.FRAMEBUFFER,gl);if(_f1f!=undefined){gl.bindRenderbuffer(gl.RENDERBUFFER,null);}gl.bindFramebuffer(gl.FRAMEBUFFER,null);};this.getWidth=function(){return dimI;};this.getHeight=function(){return dimJ;};this.bind=function(){gl.bindFramebuffer(gl.FRAMEBUFFER,_f1d);};this.getTexture=function(){return _f1e;};this.getGLName=function(){return _f1d;};};});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_f22,_f23,i18n,_f24,_f25,_f26){var _f27;return _f27=_f22("dijit.form.ValidationTextBox",_f24,{templateString:_f26,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_f28){if(_f28!=_f27.prototype[attr]){_f23.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_f28);}},_setRegExpGenAttr:function(_f29){this._deprecateRegExp("regExpGen",_f29);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_f2a){this._deprecateRegExp("regExp",_f2a);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_f2b,_f2c){return (new RegExp("^(?:"+this._getPatternAttr(_f2c)+")"+(this.required?"":"?")+"$")).test(_f2b)&&(!this.required||!this._isEmpty(_f2b))&&(this._isEmpty(_f2b)||this.parse(_f2b,_f2c)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_f2d){return (this.trim?/^\s*$/:/^$/).test(_f2d);},getErrorMessage:function(){var _f2e=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _f2f=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_f2e:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_f2f:_f2e;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_f30){var _f31="";var _f32=this.disabled||this.isValid(_f30);if(_f32){this._maskValidSubsetError=true;}var _f33=this._isEmpty(this.textbox.value);var _f34=!_f32&&_f30&&this._isValidSubset();this._set("state",_f32?"":(((((!this._hasBeenBlurred||_f30)&&_f33)||_f34)&&this._maskValidSubsetError)?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_f32?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_f30&&_f34;_f31=this.getErrorMessage(_f30);}else{if(this.state=="Incomplete"){_f31=this.getPromptMessage(_f30);this._maskValidSubsetError=!this._hasBeenBlurred||_f30;}else{if(_f33){_f31=this.getPromptMessage(_f30);}}}this.set("message",_f31);return _f32;},displayMessage:function(_f35){if(_f35&&this.focused){_f25.show(_f35,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_f25.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_f36){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_f37){if(!_f37.locale&&this.lang){_f37.locale=this.lang;}this._set("constraints",_f37);this._refreshState();},_getPatternAttr:function(_f38){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_f38||this.constraints);}if(p!=this._lastRegExp){var _f39="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_f39+=re;break;case ")":_f39+="|$)";break;default:_f39+="(?:"+re+"|$)";break;}});}try{"".search(_f39);}catch(e){_f39=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_f39+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_f3a){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_f3b){this._set("required",_f3b);this.focusNode.setAttribute("aria-required",_f3b);this._refreshState();},_setMessageAttr:function(_f3c){this._set("message",_f3c);this.displayMessage(_f3c);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dijit/_base/typematic":function(){define("dijit/_base/typematic",["../typematic"],function(){});},"dijit/_base":function(){define("dijit/_base",["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(_f3d){return _f3d._base;});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_f3e,dom,geom,_f3f){var _f40={getBox:function(doc){doc=doc||_f3e.doc;var _f41=(doc.compatMode=="BackCompat")?_f3e.body(doc):doc.documentElement,_f42=geom.docScroll(doc),w,h;if(has("touch")){var _f43=_f40.get(doc);w=_f43.innerWidth||_f41.clientWidth;h=_f43.innerHeight||_f41.clientHeight;}else{w=_f41.clientWidth;h=_f41.clientHeight;}return {l:_f42.x,t:_f42.y,w:w,h:h};},get:function(doc){if(has("ie")&&_f40!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_f3e.doc,body=_f3e.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _f44=doc.compatMode=="BackCompat",_f45=(isIE>=9&&"frameElement" in node.ownerDocument.parentWindow)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_f44?body:html),_f46=isWK?body:_f45,_f47=_f45.clientWidth,_f48=_f45.clientHeight,rtl=!geom.isBodyLtr(doc),_f49=pos||geom.position(node),el=node.parentNode,_f4a=function(el){return ((isIE<=6||(isIE&&_f44))?false:(_f3f.get(el,"position").toLowerCase()=="fixed"));};if(_f4a(node)){return;}while(el){if(el==body){el=_f46;}var _f4b=geom.position(el),_f4c=_f4a(el);if(el==_f46){_f4b.w=_f47;_f4b.h=_f48;if(_f46==html&&isIE&&rtl){_f4b.x+=_f46.offsetWidth-_f4b.w;}if(_f4b.x<0||!isIE){_f4b.x=0;}if(_f4b.y<0||!isIE){_f4b.y=0;}}else{var pb=geom.getPadBorderExtents(el);_f4b.w-=pb.w;_f4b.h-=pb.h;_f4b.x+=pb.l;_f4b.y+=pb.t;var _f4d=el.clientWidth,_f4e=_f4b.w-_f4d;if(_f4d>0&&_f4e>0){_f4b.w=_f4d;_f4b.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_f4e:0;}_f4d=el.clientHeight;_f4e=_f4b.h-_f4d;if(_f4d>0&&_f4e>0){_f4b.h=_f4d;}}if(_f4c){if(_f4b.y<0){_f4b.h+=_f4b.y;_f4b.y=0;}if(_f4b.x<0){_f4b.w+=_f4b.x;_f4b.x=0;}if(_f4b.y+_f4b.h>_f48){_f4b.h=_f48-_f4b.y;}if(_f4b.x+_f4b.w>_f47){_f4b.w=_f47-_f4b.x;}}var l=_f49.x-_f4b.x,t=_f49.y-Math.max(_f4b.y,0),r=l+_f49.w-_f4b.w,bot=t+_f49.h-_f4b.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_f44)||isIE>=9)){s=-s;}_f49.x+=el.scrollLeft;el.scrollLeft+=s;_f49.x-=el.scrollLeft;}if(bot*t>0){_f49.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_f49.y-=el.scrollTop;}el=(el!=_f46)&&!_f4c&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_f40);return _f40;});},"WebScene/lib/Selector":function(){define("WebScene/lib/Selector",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix"],function(_f4f,dojo,_f50){dojo.provide("WebScene.lib.Selector");dojo.require("WebScene.lib.gl-matrix");Selector=function(_f51,_f52,_f53,p0,p1){function _f54(){this.dist=undefined;this.object=undefined;this.name=undefined;this.getIntersectionPoint=function(_f55){if(this.dist===undefined){return false;}vec3.lerp(p0,p1,this.dist,_f55);return true;};};var _f56=new _f54();var _f57=new _f54();var _f58=mat4.create();var d=vec3.create();var pp0=vec3.create();var pp1=vec3.create();var p=vec3.create();var tuv=vec3.create();this.intersectObject=function(name){var _f59=_f52[name];var _f5a=_f59.getGeometryNames();var _f5b=_f59.getTransformations();for(var j=0;j<_f5a.length;++j){var _f5c=_f51[_f5a[j]];mat4.inverse(_f5b[j],_f58);mat4.multiplyVec3(_f58,p0,pp0);mat4.multiplyVec3(_f58,p1,pp1);vec3.subtract(pp1,pp0,d);for(var k=0,ida=_f5c.getInterleavedData(),_f5d=ida.length;k<_f5d;++k){var _f5e=_f5c.getCenter(k);vec3.project(_f5e,pp0,pp1,p);var _f5f=vec3.dist2(p,_f5e);var _f60=_f5c.getBSRadius(k);if(_f5f<_f60*_f60){for(var l=0,data=ida[k].data,_f61=data.length,_f62=ida[k].stride;l<_f61;l+=_f62*3){if(rayTriangle3D(pp0,d,data,data,data,l,l+_f62,l+_f62*2,tuv)){if(tuv[0]>=0){if(_f56.dist===undefined||tuv[0]<_f56.dist){_f56.dist=tuv[0];_f56.object=_f59;_f56.name=name;}if(_f57.dist===undefined||tuv[0]>_f57.dist){_f57.dist=tuv[0];_f57.object=_f59;_f57.name=name;}}}}}}}};for(var h=0;h<_f53.length;++h){var _f63=_f53[h];for(var i=0,_f64=_f63.objects.length;i<_f64;++i){var name=_f63.objects[i];this.intersectObject(name);}}this.getMinResult=function(){return _f56;};this.getMaxResult=function(){return _f57;};};});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_f65,_f66,_f67,lang){lang.extend(_f66,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _f67("dijit._FocusMixin",null,{_focusManager:_f65});});},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(has,lang,_f68,_f69,_f6a){"use strict";var _f6b=0,_f6c=1,_f6d=2;var _f6e="This deferred has already been fulfilled.";var _f6f=Object.freeze||function(){};var _f70=function(_f71,type,_f72,_f73,_f74){if(1){if(type===_f6d&&_f75.instrumentRejected&&_f71.length===0){_f75.instrumentRejected(_f72,false,_f73,_f74);}}for(var i=0;i<_f71.length;i++){_f76(_f71[i],type,_f72,_f73);}};var _f76=function(_f77,type,_f78,_f79){var func=_f77[type];var _f7a=_f77.deferred;if(func){try{var _f7b=func(_f78);if(_f7b&&typeof _f7b.then==="function"){_f77.cancel=_f7b.cancel;_f7b.then(_f7c(_f7a,_f6c),_f7c(_f7a,_f6d),_f7c(_f7a,_f6b));return;}_f7d(_f7a,_f6c,_f7b);}catch(error){_f7d(_f7a,_f6d,error);}}else{_f7d(_f7a,type,_f78);}if(1){if(type===_f6d&&_f75.instrumentRejected){_f75.instrumentRejected(_f78,!!func,_f79,_f7a.promise);}}};var _f7c=function(_f7e,type){return function(_f7f){_f7d(_f7e,type,_f7f);};};var _f7d=function(_f80,type,_f81){if(!_f80.isCanceled()){switch(type){case _f6b:_f80.progress(_f81);break;case _f6c:_f80.resolve(_f81);break;case _f6d:_f80.reject(_f81);break;}}};var _f75=function(_f82){var _f83=this.promise=new _f69();var _f84=this;var _f85,_f86,_f87;var _f88=false;var _f89=[];if(1&&Error.captureStackTrace){Error.captureStackTrace(_f84,_f75);Error.captureStackTrace(_f83,_f75);}this.isResolved=_f83.isResolved=function(){return _f85===_f6c;};this.isRejected=_f83.isRejected=function(){return _f85===_f6d;};this.isFulfilled=_f83.isFulfilled=function(){return !!_f85;};this.isCanceled=_f83.isCanceled=function(){return _f88;};this.progress=function(_f8a,_f8b){if(!_f85){_f70(_f89,_f6b,_f8a,null,_f84);return _f83;}else{if(_f8b===true){throw new Error(_f6e);}else{return _f83;}}};this.resolve=function(_f8c,_f8d){if(!_f85){_f70(_f89,_f85=_f6c,_f86=_f8c,null,_f84);_f89=null;return _f83;}else{if(_f8d===true){throw new Error(_f6e);}else{return _f83;}}};var _f8e=this.reject=function(_f8f,_f90){if(!_f85){if(1&&Error.captureStackTrace){Error.captureStackTrace(_f87={},_f8e);}_f70(_f89,_f85=_f6d,_f86=_f8f,_f87,_f84);_f89=null;return _f83;}else{if(_f90===true){throw new Error(_f6e);}else{return _f83;}}};this.then=_f83.then=function(_f91,_f92,_f93){var _f94=[_f93,_f91,_f92];_f94.cancel=_f83.cancel;_f94.deferred=new _f75(function(_f95){return _f94.cancel&&_f94.cancel(_f95);});if(_f85&&!_f89){_f76(_f94,_f85,_f86,_f87);}else{_f89.push(_f94);}return _f94.deferred.promise;};this.cancel=_f83.cancel=function(_f96,_f97){if(!_f85){if(_f82){var _f98=_f82(_f96);_f96=typeof _f98==="undefined"?_f96:_f98;}_f88=true;if(!_f85){if(typeof _f96==="undefined"){_f96=new _f68();}_f8e(_f96);return _f96;}else{if(_f85===_f6d&&_f86===_f96){return _f96;}}}else{if(_f97===true){throw new Error(_f6e);}}};_f6f(_f83);};_f75.prototype.toString=function(){return "[object Deferred]";};if(_f6a){_f6a(_f75);}return _f75;});},"WebScene/app/Visualizer":function(){define("WebScene/app/Visualizer",["dijit","dojo","dojox","dojo/require!WebScene/lib/Renderer,WebScene/lib/ShadowMap,WebScene/lib/SSAOHelper"],function(_f99,dojo,_f9a){dojo.provide("WebScene.app.Visualizer");dojo.require("WebScene.lib.Renderer");dojo.require("WebScene.lib.ShadowMap");dojo.require("WebScene.lib.SSAOHelper");Visualizer=function(_f9b,_f9c,_f9d,_f9e,gl){var _f9f=new Renderer(_f9b,_f9c,_f9d,_f9e,gl);var _fa0=new ShadowMap(_f9b,gl);var _fa1=new SSAOHelper(_f9b,_f9e,gl);var _fa2=undefined;var _fa3=new Array();this.dispose=function(){_f9f.dispose();if(_fa0.getEnableState()){_fa0.disable();}if(_fa1.getEnableState()){_fa1.disable();}};this.setLightingData=function(data){_f9f.setLightingData(data);};this.getLightingData=function(){return _f9f.getLightingData();};this.setData=function(data){if(data.shadowMap!==undefined&&data.shadowMap!==_fa0.getEnableState()){_fa0.setEnableState(data.shadowMap);}if(data.ssao!==undefined&&data.ssao!==_fa1.getEnableState()){_fa1.setEnableState(data.ssao);}if(data.ssaoAttenuation!==undefined){_fa1.setAttenuation(data.ssaoAttenuation);}if(data.ssaoRadius!==undefined){_fa1.setRadius(data.ssaoRadius);}if(data.ssaoFilterRadius!==undefined){_fa1.setFilterRadius(data.ssaoFilterRadius);}if(data.ssaoSamples!==undefined){_fa1.setSamples(data.ssaoSamples);}};this.getData=function(){var _fa4=new Object();if(_fa0.getIsSupported()){_fa4.shadowMap=_fa0.getEnableState();}if(_fa1.getIsSupported()){_fa4.ssao=_fa1.getEnableState();_fa4.ssaoAttenuation=_fa1.getAttenuation();_fa4.ssaoRadius=_fa1.getRadius();_fa4.ssaoFilterRadius=_fa1.getFilterRadius();_fa4.ssaoSamples=_fa1.getSamples();}return _fa4;};this.setContent=function(_fa5,_fa6,idx){_f9f.setContent(_fa5);_fa2=_fa5;_fa3=_fa6;};this.getContent=function(idx){return _fa3;};this.getContentRenderGeometries=function(idx){return _fa2;};this.getPickContent=function(_fa7,_fa8){return this.getContent();};this.setSelection=function(_fa9){_f9f.setSelection(_fa9);};this.render=function(view,proj,_faa,_fab,fovX,_fac,_fad,fbo){if(_f9e.getLoadingCount()!==0){return;}if(_fa0.getEnableState()){_fa0.prepare(view,proj,_fac,_fa2,_fad);_f9f.renderSimple(_fa0.getMvMat(),_fa0.getProjMat(),_fa0.getNearFar(),_fad,"materialDepth");_fa0.finish(fbo);}_fa0.setUniforms(_f9b.get("default"));_fa0.setUniforms(_f9b.get("defaultTextured"));if(_fa1.getEnableState()){_fa1.prepare0(_fab);_f9f.renderSimple(view,proj,_faa,_fad,"materialNormal");_fa1.prepare1();_f9f.renderSimple(view,proj,_faa,_fad,"materialDepth");_fa1.finish(_faa,fovX,fbo);}_fa1.setUniforms(_f9b.get("default"));_fa1.setUniforms(_f9b.get("defaultTextured"));_f9f.render(view,proj,_faa,_fad);};};});},"WebScene/lib/webgl-utils":function(){define("WebScene/lib/webgl-utils",["dijit","dojo","dojox"],function(_fae,dojo,_faf){dojo.provide("WebScene.lib.webgl-utils");WebGLUtils=function(){var _fb0=function(msg){return ""+"<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>"+"<td align=\"center\">"+"<div style=\"display: table-cell; vertical-align: middle;\">"+"<div style=\"\">"+msg+"</div>"+"</div>"+"</td></tr></table>";};var _fb1=""+"This page requires a browser that supports WebGL.<br/>"+"<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>";var _fb2=""+"It doesn't appear your computer can support WebGL.<br/>"+"<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>";var _fb3=function(_fb4,_fb5){function _fb6(str){var _fb7=_fb4.parentNode;if(_fb7){_fb7.innerHTML=_fb0(str);}};if(!window.WebGLRenderingContext){_fb6(_fb1);return [null,_fb1];}var _fb8=_fb9(_fb4,_fb5);if(!_fb8){_fb6(_fb2);return [null,_fb2];}return [_fb8];};var _fba=function(){var t1=(function(){try{return window.WebGLRenderingContext;}catch(e){return [false,0];}})();var t2=(function(){try{return _fb9(document.createElement("canvas"));}catch(e){return [false,1];}})();if(!t1){return [false,0];}if(!t2){return [false,1];}return [true,_fbb(t2)];};var _fbb=function(gl){return {"VERSION":gl.getParameter(gl.VERSION),"SHADING_LANGUAGE_VERSION":gl.getParameter(gl.SHADING_LANGUAGE_VERSION),"VENDOR":gl.getParameter(gl.VENDOR),"RENDERER":gl.getParameter(gl.RENDERER),"EXTENSIONS":gl.getSupportedExtensions()};};var _fb9=function(_fbc,_fbd){var _fbe=["webgl","experimental-webgl","webkit-3d","moz-webgl"];var _fbf=null;for(var ii=0;ii<_fbe.length;++ii){try{_fbf=_fbc.getContext(_fbe[ii],_fbd);}catch(e){}if(_fbf){break;}}return _fbf;};return {create3DContext:_fb9,setupWebGL:_fb3,detectWebGL:_fba};}();window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(_fc0,_fc1){return window.setTimeout(_fc0,1000/60);};})();window.cancelAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;})();});},"dojo/_base/connect":function(){define(["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(dojo,on,hub,_fc2,_fc3,_fc4,has,lang){has.add("events-keypress-typed",function(){var _fc5={charCode:0};try{_fc5=document.createEvent("KeyboardEvent");(_fc5.initKeyboardEvent||_fc5.initKeyEvent).call(_fc5,"keypress",true,true,null,false,false,false,false,9,3);}catch(e){}return _fc5.charCode==0&&!has("opera");});function _fc6(obj,_fc7,_fc8,_fc9,_fca){_fc9=lang.hitch(_fc8,_fc9);if(!obj||!(obj.addEventListener||obj.attachEvent)){return _fc2.after(obj||dojo.global,_fc7,_fc9,true);}if(typeof _fc7=="string"&&_fc7.substring(0,2)=="on"){_fc7=_fc7.substring(2);}if(!obj){obj=dojo.global;}if(!_fca){switch(_fc7){case "keypress":_fc7=_fcb;break;case "mouseenter":_fc7=_fc4.enter;break;case "mouseleave":_fc7=_fc4.leave;break;}}return on(obj,_fc7,_fc9,_fca);};var _fcc={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113};var _fcd=has("mac")?"metaKey":"ctrlKey";var _fce=function(evt,_fcf){var faux=lang.mixin({},evt,_fcf);_fd0(faux);faux.preventDefault=function(){evt.preventDefault();};faux.stopPropagation=function(){evt.stopPropagation();};return faux;};function _fd0(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode;};var _fcb;if(has("events-keypress-typed")){var _fd1=function(e,code){try{return (e.keyCode=code);}catch(e){return 0;}};_fcb=function(_fd2,_fd3){var _fd4=on(_fd2,"keydown",function(evt){var k=evt.keyCode;var _fd5=(k!=13)&&k!=32&&(k!=27||!has("ie"))&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222)&&k!=229;if(_fd5||evt.ctrlKey){var c=_fd5?0:k;if(evt.ctrlKey){if(k==3||k==13){return _fd3.call(evt.currentTarget,evt);}else{if(c>95&&c<106){c-=48;}else{if((!evt.shiftKey)&&(c>=65&&c<=90)){c+=32;}else{c=_fcc[c]||c;}}}}var faux=_fce(evt,{type:"keypress",faux:true,charCode:c});_fd3.call(evt.currentTarget,faux);if(has("ie")){_fd1(evt,faux.keyCode);}}});var _fd6=on(_fd2,"keypress",function(evt){var c=evt.charCode;c=c>=32?c:0;evt=_fce(evt,{charCode:c,faux:true});return _fd3.call(this,evt);});return {remove:function(){_fd4.remove();_fd6.remove();}};};}else{if(has("opera")){_fcb=function(_fd7,_fd8){return on(_fd7,"keypress",function(evt){var c=evt.which;if(c==3){c=99;}c=c<32&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90){c+=32;}return _fd8.call(this,_fce(evt,{charCode:c}));});};}else{_fcb=function(_fd9,_fda){return on(_fd9,"keypress",function(evt){_fd0(evt);return _fda.call(this,evt);});};}}var _fdb={_keypress:_fcb,connect:function(obj,_fdc,_fdd,_fde,_fdf){var a=arguments,args=[],i=0;args.push(typeof a[0]=="string"?null:a[i++],a[i++]);var a1=a[i+1];args.push(typeof a1=="string"||typeof a1=="function"?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++){args.push(a[i]);}return _fc6.apply(this,args);},disconnect:function(_fe0){if(_fe0){_fe0.remove();}},subscribe:function(_fe1,_fe2,_fe3){return hub.subscribe(_fe1,lang.hitch(_fe2,_fe3));},publish:function(_fe4,args){return hub.publish.apply(hub,[_fe4].concat(args));},connectPublisher:function(_fe5,obj,_fe6){var pf=function(){_fdb.publish(_fe5,arguments);};return _fe6?_fdb.connect(obj,_fe6,pf):_fdb.connect(obj,pf);},isCopyKey:function(e){return e[_fcd];}};_fdb.unsubscribe=_fdb.disconnect;1&&lang.mixin(dojo,_fdb);return _fdb;});},"dojo/request/watch":function(){define(["./util","../errors/RequestTimeoutError","../errors/CancelError","../_base/array","../_base/window","../has!host-browser?dom-addeventlistener?:../on:"],function(util,_fe7,_fe8,_fe9,win,on){var _fea=null,_feb=[];function _fec(){var now=+(new Date);for(var i=0,dfd;i<_feb.length&&(dfd=_feb[i]);i++){var _fed=dfd.response,_fee=_fed.options;if((dfd.isCanceled&&dfd.isCanceled())||(dfd.isValid&&!dfd.isValid(_fed))){_feb.splice(i--,1);_fef._onAction&&_fef._onAction();}else{if(dfd.isReady&&dfd.isReady(_fed)){_feb.splice(i--,1);dfd.handleResponse(_fed);_fef._onAction&&_fef._onAction();}else{if(dfd.startTime){if(dfd.startTime+(_fee.timeout||0)<now){_feb.splice(i--,1);dfd.cancel(new _fe7(_fed));_fef._onAction&&_fef._onAction();}}}}}_fef._onInFlight&&_fef._onInFlight(dfd);if(!_feb.length){clearInterval(_fea);_fea=null;}};function _fef(dfd){if(dfd.response.options.timeout){dfd.startTime=+(new Date);}if(dfd.isFulfilled()){return;}_feb.push(dfd);if(!_fea){_fea=setInterval(_fec,50);}if(dfd.response.options.sync){_fec();}};_fef.cancelAll=function cancelAll(){try{_fe9.forEach(_feb,function(dfd){try{dfd.cancel(new _fe8("All requests canceled."));}catch(e){}});}catch(e){}};if(win&&on&&win.doc.attachEvent){on(win.global,"unload",function(){_fef.cancelAll();});}return _fef;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_ff0,dom,_ff1,_ff2){return _ff0("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_ff1.stop(e);return false;}var _ff3=this.onClick(e)===false;if(!_ff3&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _ff4=_ff2.byNode(node);if(_ff4&&typeof _ff4._onSubmit=="function"){_ff4._onSubmit(e);_ff3=true;break;}}}if(_ff3){e.preventDefault();}return !_ff3;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_ff5){this._set("label",_ff5);(this.containerNode||this.focusNode).innerHTML=_ff5;}});});},"dojo/dom-attr":function(){define(["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(_ff6,has,lang,dom,_ff7,prop){var _ff8={innerHTML:1,className:1,htmlFor:has("ie"),value:1},_ff9={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};function _ffa(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return attr&&attr.specified;};_ff6.has=function hasAttr(node,name){var lc=name.toLowerCase();return _ff8[prop.names[lc]||name]||_ffa(dom.byId(node),_ff9[lc]||name);};_ff6.get=function getAttr(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_ffb=prop.names[lc]||name,_ffc=_ff8[_ffb],_ffd=node[_ffb];if(_ffc&&typeof _ffd!="undefined"){return _ffd;}if(_ffb!="href"&&(typeof _ffd=="boolean"||lang.isFunction(_ffd))){return _ffd;}var _ffe=_ff9[lc]||name;return _ffa(node,_ffe)?node.getAttribute(_ffe):null;};_ff6.set=function setAttr(node,name,_fff){node=dom.byId(node);if(arguments.length==2){for(var x in name){_ff6.set(node,x,name[x]);}return node;}var lc=name.toLowerCase(),_1000=prop.names[lc]||name,_1001=_ff8[_1000];if(_1000=="style"&&typeof _fff!="string"){_ff7.set(node,_fff);return node;}if(_1001||typeof _fff=="boolean"||lang.isFunction(_fff)){return prop.set(node,name,_fff);}node.setAttribute(_ff9[lc]||name,_fff);return node;};_ff6.remove=function removeAttr(node,name){dom.byId(node).removeAttribute(_ff9[name.toLowerCase()]||name);};_ff6.getNodeProp=function getNodeProp(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_1002=prop.names[lc]||name;if((_1002 in node)&&_1002!="href"){return node[_1002];}var _1003=_ff9[lc]||name;return _ffa(node,_1003)?node.getAttribute(_1003):null;};});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(array,has,_1004,win,dijit){var _1005={},hash={};var _1006={length:0,add:function(_1007){if(hash[_1007.id]){throw new Error("Tried to register widget with id=="+_1007.id+" but that id is already registered");}hash[_1007.id]=_1007;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_1008){var id;do{id=_1008+"_"+(_1008 in _1005?++_1005[_1008]:_1005[_1008]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;},findWidgets:function(root,_1009){var _100a=[];function _100b(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _100c=node.getAttribute("widgetId");if(_100c){var _100d=hash[_100c];if(_100d){_100a.push(_100d);}}else{if(node!==_1009){_100b(node);}}}}};_100b(root);return _100a;},_destroyAll:function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];array.forEach(_1006.findWidgets(win.body()),function(_100e){if(!_100e._destroyed){if(_100e.destroyRecursive){_100e.destroyRecursive();}else{if(_100e.destroy){_100e.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};dijit.registry=_1006;return _1006;});},"dojo/io-query":function(){define(["./_base/lang"],function(lang){var _100f={};return {objectToQuery:function objectToQuery(map){var enc=encodeURIComponent,pairs=[];for(var name in map){var value=map[name];if(value!=_100f[name]){var _1010=enc(name)+"=";if(lang.isArray(value)){for(var i=0,l=value.length;i<l;++i){pairs.push(_1010+enc(value[i]));}}else{pairs.push(_1010+enc(value));}}}return pairs.join("&");},queryToObject:function queryToObject(str){var dec=decodeURIComponent,qp=str.split("&"),ret={},name,val;for(var i=0,l=qp.length,item;i<l;++i){item=qp[i];if(item.length){var s=item.indexOf("=");if(s<0){name=dec(item);val="";}else{name=dec(item.slice(0,s));val=dec(item.slice(s+1));}if(typeof ret[name]=="string"){ret[name]=[ret[name]];}if(lang.isArray(ret[name])){ret[name].push(val);}else{ret[name]=val;}}}return ret;}};});},"esri/main":function(){define("esri/main",["dojo","dojo/has","dojo/_base/config","dojo/i18n!esri/nls/jsapi"],function(dojo,has,_1011,_1012){var esri={};if(!_1011.noGlobals){window.esri=esri;}has.add("extend-esri",1);dojo.mixin(esri,{version:3.3,_appBaseUrl:window.location.protocol+"//"+window.location.host+window.location.pathname.substring(0,window.location.pathname.lastIndexOf(window.location.pathname.split("/")[window.location.pathname.split("/").length-1])),config:{defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:true,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{"streets":{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},"satellite":{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},"hybrid":{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:true}]},"topo":{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},"gray":{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:true}]},"oceans":{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},"osm":{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(error,io){dojo.publish("esri.Error",[error]);},proxyUrl:null,alwaysUseProxy:false,corsEnabledServers:["www.arcgis.com","tiles.arcgis.com","services.arcgis.com","static.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","qaext.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","geocodeqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","tilesdevext.arcgis.com","servicesdev.arcgis.com","geocodedev.arcgis.com"],corsDetection:true,_processedCorsServers:{},postLength:2000,timeout:60000}}}});var nua=navigator.userAgent,match;match=nua.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i);if(match){esri.isiPhone=parseFloat(match[2].replace("_","."));}match=nua.match(/Android\s+(\d+\.\d+)/i);if(match){esri.isAndroid=parseFloat(match[1]);}match=nua.match(/Fennec\/(\d+\.\d+)/i);if(match){esri.isFennec=parseFloat(match[1]);}if(nua.indexOf("BlackBerry")>=0){if(nua.indexOf("WebKit")>=0){esri.isBlackBerry=1;}}esri.isTouchEnabled=(esri.isiPhone||esri.isAndroid||esri.isBlackBerry||(esri.isFennec>=6)||(dojo.isFF&&document.createTouch))?true:false;esri._getDOMAccessor=function(_1013){var _1014="";if(dojo.isFF){_1014="Moz";}else{if(dojo.isWebKit){_1014="Webkit";}else{if(dojo.isIE){_1014="ms";}else{if(dojo.isOpera){_1014="O";}}}}return _1014+_1013.charAt(0).toUpperCase()+_1013.substr(1);};esri._hasCors=dojo.isChrome>=4||dojo.isFF>=3.5||dojo.isSafari>=4||dojo.isIE>=10;esri._hasFileUpload=window.FormData&&window.FileList;esri._hasTransforms=dojo.isIE>=9||dojo.isFF>=3.5||dojo.isChrome>=4||dojo.isSafari>=3.1||dojo.isOpera>=10.5||esri.isiPhone>=3.2||esri.isAndroid>=2.1;esri._hasTransitions=dojo.isIE>=10||dojo.isFF>=4||dojo.isChrome>=4||dojo.isSafari>=3.1||dojo.isOpera>=10.5||esri.isiPhone>=3.2||esri.isAndroid>=2.1;esri._has3DTransforms=dojo.isIE>=11||dojo.isFF>=10||dojo.isChrome>=12||dojo.isSafari>=4||esri.isiPhone>=3.2||esri.isAndroid>=3;if(esri.isAndroid<3){esri._hasTransforms=esri._hasTransitions=esri._has3DTransforms=false;}esri._css=function(_1015){var has3D=esri._has3DTransforms;if(esri._isDefined(_1015)){has3D=_1015;}else{if(has3D){if((dojo.isChrome)||(dojo.isSafari&&!esri.isiPhone)){has3D=false;}}}var _1016=has3D?"translate3d(":"translate(",_1017=has3D?(dojo.isChrome?",-1px)":",0px)"):")",_1018=has3D?"scale3d(":"scale(",_1019=has3D?",1)":")",_101a=has3D?"rotate3d(0,0,1,":"rotate(",_101b=has3D?"matrix3d(":"matrix(",_101c=has3D?",0,0,":",",_101d=has3D?",0,0,0,0,1,0,":",",_101e=has3D?",0,1)":")";return {names:{transition:(dojo.isWebKit&&"-webkit-transition")||(dojo.isFF&&"MozTransition")||(dojo.isOpera&&"OTransition")||(dojo.isIE&&"msTransition"),transform:(dojo.isWebKit&&"-webkit-transform")||(dojo.isFF&&"MozTransform")||(dojo.isOpera&&"OTransform")||(dojo.isIE&&"msTransform"),transformName:(dojo.isWebKit&&"-webkit-transform")||(dojo.isFF&&"-moz-transform")||(dojo.isOpera&&"-o-transform")||(dojo.isIE&&"-ms-transform"),origin:(dojo.isWebKit&&"-webkit-transform-origin")||(dojo.isFF&&"MozTransformOrigin")||(dojo.isOpera&&"OTransformOrigin")||(dojo.isIE&&"msTransformOrigin"),endEvent:(dojo.isWebKit&&"webkitTransitionEnd")||(dojo.isFF&&"transitionend")||(dojo.isOpera&&"oTransitionEnd")||(dojo.isIE&&"MSTransitionEnd")},translate:function(x,y){return _1016+x+"px,"+y+"px"+_1017;},scale:function(_101f){return _1018+_101f+","+_101f+_1019;},rotate:function(angle){return _101a+angle+"deg)";},matrix:function(m){return _101b+m.xx+","+m.xy+_101c+m.yx+","+m.yy+_101d+m.dx.toFixed(10)+(dojo.isFF?"px,":",")+m.dy.toFixed(10)+(dojo.isFF?"px":"")+_101e;}};};if(!_1011.noGlobals){window.esriConfig=esri.config;}esri.bundle=_1012;return esri;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(_1020,_1021,lang,has,win,xhr,dom,_1022,_1023){function _1024(_1025,id){var dfd=_1025["jsonp_"+id];if(dfd){delete _1025["jsonp_"+id];if(dfd.canceled){_1021.global[_1023._callbacksProperty][dfd.ioArgs.requestId]();}}};dojo.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _1026={get:function(args){var rDfd,self=this;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _1027=dfd.ioArgs;xhr._ioAddQueryToUrl(_1027);xhr._ioNotifyStart(dfd);rDfd=_1023.get(_1027.url,{timeout:args.timeout,jsonp:_1027.jsonp,checkString:args.checkString,ioArgs:_1027,frameDoc:args.frameDoc,canAttach:function(rDfd){_1027.requestId=rDfd.id;_1027.scriptId=rDfd.scriptId;_1027.canDelete=rDfd.canDelete;return _1026._canAttach(_1027);}},true);rDfd.then(function(){_1024(self,_1027.id);dfd.resolve(dfd);}).otherwise(function(error){_1024(self,_1027.id);dfd.ioArgs.error=error;dfd.reject(error);});return dfd;},attach:_1023._attach,remove:_1023._remove,_makeScriptDeferred:function(args,_1028){var dfd=xhr._ioSetArgs(args,_1028||this._deferredCancel,this._deferredOk,this._deferredError);var _1029=dfd.ioArgs;_1029.id=_1021._scopeName+"IoScript"+(args.callbackSuffix||(this._counter++));_1029.canDelete=false;_1029.jsonp=args.callbackParamName||args.jsonp;if(_1029.jsonp){_1029.query=_1029.query||"";if(_1029.query.length>0){_1029.query+="&";}_1029.query+=_1029.jsonp+"="+(args.frameDoc?"parent.":"")+_1021._scopeName+".io.script.jsonp_"+_1029.id+"._jsonpCallback";_1029.frameDoc=args.frameDoc;_1029.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_1029.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _102a=dfd.ioArgs;return _102a.json||_102a.scriptLoaded||_102a;},_deferredError:function(error,dfd){console.log("dojo.io.script error",error);return error;},_deadScripts:[],_counter:1,_addDeadScript:function(_102b){_1026._deadScripts.push({id:_102b.id,frameDoc:_102b.frameDoc});_102b.frameDoc=null;},_validCheck:function(dfd){var _102c=_1026._deadScripts;if(_102c&&_102c.length>0){for(var i=0;i<_102c.length;i++){_1026.remove(_102c[i].id,_102c[i].frameDoc);_102c[i].frameDoc=null;}_1026._deadScripts=[];}return true;},_ioCheck:function(dfd){var _102d=dfd.ioArgs;if(_102d.json||(_102d.scriptLoaded&&!_102d.args.checkString)){return true;}var _102e=_102d.args.checkString;return _102e&&eval("typeof("+_102e+") != 'undefined'");},_resHandle:function(dfd){if(_1026._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;_1021.global[_1023._callbacksProperty][this.ioArgs.requestId](json);}};lang.setObject("dojo.io.script",_1026);return _1026;});},"dojo/_base/loader":function(){define(["./kernel","../has","require","module","./json","./lang","./array"],function(dojo,has,_102f,_1030,json,lang,array){if(!1){console.error("cannot load the Dojo v1.x loader with a foreign loader");return 0;}1||has.add("dojo-fast-sync-require",1);var _1031=function(id){return {src:_1030.id,id:id};},_1032=function(name){return name.replace(/\./g,"/");},_1033=/\/\/>>built/,_1034=[],_1035=[],_1036=function(mid,_1037,_1038){_1034.push(_1038);array.forEach(mid.split(","),function(mid){var _1039=_103a(mid,_1037.module);_1035.push(_1039);_103b(_1039);});_103c();},_103c=(1?function(){var _103d,mid;for(mid in _103e){_103d=_103e[mid];if(_103d.noReqPluginCheck===undefined){_103d.noReqPluginCheck=/loadInit\!/.test(mid)||/require\!/.test(mid)?1:0;}if(!_103d.executed&&!_103d.noReqPluginCheck&&_103d.injected==_103f){return;}}_1040(function(){var _1041=_1034;_1034=[];array.forEach(_1041,function(cb){cb(1);});});}:(function(){var _1042,_1043=function(m){_1042[m.mid]=1;for(var t,_1044,deps=m.deps||[],i=0;i<deps.length;i++){_1044=deps[i];if(!(t=_1042[_1044.mid])){if(t===0||!_1043(_1044)){_1042[m.mid]=0;return false;}}}return true;};return function(){var _1045,mid;_1042={};for(mid in _103e){_1045=_103e[mid];if(_1045.executed||_1045.noReqPluginCheck){_1042[mid]=1;}else{if(_1045.noReqPluginCheck!==0){_1045.noReqPluginCheck=/loadInit\!/.test(mid)||/require\!/.test(mid)?1:0;}if(_1045.noReqPluginCheck){_1042[mid]=1;}else{if(_1045.injected!==_106d){_1042[mid]=0;}}}}for(var t,i=0,end=_1035.length;i<end;i++){_1045=_1035[i];if(!(t=_1042[_1045.mid])){if(t===0||!_1043(_1045)){return;}}}_1040(function(){var _1046=_1034;_1034=[];array.forEach(_1046,function(cb){cb(1);});});};})()),_1047=function(mid,_1048,_1049){_1048([mid],function(_104a){_1048(_104a.names,function(){for(var _104b="",args=[],i=0;i<arguments.length;i++){_104b+="var "+_104a.names[i]+"= arguments["+i+"]; ";args.push(arguments[i]);}eval(_104b);var _104c=_1048.module,_104d=[],_104e,_104f={provide:function(_1050){_1050=_1032(_1050);var _1051=_103a(_1050,_104c);if(_1051!==_104c){_1072(_1051);}},require:function(_1052,_1053){_1052=_1032(_1052);_1053&&(_103a(_1052,_104c).result=_106e);_104d.push(_1052);},requireLocalization:function(_1054,_1055,_1056){if(!_104e){_104e=["dojo/i18n"];}_1056=(_1056||dojo.locale).toLowerCase();_1054=_1032(_1054)+"/nls/"+(/root/i.test(_1056)?"":_1056+"/")+_1032(_1055);if(_103a(_1054,_104c).isXd){_104e.push("dojo/i18n!"+_1054);}},loadInit:function(f){f();}},hold={},p;try{for(p in _104f){hold[p]=dojo[p];dojo[p]=_104f[p];}_104a.def.apply(null,args);}catch(e){_1057("error",[_1031("failedDojoLoadInit"),e]);}finally{for(p in _104f){dojo[p]=hold[p];}}if(_104e){_104d=_104d.concat(_104e);}if(_104d.length){_1036(_104d.join(","),_1048,_1049);}else{_1049();}});});},_1058=function(text,_1059,_105a){var _105b=/\(|\)/g,_105c=1,match;_105b.lastIndex=_1059;while((match=_105b.exec(text))){if(match[0]==")"){_105c-=1;}else{_105c+=1;}if(_105c==0){break;}}if(_105c!=0){throw "unmatched paren around character "+_105b.lastIndex+" in: "+text;}return [dojo.trim(text.substring(_105a,_105b.lastIndex))+";\n",_105b.lastIndex];},_105d=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,_105e=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,_105f=/(^|\s)(require|define)\s*\(/m,_1060=function(text,_1061){var match,_1062,_1063,_1064,_1065=[],_1066=[],_1067=[];_1061=_1061||text.replace(_105d,function(match){_105e.lastIndex=_105f.lastIndex=0;return (_105e.test(match)||_105f.test(match))?"":match;});while((match=_105e.exec(_1061))){_1062=_105e.lastIndex;_1063=_1062-match[0].length;_1064=_1058(_1061,_1062,_1063);if(match[2]=="loadInit"){_1065.push(_1064[0]);}else{_1066.push(_1064[0]);}_105e.lastIndex=_1064[1];}_1067=_1065.concat(_1066);if(_1067.length||!_105f.test(_1061)){return [text.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),_1067.join(""),_1067];}else{return 0;}},_1068=function(_1069,text){var _106a,id,names=[],_106b=[];if(_1033.test(text)||!(_106a=_1060(text))){return 0;}id=_1069.mid+"-*loadInit";for(var p in _103a("dojo",_1069).result.scopeMap){names.push(p);_106b.push("\""+p+"\"");}return "// xdomain rewrite of "+_1069.mid+"\n"+"define('"+id+"',{\n"+"\tnames:"+dojo.toJson(names)+",\n"+"\tdef:function("+names.join(",")+"){"+_106a[1]+"}"+"});\n\n"+"define("+dojo.toJson(names.concat(["dojo/loadInit!"+id]))+", function("+names.join(",")+"){\n"+_106a[0]+"});";},_106c=_102f.initSyncLoader(_1036,_103c,_1068),sync=_106c.sync,_103f=_106c.requested,_106d=_106c.arrived,_106e=_106c.nonmodule,_106f=_106c.executing,_1070=_106c.executed,_1071=_106c.syncExecStack,_103e=_106c.modules,execQ=_106c.execQ,_103a=_106c.getModule,_103b=_106c.injectModule,_1072=_106c.setArrived,_1057=_106c.signal,_1073=_106c.finishExec,_1074=_106c.execModule,_1075=_106c.getLegacyMode,_1040=_106c.guardCheckComplete;_1036=_106c.dojoRequirePlugin;dojo.provide=function(mid){var _1076=_1071[0],_1077=lang.mixin(_103a(_1032(mid),_102f.module),{executed:_106f,result:lang.getObject(mid,true)});_1072(_1077);if(_1076){(_1076.provides||(_1076.provides=[])).push(function(){_1077.result=lang.getObject(mid);delete _1077.provides;_1077.executed!==_1070&&_1073(_1077);});}return _1077.result;};has.add("config-publishRequireResult",1,0,0);dojo.require=function(_1078,_1079){function _107a(mid,_107b){var _107c=_103a(_1032(mid),_102f.module);if(_1071.length&&_1071[0].finish){_1071[0].finish.push(mid);return undefined;}if(_107c.executed){return _107c.result;}_107b&&(_107c.result=_106e);var _107d=_1075();_103b(_107c);_107d=_1075();if(_107c.executed!==_1070&&_107c.injected===_106d){_106c.guardCheckComplete(function(){_1074(_107c);});}if(_107c.executed){return _107c.result;}if(_107d==sync){if(_107c.cjs){execQ.unshift(_107c);}else{_1071.length&&(_1071[0].finish=[mid]);}}else{execQ.push(_107c);}return undefined;};var _107e=_107a(_1078,_1079);if(has("config-publishRequireResult")&&!lang.exists(_1078)&&_107e!==undefined){lang.setObject(_1078,_107e);}return _107e;};dojo.loadInit=function(f){f();};dojo.registerModulePath=function(_107f,_1080){var paths={};paths[_107f.replace(/\./g,"/")]=_1080;_102f({paths:paths});};dojo.platformRequire=function(_1081){var _1082=(_1081.common||[]).concat(_1081[dojo._name]||_1081["default"]||[]),temp;while(_1082.length){if(lang.isArray(temp=_1082.shift())){dojo.require.apply(dojo,temp);}else{dojo.require(temp);}}};dojo.requireIf=dojo.requireAfterIf=function(_1083,_1084,_1085){if(_1083){dojo.require(_1084,_1085);}};dojo.requireLocalization=function(_1086,_1087,_1088){_102f(["../i18n"],function(i18n){i18n.getLocalization(_1086,_1087,_1088);});};return {extractLegacyApiApplications:_1060,require:_1036,loadInit:_1047};});},"dojo/date/locale":function(){define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,array,date,_1089,i18n,_108a,_108b,_108c,_108d){var _108e={};lang.setObject(_108d.id.replace(/\//g,"."),_108e);function _108f(_1090,_1091,_1092,_1093){return _1093.replace(/([a-z])\1*/ig,function(match){var s,pad,c=match.charAt(0),l=match.length,_1094=["abbr","wide","narrow"];switch(c){case "G":s=_1091[(l<4)?"eraAbbr":"eraNames"][_1090.getFullYear()<0?0:1];break;case "y":s=_1090.getFullYear();switch(l){case 1:break;case 2:if(!_1092.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_1090.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_1090.getMonth();if(l<3){s=m+1;pad=true;}else{var propM=["months",c=="L"?"standAlone":"format",_1094[l-3]].join("-");s=_1091[propM][m];}break;case "w":var _1095=0;s=_108e._getWeekOfYear(_1090,_1095);pad=true;break;case "d":s=_1090.getDate();pad=true;break;case "D":s=_108e._getDayOfYear(_1090);pad=true;break;case "e":case "c":var d=_1090.getDay();if(l<2){s=(d-_1089.getFirstDayOfWeek(_1092.locale)+8)%7;break;}case "E":d=_1090.getDay();if(l<3){s=d+1;pad=true;}else{var propD=["days",c=="c"?"standAlone":"format",_1094[l-3]].join("-");s=_1091[propD][d];}break;case "a":var _1096=_1090.getHours()<12?"am":"pm";s=_1092[_1096]||_1091["dayPeriods-format-wide-"+_1096];break;case "h":case "H":case "K":case "k":var h=_1090.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_1090.getMinutes();pad=true;break;case "s":s=_1090.getSeconds();pad=true;break;case "S":s=Math.round(_1090.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_108e._getZone(_1090,true,_1092);if(s){break;}l=4;case "Z":var _1097=_108e._getZone(_1090,false,_1092);var tz=[(_1097<=0?"+":"-"),_108b.pad(Math.floor(Math.abs(_1097)/60),2),_108b.pad(Math.abs(_1097)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_1093);}if(pad){s=_108b.pad(s,l);}return s;});};_108e._getZone=function(_1098,_1099,_109a){if(_1099){return date.getTimezoneName(_1098);}else{return _1098.getTimezoneOffset();}};_108e.format=function(_109b,_109c){_109c=_109c||{};var _109d=i18n.normalizeLocale(_109c.locale),_109e=_109c.formatLength||"short",_109f=_108e._getGregorianBundle(_109d),str=[],sauce=lang.hitch(this,_108f,_109b,_109f,_109c);if(_109c.selector=="year"){return _10a0(_109f["dateFormatItem-yyyy"]||"yyyy",sauce);}var _10a1;if(_109c.selector!="date"){_10a1=_109c.timePattern||_109f["timeFormat-"+_109e];if(_10a1){str.push(_10a0(_10a1,sauce));}}if(_109c.selector!="time"){_10a1=_109c.datePattern||_109f["dateFormat-"+_109e];if(_10a1){str.push(_10a0(_10a1,sauce));}}return str.length==1?str[0]:_109f["dateTimeFormat-"+_109e].replace(/\{(\d+)\}/g,function(match,key){return str[key];});};_108e.regexp=function(_10a2){return _108e._parseInfo(_10a2).regexp;};_108e._parseInfo=function(_10a3){_10a3=_10a3||{};var _10a4=i18n.normalizeLocale(_10a3.locale),_10a5=_108e._getGregorianBundle(_10a4),_10a6=_10a3.formatLength||"short",_10a7=_10a3.datePattern||_10a5["dateFormat-"+_10a6],_10a8=_10a3.timePattern||_10a5["timeFormat-"+_10a6],_10a9;if(_10a3.selector=="date"){_10a9=_10a7;}else{if(_10a3.selector=="time"){_10a9=_10a8;}else{_10a9=_10a5["dateTimeFormat-"+_10a6].replace(/\{(\d+)\}/g,function(match,key){return [_10a8,_10a7][key];});}}var _10aa=[],re=_10a0(_10a9,lang.hitch(this,_10ab,_10aa,_10a5,_10a3));return {regexp:re,tokens:_10aa,bundle:_10a5};};_108e.parse=function(value,_10ac){var _10ad=/[\u200E\u200F\u202A\u202E]/g,info=_108e._parseInfo(_10ac),_10ae=info.tokens,_10af=info.bundle,re=new RegExp("^"+info.regexp.replace(_10ad,"")+"$",info.strict?"":"i"),match=re.exec(value&&value.replace(_10ad,""));if(!match){return null;}var _10b0=["abbr","wide","narrow"],_10b1=[1970,0,1,0,0,0,0],amPm="",valid=array.every(match,function(v,i){if(!i){return true;}var token=_10ae[i-1],l=token.length,c=token.charAt(0);switch(c){case "y":if(l!=2&&_10ac.strict){_10b1[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_10b2=year.substring(0,2)*100,_10b3=Math.min(Number(year.substring(2,4))+20,99);_10b1[0]=(v<_10b3)?_10b2+v:_10b2-100+v;}else{if(_10ac.strict){return false;}_10b1[0]=v;}}break;case "M":case "L":if(l>2){var _10b4=_10af["months-"+(c=="L"?"standAlone":"format")+"-"+_10b0[l-3]].concat();if(!_10ac.strict){v=v.replace(".","").toLowerCase();_10b4=array.map(_10b4,function(s){return s.replace(".","").toLowerCase();});}v=array.indexOf(_10b4,v);if(v==-1){return false;}}else{v--;}_10b1[1]=v;break;case "E":case "e":case "c":var days=_10af["days-"+(c=="c"?"standAlone":"format")+"-"+_10b0[l-3]].concat();if(!_10ac.strict){v=v.toLowerCase();days=array.map(days,function(d){return d.toLowerCase();});}v=array.indexOf(days,v);if(v==-1){return false;}break;case "D":_10b1[1]=0;case "d":_10b1[2]=v;break;case "a":var am=_10ac.am||_10af["dayPeriods-format-wide-am"],pm=_10ac.pm||_10af["dayPeriods-format-wide-pm"];if(!_10ac.strict){var _10b5=/\./g;v=v.replace(_10b5,"").toLowerCase();am=am.replace(_10b5,"").toLowerCase();pm=pm.replace(_10b5,"").toLowerCase();}if(_10ac.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_10b1[3]=v;break;case "m":_10b1[4]=v;break;case "s":_10b1[5]=v;break;case "S":_10b1[6]=v;}return true;});var hours=+_10b1[3];if(amPm==="p"&&hours<12){_10b1[3]=hours+12;}else{if(amPm==="a"&&hours==12){_10b1[3]=0;}}var _10b6=new Date(_10b1[0],_10b1[1],_10b1[2],_10b1[3],_10b1[4],_10b1[5],_10b1[6]);if(_10ac.strict){_10b6.setFullYear(_10b1[0]);}var _10b7=_10ae.join(""),_10b8=_10b7.indexOf("d")!=-1,_10b9=_10b7.indexOf("M")!=-1;if(!valid||(_10b9&&_10b6.getMonth()>_10b1[1])||(_10b8&&_10b6.getDate()>_10b1[2])){return null;}if((_10b9&&_10b6.getMonth()<_10b1[1])||(_10b8&&_10b6.getDate()<_10b1[2])){_10b6=date.add(_10b6,"hour",1);}return _10b6;};function _10a0(_10ba,_10bb,_10bc,_10bd){var _10be=function(x){return x;};_10bb=_10bb||_10be;_10bc=_10bc||_10be;_10bd=_10bd||_10be;var _10bf=_10ba.match(/(''|[^'])+/g),_10c0=_10ba.charAt(0)=="'";array.forEach(_10bf,function(chunk,i){if(!chunk){_10bf[i]="";}else{_10bf[i]=(_10c0?_10bc:_10bb)(chunk.replace(/''/g,"'"));_10c0=!_10c0;}});return _10bd(_10bf.join(""));};function _10ab(_10c1,_10c2,_10c3,_10c4){_10c4=_108a.escapeString(_10c4);if(!_10c3.strict){_10c4=_10c4.replace(" a"," ?a");}return _10c4.replace(/([a-z])\1*/ig,function(match){var s,c=match.charAt(0),l=match.length,p2="",p3="";if(_10c3.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_10c3.am||_10c2["dayPeriods-format-wide-am"],pm=_10c3.pm||_10c2["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_10c3.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_10c1){_10c1.push(match);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _10c5=[];_108e.addCustomFormats=function(_10c6,_10c7){_10c5.push({pkg:_10c6,name:_10c7});};_108e._getGregorianBundle=function(_10c8){var _10c9={};array.forEach(_10c5,function(desc){var _10ca=i18n.getLocalization(desc.pkg,desc.name,_10c8);_10c9=lang.mixin(_10c9,_10ca);},this);return _10c9;};_108e.addCustomFormats(_108d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_108e.getNames=function(item,type,_10cb,_10cc){var label,_10cd=_108e._getGregorianBundle(_10cc),props=[item,_10cb,type];if(_10cb=="standAlone"){var key=props.join("-");label=_10cd[key];if(label[0]==1){label=undefined;}}props[1]="format";return (label||_10cd[props.join("-")]).concat();};_108e.isWeekend=function(_10ce,_10cf){var _10d0=_1089.getWeekend(_10cf),day=(_10ce||new Date()).getDay();if(_10d0.end<_10d0.start){_10d0.end+=7;if(day<_10d0.start){day+=7;}}return day>=_10d0.start&&day<=_10d0.end;};_108e._getDayOfYear=function(_10d1){return date.difference(new Date(_10d1.getFullYear(),0,1,_10d1.getHours()),_10d1)+1;};_108e._getWeekOfYear=function(_10d2,_10d3){if(arguments.length==1){_10d3=0;}var _10d4=new Date(_10d2.getFullYear(),0,1).getDay(),adj=(_10d4-_10d3+7)%7,week=Math.floor((_108e._getDayOfYear(_10d2)+adj-1)/7);if(_10d4==_10d3){week++;}return week;};return _108e;});},"dijit/_base/wai":function(){define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(_10d5,lang,dijit){var _10d6={hasWaiRole:function(elem,role){var _10d7=this.getWaiRole(elem);return role?(_10d7.indexOf(role)>-1):(_10d7.length>0);},getWaiRole:function(elem){return lang.trim((_10d5.get(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){_10d5.set(elem,"role",role);},removeWaiRole:function(elem,role){var _10d8=_10d5.get(elem,"role");if(!_10d8){return;}if(role){var t=lang.trim((" "+_10d8+" ").replace(" "+role+" "," "));_10d5.set(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,state){return elem.hasAttribute?elem.hasAttribute("aria-"+state):!!elem.getAttribute("aria-"+state);},getWaiState:function(elem,state){return elem.getAttribute("aria-"+state)||"";},setWaiState:function(elem,state,value){elem.setAttribute("aria-"+state,value);},removeWaiState:function(elem,state){elem.removeAttribute("aria-"+state);}};lang.mixin(dijit,_10d6);return dijit;});},"esri/utils":function(){define("esri/utils",["dijit","dojo","dojox","dojo/require!dojo/io/script,esri/graphic,dojo/_base/url"],function(dijit,dojo,dojox){dojo.provide("esri.utils");dojo.require("dojo.io.script");dojo.require("esri.graphic");dojo.require("dojo._base.url");esri.show=function(node){if(node){node.style.display="block";}};esri.hide=function(node){if(node){node.style.display="none";}};esri.toggle=function(node){node.style.display=node.style.display==="none"?"block":"none";};esri.valueOf=function(array,value){var i;for(i in array){if(array[i]==value){return i;}}return null;};esri.substitute=(function(){var _10d9="${*}",_10da=["NumberFormat","DateString","DateFormat"];function _10db(value){return esri._isDefined(value)?value:"";};function exec(key,data,_10dc){var parts=_10dc.match(/([^\(]+)(\([^\)]+\))?/i);var _10dd=dojo.trim(parts[1]);var args=dojo.fromJson((parts[2]?dojo.trim(parts[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})"));var value=data[key];if(dojo.indexOf(_10da,_10dd)===-1){var ref=dojo.getObject(_10dd);if(dojo.isFunction(ref)){value=ref(value,key,data);}}else{if(typeof value==="number"||(typeof value==="string"&&value&&!isNaN(Number(value)))){value=Number(value);switch(_10dd){case "NumberFormat":if(dojo.getObject("dojo.number.format")){return dojo.number.format(value,args);}break;case "DateString":var _10de=new Date(value);if(args.local||args.systemLocale){if(args.systemLocale){return _10de.toLocaleDateString()+(args.hideTime?"":(" "+_10de.toLocaleTimeString()));}else{return _10de.toDateString()+(args.hideTime?"":(" "+_10de.toTimeString()));}}else{_10de=_10de.toUTCString();if(args.hideTime){_10de=_10de.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"");}return _10de;}break;case "DateFormat":if(dojo.getObject("dojo.date.locale.format")){return dojo.date.locale.format(new Date(value),args);}break;}}}return _10db(value);};return function(data,_10df,_10e0){var first,_10e1,_10e2;if(esri._isDefined(_10e0)){if(dojo.isObject(_10e0)){first=_10e0.first;_10e1=_10e0.dateFormat;_10e2=_10e0.numberFormat;}else{first=_10e0;}}if(!_10df||_10df===_10d9){var s=[],val,i;for(i in data){val=data[i];if(_10e1&&dojo.indexOf(_10e1.properties||"",i)!==-1){val=exec(i,data,_10e1.formatter||"DateString");}else{if(_10e2&&dojo.indexOf(_10e2.properties||"",i)!==-1){val=exec(i,data,_10e2.formatter||"NumberFormat");}}s.push(i+" = "+_10db(val)+"<br/>");if(first){break;}}return s.join("");}else{return dojo.replace(_10df,dojo.hitch({obj:data},function(_10e3,key){var _10e4=key.split(":");if(_10e4.length>1){key=_10e4[0];_10e4.shift();return exec(key,this.obj,_10e4.join(":"));}else{if(_10e1&&dojo.indexOf(_10e1.properties||"",key)!==-1){return exec(key,this.obj,_10e1.formatter||"DateString");}if(_10e2&&dojo.indexOf(_10e2.properties||"",key)!==-1){return exec(key,this.obj,_10e2.formatter||"NumberFormat");}}return _10db(this.obj[key]);}),/\$\{([^\}]+)\}/g);}};}());esri.documentBox=dojo.isIE?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight};esri.urlToObject=function(url){var iq=url.indexOf("?");if(iq===-1){return {path:url,query:null};}else{return {path:url.substring(0,iq),query:dojo.queryToObject(url.substring(iq+1))};}};esri._getProxyUrl=function(_10e5){var _10e6=esri.config.defaults.io.proxyUrl,_10e7,fixed,_10e8;if(!_10e6){console.log(esri.bundle.io.proxyNotSet);throw new Error(esri.bundle.io.proxyNotSet);}if(_10e5&&window.location.href.toLowerCase().indexOf("https:")!==0){fixed=_10e6;if(fixed.toLowerCase().indexOf("http")!==0){fixed=esri._getAbsoluteUrl(fixed);}fixed=fixed.replace(/^http:/i,"https:");if(esri._canDoXOXHR(fixed)){_10e6=fixed;_10e8=1;}}_10e7=esri.urlToObject(_10e6);_10e7._xo=_10e8;return _10e7;};esri._getProxiedUrl=function(url){if(esri.config.defaults.io.alwaysUseProxy){var _10e9=esri._getProxyUrl(),_10ea=esri.urlToObject(url);url=_10e9.path+"?"+_10ea.path;var _10eb=dojo.objectToQuery(dojo.mixin(_10e9.query||{},_10ea.query));if(_10eb){url+=("?"+_10eb);}}return url;};esri._hasSameOrigin=function(url1,url2,_10ec){url1=url1.toLowerCase();url2=url2.toLowerCase();var _10ed=window.location.href.toLowerCase();url1=url1.indexOf("http")===0?new dojo._Url(url1):(_10ed=new dojo._Url(_10ed));url2=url2.indexOf("http")===0?new dojo._Url(url2):(dojo.isString(_10ed)?new dojo._Url(_10ed):_10ed);return ((_10ec||(url1.scheme===url2.scheme))&&url1.host===url2.host&&url1.port===url2.port);};esri._canDoXOXHR=function(url,_10ee){var canDo=false,_10ef=esri._hasSameOrigin,_10f0=esri.config.defaults.io.corsEnabledServers,_10f1,found=-1;if(esri._hasCors&&_10f0&&_10f0.length){canDo=dojo.some(_10f0,function(_10f2,idx){_10f1=(dojo.trim(_10f2).toLowerCase().indexOf("http")!==0);if(_10ef(url,_10f1?("http://"+_10f2):_10f2)||(_10f1&&_10ef(url,"https://"+_10f2))){found=idx;return true;}return false;});}return _10ee?found:canDo;};esri.request=function(req,_10f3){var dfd,form=req.form,_10f4=form&&form.append,_10f5=form&&(form.elements?dojo.some(form.elements,function(el){return el.type==="file";}):_10f4),_10f6=(req.url.toLowerCase().indexOf("token=")!==-1||(req.content&&req.content.token)||(_10f5&&dojo.some(form.elements,function(el){return el.name==="token";})))?1:0;esri._detectCors(req.url);if(req._usrDfd){dfd=req._usrDfd;}else{dfd=new dojo.Deferred(esri._dfdCanceller);dfd.addBoth(function(_10f7){if(_10f7&&(!dojo.isIE||!_10f7.nodeType)){_10f7._ssl=req._ssl;}});var ld=req.load,_10f8=req.error;if(ld){dfd.addCallback(function(value){var _10f9=dfd._pendingDfd,_10fa=_10f9&&_10f9.ioArgs,args=_10fa&&_10fa.args;return ld.call(args,value,_10fa);});}if(_10f8){dfd.addErrback(function(value){var _10fb=dfd._pendingDfd,_10fc=_10fb&&_10fb.ioArgs,args=_10fc&&_10fc.args;return _10f8.call(args,value,_10fc);});}}var _10fd=_10f3&&_10f3.disableIdentityLookup;if(esri.id&&!_10f6&&!req._token&&!esri.id._isPublic(req.url)&&!_10fd){var _10fe=esri.id.findCredential(req.url);if(_10fe){req._token=_10fe.token;req._ssl=_10fe.ssl;}}dfd._pendingDfd=esri._request(req,_10f3,_10f5,_10f4);if(!dfd._pendingDfd){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;var err=new Error("Deferred object is missing");err.log=dojo.config.isDebug;req._usrDfd=null;dfd.errback(err);dfd._pendingDfd=null;return dfd;}dfd._pendingDfd.addCallback(function(_10ff){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.callback(_10ff);dfd._pendingDfd=null;}).addErrback(function(error){if(error&&error.code==403&&error.message&&error.message.toLowerCase().indexOf("ssl")>-1&&error.message.toLowerCase().indexOf("permission")===-1){if(!req._ssl){req._ssl=req._sslFromServer=true;req._usrDfd=dfd;esri.request(req,_10f3);return;}}else{if(error&&error.status==415){var found=esri._disableCors(req.url);if(!req._err415){req._err415=1;req._usrDfd=dfd;esri.request(req,_10f3);return;}}else{if(esri.id&&dojo.indexOf(esri.id._errorCodes,error.code)!==-1&&!esri.id._isPublic(req.url)&&!_10fd){dfd._pendingDfd=esri.id.getCredential(req.url,{token:req._token,error:error});dfd._pendingDfd.addCallback(function(_1100){req._token=_1100.token;req._usrDfd=dfd;req._ssl=req._sslFromServer||_1100.ssl;esri.request(req,_10f3);}).addErrback(function(error){req._usrDfd=null;dfd.errback(error);dfd._pendingDfd=null;});return;}}}dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.errback(error);dfd._pendingDfd=null;});return dfd;};esri._request=function(req,_1101,_1102,_1103){var _1104=false,_1105=false;if(esri._isDefined(_1101)){if(dojo.isObject(_1101)){_1104=!!_1101.useProxy;_1105=!!_1101.usePost;}else{_1104=!!_1101;}}req=dojo.mixin({},req);if(req._ssl){req.url=req.url.replace(/^http:/i,"https:");}var _1106=req.content,path=req.url,form=_1102&&req.form,cfgIO=esri.config.defaults.io;req.load=function(_1107){var err;if(_1107){if(_1107.error){err=dojo.mixin(new Error(),_1107.error);err.log=dojo.config.isDebug;}else{if(_1107.status==="error"){err=dojo.mixin(new Error(),{code:_1107.code,message:_1107.messages&&_1107.messages.join&&_1107.messages.join(".")});err.log=dojo.config.isDebug;}}}return err||_1107;};req.error=function(error,io){if(io&&io.xhr){io.xhr.abort();}if(!(error instanceof Error)){error=dojo.mixin(new Error(),error);}error.log=dojo.config.isDebug;cfgIO.errorHandler(error,io);return error;};if(req._token){req.content=req.content||{};req.content.token=req._token;}var len=0;if(_1106&&path){len=dojo.objectToQuery(_1106).length+path.length+1;}req.timeout=esri._isDefined(req.timeout)?req.timeout:cfgIO.timeout;req.handleAs=req.handleAs||"json";try{var _1108,_1109,_110a=esri._reqPreCallback,_110b=esri._canDoXOXHR(req.url)&&!(/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(req.url)),_110c=(esri._hasSameOrigin(req.url,window.location.href)||_110b),_110d=(_1105||_1102||len>cfgIO.postLength)?true:false,_110e=(!_110c&&req.handleAs.indexOf("json")!==-1&&req.callbackParamName&&!_1102)?true:false,_110f=(cfgIO.alwaysUseProxy||_1104||((!_110e||_110d)&&!_110c))?true:false;if(_1102&&!esri._hasFileUpload&&!_110f&&_110b){_110f=true;}if(_110f){_1108=esri._getProxyUrl(dojo.trim(path).toLowerCase().indexOf("https:")===0);_1109=_1108.path;if(_1108._xo){_110b=true;}if(!_110d&&(_1109.length+1+len)>cfgIO.postLength){_110d=true;}req.url=_1109+"?"+path;if(_110d){req.content=dojo.mixin(_1108.query||{},_1106);}else{var _1110=dojo.objectToQuery(dojo.mixin(_1108.query||{},_1106));if(_1110){req.url+=("?"+_1110);}req.content=null;}}if(_110e&&!_110d){if(!esri._isDefined(req.isAsync)&&dojo.isFF<4){req.isAsync=true;}return dojo.io.script.get(_110a?_110a(req):req);}else{var hdrs=req.headers;if(_110b&&(!hdrs||!hdrs.hasOwnProperty("X-Requested-With"))){hdrs=req.headers=(hdrs||{});hdrs["X-Requested-With"]=null;}if(_1102){var _1111=req.callbackParamName||"callback.html",_1112=req.callbackElementName||"textarea",param,found,_1113,i,il=form.elements?form.elements.length:0,el;_1106=req.content;if(_1106){for(param in _1106){_1113=_1106[param];if(esri._isDefined(_1113)){found=null;for(i=0;i<il;i++){el=form.elements[i];if(el.name===param){found=el;break;}}if(found){found.value=_1113;}else{if(_1103){form.append(param,_1113);}else{form.appendChild(dojo.create("input",{type:"hidden",name:param,value:_1113}));}}}}}if(esri._hasFileUpload){dojo.forEach(form.elements,function(el){if(el.name===_1111){form.removeChild(el);}});req.contentType=false;req.postData=_1103?form:new FormData(form);delete req.form;}else{form.enctype="multipart/form-data";if(dojo.isIE<9){form.encoding="multipart/form-data";}form.method="post";if(!dojo.some(form.elements,function(el){return el.name===_1111;})){form.appendChild(dojo.create("input",{type:"hidden",name:_1111,value:_1112}));}if(path.toLowerCase().indexOf("addattachment")!==-1||path.toLowerCase().indexOf("updateattachment")!==-1){req.url=path+((path.indexOf("?")===-1)?"?":"&")+_1111+"="+_1112;if(_110f){req.url=_1109+"?"+req.url;}}delete req.content;}}req=_110a?_110a(req):req;if(_110d){if(_1102&&!esri._hasFileUpload){return dojo.io.iframe.send(req);}else{return dojo.rawXhrPost(req);}}else{return dojo.xhrGet(req);}}}catch(e){var dfd=new dojo.Deferred();dfd.errback(req.error(e));return dfd;}};esri._disableCors=function(url){var _1114=esri.config.defaults.io,_1115=_1114._processedCorsServers,_1116=new dojo._Url(url),found=-1;_1116=(_1116.host+(_1116.port?(":"+_1116.port):"")).toLowerCase();found=esri._canDoXOXHR(url,true);if(found>-1){_1114.corsEnabledServers.splice(found,1);}_1115[_1116]=1;return found;};esri._detectCors=function(url){var _1117=esri.config.defaults.io,_1118=_1117._processedCorsServers;if(!_1117.corsDetection){return;}try{var _1119=new dojo._Url(url);_1119=(_1119.host+(_1119.port?(":"+_1119.port):"")).toLowerCase();if(esri._hasCors&&(url&&url.toLowerCase().indexOf("/rest/services")!==-1)&&(!esri._hasSameOrigin(url,window.location.href)&&!esri._canDoXOXHR(url))&&!_1118[_1119]){_1118[_1119]=-1;dojo.xhrGet({url:url.substring(0,url.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info",content:{f:"json"},failOk:true,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(_111a){if(_111a){_1118[_1119]=2;if(!esri._canDoXOXHR(url)){_1117.corsEnabledServers.push(_1119);}}else{_1118[_1119]=1;}},function(error){_1118[_1119]=1;});}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support");}};esri.setRequestPreCallback=function(_111b){esri._reqPreCallback=_111b;};esri._getParts=function(arr,obj,cb){return [dojo.isString(arr)?arr.split(""):arr,obj||dojo.global,dojo.isString(cb)?new Function("item","index","array",cb):cb];};esri.filter=function(arr,_111c,_111d){var _111e=esri._getParts(arr,_111d,_111c),_111f={},i;arr=_111e[0];for(i in arr){if(_111e[2].call(_111e[i],arr[i],i,arr)){_111f[i]=arr[i];}}return _111f;};esri.TileUtils=(function(){function _1120(map,ti,_1121){var wd=map.width,ht=map.height,ew=_1121.xmax-_1121.xmin,eh=_1121.ymax-_1121.ymin,_1122=map.getMinZoom(),_1123=map.getMaxZoom(),ed=-1,lods=ti.lods,i,abs=Math.abs,lod,cl,ced;_1122=(_1122>-1)?_1122:0;_1123=(_1123>-1)?_1123:(lods.length-1);for(i=_1122;i<=_1123;i++){cl=lods[i];ced=ew>eh?abs(eh-(ht*cl.resolution)):abs(ew-(wd*cl.resolution));if(ed<0||ced<=ed){lod=cl;ed=ced;}else{break;}}return lod;};function _1124(map,_1125,lod){var res=lod.resolution,cx=(_1125.xmin+_1125.xmax)/2,cy=(_1125.ymin+_1125.ymax)/2,w2res=(map.width/2)*res,h2res=(map.height/2)*res;return new esri.geometry.Extent(cx-(w2res),cy-(h2res),cx+(w2res),cy+(h2res),_1125.spatialReference);};function _1126(map,ti,point,lod){var res=lod.resolution,tw=ti.width,th=ti.height,to=ti.origin,mv=map.__visibleDelta,floor=Math.floor,tmw=tw*res,tmh=th*res,tr=floor((to.y-point.y)/tmh),tc=floor((point.x-to.x)/tmw),tmox=to.x+(tc*tmw),tmoy=to.y-(tr*tmh),oX=floor(Math.abs((point.x-tmox)*tw/tmw))+mv.x,oY=floor(Math.abs((point.y-tmoy)*th/tmh))+mv.y;return {point:point,coords:{row:tr,col:tc},offsets:{x:oX,y:oY}};};return {_addFrameInfo:function(_1127,_1128){var _1129,_112a,world=2*_1128.origin[1],m180=_1128.origin[0],_112b=_1127.origin.x,_112c=_1127.width,_112d;dojo.forEach(_1127.lods,function(lod){_1129=Math.round(world/lod.resolution);_112a=Math.ceil(_1129/_112c);_112d=Math.floor((m180-_112b)/(_112c*lod.resolution));if(!lod._frameInfo){lod._frameInfo=[_112a,_112d,_112d+_112a-1,_1129];}});},getContainingTileCoords:function(ti,point,lod){var to=ti.origin,res=lod.resolution,tmw=ti.width*res,tmh=ti.height*res,tc=Math.floor((point.x-to.x)/tmw),tr=Math.floor((to.y-point.y)/tmh);return {row:tr,col:tc};},getCandidateTileInfo:function(map,ti,_112e){var lod=_1120(map,ti,_112e),adj=_1124(map,_112e,lod),ct=_1126(map,ti,new esri.geometry.Point(adj.xmin,adj.ymax,_112e.spatialReference),lod);return {tile:ct,lod:lod,extent:adj};},getTileExtent:function(ti,level,row,col){var to=ti.origin,lod=ti.lods[level],res=lod.resolution,tw=ti.width,th=ti.height;return new esri.geometry.Extent(((col*res)*tw)+to.x,to.y-((row+1)*res)*th,(((col+1)*res)*tw)+to.x,to.y-((row*res)*th),ti.spatialReference);}};}());esri.graphicsExtent=function(_112f){var g=_112f[0].geometry,_1130=g.getExtent(),ext,i,il=_112f.length;if(_1130===null){_1130=new esri.geometry.Extent(g.x,g.y,g.x,g.y,g.spatialReference);}for(i=1;i<il;i++){ext=(g=_112f[i].geometry).getExtent();if(ext===null){ext=new esri.geometry.Extent(g.x,g.y,g.x,g.y,g.spatialReference);}_1130=_1130.union(ext);}if(_1130.getWidth()<=0&&_1130.getHeight()<=0){return null;}return _1130;};esri.getGeometries=function(_1131){return dojo.map(_1131,function(_1132){return _1132.geometry;});};esri._encodeGraphics=function(_1133,_1134){var _1135=[],json,enc,norm;dojo.forEach(_1133,function(g,i){json=g.toJson();enc={};if(json.geometry){norm=_1134&&_1134[i];enc.geometry=norm&&norm.toJson()||json.geometry;}if(json.attributes){enc.attributes=json.attributes;}_1135[i]=enc;});return _1135;};esri._serializeLayerDefinitions=function(_1136){var defs=[],_1137=false,re=/[:;]/;if(_1136){dojo.forEach(_1136,function(defn,i){if(defn){defs.push([i,defn]);if(!_1137&&re.test(defn)){_1137=true;}}});if(defs.length>0){var _1138;if(_1137){_1138={};dojo.forEach(defs,function(defn){_1138[defn[0]]=defn[1];});_1138=dojo.toJson(_1138);}else{_1138=[];dojo.forEach(defs,function(defn){_1138.push(defn[0]+":"+defn[1]);});_1138=_1138.join(";");}return _1138;}}return null;};esri._serializeTimeOptions=function(_1139,ids){if(!_1139){return;}var _113a=[];dojo.forEach(_1139,function(_113b,i){if(_113b){var json=_113b.toJson();if(ids&&dojo.indexOf(ids,i)!==-1){json.useTime=false;}_113a.push("\""+i+"\":"+dojo.toJson(json));}});if(_113a.length){return "{"+_113a.join(",")+"}";}};esri.isDefined=esri._isDefined=function(value){return (value!==undefined)&&(value!==null);};esri._sanitize=function(obj,_113c){var prop;if(_113c){for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined||obj[prop]===null){delete obj[prop];}else{if(obj[prop] instanceof Object){esri._sanitize(obj[prop],true);}}}}}else{for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined){delete obj[prop];}}}}return obj;};esri._dfdCanceller=function(dfd){dfd.canceled=true;var _113d=dfd._pendingDfd;if(dfd.fired===-1&&_113d&&_113d.fired===-1){_113d.cancel();}dfd._pendingDfd=null;};esri._fixDfd=function(dfd){var saved=dfd.then;dfd.then=function(_113e,b,c){if(_113e){var _113f=_113e;_113e=function(_1140){if(_1140&&_1140._argsArray){return _113f.apply(null,_1140);}return _113f(_1140);};}return saved.call(this,_113e,b,c);};return dfd;};esri._resDfd=function(dfd,args,_1141){var count=args.length;if(count===1){if(_1141){dfd.errback(args[0]);}else{dfd.callback(args[0]);}}else{if(count>1){args._argsArray=true;dfd.callback(args);}else{dfd.callback();}}};esri._createWrappers=function(_1142){var _1143=dojo.getObject(_1142+".prototype");dojo.forEach(_1143.__msigns,function(sig){var _1144=_1143[sig.n];_1143[sig.n]=function(){var self=this,_1145=[],i,_1146=new dojo.Deferred(esri._dfdCanceller);if(sig.f){esri._fixDfd(_1146);}for(i=0;i<sig.c;i++){_1145[i]=arguments[i];}var _1147={dfd:_1146};_1145.push(_1147);var _1148,_1149=[],_114a;if(self.normalization&&!self._isTable){_1148=esri._disassemble(_1145,sig.a);dojo.forEach(_1148,function(comp){_1149=_1149.concat(comp.value);});if(_1149.length){var sr=_1149[0].spatialReference;if(sr&&sr._isWrappable()){_114a=esri.geometry.normalizeCentralMeridian(_1149,esri.config.defaults.geometryService);}}}if(_114a){_1146._pendingDfd=_114a;_114a.addCallbacks(function(_114b){if(_1146.canceled){return;}_1147.assembly=esri._reassemble(_114b,_1148);_1146._pendingDfd=_1144.apply(self,_1145);},function(err){var _114c=self.declaredClass;if(_114c&&_114c.indexOf("FeatureLayer")!==-1){self._resolve([err],null,_1145[sig.e],_1146,true);}else{self._errorHandler(err,_1145[sig.e],_1146);}});}else{_1146._pendingDfd=_1144.apply(self,_1145);}return _1146;};});};esri._disassemble=function(_114d,_114e){var _114f=[];dojo.forEach(_114e,function(_1150){var _1151=_1150.i,arg=_114d[_1151],_1152=_1150.p,prop;if(!dojo.isObject(arg)||!arg){return;}if(_1152){if(_1152[0]==="*"){for(prop in arg){if(arg.hasOwnProperty(prop)){esri._addToBucket(arg[prop],_114f,_1151,prop);}}}else{dojo.forEach(_1152,function(prop){esri._addToBucket(dojo.getObject(prop,false,arg),_114f,_1151,prop);});}}else{esri._addToBucket(arg,_114f,_1151);}});return _114f;};esri._addToBucket=function(value,_1153,_1154,_1155){var flag=false,_1156;if(dojo.isObject(value)&&value){if(dojo.isArray(value)){if(value.length){_1156=value[0]&&value[0].declaredClass;if(_1156&&_1156.indexOf("Graphic")!==-1){value=dojo.map(value,function(_1157){return _1157.geometry;});value=dojo.filter(value,esri._isDefined);flag=value.length?true:false;}else{if(_1156&&_1156.indexOf("esri.geometry.")!==-1){flag=true;}}}}else{_1156=value.declaredClass;if(_1156&&_1156.indexOf("FeatureSet")!==-1){value=dojo.map(value.features||[],function(_1158){return _1158.geometry;});value=dojo.filter(value,esri._isDefined);flag=value.length?true:false;}else{if(_1156&&_1156.indexOf("esri.geometry.")!==-1){flag=true;}}}}if(flag){_1153.push({index:_1154,property:_1155,value:value});}};esri._reassemble=function(_1159,_115a){var idx=0,_115b={};dojo.forEach(_115a,function(comp){var index=comp.index,_115c=comp.property,value=comp.value,len=value.length||1;var _115d=_1159.slice(idx,idx+len);if(!dojo.isArray(value)){_115d=_115d[0];}idx+=len;delete comp.value;if(_115c){_115b[index]=_115b[index]||{};_115b[index][_115c]=_115d;}else{_115b[index]=_115d;}});return _115b;};esri.setScrollable=function(node){var _115e=0,_115f=0,_1160=0,_1161=0,_1162=0,_1163=0;return [dojo.connect(node,"ontouchstart",function(evt){_115e=evt.touches[0].screenX;_115f=evt.touches[0].screenY;_1160=node.scrollWidth;_1161=node.scrollHeight;_1162=node.clientWidth;_1163=node.clientHeight;}),dojo.connect(node,"ontouchmove",function(evt){evt.preventDefault();var child=node.firstChild;if(child instanceof Text){child=node.childNodes[1];}var _1164=child._currentX||0,_1165=child._currentY||0;_1164+=(evt.touches[0].screenX-_115e);if(_1164>0){_1164=0;}else{if(_1164<0&&(Math.abs(_1164)+_1162)>_1160){_1164=-1*(_1160-_1162);}}child._currentX=_1164;_1165+=(evt.touches[0].screenY-_115f);if(_1165>0){_1165=0;}else{if(_1165<0&&(Math.abs(_1165)+_1163)>_1161){_1165=-1*(_1161-_1163);}}child._currentY=_1165;dojo.style(child,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+_1164+"px, "+_1165+"px)"});_115e=evt.touches[0].screenX;_115f=evt.touches[0].screenY;})];};esri._getAbsoluteUrl=function(url){if(dojo.isString(url)&&url.indexOf("http://")===-1&&url.indexOf("https://")===-1){if(url.indexOf("//")===0){return window.location.protocol+url;}else{if(url.indexOf("/")===0){return window.location.protocol+"//"+window.location.host+url;}else{return esri._appBaseUrl+url;}}}return url;};esri._getDefaultVisibleLayers=function(infos){var _1166=[],i;if(!infos){return _1166;}for(i=0;i<infos.length;i++){if(infos[i].parentLayerId>=0&&dojo.indexOf(_1166,infos[i].parentLayerId)===-1){continue;}if(infos[i].defaultVisibility){_1166.push(infos[i].id);}}return _1166;};esri._getLayersForScale=function(scale,infos){var _1167=[];if(scale>0&&infos){var i;for(i=0;i<infos.length;i++){if(infos[i].parentLayerId>=0&&dojo.indexOf(_1167,infos[i].parentLayerId)===-1){continue;}if(infos[i].id>=0){var _1168=true,_1169=infos[i].maxScale,_116a=infos[i].minScale;if(_1169>0||_116a>0){if(_1169>0&&_116a>0){_1168=_1169<=scale&&scale<=_116a;}else{if(_1169>0){_1168=_1169<=scale;}else{if(_116a>0){_1168=scale<=_116a;}}}}if(_1168){_1167.push(infos[i].id);}}}}return _1167;};});},"dojo/_base/json":function(){define(["./kernel","../json"],function(dojo,json){dojo.fromJson=function(js){return eval("("+js+")");};dojo._escapeString=json.stringify;dojo.toJsonIndentStr="\t";dojo.toJson=function(it,_116b){return json.stringify(it,function(key,value){if(value){var tf=value.__json__||value.json;if(typeof tf=="function"){return tf.call(value);}}return value;},_116b&&dojo.toJsonIndentStr);};return dojo;});},"WebScene/lib/Light":function(){define("WebScene/lib/Light",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.Light");dojo.require("WebScene.lib.Util");AmbientLight=function(color,_116c,ssao,_116d,_116e,_116f,_1170){this.color=color;this.intensity=_116c;this.ssao=ssao;this.ssaoAttenuation=_116d;this.ssaoRadius=_116e;this.ssaoFilterRadius=_116f;this.ssaoSamples=_1170;this.set=function(data){for(name in this){if(name!="set"){setIfDefined(name,data,this);}}};};DirectionalLight=function(color,_1171,_1172,_1173,_1174,_1175){this.color=color;this.intensity=_1171;this.azimuthAngle=_1172;this.elevationAngle=_1173;this.shadowMap=_1174;this.shadowAttenuation=_1175;this.set=function(data){for(name in this){if(name!="set"){setIfDefined(name,data,this);}}};};});},"WebScene/app/Model":function(){define("WebScene/app/Model",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/Light,WebScene/lib/RenderGeometry,WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.Model");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Light");dojo.require("WebScene.lib.RenderGeometry");dojo.require("WebScene.lib.Util");Model=function(){var _1176=new Object();var _1177=new Object();var _1178=new Object();var _1179=new Object();var _117a=new Object();var _117b=undefined;var _117c=new AmbientLight();var _117d=new DirectionalLight();var _117e=undefined;this.getGeometries=function(){return _1176;};this.getGeometry=function(name){return _1176[name];};this.getMaterial=function(name){return _1177[name];};this.getObject=function(name){return _1178[name];};this.getObjectNames=function(){return Object.keys(_1178);};this.getObjects=function(){return _1178;};this.getLayer=function(name){return _1179[name];};this.getLayerNames=function(){return Object.keys(_1179);};this.getLayers=function(){return _1179;};this.getBookmarks=function(){return _117a;};this.getMetadata=function(){return _117b;};this.setMetadata=function(_117f){_117b=_117f;};this.addGeometry=function(name,_1180){assert(_1176[name]==undefined);_1176[name]=_1180;};this.addMaterial=function(name,_1181){assert(_1177[name]==undefined);_1177[name]=_1181;};this.addObject=function(name,_1182){assert(_1178[name]==undefined);_1178[name]=_1182;this.validateObject(_1182);};this.addLayer=function(name,layer){assert(_1179[name]==undefined);_1179[name]=layer;this.validateLayer(layer);};this.addBookmark=function(name,_1183){assert(_1179[name]==undefined);_117a[name]=_1183;};this.validateObject=function(_1184){var _1185=_1184.getGeometryNames();var _1186=_1184.getMaterialNames();assert(_1185.length==_1186.length);for(var i=0;i<_1185.length;++i){var _1187=this.getGeometry(_1185[i]);assert(_1187!=undefined);var _1188=_1187.getInterleavedData().length;assert(_1188>=_1186[i].length,"object materials do not match geometry groups");verify(_1188==_1186[i].length,"object materials do not match geometry groups");for(var j=0;j<_1188;++j){assert(this.getMaterial(_1186[i][j])!=undefined);}}};this.validateLayer=function(layer){var _1189=layer.objects;for(var i=0;i<_1189.length;++i){var _118a=this.getObject(_1189[i]);assert(_118a!=undefined);}};this.setAmbientLight=function(light){_117c.set(light);};this.getAmbientLight=function(){return _117c;};this.setDirectionalLight=function(light){_117d.set(light);};this.getDirectionalLight=function(){return _117d;};this.setSelection=function(_118b){_117e=_118b;};this.getSelection=function(){return _117e;};var _118c=new Object();var _118d=0;this.getRenderGeometries=function(_118e){var _118f=new Array();for(var l=0;l<_118e.length;++l){var layer=_1179[_118e[l]];if(layer==undefined){continue;}for(var i=0;i<layer.objects.length;++i){var oName=layer.objects[i];var _1190=_1178[oName];var _1191=_1190.getGeometryNames();var _1192=_1190.getMaterialNames();var _1193=_1190.getTransformations();var _1194=_1190.getCastShadow();for(var j=0;j<_1191.length;++j){var _1195=this.getGeometry(_1191[j]);var ida=_1195.getInterleavedData();var _1196=_1193[j];var sx=Math.sqrt(_1196[0]*_1196[0]+_1196[4]*_1196[4]+_1196[8]*_1196[8]);var sy=Math.sqrt(_1196[1]*_1196[1]+_1196[5]*_1196[5]+_1196[9]*_1196[9]);var sz=Math.sqrt(_1196[2]*_1196[2]+_1196[6]*_1196[6]+_1196[10]*_1196[10]);var scale=Math.max(Math.max(sx,sy),sz);for(var k=0,num=_1195.getNumGroups();k<num;++k){var _1197=vec3.create();mat4.multiplyVec3(_1196,_1195.getCenter(k),_1197);var _1198=_1195.getBSRadius(k)*scale;var _1199=_1191[j]+"_"+k;var idx=_118c[_1199];if(idx===undefined){idx=_118d++;_118c[_1199]=idx;}var _119a=new RenderGeometry(ida[k],this.getMaterial(_1192[j][k]),_1196,_1197,_1198,_1194,oName==="Panorama",oName,_1199,idx);_118f.push(_119a);}}}}return _118f;};this.print=function(){console.log("number of objects: "+Object.keys(_1178).length);console.log("number of geometries: "+Object.keys(_1176).length);console.log("number of materials: "+Object.keys(_1177).length);};};});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_119b,has,_119c,ready,_119d,_119e,_119f,_11a0){if(has("dijit-legacy-requires")){ready(0,function(){var _11a1=["dijit/form/_FormValueWidget"];require(_11a1);});}return _119b("dijit.form._FormWidget",[_119d,_119f,_119e,_11a0],{setDisabled:function(_11a2){_119c.deprecated("setDisabled("+_11a2+") is deprecated. Use set('disabled',"+_11a2+") instead.","","2.0");this.set("disabled",_11a2);},setValue:function(value){_119c.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value);},getValue:function(){_119c.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(dojo,lang,_11a3,_11a4){var Color=dojo.Color=function(color){if(color){this.setColor(color);}};Color.named={"black":[0,0,0],"silver":[192,192,192],"gray":[128,128,128],"white":[255,255,255],"maroon":[128,0,0],"red":[255,0,0],"purple":[128,0,128],"fuchsia":[255,0,255],"green":[0,128,0],"lime":[0,255,0],"olive":[128,128,0],"yellow":[255,255,0],"navy":[0,0,128],"blue":[0,0,255],"teal":[0,128,128],"aqua":[0,255,255],"transparent":_11a4.transparentColor||[0,0,0,0]};lang.extend(Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a;},setColor:function(color){if(lang.isString(color)){Color.fromString(color,this);}else{if(lang.isArray(color)){Color.fromArray(color,this);}else{this._set(color.r,color.g,color.b,color.a);if(!(color instanceof Color)){this.sanitize();}}}return this;},sanitize:function(){return this;},toRgb:function(){var t=this;return [t.r,t.g,t.b];},toRgba:function(){var t=this;return [t.r,t.g,t.b,t.a];},toHex:function(){var arr=_11a3.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s;},this);return "#"+arr.join("");},toCss:function(_11a5){var t=this,rgb=t.r+", "+t.g+", "+t.b;return (_11a5?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")";},toString:function(){return this.toCss(true);}});Color.blendColors=dojo.blendColors=function(start,end,_11a6,obj){var t=obj||new Color();_11a3.forEach(["r","g","b","a"],function(x){t[x]=start[x]+(end[x]-start[x])*_11a6;if(x!="a"){t[x]=Math.round(t[x]);}});return t.sanitize();};Color.fromRgb=dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&Color.fromArray(m[1].split(/\s*,\s*/),obj);};Color.fromHex=dojo.colorFromHex=function(color,obj){var t=obj||new Color(),bits=(color.length==4)?4:8,mask=(1<<bits)-1;color=Number("0x"+color.substr(1));if(isNaN(color)){return null;}_11a3.forEach(["b","g","r"],function(x){var c=color&mask;color>>=bits;t[x]=bits==4?17*c:c;});t.a=1;return t;};Color.fromArray=dojo.colorFromArray=function(a,obj){var t=obj||new Color();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1;}return t.sanitize();};Color.fromString=dojo.colorFromString=function(str,obj){var a=Color.named[str];return a&&Color.fromArray(a,obj)||Color.fromRgb(str,obj)||Color.fromHex(str,obj);};return Color;});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_11a7,_11a8){dojo.DeferredList=function(list,_11a9,_11aa,_11ab,_11ac){var _11ad=[];_11a7.call(this);var self=this;if(list.length===0&&!_11a9){this.resolve([0,[]]);}var _11ae=0;_11a8.forEach(list,function(item,i){item.then(function(_11af){if(_11a9){self.resolve([i,_11af]);}else{_11b0(true,_11af);}},function(error){if(_11aa){self.reject(error);}else{_11b0(false,error);}if(_11ab){return null;}throw error;});function _11b0(_11b1,_11b2){_11ad[i]=[_11b1,_11b2];_11ae++;if(_11ae===list.length){self.resolve(_11ad);}};});};dojo.DeferredList.prototype=new _11a7();dojo.DeferredList.prototype.gatherResults=function(_11b3){var d=new dojo.DeferredList(_11b3,false,true,false);d.addCallback(function(_11b4){var ret=[];_11a8.forEach(_11b4,function(_11b5){ret.push(_11b5[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/errors/RequestError":function(){define(["./create"],function(_11b6){return _11b6("RequestError",function(_11b7,_11b8){this.response=_11b8;});});},"dojo/dnd/common":function(){define("dojo/dnd/common",["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(_11b9,_11ba,lang,dom){var _11bb={};_11bb.getCopyKeyState=_11b9.isCopyKey;_11bb._uniqueId=0;_11bb.getUniqueId=function(){var id;do{id=_11ba._scopeName+"Unique"+(++_11bb._uniqueId);}while(dom.byId(id));return id;};_11bb._empty={};_11bb.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};lang.mixin(lang.getObject("dojo.dnd",true),_11bb);return _11bb;});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_11bc,on,ready,has,win,_11bd){var _11be=new _11bc();ready(200,function(){var _11bf=_11bd.getBox();_11be._rlh=on(win.global,"resize",function(){var _11c0=_11bd.getBox();if(_11bf.h==_11c0.h&&_11bf.w==_11c0.w){return;}_11bf=_11c0;_11be.emit("resize");});if(has("ie")==8){var _11c1=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_11c1){_11c1=screen.deviceXDPI;_11be.emit("resize");}},500);}});return _11be;});},"WebScene/lib/GLMaterial":function(){define("WebScene/lib/GLMaterial",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.GLMaterial");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Util");var _11c2=0;DefaultGLMaterial=function(slot,_11c3,_11c4,_11c5,_11c6,_11c7,_11c8,_11c9,_11ca,_11cb){this.id=_11c2++;this.getId=function(){return this.id;};this.getSlot=function(){return slot;};this.getProgram=function(){return _11c3;};this.bind=function(view,proj,_11cc,_11cd,_11ce,gl){_11c3.use();_11c3.uniform3fv("ambient",_11c5);_11c3.uniform3fv("diffuse",_11c6);_11c3.uniform3fv("specular",_11c7);_11c3.uniform1f("shininess",_11c8);_11c3.uniform1f("opacity",_11c9);if(_11c4!==undefined){_11c3.uniform1i("tex",0);gl.bindTexture(gl.TEXTURE_2D,_11c4);}_11c3.uniformMatrix4fv("view",view);_11c3.uniformMatrix4fv("proj",proj);_11c3.uniform3f("camPos",_11cc[3],_11cc[7],_11cc[11]);_11ce.setUniforms(_11c3);_11c3.enableVertexAttribArrays();if(_11ca){gl.enable(gl.BLEND);gl.disable(gl.CULL_FACE);}if(_11cb){gl.enable(gl.POLYGON_OFFSET_FILL);gl.polygonOffset(2,2);}};this.release=function(gl){if(_11cb){gl.disable(gl.POLYGON_OFFSET_FILL);}if(_11ca){gl.enable(gl.CULL_FACE);gl.disable(gl.BLEND);}_11c3.disableVertexAttribArrays();};this.bindInstance=function(_11cf,gl){_11c3.uniformMatrix4fv("model",_11cf.transformation);_11c3.uniformMatrix4fv("modelNormal",_11cf.transformationNormal);};this.getTexGLName=function(){return _11c4;};};DefaultGLMaterialDepth=function(slot,_11d0,_11d1,_11d2){this.id=_11c2++;this.getId=function(){return this.id;};this.getSlot=function(){return slot;};this.getProgram=function(){return _11d0;};this.bind=function(view,proj,_11d3,_11d4,_11d5,gl){_11d0.use();_11d0.uniform2fv("nearFar",_11d4);if(_11d1!==undefined){_11d0.uniform1i("tex",0);gl.bindTexture(gl.TEXTURE_2D,_11d1);}_11d0.uniformMatrix4fv("view",view);_11d0.uniformMatrix4fv("proj",proj);_11d0.enableVertexAttribArrays();if(_11d2){gl.disable(gl.CULL_FACE);}};this.release=function(gl){if(_11d2){gl.enable(gl.CULL_FACE);}_11d0.disableVertexAttribArrays();};this.bindInstance=function(_11d6,gl){_11d0.uniformMatrix4fv("model",_11d6.transformation);};this.getTexGLName=function(){return _11d1;};};DefaultGLMaterialNormal=function(slot,_11d7,_11d8,_11d9){this.id=_11c2++;this.getId=function(){return this.id;};this.getSlot=function(){return slot;};this.getProgram=function(){return _11d7;};this.bind=function(view,proj,_11da,_11db,_11dc,gl){_11d7.use();if(_11d8!==undefined){_11d7.uniform1i("tex",0);gl.bindTexture(gl.TEXTURE_2D,_11d8);}_11d7.uniformMatrix4fv("view",view);_11d7.uniformMatrix4fv("proj",proj);_11d7.uniformMatrix4fv("viewNormal",_11da);_11d7.enableVertexAttribArrays();if(_11d9){gl.disable(gl.CULL_FACE);}};this.release=function(gl){if(_11d9){gl.enable(gl.CULL_FACE);}_11d7.disableVertexAttribArrays();};this.bindInstance=function(_11dd,gl){_11d7.uniformMatrix4fv("model",_11dd.transformation);_11d7.uniformMatrix4fv("modelNormal",_11dd.transformationNormal);};this.getTexGLName=function(){return _11d8;};};PanoramaGLMaterial=function(slot,_11de,_11df){this.id=_11c2++;this.getId=function(){return this.id;};this.getSlot=function(){return slot;};this.getProgram=function(){return _11de;};var _11e0=mat4.identity();this.bind=function(view,proj,_11e1,_11e2,_11e3,gl){_11de.use();mat4.set(view,_11e0);_11e0[12]=_11e0[13]=_11e0[14]=0;_11de.uniformMatrix4fv("view",_11e0);_11de.uniformMatrix4fv("proj",proj);_11de.uniform1f("colorScale",0.5+Math.max(0.5*_11e3.getLightDirection()[1],0));_11de.enableVertexAttribArrays();_11de.uniform1i("tex",0);gl.bindTexture(gl.TEXTURE_2D,_11df);gl.depthMask(false);gl.disable(gl.DEPTH_TEST);gl.disable(gl.CULL_FACE);};this.release=function(gl){gl.depthMask(true);gl.enable(gl.DEPTH_TEST);gl.enable(gl.CULL_FACE);_11de.disableVertexAttribArrays();};this.bindInstance=function(_11e4,gl){_11de.uniformMatrix4fv("model",_11e4.transformation);};};GLMaterialRep=function(){var _11e5=new Object();this.add=function(name,_11e6){assert(_11e5[name]==undefined);_11e5[name]=_11e6;};this.get=function(name){return _11e5[name];};};});},"WebScene/lib/GLVBO":function(){define("WebScene/lib/GLVBO",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.GLVBO");dojo.require("WebScene.lib.Util");var _11e7=0;GLVBO=function(data,_11e8,_11e9,gl){var _11ea=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,_11ea);gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);var num=data.length/_11e9;this.id=_11e7++;this.bind=function(){gl.bindBuffer(gl.ARRAY_BUFFER,_11ea);};this.setPointers=function(_11eb){var _11ec=_11eb.getAttrNames();var _11ed=_11eb.getAttrSizes();assert(_11ec.length==_11ed.length);for(var i=0;i<_11ec.length;++i){gl.vertexAttribPointer(_11eb.getAttribLocation(_11ec[i]),_11ed[i],gl.FLOAT,false,_11e9*4,_11e8[_11ec[i]]*4);}};this.getNum=function(){return num;};this.getId=function(){return this.id;};this.dispose=function(){gl.deleteBuffer(_11ea);};};GLVBORep=function(){var vbos=new Object();this.add=function(name,vbo){assert(vbos[name]==undefined);vbos[name]=vbo;};this.get=function(name){return vbos[name];};};});},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(_11ee){var hub=new _11ee;return {publish:function(topic,event){return hub.emit.apply(hub,arguments);},subscribe:function(topic,_11ef){return hub.on.apply(hub,arguments);}};});},"dijit/_base/place":function(){define("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(array,lang,_11f0,place,dijit){var _11f1={};_11f1.getViewport=function(){return _11f0.getBox();};_11f1.placeOnScreen=place.at;_11f1.placeOnScreenAroundElement=function(node,_11f2,_11f3,_11f4){var _11f5;if(lang.isArray(_11f3)){_11f5=_11f3;}else{_11f5=[];for(var key in _11f3){_11f5.push({aroundCorner:key,corner:_11f3[key]});}}return place.around(node,_11f2,_11f5,true,_11f4);};_11f1.placeOnScreenAroundNode=_11f1.placeOnScreenAroundElement;_11f1.placeOnScreenAroundRectangle=_11f1.placeOnScreenAroundElement;_11f1.getPopupAroundAlignment=function(_11f6,_11f7){var align={};array.forEach(_11f6,function(pos){var ltr=_11f7;switch(pos){case "after":align[_11f7?"BR":"BL"]=_11f7?"BL":"BR";break;case "before":align[_11f7?"BL":"BR"]=_11f7?"BR":"BL";break;case "below-alt":ltr=!ltr;case "below":align[ltr?"BL":"BR"]=ltr?"TL":"TR";align[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above-alt":ltr=!ltr;case "above":default:align[ltr?"TL":"TR"]=ltr?"BL":"BR";align[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});return align;};lang.mixin(dijit,_11f1);return dijit;});},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var mix=lang.mixin,op=Object.prototype,opts=op.toString,xtor=new Function,_11f8=0,cname="constructor";function err(msg,cls){throw new Error("declare"+(cls?" "+cls:"")+": "+msg);};function c3mro(bases,_11f9){var _11fa=[],roots=[{cls:0,refs:[]}],_11fb={},_11fc=1,l=bases.length,i=0,j,lin,base,top,proto,rec,name,refs;for(;i<l;++i){base=bases[i];if(!base){err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",_11f9);}else{if(opts.call(base)!="[object Function]"){err("mixin #"+i+" is not a callable constructor.",_11f9);}}lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){proto=lin[j].prototype;if(!proto.hasOwnProperty("declaredClass")){proto.declaredClass="uniqName_"+(_11f8++);}name=proto.declaredClass;if(!_11fb.hasOwnProperty(name)){_11fb[name]={count:0,refs:[],cls:lin[j]};++_11fc;}rec=_11fb[name];if(top&&top!==rec){rec.refs.push(top);++top.count;}top=rec;}++top.count;roots[0].refs.push(top);}while(roots.length){top=roots.pop();_11fa.push(top.cls);--_11fc;while(refs=top.refs,refs.length==1){top=refs[0];if(!top||--top.count){top=0;break;}_11fa.push(top.cls);--_11fc;}if(top){for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count){roots.push(top);}}}}if(_11fc){err("can't build consistent linearization",_11f9);}base=bases[0];_11fa[0]=base?base._meta&&base===_11fa[_11fa.length-base._meta.bases.length]?base._meta.bases.length:1:0;return _11fa;};function _11fd(args,a,f){var name,_11fe,bases,_11ff,meta,base,proto,opf,pos,cache=this._inherited=this._inherited||{};if(typeof args=="string"){name=args;args=a;a=f;}f=0;_11ff=args.callee;name=name||_11ff.nom;if(!name){err("can't deduce a name to call inherited()",this.declaredClass);}meta=this.constructor._meta;bases=meta.bases;pos=cache.p;if(name!=cname){if(cache.c!==_11ff){pos=0;base=bases[0];meta=base._meta;if(meta.hidden[name]!==_11ff){_11fe=meta.chains;if(_11fe&&typeof _11fe[name]=="string"){err("calling chained method with inherited: "+name,this.declaredClass);}do{meta=base._meta;proto=base.prototype;if(meta&&(proto[name]===_11ff&&proto.hasOwnProperty(name)||meta.hidden[name]===_11ff)){break;}}while(base=bases[++pos]);pos=base?pos:-1;}}base=bases[++pos];if(base){proto=base.prototype;if(base._meta&&proto.hasOwnProperty(name)){f=proto[name];}else{opf=op[name];do{proto=base.prototype;f=proto[name];if(f&&(base._meta?proto.hasOwnProperty(name):f!==opf)){break;}}while(base=bases[++pos]);}}f=base&&f||op[name];}else{if(cache.c!==_11ff){pos=0;meta=bases[0]._meta;if(meta&&meta.ctor!==_11ff){_11fe=meta.chains;if(!_11fe||_11fe.constructor!=="manual"){err("calling chained constructor with inherited",this.declaredClass);}while(base=bases[++pos]){meta=base._meta;if(meta&&meta.ctor===_11ff){break;}}pos=base?pos:-1;}}while(base=bases[++pos]){meta=base._meta;f=meta?meta.ctor:base;if(f){break;}}f=base&&f;}cache.c=f;cache.p=pos;if(f){return a===true?f:f.apply(this,a||args);}};function _1200(name,args){if(typeof name=="string"){return this.__inherited(name,args,true);}return this.__inherited(name,true);};function _1201(args,a1,a2){var f=this.getInherited(args,a1);if(f){return f.apply(this,a2||a1||args);}};var _1202=dojo.config.isDebug?_1201:_11fd;function _1203(cls){var bases=this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i){if(bases[i]===cls){return true;}}return this instanceof cls;};function _1204(_1205,_1206){for(var name in _1206){if(name!=cname&&_1206.hasOwnProperty(name)){_1205[name]=_1206[name];}}if(has("bug-for-in-skips-shadowed")){for(var _1207=lang._extraNames,i=_1207.length;i;){name=_1207[--i];if(name!=cname&&_1206.hasOwnProperty(name)){_1205[name]=_1206[name];}}}};function _1208(_1209,_120a){var name,t;for(name in _120a){t=_120a[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]"){t.nom=name;}_1209[name]=t;}}if(has("bug-for-in-skips-shadowed")){for(var _120b=lang._extraNames,i=_120b.length;i;){name=_120b[--i];t=_120a[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]"){t.nom=name;}_1209[name]=t;}}}return _1209;};function _120c(_120d){_120e.safeMixin(this.prototype,_120d);return this;};function _120f(_1210){return _120e([this].concat(_1210));};function _1211(bases,_1212){return function(){var a=arguments,args=a,a0=a[0],f,i,m,l=bases.length,_1213;if(!(this instanceof a.callee)){return _1214(a);}if(_1212&&(a0&&a0.preamble||this.preamble)){_1213=new Array(bases.length);_1213[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a;}}f=bases[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a;}if(++i==l){break;}_1213[i]=a;}}for(i=l-1;i>=0;--i){f=bases[i];m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,_1213?_1213[i]:a);}}f=this.postscript;if(f){f.apply(this,args);}};};function _1215(ctor,_1216){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee)){return _1214(a);}if(_1216){if(a0){f=a0.preamble;if(f){t=f.apply(this,t)||t;}}f=this.preamble;if(f){f.apply(this,t);}}if(ctor){ctor.apply(this,a);}f=this.postscript;if(f){f.apply(this,a);}};};function _1217(bases){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee)){return _1214(a);}for(;f=bases[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break;}}f=this.postscript;if(f){f.apply(this,a);}};};function chain(name,bases,_1218){return function(){var b,m,f,i=0,step=1;if(_1218){i=bases.length-1;step=-1;}for(;b=bases[i];i+=step){m=b._meta;f=(m?m.hidden:b.prototype)[name];if(f){f.apply(this,arguments);}}};};function _1219(ctor){xtor.prototype=ctor.prototype;var t=new xtor;xtor.prototype=null;return t;};function _1214(args){var ctor=args.callee,t=_1219(ctor);ctor.apply(t,args);return t;};function _120e(_121a,_121b,props){if(typeof _121a!="string"){props=_121b;_121b=_121a;_121a="";}props=props||{};var proto,i,t,ctor,name,bases,_121c,_121d=1,_121e=_121b;if(opts.call(_121b)=="[object Array]"){bases=c3mro(_121b,_121a);t=bases[0];_121d=bases.length-t;_121b=bases[_121d];}else{bases=[0];if(_121b){if(opts.call(_121b)=="[object Function]"){t=_121b._meta;bases=bases.concat(t?t.bases:_121b);}else{err("base class is not a callable constructor.",_121a);}}else{if(_121b!==null){err("unknown base class. Did you use dojo.require to pull it in?",_121a);}}}if(_121b){for(i=_121d-1;;--i){proto=_1219(_121b);if(!i){break;}t=bases[i];(t._meta?_1204:mix)(proto,t.prototype);ctor=new Function;ctor.superclass=_121b;ctor.prototype=proto;_121b=proto.constructor=ctor;}}else{proto={};}_120e.safeMixin(proto,props);t=props.constructor;if(t!==op.constructor){t.nom=cname;proto.constructor=t;}for(i=_121d-1;i;--i){t=bases[i]._meta;if(t&&t.chains){_121c=mix(_121c||{},t.chains);}}if(proto["-chains-"]){_121c=mix(_121c||{},proto["-chains-"]);}t=!_121c||!_121c.hasOwnProperty(cname);bases[0]=ctor=(_121c&&_121c.constructor==="manual")?_1217(bases):(bases.length==1?_1215(props.constructor,t):_1211(bases,t));ctor._meta={bases:bases,hidden:props,chains:_121c,parents:_121e,ctor:props.constructor};ctor.superclass=_121b&&_121b.prototype;ctor.extend=_120c;ctor.createSubclass=_120f;ctor.prototype=proto;proto.constructor=ctor;proto.getInherited=_1200;proto.isInstanceOf=_1203;proto.inherited=_1202;proto.__inherited=_11fd;if(_121a){proto.declaredClass=_121a;lang.setObject(_121a,ctor);}if(_121c){for(name in _121c){if(proto[name]&&typeof _121c[name]=="string"&&name!=cname){t=proto[name]=chain(name,bases,_121c[name]==="after");t.nom=name;}}}return ctor;};dojo.safeMixin=_120e.safeMixin=_1208;dojo.declare=_120e;return _120e;});},"dojo/require":function(){define(["./_base/loader"],function(_121f){return {dynamic:0,normalize:function(id){return id;},load:_121f.require};});},"WebScene/lib/rawinflate":function(){define("WebScene/lib/rawinflate",["dijit","dojo","dojox"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.rawinflate");(function(){var _1220=32768;var _1221=0;var _1222=1;var _1223=2;var _1224=9;var _1225=6;var _1226=32768;var _1227=64;var _1228;var _1229;var _122a=null;var _122b;var _122c,_122d;var _122e;var _122f;var _1230;var _1231;var _1232;var _1233;var _1234,_1235;var _1236,_1237;var _1238;var _1239;var _123a=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);var _123b=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0);var _123c=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99);var _123d=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577);var _123e=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13);var _123f=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15);var _1240=function(){this.next=null;this.list=null;};var _1241=function(){this.e=0;this.b=0;this.n=0;this.t=null;};var _1242=function(b,n,s,d,e,mm){this.BMAX=16;this.N_MAX=288;this.status=0;this.root=null;this.m=0;var a;var c=new Array(this.BMAX+1);var el;var f;var g;var h;var i;var j;var k;var lx=new Array(this.BMAX+1);var p;var pidx;var q;var r=new _1241();var u=new Array(this.BMAX);var v=new Array(this.N_MAX);var w;var x=new Array(this.BMAX+1);var xp;var y;var z;var o;var tail;tail=this.root=null;for(i=0;i<c.length;i++){c[i]=0;}for(i=0;i<lx.length;i++){lx[i]=0;}for(i=0;i<u.length;i++){u[i]=null;}for(i=0;i<v.length;i++){v[i]=0;}for(i=0;i<x.length;i++){x[i]=0;}el=n>256?b[256]:this.BMAX;p=b;pidx=0;i=n;do{c[p[pidx]]++;pidx++;}while(--i>0);if(c[0]==n){this.root=null;this.m=0;this.status=0;return;}for(j=1;j<=this.BMAX;j++){if(c[j]!=0){break;}}k=j;if(mm<j){mm=j;}for(i=this.BMAX;i!=0;i--){if(c[i]!=0){break;}}g=i;if(mm>i){mm=i;}for(y=1<<j;j<i;j++,y<<=1){if((y-=c[j])<0){this.status=2;this.m=mm;return;}}if((y-=c[i])<0){this.status=2;this.m=mm;return;}c[i]+=y;x[1]=j=0;p=c;pidx=1;xp=2;while(--i>0){x[xp++]=(j+=p[pidx++]);}p=b;pidx=0;i=0;do{if((j=p[pidx++])!=0){v[x[j]++]=i;}}while(++i<n);n=x[g];x[0]=i=0;p=v;pidx=0;h=-1;w=lx[0]=0;q=null;z=0;for(;k<=g;k++){a=c[k];while(a-->0){while(k>w+lx[1+h]){w+=lx[1+h];h++;z=(z=g-w)>mm?mm:z;if((f=1<<(j=k-w))>a+1){f-=a+1;xp=k;while(++j<z){if((f<<=1)<=c[++xp]){break;}f-=c[xp];}}if(w+j>el&&w<el){j=el-w;}z=1<<j;lx[1+h]=j;q=new Array(z);for(o=0;o<z;o++){q[o]=new _1241();}if(tail==null){tail=this.root=new _1240();}else{tail=tail.next=new _1240();}tail.next=null;tail.list=q;u[h]=q;if(h>0){x[h]=i;r.b=lx[h];r.e=16+j;r.t=q;j=(i&((1<<w)-1))>>(w-lx[h]);u[h-1][j].e=r.e;u[h-1][j].b=r.b;u[h-1][j].n=r.n;u[h-1][j].t=r.t;}}r.b=k-w;if(pidx>=n){r.e=99;}else{if(p[pidx]<s){r.e=(p[pidx]<256?16:15);r.n=p[pidx++];}else{r.e=e[p[pidx]-s];r.n=d[p[pidx++]-s];}}f=1<<(k-w);for(j=i>>w;j<z;j+=f){q[j].e=r.e;q[j].b=r.b;q[j].n=r.n;q[j].t=r.t;}for(j=1<<(k-1);(i&j)!=0;j>>=1){i^=j;}i^=j;while((i&((1<<w)-1))!=x[h]){w-=lx[h];h--;}}}this.m=lx[1];this.status=((y!=0&&g!=1)?1:0);};var _1243=function(){if(_1238.length==_1239){return -1;}return _1238[_1239++];};var _1244=function(n){while(_122f<n){_122e|=_1243()<<_122f;_122f+=8;}};var _1245=function(n){return _122e&_123a[n];};var _1246=function(n){_122e>>=n;_122f-=n;};var _1247=function(buff,off,size){var e;var t;var n;if(size==0){return 0;}n=0;for(;;){_1244(_1236);t=_1234.list[_1245(_1236)];e=t.e;while(e>16){if(e==99){return -1;}_1246(t.b);e-=16;_1244(e);t=t.t[_1245(e)];e=t.e;}_1246(t.b);if(e==16){_1229&=_1220-1;buff[off+n++]=_1228[_1229++]=t.n;if(n==size){return size;}continue;}if(e==15){break;}_1244(e);_1232=t.n+_1245(e);_1246(e);_1244(_1237);t=_1235.list[_1245(_1237)];e=t.e;while(e>16){if(e==99){return -1;}_1246(t.b);e-=16;_1244(e);t=t.t[_1245(e)];e=t.e;}_1246(t.b);_1244(e);_1233=_1229-t.n-_1245(e);_1246(e);while(_1232>0&&n<size){_1232--;_1233&=_1220-1;_1229&=_1220-1;buff[off+n++]=_1228[_1229++]=_1228[_1233++];}if(n==size){return size;}}_1230=-1;return n;};var _1248=function(buff,off,size){var n;n=_122f&7;_1246(n);_1244(16);n=_1245(16);_1246(16);_1244(16);if(n!=((~_122e)&65535)){return -1;}_1246(16);_1232=n;n=0;while(_1232>0&&n<size){_1232--;_1229&=_1220-1;_1244(8);buff[off+n++]=_1228[_1229++]=_1245(8);_1246(8);}if(_1232==0){_1230=-1;}return n;};var _1249=function(buff,off,size){if(_122a==null){var i;var l=new Array(288);var h;for(i=0;i<144;i++){l[i]=8;}for(;i<256;i++){l[i]=9;}for(;i<280;i++){l[i]=7;}for(;i<288;i++){l[i]=8;}_122c=7;h=new _1242(l,288,257,_123b,_123c,_122c);if(h.status!=0){alert("HufBuild error: "+h.status);return -1;}_122a=h.root;_122c=h.m;for(i=0;i<30;i++){l[i]=5;}zip_fixed_bd=5;h=new _1242(l,30,0,_123d,_123e,zip_fixed_bd);if(h.status>1){_122a=null;alert("HufBuild error: "+h.status);return -1;}_122b=h.root;zip_fixed_bd=h.m;}_1234=_122a;_1235=_122b;_1236=_122c;_1237=zip_fixed_bd;return _1247(buff,off,size);};var _124a=function(buff,off,size){var i;var j;var l;var n;var t;var nb;var nl;var nd;var ll=new Array(286+30);var h;for(i=0;i<ll.length;i++){ll[i]=0;}_1244(5);nl=257+_1245(5);_1246(5);_1244(5);nd=1+_1245(5);_1246(5);_1244(4);nb=4+_1245(4);_1246(4);if(nl>286||nd>30){return -1;}for(j=0;j<nb;j++){_1244(3);ll[_123f[j]]=_1245(3);_1246(3);}for(;j<19;j++){ll[_123f[j]]=0;}_1236=7;h=new _1242(ll,19,19,null,null,_1236);if(h.status!=0){return -1;}_1234=h.root;_1236=h.m;n=nl+nd;i=l=0;while(i<n){_1244(_1236);t=_1234.list[_1245(_1236)];j=t.b;_1246(j);j=t.n;if(j<16){ll[i++]=l=j;}else{if(j==16){_1244(2);j=3+_1245(2);_1246(2);if(i+j>n){return -1;}while(j-->0){ll[i++]=l;}}else{if(j==17){_1244(3);j=3+_1245(3);_1246(3);if(i+j>n){return -1;}while(j-->0){ll[i++]=0;}l=0;}else{_1244(7);j=11+_1245(7);_1246(7);if(i+j>n){return -1;}while(j-->0){ll[i++]=0;}l=0;}}}}_1236=_1224;h=new _1242(ll,nl,257,_123b,_123c,_1236);if(_1236==0){h.status=1;}if(h.status!=0){if(h.status==1){}return -1;}_1234=h.root;_1236=h.m;for(i=0;i<nd;i++){ll[i]=ll[i+nl];}_1237=_1225;h=new _1242(ll,nd,0,_123d,_123e,_1237);_1235=h.root;_1237=h.m;if(_1237==0&&nl>257){return -1;}if(h.status==1){}if(h.status!=0){return -1;}return _1247(buff,off,size);};var _124b=function(){var i;if(_1228==null){_1228=new Array(2*_1220);}_1229=0;_122e=0;_122f=0;_1230=-1;_1231=false;_1232=_1233=0;_1234=null;};var _124c=function(buff,off,size){var n,i;n=0;while(n<size){if(_1231&&_1230==-1){return n;}if(_1232>0){if(_1230!=_1221){while(_1232>0&&n<size){_1232--;_1233&=_1220-1;_1229&=_1220-1;buff[off+n++]=_1228[_1229++]=_1228[_1233++];}}else{while(_1232>0&&n<size){_1232--;_1229&=_1220-1;_1244(8);buff[off+n++]=_1228[_1229++]=_1245(8);_1246(8);}if(_1232==0){_1230=-1;}}if(n==size){return n;}}if(_1230==-1){if(_1231){break;}_1244(1);if(_1245(1)!=0){_1231=true;}_1246(1);_1244(2);_1230=_1245(2);_1246(2);_1234=null;_1232=0;}switch(_1230){case 0:i=_1248(buff,off+n,size-n);break;case 1:if(_1234!=null){i=_1247(buff,off+n,size-n);}else{i=_1249(buff,off+n,size-n);}break;case 2:if(_1234!=null){i=_1247(buff,off+n,size-n);}else{i=_124a(buff,off+n,size-n);}break;default:i=-1;break;}if(i==-1){if(_1231){return 0;}return -1;}n+=i;}return n;};var _124d=function(data){var i,j;_124b();_1238=data;_1239=0;var buff=new Array(1024);var aout=[];while((i=_124c(buff,0,buff.length))>0){var cbuf=new Array(i);for(j=0;j<i;j++){cbuf[j]=String.fromCharCode(buff[j]);}aout[aout.length]=cbuf.join("");}_1238=null;return aout.join("");};var _124e=function(data){_124b();_1238=data;_1239=0;};var _124f=new Array(1024);var _1250=function(_1251){var _1252=_124c(_124f,0,_1251);_124f.length=_1252;return _124f;};var _1253=function(){_1238=null;};var _1254=function(_1255){var _1256=new Uint8Array(_1255);if(_1256[0]!=31||_1256[1]!=139||_1256[2]!=8){return {"valid":false};}var size=10;var flags=_1256[3];if(flags&(1<<1)){size+=2;}if(flags&(1<<2)){size+=2+_1257(_1256,10);}if(flags&(1<<3)){while(_1256[size++]!==0){}}if(flags&(1<<4)){while(_1256[size++]!==0){}}var data=new Uint8Array(_1255,size,_1256.length-size-8);var _1258=_1259(_1256,_1256.length-4);return {"valid":true,"data":data,"uncompressedSize":_1258};};var _1257=function(_125a,_125b){var b0=_125a[_125b];var b1=_125a[_125b+1];return b0+(b1<<8);};var _1259=function(_125c,_125d){var b0=_125c[_125d];var b1=_125c[_125d+1];var b2=_125c[_125d+2];var b3=_125c[_125d+3];return b0+(b1<<8)+(b2<<16)+(b3<<24);};if(!window.RawDeflate){RawDeflate={};}RawDeflate.inflate=_124d;RawDeflate.inflate_stream_begin=_124e;RawDeflate.inflate_stream=_1250;RawDeflate.inflate_stream_end=_1253;RawDeflate.readHeader=_1254;})();});},"WebScene/app/Controller":function(){define("WebScene/app/Controller",["dijit","dojo","dojox","dojo/require!WebScene/app/StageUtils"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.Controller");dojo.require("WebScene.app.StageUtils");Controller=function(_125e,_125f,stage,_1260){var _1261=/Firefox/i.test(navigator.userAgent);var _1262=200;this.setControls=function(_1263){_125f=_1263;};this.getControls=function(){return _125f;};var drag=0;var _1264=0;var _1265=0;var _1266=vec2.create();function _1267(event){event.preventDefault();if(drag===0){return;}var _1268=_1269(event,_1266);var state=drag-1;switch(_1264){case 1:_126a("mouseDragLeft",_1268,state);break;case 2:_126a("mouseDragMiddle",_1268,state);break;case 3:case 0:_126a("mouseDragRight",_1268,state);break;}if(drag===1){drag=2;}else{if(drag===3){drag=0;_1264=0;}}};function _126b(event){event.preventDefault();drag=1;_1264=event.which;if(_1264===1){if(_1265>0){_126a("mouseClickDouble",_1269(event,_1266));_1265=0;}else{_1265=Date.now();}}};function _126c(event){event.preventDefault();if(drag===1&&_1264===1){if(_1265>0){setTimeout(function(){_126d(event);},Math.max(_1262-(Date.now()-_1265),0));function _126d(event){if(_1265>0){_126a("mouseClick",_1269(event,_1266));_1265=0;}};}}else{_1265=0;}if(drag===2){drag=3;}else{drag=0;_1264=0;}};var _126e=vec2.create();function _126f(event){event.preventDefault();_126a("mouseWheel",event[(_1261?"detail":"wheelDelta")]*(_1261?-60:1),_1269(event,_126e));};_125e.addEventListener("mousemove",_1267,false);_125e.addEventListener("mousedown",_126b,false);_125e.addEventListener("mouseup",_126c,false);_125e.addEventListener(_1261?"DOMMouseScroll":"mousewheel",_126f,false);_125e.addEventListener("contextmenu",function(event){event.preventDefault();},false);window.select=function(_1270){stage._select(_1270);};window.frame=function(_1271){var _1272=stage._pick(_1271).getMinResult().object;if(_1272!==undefined){stage.frame(_1272);}};window.pan=function(_1273,state){switch(state){case 0:_1260.panBegin(_1273);break;case 1:_1260.pan(_1273);break;case 2:_1260.panEnd(_1273);break;default:assert(false);}};window.tumble=function(_1274,state){switch(state){case 0:_1260.tumbleBegin(_1274);break;case 1:_1260.tumble(_1274);break;case 2:break;default:assert(false);}};window.zoom=function(_1275,_1276){_1260.zoom(_1275,_1276);};function _1269(event,_1277){if(!_1277){_1277=vec2.create();}var rect=_125e.getBoundingClientRect();_1277[0]=event.pageX-rect.left;_1277[1]=rect.height-(event.pageY-rect.top);return _1277;};function _126a(event,arg0,arg1){var fun=_125f[event];if(fun!=undefined){window[fun](arg0,arg1);}};};Controller.PAN={"mouseClick":"select","mouseClickDouble":"frame","mouseDragLeft":"pan","mouseDragRight":"tumble","mouseWheel":"zoom"};Controller.TUMBLE={"mouseClick":"select","mouseClickDouble":"frame","mouseDragLeft":"tumble","mouseDragRight":"pan","mouseWheel":"zoom"};Controller.OLD={"mouseClick":"select","mouseClickDouble":"frame","mouseDragMiddle":"tumble","mouseDragRight":"pan","mouseWheel":"zoom"};});},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"header\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"}});define("dijit/Dialog",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","dojo/text!./templates/Dialog.html","./main","dojo/i18n!./nls/common"],function(_1278,array,_1279,_127a,_127b,dom,_127c,_127d,_127e,event,fx,i18n,keys,lang,on,ready,has,_127f,_1280,_1281,focus,_1282,_1283,_1284,_1285,_1286,_1287,_1288,_1289,_128a,dijit){var _128b=_127a("dijit._DialogBase",[_1284,_1286,_1287,_1285],{templateString:_128a,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:false,duration:_1282.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val);},"aria-describedby":"",maxRatio:0.9,postMixInProperties:function(){var _128c=i18n.getLocalization("dijit","common");lang.mixin(this,_128c);this.inherited(arguments);},postCreate:function(){_127e.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&_128d.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(){var _128e=_127d.position(this.domNode),_128f=_127f.getBox(this.ownerDocument);_128e.y=Math.min(Math.max(_128e.y,0),(_128f.h-_128e.h));_128e.x=Math.min(Math.max(_128e.x,0),(_128f.w-_128e.w));this._relativePosition=_128e;this._position();},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=new ((has("ie")==6)?_1281:_1280)(node,{handle:this.titleBar});this.connect(this._moveable,"onMoveStop","_endDrag");}else{_127c.add(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":array.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" "),ownerDocument:this.ownerDocument};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle;}}else{_127e.set(this.containerNode,{width:"auto",height:"auto"});}var bb=_127d.position(this.domNode);var _1290=_127f.getBox(this.ownerDocument);_1290.w*=this.maxRatio;_1290.h*=this.maxRatio;if(bb.w>=_1290.w||bb.h>=_1290.h){var _1291=_127d.position(this.containerNode),w=Math.min(bb.w,_1290.w)-(bb.w-_1291.w),h=Math.min(bb.h,_1290.h)-(bb.h-_1291.h);if(this._singleChild&&this._singleChild.resize){if(typeof this._singleChildOriginalStyle=="undefined"){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;}this._singleChild.resize({w:w,h:h});}else{_127e.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!_127c.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,_1292=_127f.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:_127d.position(node),l=Math.floor(_1292.l+(p?p.x:(_1292.w-bb.w)/2)),t=Math.floor(_1292.t+(p?p.y:(_1292.h-bb.h)/2));_127e.set(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var node=evt.target;if(evt.charOrCode===keys.TAB){this._getFocusItems(this.domNode);}var _1293=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===keys.TAB){if(!_1293){focus.focus(this._lastFocusItem);}event.stop(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===keys.TAB&&!evt.shiftKey){if(!_1293){focus.focus(this._firstFocusItem);}event.stop(evt);}else{while(node){if(node==this.domNode||_127c.contains(node,"dijitPopup")){if(evt.charOrCode==keys.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==keys.TAB){event.stop(evt);}else{if(!has("opera")){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}var win=_127f.get(this.ownerDocument);this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize")));this._modalconnects.push(on(this.domNode,_1279._keypress,lang.hitch(this,"_onKey")));_127e.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _1294;this._fadeInDeferred=new _127b(lang.hitch(this,function(){_1294.stop();delete this._fadeInDeferred;}));_1294=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,function(){_128d.show(this,this.underlayAttrs);}),onEnd:lang.hitch(this,function(){if(this.autofocus&&_128d.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized||!this.open){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _1295;this._fadeOutDeferred=new _127b(lang.hitch(this,function(){_1295.stop();delete this._fadeOutDeferred;}));this._fadeOutDeferred.then(lang.hitch(this,"onHide"));_1295=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){this.domNode.style.display="none";_128d.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}var h;while(h=this._modalconnects.pop()){h.remove();}if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},resize:function(){if(this.domNode.style.display!="none"){if(_1288._singleton){_1288._singleton.layout();}this._position();this._size();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}var h;while(h=this._modalconnects.pop()){h.remove();}_128d.hide(this);this.inherited(arguments);}});var _1296=_127a("dijit.Dialog",[_1289,_128b],{});_1296._DialogBase=_128b;var _128d=_1296._DialogLevelManager={_beginZIndex:950,show:function(_1297,_1298){ds[ds.length-1].focus=focus.curNode;var _1299=_1288._singleton;if(!_1299||_1299._destroyed){_1299=dijit._underlay=_1288._singleton=new _1288(_1298);}else{_1299.set(_1297.underlayAttrs);}var _129a=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_1296._DialogLevelManager._beginZIndex;if(ds.length==1){_1299.show();}_127e.set(_1288._singleton.domNode,"zIndex",_129a-1);_127e.set(_1297.domNode,"zIndex",_129a);ds.push({dialog:_1297,underlayAttrs:_1298,zIndex:_129a});},hide:function(_129b){if(ds[ds.length-1].dialog==_129b){ds.pop();var pd=ds[ds.length-1];if(!_1288._singleton._destroyed){if(ds.length==1){_1288._singleton.hide();}else{_127e.set(_1288._singleton.domNode,"zIndex",pd.zIndex-1);_1288._singleton.set(pd.underlayAttrs);}}if(_129b.refocus){var focus=pd.focus;if(pd.dialog&&(!focus||!dom.isDescendant(focus,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);focus=pd.dialog._firstFocusItem;}if(focus){try{focus.focus();}catch(e){}}}}else{var idx=array.indexOf(array.map(ds,function(elem){return elem.dialog;}),_129b);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_129c){return ds[ds.length-1].dialog==_129c;}};var ds=_1296._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];if(has("dijit-legacy-requires")){ready(0,function(){var _129d=["dijit/TooltipDialog"];_1278(_129d);});}return _1296;});},"WebScene/lib/GLTexture":function(){define("WebScene/lib/GLTexture",["dijit","dojo","dojox","dojo/require!WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.GLTexture");dojo.require("WebScene.lib.Util");GLTextureRep=function(){var _129e=new Object();var _129f=0;this.add=function(name,_12a0){assert(_129e[name]==undefined);_129e[name]=_12a0;};this.get=function(name,raw,gl){var _12a1=_129e[name];if(_12a1===undefined){_12a1=gl.createTexture();++_129f;var image=new Image();image.src=raw;image.onload=function(){texImage2D(_12a1,image,gl);--_129f;};this.add(name,_12a1);}return _12a1;};this.getLoadingCount=function(){return _129f;};};});},"dojo/query":function(){define(["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(dojo,has,dom,on,array,lang,_12a2,_12a3){"use strict";has.add("array-extensible",function(){return lang.delegate([],{length:1}).length==1&&!has("bug-for-in-skips-shadowed");});var ap=Array.prototype,aps=ap.slice,apc=ap.concat,_12a4=array.forEach;var tnl=function(a,_12a5,_12a6){var _12a7=new (_12a6||this._NodeListCtor||nl)(a);return _12a5?_12a7._stash(_12a5):_12a7;};var _12a8=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||dojo.global;return function(node){a[0]=node;return f.apply(o,a);};};var _12a9=function(f,o){return function(){this.forEach(_12a8(f,arguments,o));return this;};};var _12aa=function(f,o){return function(){return this.map(_12a8(f,arguments,o));};};var _12ab=function(f,o){return function(){return this.filter(_12a8(f,arguments,o));};};var _12ac=function(f,g,o){return function(){var a=arguments,body=_12a8(f,a,o);if(g.call(o||dojo.global,a)){return this.map(body);}this.forEach(body);return this;};};var _12ad=function(array){var isNew=this instanceof nl&&has("array-extensible");if(typeof array=="number"){array=Array(array);}var _12ae=(array&&"length" in array)?array:arguments;if(isNew||!_12ae.sort){var _12af=isNew?this:[],l=_12af.length=_12ae.length;for(var i=0;i<l;i++){_12af[i]=_12ae[i];}if(isNew){return _12af;}_12ae=_12af;}lang._mixin(_12ae,nlp);_12ae._NodeListCtor=function(array){return nl(array);};return _12ae;};var nl=_12ad,nlp=nl.prototype=has("array-extensible")?[]:{};nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=_12aa;nl._adaptAsForEach=_12a9;nl._adaptAsFilter=_12ab;nl._adaptWithCondition=_12ac;_12a4(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null);};});_12a4(["indexOf","lastIndexOf","every","some"],function(name){var f=array[name];nlp[name]=function(){return f.apply(dojo,[this].concat(aps.call(arguments,0)));};});lang.extend(_12ad,{constructor:nl,_NodeListCtor:nl,toString:function(){return this.join(",");},_stash:function(_12b0){this._parent=_12b0;return this;},on:function(_12b1,_12b2){var _12b3=this.map(function(node){return on(node,_12b1,_12b2);});_12b3.remove=function(){for(var i=0;i<_12b3.length;i++){_12b3[i].remove();}};return _12b3;},end:function(){if(this._parent){return this._parent;}else{return new this._NodeListCtor(0);}},concat:function(item){var t=aps.call(this,0),m=array.map(arguments,function(a){return aps.call(a,0);});return this._wrap(apc.apply(t,m),this);},map:function(func,obj){return this._wrap(array.map(this,func,obj),this);},forEach:function(_12b4,_12b5){_12a4(this,_12b4,_12b5);return this;},filter:function(_12b6){var a=arguments,items=this,start=0;if(typeof _12b6=="string"){items=query._filterResult(this,a[0]);if(a.length==1){return items._stash(this);}start=1;}return this._wrap(array.filter(items,a[start],a[start+1]),this);},instantiate:function(_12b7,_12b8){var c=lang.isFunction(_12b7)?_12b7:lang.getObject(_12b7);_12b8=_12b8||{};return this.forEach(function(node){new c(_12b8,node);});},at:function(){var t=new this._NodeListCtor(0);_12a4(arguments,function(i){if(i<0){i=this.length+i;}if(this[i]){t.push(this[i]);}},this);return t._stash(this);}});function _12b9(_12ba,_12bb){var query=function(query,root){if(typeof root=="string"){root=dom.byId(root);if(!root){return new _12bb([]);}}var _12bc=typeof query=="string"?_12ba(query,root):query?query.orphan?query:[query]:[];if(_12bc.orphan){return _12bc;}return new _12bb(_12bc);};query.matches=_12ba.match||function(node,_12bd,root){return query.filter([node],_12bd,root).length>0;};query.filter=_12ba.filter||function(nodes,_12be,root){return query(_12be,root).filter(function(node){return array.indexOf(nodes,node)>-1;});};if(typeof _12ba!="function"){var _12bf=_12ba.search;_12ba=function(_12c0,root){return _12bf(root||document,_12c0);};}return query;};var query=_12b9(_12a3,_12ad);dojo.query=_12b9(_12a3,function(array){return _12ad(array);});query.load=function(id,_12c1,_12c2){_12a2.load(id,_12c1,function(_12c3){_12c2(_12b9(_12c3,_12ad));});};dojo._filterQueryResult=query._filterResult=function(nodes,_12c4,root){return new _12ad(query.filter(nodes,_12c4,root));};dojo.NodeList=query.NodeList=_12ad;return query;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var _12c5={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_12c6){var _12c7=win.doc,mark=_12c6.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_12c7.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_12c7.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n);});}else{rg=_12c7.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_12c8){var node=!focus.curNode||(menu&&dom.isDescendant(focus.curNode,menu.domNode))?dijit._prevFocus:focus.curNode;return {node:node,bookmark:node&&(node==focus.curNode)&&win.withGlobal(_12c8||win.global,dijit.getBookmark),openedForWindow:_12c8};},_activeStack:[],registerIframe:function(_12c9){return focus.registerIframe(_12c9);},unregisterIframe:function(_12ca){_12ca&&_12ca.remove();},registerWin:function(_12cb,_12cc){return focus.registerWin(_12cb,_12cc);},unregisterWin:function(_12cd){_12cd&&_12cd.remove();}};focus.focus=function(_12ce){if(!_12ce){return;}var node="node" in _12ce?_12ce.node:_12ce,_12cf=_12ce.bookmark,_12d0=_12ce.openedForWindow,_12d1=_12cf?_12cf.isCollapsed:false;if(node){var _12d2=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_12d2&&_12d2.focus){try{_12d2.focus();}catch(e){}}focus._onFocusNode(node);}if(_12cf&&win.withGlobal(_12d0||win.global,dijit.isCollapsed)&&!_12d1){if(_12d0){_12d0.focus();}try{win.withGlobal(_12d0||win.global,dijit.moveToBookmark,null,[_12cf]);}catch(e2){}}};focus.watch("curNode",function(name,_12d3,_12d4){dijit._curFocus=_12d4;dijit._prevFocus=_12d3;if(_12d4){topic.publish("focusNode",_12d4);}});focus.watch("activeStack",function(name,_12d5,_12d6){dijit._activeStack=_12d6;});focus.on("widget-blur",function(_12d7,by){topic.publish("widgetBlur",_12d7,by);});focus.on("widget-focus",function(_12d8,by){topic.publish("widgetFocus",_12d8,by);});lang.mixin(dijit,_12c5);return dijit;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(array,_12d9,_12da,dom,_12db,_12dc,has,dijit){var shown=(dijit._isElementShown=function(elem){var s=_12dc.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_12db.get(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _12db.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _12dd=elem.contentDocument;if("designMode" in _12dd&&_12dd.designMode=="on"){return true;}body=_12dd.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _12de=(dijit.isTabNavigable=function(elem){if(_12db.get(elem,"disabled")){return false;}else{if(_12db.has(elem,"tabIndex")){return _12db.get(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var first,last,_12df,_12e0,_12e1,_12e2,_12e3={};function _12e4(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _12e5=function(_12e6){for(var child=_12e6.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")&&child.scopeName!=="HTML")||!shown(child)){continue;}if(_12de(child)){var _12e7=+_12db.get(child,"tabIndex");if(!_12db.has(child,"tabIndex")||_12e7==0){if(!first){first=child;}last=child;}else{if(_12e7>0){if(!_12df||_12e7<_12e0){_12e0=_12e7;_12df=child;}if(!_12e1||_12e7>=_12e2){_12e2=_12e7;_12e1=child;}}}var rn=_12e4(child);if(_12db.get(child,"checked")&&rn){_12e3[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_12e5(child);}}};if(shown(root)){_12e5(root);}function rs(node){return _12e3[_12e4(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_12df),highest:rs(_12e1)};};dijit.getFirstInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;};dijit.getLastInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;};return {hasDefaultTabStop:dijit.hasDefaultTabStop,isTabNavigable:dijit.isTabNavigable,_getTabNavigable:dijit._getTabNavigable,getFirstInTabbingOrder:dijit.getFirstInTabbingOrder,getLastInTabbingOrder:dijit.getLastInTabbingOrder};});},"WebScene/app/JSON2Model":function(){define("WebScene/app/JSON2Model",["dijit","dojo","dojox","dojo/require!WebScene/app/Model,WebScene/lib/Base64,WebScene/lib/Geometry,WebScene/lib/gl-matrix,WebScene/lib/Light,WebScene/lib/Material,WebScene/lib/Object3D,WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.JSON2Model");dojo.require("WebScene.app.Model");dojo.require("WebScene.lib.Base64");dojo.require("WebScene.lib.Geometry");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.Light");dojo.require("WebScene.lib.Material");dojo.require("WebScene.lib.Object3D");dojo.require("WebScene.lib.Util");var _12e8=function(_12e9,_12ea,_12eb){var _12ec=new Object();for(name in _12e9){var _12ed=_12e9[name];if(fallbackIfUndefined(_12ed.polygonOffset,false)){for(var i=0,_12ee=_12ed.materials.length;i<_12ee;++i){_12ec[_12ed.materials[i]]=undefined;}}}for(name in _12ec){_12ea[name].parameters.polygonOffset=true;}var _12ef=new Object();var _12f0=new Object();var SEP="#";for(name in _12ea){var p=_12ea[name].parameters;var str=p.map+SEP+p.transparency+SEP+p.transparent+SEP+p.ambient+SEP+p.color+SEP+p.specular+SEP+p.shininess+SEP+p.polygonOffset;var mat=_12ef[str];if(mat!==undefined){_12f0[name]=mat;delete _12ea[name];}else{_12f0[name]=name;_12ef[str]=name;}}for(name in _12e9){var _12ea=_12e9[name].materials;for(var i=0,_12ee=_12ea.length;i<_12ee;++i){_12ea[i]=_12f0[_12ea[i]];}}for(var name in _12eb){var _12f1=_12eb[name];if(!_12f1.fov){_12f1.fov=54;}}};var _12f2=function(mat,v){mat[12]=v[0];mat[13]=v[1];mat[14]=v[2];};var _12f3=function(mat,v){var a=Math.cos(v[0]);var b=Math.sin(v[0]);var c=Math.cos(v[1]);var d=Math.sin(v[1]);var e=Math.cos(v[2]);var f=Math.sin(v[2]);var ae=a*e,af=a*f,be=b*e,bf=b*f;mat[0]=c*e;mat[4]=-c*f;mat[8]=d;mat[1]=af+be*d;mat[5]=ae-bf*d;mat[9]=-b*c;mat[2]=bf-ae*d;mat[6]=be+af*d;mat[10]=a*c;};var _12f4=function(_12f5,_12f6,scale){var mat=mat4.identity();_12f2(mat,_12f5);_12f3(mat,_12f6);mat4.scale(mat,scale,mat);return mat;};var _12f7=0;var _12f8=1;var _12f9=2;var _12fa=3;var _12fb=4;var _12fc=5;var _12fd=6;var _12fe=7;var _12ff=function(_1300,_1301){return _1300&(1<<_1301);};var _1302=function(src,i0,i1,i2,size,dst,_1303,_1304){for(var i=0;i<3;++i){var idx=i===0?i0:i===1?i1:i2;for(var j=0;j<size;++j){dst[_1303+j]=src[size*idx+j];}_1303+=_1304;}};var _1305=function(_1306,_1307,_1308,uvs){var _1309=_1306.length;var _130a=0;var _130b=0;while(_130b<_1309){var _130c=_1306[_130b];assert(!_12ff(_130c,_12f7));assert(_12ff(_130c,_12f8));assert(!_12ff(_130c,_12f9));assert(!_12ff(_130c,_12fb));assert(_12ff(_130c,_12fc));assert(!_12ff(_130c,_12fd));assert(!_12ff(_130c,_12fe));assert(_130c==42||_130c==34);_130a=Math.max(_130a,_1306[_130b+4]+1);_130b+=_130c==42?11:8;}assert(_130b===_1309);var _130d=new Array(_130a);for(var i=0;i<_130a;++i){_130d[i]=0;}_130b=0;while(_130b<_1309){var _130c=_1306[_130b];++_130d[_1306[_130b+4]];_130b+=_12ff(_130c,_12fa)?11:8;}var _130e=8;var _130f=new Object();_130f[VertexAttrConstants.POSITION]=0;_130f[VertexAttrConstants.NORMAL]=3;_130f[VertexAttrConstants.UV0]=6;var data=new Array(_130a);for(var i=0;i<_130a;++i){data[i]=new Float32Array(_130d[i]*3*_130e);}for(var i=0;i<_130a;++i){_130d[i]=0;}_130b=0;while(_130b<_1309){var _130c=_1306[_130b];var mat=_1306[_130b+4];var cur=_130d[mat]*3*_130e;_1302(_1307,_1306[_130b+1],_1306[_130b+2],_1306[_130b+3],3,data[mat],cur,_130e);if(_130c===42){_1302(uvs,_1306[_130b+5],_1306[_130b+6],_1306[_130b+7],2,data[mat],cur+6,_130e);_1302(_1308,_1306[_130b+8],_1306[_130b+9],_1306[_130b+10],3,data[mat],cur+3,_130e);_130b+=11;}else{for(var i=6;i<8;++i){data[mat][cur+i]=-1;}for(var i=14;i<16;++i){data[mat][cur+i]=-1;}for(var i=22;i<24;++i){data[mat][cur+i]=-1;}_1302(_1308,_1306[_130b+5],_1306[_130b+6],_1306[_130b+7],3,data[mat],cur+3,_130e);_130b+=8;}++_130d[mat];}var _1310=new Array(_130a);for(var i=0;i<_130a;++i){_1310[i]=new InterleavedData(data[i],_130f,_130e);}return _1310;};var _1311=function(_1312,_1313,model){for(name in _1312){var _1314=_1312[name];if(_1314.type=="sphere"){var _1315=new Geometry(createSphereGeometry(100));model.addGeometry(name,_1315);}else{var embed=_1313[_1314.id];var faces=typeof (embed.faces)==="string"?Base64Binary.decodeInt32(embed.faces):embed.faces;var _1316=typeof (embed.vertices)==="string"?Base64Binary.decodeFloat32(embed.vertices):embed.vertices;var _1317=typeof (embed.normals)==="string"?Base64Binary.decodeFloat32(embed.normals):embed.normals;var uvs=typeof (embed.uvs[0])==="string"?Base64Binary.decodeFloat32(embed.uvs[0]):embed.uvs[0];data=_1305(faces,_1316,_1317,uvs);var _1315=new Geometry(data);model.addGeometry(name,_1315);}}for(name in _1312){var _1314=_1312[name];if(_1314.type!=="sphere"){var embed=_1313[_1314.id];if(embed.vertices!==undefined){embed.vertices=undefined;}if(embed.normals!==undefined){embed.normals=undefined;}if(embed.uvs!==undefined&&embed.uvs[0]!==undefined){embed.uvs[0]=undefined;}if(embed.faces!==undefined){embed.faces=undefined;}}}};var _1318=function(map,_1319){var _131a=_1319[map];assert(_131a!=undefined);if(_131a.raw==undefined){return null;}return _131a.raw;};var _131b=function(_131c,_131d,model){var _131e="0xffffff";var _131f="0xffffff";var _1320="0xffffff";var _1321=64;for(name in _131c){var p=_131c[name].parameters;var map=p.map;var _1322=map==undefined?undefined:_1318(map,_131d);var _1323=p.transparency;var _1324=p.transparent||_1323<1;var _1325=hex2rgb(fallbackIfUndefined(p.ambient,_131e));var _1326=hex2rgb(fallbackIfUndefined(p.color,_131f));var _1327=hex2rgb(fallbackIfUndefined(p.specular,_1320));var _1328=fallbackIfUndefined(p.shininess,_1321);var _1329=fallbackIfUndefined(p.polygonOffset,false);var _132a=map!=="envTex_panorama";var _132b=map!==undefined;var _132c=new Material(map,_1322,_1324,_1325,_1326,_1327,_1328,_1323,_1329,_132a,_132b);model.addMaterial(name,_132c);}};var _132d=function(_132e,model){for(name in _132e){var layer=new Object();layer["name"]=name;layer["group"]=_132e[name]["group"]||"";layer["state"]=_132e[name]["state"];layer["interaction"]=_132e[name]["interaction"];layer["objects"]=new Array();model.addLayer(name,layer);}};var _132f=function(_1330,model){var _1331=model.getLayers();for(name in _1330){var _1332=_1330[name];var _1333=new Array(1);_1333[0]=_1332.geometry;var _1334=new Array(1);_1334[0]=_1332.materials;var _1335=new Array(1);_1335[0]=_12f4(_1332.position,_1332.rotation,_1332.scale);var _1336=fallbackIfUndefined(_1332.castShadow,true);model.addObject(name,new Object3D(_1333,model.getGeometries(),_1334,_1335,_1336,_1332.custom,name));var layer=_1331[_1332.custom.ceLayer];assert(layer!==undefined);layer["objects"].push(name);}};var _1337=function(_1338,model){for(name in _1338){var light=_1338[name];if(light.type=="ambient"){var color=hex2rgb(light.color);var _1339=light.intensity;var ssao=light.ssao;var _133a=light.ssaoAttenuation;var _133b=light.ssaoRadius;var _133c=light.ssaoFilterRadius;var _133d=light.ssaoSamples;model.setAmbientLight(new AmbientLight(color,_1339,ssao,_133a,_133b,_133c,_133d));}else{if(light.type=="directional"){var color=hex2rgb(light.color);var _1339=light.intensity;var _133e=light.custom.azimuthAngle;var _133f=light.custom.elevationAngle;var _1340=light.custom.shadowAttenuation;var _1341=light.custom["shadows"]!==undefined?light.custom["shadows"]:true;model.setDirectionalLight(new DirectionalLight(color,_1339,_133e,_133f,_1341,_1340));}}}var al=model.getAmbientLight();var dl=model.getDirectionalLight();assert(al!=undefined&&dl!=undefined);var _1342=dl.elevationAngle/90;al.intensity*=2*(0.2+0.4*_1342);dl.intensity*=2*(0.7+1*_1342);};var _1343=function(_1344,model){for(var name in _1344){model.addBookmark(name,_1344[name]);}};json2model=function(json,_1345){var _1346=1;if(json.metadata===undefined||json.metadata.formatVersion===undefined){_1345("error","json scene file does not specify a formatVersion, might not be compatible");return false;}if(json.metadata.formatVersion!=_1346){_1345("error","incompatible scene file",". json scene file formatVersion "+json.metadata.formatVersion+" is not supported by this app (required formatVersion >= "+_1346)+")";return false;}_12e8(json.objects,json.materials,json.cameras);var model=new Model();var d0=new Date();model.setMetadata(json.metadata.custom);_1311(json.geometries,json.embeds,model);_131b(json.materials,json.textures,model);_132d(json.layers,model);_132f(json.objects,model);_1337(json.lights,model);_1343(json.cameras,model);var d1=new Date();return model;};});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_1347,_1348){return _1347("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _1349=this.checked;this._set("checked",!_1349);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_1349);return ret;},_setCheckedAttr:function(value,_134a){this._set("checked",value);_1348.set(this.focusNode||this.domNode,"checked",value);(this.focusNode||this.domNode).setAttribute(this._aria_attr,value?"true":"false");this._handleOnChange(value,_134a);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_134b,_134c,_134d,_134e,has,_134f,lang,query,ready,_1350,_1351,_1352,_1353){function _1354(){};function _1355(_1356){return function(obj,event,scope,_1357){if(obj&&typeof event=="string"&&obj[event]==_1354){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_1357));}return _1356.apply(_134d,arguments);};};_134b.around(_134d,"connect",_1355);if(_134f.connect){_134b.around(_134f,"connect",_1355);}var _1358=_134e("dijit._Widget",[_1351,_1352,_1353],{onClick:_1354,onDblClick:_1354,onKeyDown:_1354,onKeyPress:_1354,onKeyUp:_1354,onMouseDown:_1354,onMouseMove:_1354,onMouseOut:_1354,onMouseOver:_1354,onMouseLeave:_1354,onMouseEnter:_1354,onMouseUp:_1354,constructor:function(_1359){this._toConnect={};for(var name in _1359){if(this[name]===_1354){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_1359[name];delete _1359[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_1354){return _134d.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_134f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){if(_134c.isDebug){var _135a=arguments.callee._ach||(arguments.callee._ach={}),_135b=(arguments.callee.caller||"unknown caller").toString();if(!_135a[_135b]){_134f.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_135b,"","2.0");_135a[_135b]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_134f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_1350.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _135c=["dijit/_base"];require(_135c);});}return _1358;});},"dojo/json":function(){define(["./has"],function(has){"use strict";var _135d=typeof JSON!="undefined";has.add("json-parse",_135d);has.add("json-stringify",_135d&&JSON.stringify({a:0},function(k,v){return v||1;})=="{\"a\":1}");if(has("json-stringify")){return JSON;}else{var _135e=function(str){return ("\""+str.replace(/(["\\])/g,"\\$1")+"\"").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r");};return {parse:has("json-parse")?JSON.parse:function(str,_135f){if(_135f&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str)){throw new SyntaxError("Invalid characters in JSON");}return eval("("+str+")");},stringify:function(value,_1360,_1361){var undef;if(typeof _1360=="string"){_1361=_1360;_1360=null;}function _1362(it,_1363,key){if(_1360){it=_1360(key,it);}var val,_1364=typeof it;if(_1364=="number"){return isFinite(it)?it+"":"null";}if(_1364=="boolean"){return it+"";}if(it===null){return "null";}if(typeof it=="string"){return _135e(it);}if(_1364=="function"||_1364=="undefined"){return undef;}if(typeof it.toJSON=="function"){return _1362(it.toJSON(key),_1363,key);}if(it instanceof Date){return "\"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z\"".replace(/\{(\w+)(\+)?\}/g,function(t,prop,plus){var num=it["getUTC"+prop]()+(plus?1:0);return num<10?"0"+num:num;});}if(it.valueOf()!==it){return _1362(it.valueOf(),_1363,key);}var _1365=_1361?(_1363+_1361):"";var sep=_1361?" ":"";var _1366=_1361?"\n":"";if(it instanceof Array){var itl=it.length,res=[];for(key=0;key<itl;key++){var obj=it[key];val=_1362(obj,_1365,key);if(typeof val!="string"){val="null";}res.push(_1366+_1365+val);}return "["+res.join(",")+_1366+_1363+"]";}var _1367=[];for(key in it){var _1368;if(it.hasOwnProperty(key)){if(typeof key=="number"){_1368="\""+key+"\"";}else{if(typeof key=="string"){_1368=_135e(key);}else{continue;}}val=_1362(it[key],_1365,key);if(typeof val!="string"){continue;}_1367.push(_1366+_1365+_1368+":"+sep+val);}}return "{"+_1367.join(",")+_1366+_1363+"}";};return _1362(value,"","");}};}});},"dojo/touch":function(){define("dojo/touch",["./_base/kernel","./_base/lang","./aspect","./dom","./on","./has","./mouse","./ready","./_base/window"],function(dojo,lang,_1369,dom,on,has,mouse,ready,win){var _136a=has("touch");var _136b,_136c;if(_136a){ready(function(){_136c=win.body();win.doc.addEventListener("touchstart",function(evt){var _136d=_136c;_136c=evt.target;on.emit(_136d,"dojotouchout",{target:_136d,relatedTarget:_136c,bubbles:true});on.emit(_136c,"dojotouchover",{target:_136c,relatedTarget:_136d,bubbles:true});},true);on(win.doc,"touchmove",function(evt){var _136e=win.doc.elementFromPoint(evt.pageX-win.global.pageXOffset,evt.pageY-win.global.pageYOffset);if(_136e&&_136c!==_136e){on.emit(_136c,"dojotouchout",{target:_136c,relatedTarget:_136e,bubbles:true});on.emit(_136e,"dojotouchover",{target:_136e,relatedTarget:_136c,bubbles:true});_136c=_136e;}});});_136b=function(node,_136f){return on(win.doc,"touchmove",function(evt){if(node===win.doc||dom.isDescendant(_136c,node)){_136f.call(this,lang.mixin({},evt,{target:_136c}));}});};}function _1370(type){return function(node,_1371){return on(node,type,_1371);};};var touch={press:_1370(_136a?"touchstart":"mousedown"),move:_136a?_136b:_1370("mousemove"),release:_1370(_136a?"touchend":"mouseup"),cancel:_136a?_1370("touchcancel"):mouse.leave,over:_1370(_136a?"dojotouchover":"mouseover"),out:_1370(_136a?"dojotouchout":"mouseout"),enter:mouse._eventHandler(_136a?"dojotouchover":"mouseover"),leave:mouse._eventHandler(_136a?"dojotouchout":"mouseout")};1&&(dojo.touch=touch);return touch;});},"WebScene/app/UI":function(){define("WebScene/app/UI",["dijit","dojo","dojox","dojo/i18n!WebScene/nls/cewebviewer","dojo/require!dojo/string,dojo/query,WebScene/app/SunUtils,WebScene/app/UIUtils,WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.UI");dojo.require("dojo.string");dojo.require("dojo.query");dojo.require("WebScene.app.SunUtils");dojo.require("WebScene.app.UIUtils");dojo.require("WebScene.lib.Util");dojo.requireLocalization("WebScene","cewebviewer");var UI=window.UI=function(stg){var stage=stg;var _1372=stage.getAgoItem();if(_1372){_1372.store=new AgolUtils.Store(stage,stage.getAgoItem().item);}var _1373=new WebScene.Utils.Configuration(stage,{});_1373.loadFromUrl();if(_1373.scene.reducedUI){_1374();function _1375(){var _1376=stage.getModel().getMetadata().scs.center_lonlat||[8.533333,47.383333];var clr=[1,1,1];var _1377=new SunUtils();var _1378=_1377.getAnglesDefault(_1376);stage.setLight({azimuthAngle:180-_1378.azimuth,elevationAngle:_1378.elevation,color:clr});};_1375();}this.createNav=function(p){new UI.Nav(p,stage);};this.createBookmarks=function(p){new UI.Bookmarks(p,stage);};this.createMenu=function(p){if(!_1373.scene.reducedUI){this.menu=new UI.Menu(p,stage);}};this.createHead=function(p){new UI.Head(p,stage);};this.createFoot=function(p){new UI.Foot(p);};this.createStatus=function(p){new UI.Status(p,stage);};function _1374(){var st=document.createElement("style");document.body.appendChild(st);st.innerHTML="";st.innerHTML+=("#head{height: 27px;}");st.innerHTML+=("#head h1{font-weight: bold;font-size:1.2em; padding-top:7px;}");st.innerHTML+=("span#topLinks{display:none;}");st.innerHTML+=("#wvlogo{background:url(css/images/CityEngine-Web-Viewer_banner_half.png);width:119px;height:27px}");st.innerHTML+=("#zoomSliderContainer{display: none;}");st.innerHTML+=("#container{top: 27px;}");st.innerHTML+=("#nav{top: 27px;margin-top:0px;}");st.innerHTML+=("#navZoomIn, #navZoomOut{top: 0px;}");st.innerHTML+=("#head{right: 0px;}");st.innerHTML+=("#head h1{left: 119px;right:110px;}");st.innerHTML+=("#bookmarkButtonsContainer {bottom:7px}");st.innerHTML+=("#bookmarksSlider .handle {top: 1px;}");st.innerHTML+=("#bookmarksChooser .horizontalScrollbar {height: 10px;}");st.innerHTML+=("#playerCurrent {bottom: 32px;}");st.innerHTML+=("#bookmarksCloseButton {right: 4px; bottom: 43px;}");st.innerHTML+=(".bookmark p {bottom: 2px;width: 74px;margin: 0 1px;font-size:10px}");st.innerHTML+=("#bookmarksChooserScroller span{margin:0 2px}");st.innerHTML+=("#playerContainer {margin-top: 8px;}");};};UI.i18n=function(){if(this._i18n){return this._i18n;}this._i18n=dojo.mixin({},dojo.i18n.getLocalization("WebScene","cewebviewer").common);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").ui);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").viewerPage);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").signInOut);return this._i18n;};UI.Nav=function(m,stage){var _1379=dojo.create("div",{id:"navContainer"},m);var _137a=[];function _137b(){var _137c=(_137d.getActive()+1)%2;_137d.setActive(_137c);stage.setControls(_137c==0?Controller.TUMBLE:Controller.PAN);};var _137e=new UIUtils.ComboButton({"class":"navButton",icon1:"navTumble"});_137e.icon1.onclick=function(){_137b();};_137a.push(_137e);var _137f=new UIUtils.ComboButton({"class":"navButton",icon1:"navPan"});_137f.icon1.onclick=function(){_137b();};_137a.push(_137f);var _137d=new UIUtils.RadioGroup(_137a,"navGroup");_137d.setActive(0);stage.setControls(Controller.TUMBLE);_1379.appendChild(_137d.listNode);function _1380(_1381){var sc=dojo.create("div",{id:"zoomSliderContainer","class":"sliderContainer",},_1381);var range=stage.addCameraListener({"targetViewChanged":function(eye,_1382){_1383.set(_1384(vec3.dist(eye,_1382)),true);}});var _1385=stage.getCamera();var _1386=_1384(vec3.dist(_1385[0],_1385[1]));var _1383=new UIUtils.Slider("zoomSlider",function sliderCallback(_1387){var _1388=stage.getCamera();stage.setCamera(_1389(_1388,_138a(_1387)),_1388[1]);},sc,true,undefined,false);_1383.getBar().style.height="";_1383.setRange(range[0],range[1]);_1383.set(_1386);function _1384(_138b){return Math.sqrt((_138b-range[0])/(range[1]-range[0]));};function _138a(_138c){return lerp(range[0],range[1],Math.pow(_138c,2));};var tmpP=vec3.create();function _1389(_138d,_138e){return vec3.add(vec3.scale(vec3.normalize(vec3.subtract(_138d[0],_138d[1],tmpP)),_138e),_138d[1]);};this.zoomIn=function(){_1383.set(Math.max(_1383.get()-0.1,0.001),false);};this.zoomOut=function(){_1383.set(Math.min(_1383.get()+0.1,1),false);};};var _138f=dojo.create("div",{id:"navZoomContainer"},_1379);var _1390=dojo.create("div",{id:"navZoomIn","class":"navButton"},_138f);_1390.onclick=function(){_1391.zoomIn();};var _1391=new _1380(_138f);var _1392=dojo.create("div",{id:"navZoomOut","class":"navButton"},_138f);_1392.onclick=function(){_1391.zoomOut();};};UI.Bookmarks=function(m,stage){dojo.addClass(m,"textNotSelectable");this.WAIT_TIME=200;var that=this;var _1393=false;var _1394;var _1395={};this.toggleBookmarks=function(){if(_1393){that.closeBookmarks();}else{that.openBookmarks();}};this.openBookmarks=function(){_1396.show();_1393=true;UIUtils.show(_1397);dojo.publish("/bookmarks/show",[]);};this.closeBookmarks=function(){_1396.hide();_1393=false;UIUtils.hide(_1397);dojo.publish("/bookmarks/hide",[]);};var _1398=Object.keys(stage.getBookmarks());if(_1398&&_1398.length>0){if(_1398.length>1){for(var bm in stage.getBookmarks()){if(!_1394){_1394=bm;}else{_1395[bm]=stage.getBookmarks()[bm];}}_1398=Object.keys(_1395);}else{_1395=stage.getBookmarks();}var _1399=dojo.create("div",{id:"bookmarkButtonsContainer"},m);var _139a=dojo.create("div",{id:"bookmarksButton",className:"navButton"},_1399);_139a.onclick=function(){that.toggleBookmarks();};var _1396=new UI.Bookmarks.BookmarksChooser(m,_1395,stage);var _1397=dojo.create("div",{id:"bookmarksCloseButton",style:"display:none"},m);dojo.connect(_1397,"onclick",this.closeBookmarks);var _139b=stage.getConfiguration().scene.camera;if(_139b){stage.setCamera(_139b.position,_139b.target,true);stage.setFovX(_139b.fov,true);}else{_1396.resetView();}if(stage.getConfiguration().scene.autoplay&&_1398.length>1){_1396.getPlayer().togglePlay();}if(stage.getConfiguration().scene.reducedUI&&_1398.length>1){that.toggleBookmarks();}}};UI.Bookmarks.BookmarksChooser=function(_139c,_139d,stage){var that=this;var _139e=false;var _139f;var _13a0=dojo.keys.PAGE_UP;var _13a1=dojo.keys.PAGE_DOWN;var conf=stage.getConfiguration();var _13a2=conf.scene.reducedUI?72:144;var _13a3=conf.scene.reducedUI?40:81;var _13a4=-1;var _13a5=Object.keys(_139d);var _13a6=[];var _13a7;var _13a8;var _13a9=function(_13aa){var _13ab=4000;var _13ac;var _13ad;var _13ae=dojo.create("span",{id:"playerCurrent",className:"textNotSelectable"},_13aa);function _13af(){if(_13ad){_13ad.stop();_13ad=undefined;}if(_13ac){clearTimeout(_13ac);_13ac=undefined;}};function _13b0(){_13af();_13ac=setTimeout(function(){_13ad=dojo.fadeOut({node:_13ae,duration:_13ab*0.25});_13ad.play();},_13ab*0.4);};function _13b1(_13b2){_13ae.innerHTML=_13b2;dojo.fadeIn({node:_13ae,duration:_13ab*0.35,onEnd:_13b0}).play();};return {setCurrent:function(_13b3){_13af();if(_13ae.innerHTML==_13b3){_13b1(_13b3);}else{dojo.fadeOut({node:_13ae,duration:200,onEnd:function(){_13b1(_13b3);}}).play();}},show:function(){_13ae.style.display="block";},hide:function(){_13ae.style.display="none";}};}(_139c);this.getPlayer=function(){return _13a8;};this.hide=function(){_13b4.style.display="none";_13a9.show();};this.show=function(){_13b4.style.display="block";_13a7.updateWidth();_13a9.hide();};this.clearHighlight=function(){dojo.query(".bookmark.highlight","bookmarksChooser").forEach(function(node,index,arr){node.className="bookmark";});};this.highlightBookmark=function(_13b5,_13b6){that.clearHighlight();var div=dojo.byId(_13b5+"_button");if(div){div.className="bookmark highlight";}_13a7.scrollIntoView(div);if(!_13b6){_13a9.setCurrent(_13b5);}};this.resetView=function(){_13a4=0;that.highlightBookmark(_13a5[0],true);stage.gotoBookmark(_13a5[0]);};this.addKeyPressListener=function(){_139f=dojo.connect(dojo.doc,"onkeypress",function(e){if(e&&e.target&&(e.target.nodeName=="INPUT"||e.target.nodeName=="TEXTAREA")){return;}if(e.keyCode==_13a0){that.goToBookmark(that.getPreviousBookmarkNumber());}else{if(e.keyCode==_13a1){that.goToBookmark(that.getNextBookmarkNumber());}else{var _13b7=parseInt(e.keyChar);if(!isNaN(_13b7)&&_13b7>=0&&_13b7<_13a5.length){that.goToBookmark(_13b7);}}}});};this.removeKeyPressListener=function(){if(_139f){dojo.disconnect(_139f);_139f=undefined;}};this.goToBookmark=function(_13b8){_13a8.goToBookmark(_13b8);};this.getPreviousBookmarkNumber=function(){return _13a4<=0?_13a5.length-1:_13a4-1;};this.getNextBookmarkNumber=function(){return (_13a4>=_13a5.length-1)?0:_13a4+1;};this.goToPreviousBookmark=function(){that.goToBookmark(that.getPreviousBookmarkNumber());};this.goToNextBookmark=function(){that.goToBookmark(that.getNextBookmarkNumber());};this.getCurrentBookmark=function(){return _13a4;};this.addBookmarkChangedEventListener=function(_13b9,_13ba){_13a6.push({func:_13b9,context:_13ba});};this.removeBookmarkChangedEventListener=function(_13bb){for(var i=0;i<_13a6.length;i++){if(_13a6[i].func===_13bb){_13a6.splice(i,1);}}};this.setCurrentBookmark=function(bm){var _13bc=_13a5[_13a4];var _13bd=_13a5[bm];_13a4=bm;_13be(_13bd,_13bc);};function _13be(_13bf,_13c0){for(var i=0;i<_13a6.length;i++){var _13c1=_13a6[i];_13c1.func.call(_13c1.context,_13bf,_13c0);}};var _13b4=dojo.create("div",{id:"bookmarksChooser"},_139c);UIUtils.hide(_13b4);var _13c2=dojo.create("div",{id:"bookmarksChooserScroller"},_13b4);_13a7=new UIUtils.HorizontalScrollbar("bookmarksSlider",_13b4,_13c2,8);_13a7.enableScrollTargetDrag();var _13c3=dojo.create("div",{id:"playerContainer"},"bookmarkButtonsContainer");_13a8=new UI.Bookmarks.BookmarksPlayer(_13c3,_139d,stage,that);dojo.subscribe("/menu/show",_13a7.updateWidth);dojo.subscribe("/menu/hide",_13a7.updateWidth);var views=[];for(var item in _139d){views.push([_139d[item].position,_139d[item].target,deg2rad(_139d[item].fov)]);}var _13c4=[];for(var i=0;i<_13a5.length;i++){var name=_13a5[i];var bm=dojo.create("span",{id:name+"_button",className:"bookmark",value:i,style:"width: "+_13a2+"px; height: "+_13a3+"px;"},_13c2);dojo.create("p",{innerHTML:name,title:name},bm);_13c4[i]=dojo.create("img",{style:"width: "+_13a2+"px; height: "+_13a3+"px;"},bm);bm.addEventListener("click",function(event){that.goToBookmark(this.value);},true);}that.addKeyPressListener();function init(){if(_139e){return;}_139e=true;var _13c5=stage.renderScreenshots(_13a2*2,_13a3*2,views);for(var i=0;i<_13a5.length;i++){var thumb=byteBuffer2base64image(_13c5[i],_13a2*2,_13a3*2,"image/jpeg",0.7);_13c4[i].src=thumb;}};function _13c6(){if(_139e){return;}if(stage.getAllTexturesLoaded()){init();}else{setTimeout(_13c6,25);}};_13c6();};UI.Bookmarks.BookmarksPlayer=function(_13c7,_13c8,stage,_13c9){var that=this;var _13ca=dojo.keys.SPACE;var _13cb;var _13cc;var _13cd=false;var _13ce=Object.keys(_13c8);var _13cf=_13ce.length==1;var _13d0=dojo.create("div",{id:"bookmarksPlayer"},_13c7);function _13d1(){return _13cd&&(_13cc&&_13cc.isPlaying()||_13d2.isWaiting());};this.togglePlay=function(){if(_13d1()){that.pause();}else{_13cd=true;_13d3.forceHide();_13d4.className="bookmarkPlayerButton playing";that.play();}};this.pause=function(){_13d3.show();_13d2.clearWait();if(_13d1()){_13cc.cancel();}_13cd=false;if(_13d4){_13d4.className="bookmarkPlayerButton";}_13c9.removeBookmarkChangedEventListener(that.pause);};this.play=function(){var _13d5;if(_13cc&&_13cc.isPlaying()){_13d5=_13cc.cancel();}else{_13d5=_13c9.getNextBookmarkNumber();}_13d6(_13d5);};function _13d6(_13d7,_13d8){var _13d9=_13c8[_13ce[_13d7]];if(!_13d9){return;}var _13da=stage.getCamera(true);if(arraysEqual(_13da[0],_13d9.position)&&arraysEqual(_13da[1],_13d9.target)){console.log("camera and next bookmark are the same");_13c9.setCurrentBookmark(_13d7);if(!_13d8){_13d2.startWait();}}else{if(_13cc&&_13cc.isPlaying()){_13cc.cancel();}var _13db=_13ce[_13d7];_13cc=new UI.Bookmarks.BookmarkTransition(stage,_13d7,_13db,_13c8[_13db],_13c9.setCurrentBookmark);if(!_13d8){_13cc.onBookmarkReached=_13d2.startWait;}_13cc.onTransitionInterrupted=function(){that.pause();};_13cc.addTransitionProgressListener(function(){_13c9.highlightBookmark(_13db);},2000);if(_13d8){_13cc.goFast();}else{_13cc.goSlow();}}};var _13d2=function(){var _13dc=undefined;return {isWaiting:function(){return !!_13dc;},startWait:function(){assert(!_13dc,"We are already waiting. TimeoutID should be undefined here.");_13dc=setTimeout(function(){_13dc=undefined;that.play();},_13c9.WAIT_TIME);},clearWait:function(){if(_13dc){clearTimeout(_13dc);_13dc=undefined;}}};}();this.addKeyPressListener=function(){_13cb=dojo.connect(dojo.doc,"onkeypress",function(e){if(e&&e.target&&(e.target.nodeName=="INPUT"||e.target.nodeName=="TEXTAREA")){return;}if((e.keyCode||e.charCode)==_13ca){that.togglePlay();}});};this.removeKeyPressListener=function(){if(_13cb){dojo.disconnect(_13cb);_13cb=undefined;}};this.goToBookmark=function(_13dd){_13dd=_13dd<0?0:_13dd;_13dd=_13dd>=_13ce.length?_13ce.length-1:_13dd;var _13de=_13ce[_13c9.getCurrentBookmark()];var _13df=_13ce[_13dd];if(_13dd==_13c9.getCurrentBookmark()){var cam=stage.getCamera(true);var bm=_13c8[_13df];if(bm&&arraysEqual(bm.position,cam[0])&&arraysEqual(bm.target,cam[1])){return;}}if(_13d1()){that.pause();}_13d6(_13dd,true);};if(_13cf){UIUtils.hide(_13c7);}else{var _13d4=dojo.create("div",{id:"playerPlayPauseButton","class":"bookmarkPlayerButton"},_13d0);_13d4.onclick=function(){that.togglePlay();};dojo.connect(stage.getContainer(),"onclick",function(e){if(e&&e.target&&e.target.nodeName=="CANVAS"){that.pause();}});this.addKeyPressListener();}var _13e0=function(hide){if(hide){dojo.byId("container").style.cursor="none";}else{dojo.byId("container").style.cursor="auto";}};var _13d3=new UIUtils.autoHide(["navContainer","bookmarkButtonsContainer"],function(){_13e0(true);},_13e0);_13d3.start();};UI.Bookmarks.BookmarkTransition=function(stage,_13e1,_13e2,bm,_13e3){var _13e4={fast:{speed:80,accel:100,maxtime:5},slow:{speed:50,accel:40,maxtime:10}};var _13e5=false;var _13e6=[];var _13e7=function(){var _13e8=stage.getCamera(true);var tb=stage.getTrackball();var _13e9=Math.max(vec3.dist(_13e8[0],bm.position),vec3.dist(_13e8[1],bm.target));function _13ea(mode,dist){var _13eb=1;var _13ec=dist/mode.maxtime*_13eb;var _13ed=Math.max(mode.speed,_13ec);var _13ee=mode.accel/mode.speed*_13ed;return {speed:Math.round(_13ed),accel:Math.round(_13ee),time:-1};};return {setStandard:function(){tb.setInterpolation(new Trackball.DEFAULT_INTERPOLATION());},setEaseInOut:function(mode){var _13ef=_13ea(mode,_13e9);var _13f0=new Trackball.EASE_IN_OUT_INTERPOLATION(_13ef.speed,_13ef.accel);_13ef.time=_13f0.calculateInterpolationTime(_13e9);tb.setInterpolation(_13f0);return _13ef;}};}();var _13f1={currentViewReachedTarget:function(eye,_13f2){_13f3();},targetViewChanged:function(eye,_13f4){_13f5();}};function _13f3(){_13e5=false;isReached=true;stage.removeCameraListener(_13f1);_13e7.setStandard();_13e3(_13e1);that.onBookmarkReached(_13e1,_13e2,bm);};function _13f5(){_13f6();that.onTransitionInterrupted();};function _13f6(){_13e5=false;stage.removeCameraListener(_13f1);_13e7.setStandard();var _13f7=stage.getCamera(true);stage.setCamera(_13f7[0],_13f7[1],true);if(_13e6){_13e6.forEach(function(_13f8){if(_13f8&&_13f8.timeoutHandle){clearTimeout(_13f8.timeoutHandle);_13f8.timeoutHandle=undefined;}});_13e6=[];}return _13e1;};function _13f9(time){if(_13e6&&_13e6.length>0){_13e6.forEach(function(_13fa){if(_13fa.timeoutHandle){clearTimeout(_13fa.timeoutHandle);}var _13fb=_13fa.percentage?1000*time*_13fa.percentage:Math.max(1000*time-_13fa.timeToEnd,0);_13fa["timeoutHandle"]=setTimeout(_13fa.func,_13fb);});}};function go(_13fc){_13e5=true;var _13fd=_13e7.setEaseInOut(_13fc);stage.addCameraListener(_13fe);stage.gotoBookmark(_13e2);_13f9(_13fd.time);return _13e1;};var _13fe={targetViewChanged:function(){stage.removeCameraListener(_13fe);stage.addCameraListener(_13f1);}};var that={goFast:function(){return go(_13e4.fast);},goSlow:function(){return go(_13e4.slow);},cancel:function(){return _13f6();},isPlaying:function(){return _13e5;},addTransitionProgressListener:function(func,_13ff,_1400){_13e6.push({timeToEnd:_13ff,percentage:_1400,func:func});},onBookmarkReached:function(_1401,_1402,_1403){},onTransitionInterrupted:function(){}};return that;};UI.Menu=function(m,stage){var _1404=dojo.create("div",{id:"topMenuContainer"},m);var _1405=dojo.create("div",{id:"panesContainer"},m);var that=this;var panes={};var _1406=-1;var _1407=-1;var _1408=350;function _1409(_140a,_140b){function _140c(_140d,_140e){if(_1407!==-1){panes[_1407].setActive(false);}if(_140d!==-1){panes[_140d].setActive(true);dojo.publish("/menu/"+_140d,[{pane:_140d}]);}if(_1407===-1&&_140d!==-1){UIUtils.show(_1405);UIUtils.updateViewToNewPaneState(true,_1408,stage.getContainer(),stage);dojo.publish("/menu/show");}else{if(_1407!==-1&&_140d===-1){UIUtils.hide(_1405);UIUtils.updateViewToNewPaneState(false,_1408,stage.getContainer(),stage);dojo.publish("/menu/hide");}}_1407=_140d;};if(_140a=="tab"){if(_140b==_1407){_140c(-1);}else{_140c(_140b);}_1406=_1407;}else{if(_140b){_140c("info");}else{_140c(_1406);}}};this.addPane=function(_140f,title,_1410){panes[_1410]=new _1411(title,_1410,_1405,_1404,_140f);};this.getPanes=function(){return panes;};this.addPane(_1412,UI.i18n().layersPaneTitle,"layers");this.addPane(_1413,UI.i18n().searchPaneTitle,"search");this.addPane(_1414,UI.i18n().settingsPaneTitle,"settings");this.addPane(_1415,UI.i18n().sharePaneTitle,"share");dojo.connect(panes["share"].getPaneElem(),"collectLayerStates",function(){panes["share"].getPaneElem().layerStates(that.getPanes()["layers"].getPaneElem().getUILayerGroups());});this.addPane(_1416,UI.i18n().infoPaneTitle,"info");dojo.connect(stage,"onSelectionChange",function(hit){_1409("select",hit!=undefined);});_1409("tab","layers");function _1411(name,_1417,_1418,_1419,_141a){var _141b=undefined;var _141c=undefined;this.getPaneElem=function(){return _141b;};this.setActive=function(_141d){UIUtils.setVisible(_141e,_141d);_141c.setActive(_141d);};var _141e=dojo.create("div",{id:"pane_"+_1417,"class":"pane"},_1418);dojo.create("div",{"class":"paneTitle",innerHTML:name},_141e);var _141f=dojo.create("div",{"class":"paneContent"},_141e);function UITab(name,tabID,_1420){var node=dojo.create("div",{id:"tab_"+tabID,"class":"tab inactive"},_1420);dojo.connect(node,"onclick",function(){_1409("tab",tabID);});this.setActive=function(acti){if(acti){dojo.replaceClass(node,"active","inactive");}else{dojo.replaceClass(node,"inactive","active");}};};_141b=new _141a(_141f);_141c=new UITab(name,_1417,_1419);this.setActive(false);this.paneWidth=_141f.offsetWidth;};function _1412(_1421){function _1422(_1423,_1424){var _1425=stage.getViewContent();for(var a in _1423[1]){if(_1425.indexOf(_1423[1][a])<0){_1425.push(_1423[1][a]);}}for(var r in _1423[0]){if(_1425.indexOf(_1423[0][r])>=0){_1425.splice(_1425.indexOf(_1423[0][r]),1);}}_1426(_1425,_1424);};function _1426(_1427,_1428){stage.setViewContent(_1427,_1428);};function _1429(_142a,_142b){var cnt=stage.getViewContent(0);stage.setViewMode(1);_1426(cnt,0);UIUtils.hide(ll.node);ppl.enter(_142a,_142b);UIUtils.show(ppl.node);};function _142c(){var cnt=stage.getViewContent(0);stage.setViewMode(0);_1426(cnt,0);UIUtils.hide(ppl.node);UIUtils.show(ll.node);};this.getUILayerGroups=function(){return ll.getUILayerGroups();};var ll=new UIUtils.LayerList(_1421,stage);dojo.connect(ll,"switchToDual",function(_142d,_142e){_1429(_142d,_142e);});dojo.connect(ll,"updateVis",function(_142f,_1430,_1431){_1422(_142f,_1430,_1431);});ll.init(stage.getLayers());var ppl=new UIUtils.ProposalList(_1421,stage);dojo.subscribe("/bookmarks/show",function(){ppl.adjustHandlePos(true);});dojo.subscribe("/bookmarks/hide",function(){ppl.adjustHandlePos(false);});dojo.subscribe("/menu/show",ppl.resetIfHidden);dojo.connect(ppl,"leave",function(){_142c();});dojo.connect(ppl,"updateVis",function(_1432,_1433,_1434){_1422(_1432,_1433,_1434);});};function _1414(_1435){var lDiv=dojo.create("div",{id:"lightingDiv"},_1435);dojo.create("div",{"class":"paneSubTitle",innerHTML:UI.i18n().sunLight},lDiv);var _1436=new SunUtils();var _1437={spring:[20,3,2012,0],summer:[21,6,2012,1],fall:[22,9,2012,1],winter:[21,12,2012,0]};var _1438={spring:UI.i18n().dateSpring,summer:UI.i18n().dateSummer,fall:UI.i18n().dateFall,winter:UI.i18n().dateWinter};var _1439="spring";var tdate=_1437[_1439];var _143a=stage.getModel().getMetadata().scs.center_lonlat||[8.533333,47.383333];var _143b=Math.round(_143a[0]/15);var _143c=_143b+tdate[3];var _143d=dojo.create("div",{id:"sunSettingsContainer","class":"sliderContainer"},lDiv);var _143e=dojo.create("div",{id:"sunSliderContainer","class":"sliderContainer"},_143d);var _143f=new UIUtils.Slider("sunSlider",_1440,_143e);_143f.setRange(0,24);_143f.set(0.6);var bar=_143f.getBar();var line=dojo.create("div",{id:"sunsliderLine",},bar);_1441("spring");var _1442=dojo.create("input",{id:"sunTime",value:UI.i18n().dragSunSliderHint,readonly:"readonly"},_143d);function _1440(_1443,_1444){var t=_1444;var hm=_1436.numToTime(t);var _1445=_1436.mainCalc(tdate[0],tdate[1],tdate[2],hm[0],hm[1],0,_143c,_143a[1],_143a[0]);var clr=[1,1,1];if(_1442){_1442.value=_1436.numToTimeNice(t);if(_1443<0.1){_1442.value+=" ("+UI.i18n().sunrise+")";}if(_1443>0.9){_1442.value+=" ("+UI.i18n().sunset+")";}}stage.setLight({azimuthAngle:180-_1445.azimuth,elevationAngle:_1445.elevation,color:clr});};var _1446=dojo.create("div",{"class":"sunDropdownDiv",id:"gmtDropdownDiv"},_143d);var _1447=dojo.create("select",{id:"gmtSelect"},_1446);for(var i=12;i>0;i--){dojo.create("option",{innerHTML:"GMT-"+i,value:-i,},_1447);}dojo.create("option",{innerHTML:"GMT-"+0,value:0,},_1447);for(var i=1;i<=12;i++){dojo.create("option",{innerHTML:"GMT+"+i,value:i,},_1447);}_1447.value=_143b;dojo.connect(_1447,"onchange",function(event){_1448((this.options[this.selectedIndex]).value);});function _1448(val){_143b=Number(val);_1441(_1439);};var _1449=dojo.create("div",{"class":"sunDropdownDiv",id:"seasonDropdownDiv"},_143d);var _144a=dojo.create("select",{id:"seasonSelect"},_1449);dojo.connect(_144a,"onchange",function(event){_1441((this.options[this.selectedIndex]).value);});for(var _144b in _1437){dojo.create("option",{id:_144b+"_button","class":"seasonButton",innerHTML:_1438[_144b],value:_144b,},_144a);}dojo.create("div",{"class":"clr",},_143d);dojo.create("div",{"class":"paneSubTitle",innerHTML:UI.i18n().shadowing},lDiv);var _144c=dojo.create("div",{id:"sunSettingsContainer","class":"sliderContainer"},lDiv);if(stage.getViewData()["shadowMap"]!==undefined){var _144d=new UIUtils.ComboButton({text:UI.i18n().directShadow,icon1:"icon_check","class":"s0 simple"});dojo.connect(_144d.button,"onclick",_144d,function(){this.toggleState();stage.setViewData({shadowMap:this.getState()===1});});_144d.setState(stage.getViewData()["shadowMap"]?1:0);_144c.appendChild(_144d.button);}if(stage.getViewData()["ssao"]!==undefined){var _144e=new UIUtils.ComboButton({text:UI.i18n().diffuseShadow,icon1:"icon_check","class":"s0 simple"});_144e.setState(stage.getViewData()["ssao"]?1:0);dojo.connect(_144e.button,"onclick",_144e,function(){this.toggleState();stage.setViewData({ssao:this.getState()===1});});_144c.appendChild(_144e.button);}function _1441(_144f){_1439=_144f;tdate=_1437[_144f];_143c=_143b+tdate[3];var _1450=_1436.mainCalc(tdate[0],tdate[1],tdate[2],10,0,0,_143c,_143a[1],_143a[0]);var _1451=_1450.sunrise.time;var _1452=_1450.sunset.time;var _1453=_1451/24*bar.offsetWidth;var _1454=_1452/24*bar.offsetWidth;var _1455=_143f.getInRange();_143f.setRange(_1451,_1452);_143f.setInRange(_1455);};};function _1413(_1456){var _1457=dojo.create("div",{},_1456);var _1458=dojo.create("div",{id:"searchFieldContainer"},_1457);var _1459=dojo.create("input",{id:"searchField",type:"text",placeholder:UI.i18n().searchHint,onkeyup:function(e){if(e.keyCode===13){_145a(this.value);}}},_1458);var _145b=dojo.create("div",{id:"searchFieldButton","class":"iconSearch",innerHTML:"&nbsp;"},_1458);dojo.connect(_145b,"onclick",function(){dojo.addClass(_145b,"spinner");_145a(_1459.value);dojo.removeClass(_145b,"spinner");});function _145a(_145c){var hits=stage.searchForObjects(_145c);_145d(hits,_145e);};var _145e=dojo.create("div",{id:"searchResultList"},_1457);function _145d(hits,_145f){if(_145f.hasChildNodes()){while(_145f.childNodes.length>=1){_145f.removeChild(_145f.firstChild);}}function _1460(str,_1461){var maxl=_1461||35;if(str.length>maxl){return str.substring(0,maxl)+"...";}return str;};function _1462(_1463,p){var _1464=_1460(_1463[0].getName());var _1465=_1460(WebScene.Utils.getLayer(stage.getLayers(),_1463[0]).name,35-_1464.length-6);var b=new UIUtils.ComboButton({text:_1464,text2:_1460(_1466(_1463[1])),text3:_1460(UI.i18n().resultInLayer+WebScene.Utils.getLayer(stage.getLayers(),_1463[0]).name),"class":"searchResultItem",icon2:"icon_frame"});UIUtils.hide(b.icon2);dojo.connect(b.text,"onclick",function(){stage.selectObject(_1463[0]);stage.frame(_1463[0]);});dojo.connect(b.button,"onmouseenter",function(){UIUtils.show(b.icon2);});dojo.connect(b.button,"onmouseleave",function(){UIUtils.hide(b.icon2);});b.icon2.onclick=function(){stage.frame(_1463[0]);};dojo.connect(b.button,"onmouseenter",function(obj,_1467){stage.selectObject(_1463[0],true);});p.appendChild(b.button);function _1466(data){if("name" in data){return UI.i18n().nameIs+data.name;}else{if("layer" in data){return "";}else{if("attributeN" in data){return dojo.string.substitute(UI.i18n().keyValueIs,{key:data.attributeN,value:data.attributeV});}else{if("reportN" in data){return dojo.string.substitute(UI.i18n().keyValueIs,{key:data.reportN,value:data.reportV});}else{if("metadataN" in data){return dojo.string.substitute(UI.i18n().keyValueIs,{key:data.metadataN,value:data.metadataV});}else{if("material" in data){return "Material is "+data.material;}}}}}}};};function _1468(_1469,_146a){if(Object.keys(_1469).length>0){var _146b=dojo.create("div",{innerHTML:UI.i18n().addtnlHiddenLyrs,"class":"resultCount resultsHidden"},_146a);for(l in _1469){dojo.create("div",{innerHTML:hits.hidden[l]+""+UI.i18n().resultIn+_1460(l),"class":"resultsHiddenL"},_146b);}}};dojo.create("div",{innerHTML:hits.visible.length+UI.i18n().resultsFound,"class":"resultCount"},_145f);_1468(hits.hidden,_145f);var _146c=dojo.create("ul",{},_145f);for(var h in hits.visible){var r=dojo.create("li",{},_146c);new _1462(hits.visible[h],r);}};};function _1416(_146d){var that=this;var _146e=dojo.create("div",{id:"contextContent"},_146d);var _146f=dojo.create("div",{},_146e);_146f.innerHTML="";dojo.connect(stage,"onSelectionChange",function(hit){that.updateContext(hit);});var _1470=_1471(_146e);this.updateContext=function(hit){if(hit==undefined){UIUtils.hide(_146f);UIUtils.show(_1470);return;}UIUtils.show(_146f);UIUtils.hide(_1470);var data=hit.getMetadata();_146f.innerHTML="";var _1472=UIUtils.cround(hit.getBBMin()[1]+stage.getModel().getMetadata().displayOffset[1]);var _1473=UIUtils.cround(hit.getBBMax()[1]-hit.getBBMin()[1]);var name=hit.getMetadata()["ceName"]||hit.getName();var props={};props[name]=[];_146f.appendChild(new UIUtils.Table(props,[UI.i18n().nameOfSelObject,"",""],"contextTableP").container);var props={"Elevation":[_1472],"Height":[_1473]};_146f.appendChild(new UIUtils.Table(props,[UI.i18n().infoProperties,"",""],"contextTableP").container);var _1474=["ceLayer","ceName","ceID"];var data1={};for(var key in data){if(_1474.indexOf(key)>=0){data1[key]=data[key];}}if("attributes" in data){var _1475={};for(var r in data["attributes"]){_1475[r]=[data["attributes"][r]];}_146f.appendChild(new UIUtils.Table(_1475,[UI.i18n().infoAttributes,""],"contextTableA",true).container);}if("reports" in data){var _1476={};for(var r in data["reports"]){_1476[r]=[UIUtils.cround(data["reports"][r][2])];}_146f.appendChild(new UIUtils.Table(_1476,[UI.i18n().infoReports,""],"contextTableR").container);}};function _1471(_1477){var _1478=dojo.create("div",{id:"sceneDetails"},_1477);var _1479=stage.getModel().getMetadata();var _147a=UIUtils.getItemDetails(stage.getAgoItem(),_1479);function _147b(_147c,io){var r=JSON.parse(_147c);if(r["success"]){_147d.innerHTML=UI.i18n().thumbnailUploadSuccess;}else{_147d.innerHTML=UI.i18n().thumbnailUploadFail;console.log(_147c);}dojo.removeClass(_147e,"spinner");};function _147f(error,io){console.log(error);};function _1480(_1481){if(!_1481&&stage.getAgoItem().store.canModify()){UIUtils.show(_1482);}else{UIUtils.hide(_1482);}};dojo.create("div",{id:"detailsSummary",innerHTML:_147a.summary},_1478);var _1483=dojo.create("div",{id:"detailsThumb","class":"detailsThumb"},_1478);var _1484=dojo.create("img",{src:_147a.thumbnailSrc,target:"_blank",},_1483);var _1482=dojo.create("div",{id:"thumbUpdateEnabled"},_1483);UIUtils.hide(_1482);var _1485=dojo.create("div",{id:"updateThumb","class":"icon_update active"},_1482);dojo.connect(_1485,"onclick",function(){_147d.innerHTML="";UIUtils.updateSceneThumb(stage,_1484);dojo.addClass(_147e,"active");dojo.connect(_147e,"onclick",function(){AgolUtils.uploadThumbnail(stage,_1484.src,_147b,_147f);dojo.addClass(_147e,"spinner");});});var _147e=dojo.create("div",{id:"uploadThumb","class":"icon_save green"},_1482);var _147d=dojo.create("p",{id:"thumbUploadResult",innerHTML:""},_1483);var _1486=UIUtils.spinner(_1482,"green");UIUtils.hide(_1486);dojo.create("div",{style:"clear:both"},_1478);if(stage.getAgoItem()){UIUtils.ratingUI(_1478);}dojo.create("div",{id:"detailsDesc",innerHTML:"<h4>"+UI.i18n().detailsDesc+"</h4>"+_147a.description},_1478);if(_147a.owner){dojo.create("div",{id:"detailsAuthor",innerHTML:"<h4>"+UI.i18n().author+"</h4>"+_147a.owner},_1478);}if(_147a.modified){dojo.create("div",{id:"detailsLastmodified",innerHTML:"<h4>"+UI.i18n().lastModified+"</h4>"+_147a.modified},_1478);}if(_147a.size){dojo.create("div",{innerHTML:"<h4>"+UI.i18n().size+"</h4>"+dojo.string.substitute(UI.i18n().detailsSize,{filesize:UIUtils.cround(_147a.size/1024/1024)})},_1478);}if(_147a.moreLink){new UIUtils.TextButton("moreD",UIUtils.i18n().detailsMoreDetails,function(){window.open(_147a.moreLink);},_1478);}dojo.create("br",{},_1478);var _1487=new UIUtils.TextButton("progressDetailsButton",UIUtils.i18n().showLoadingDetails.replace("<br>",""),function(){UIUtils.toggle(_1488);_1489.updateWidth();},_1478);var _1488=dojo.create("div",{id:"detailsContainer"},_1478);var _148a=dojo.byId("progressDetails");_1488.appendChild(_148a);UIUtils.show(_148a);var _1489=new UIUtils.HorizontalScrollbar("detailDivScrollbar",_1488,_148a);UIUtils.hide(_1488);dojo.subscribe("/portal/signedin",function(msg){_1480();});dojo.subscribe("/portal/signedout",function(msg){_1480(true);});return _1478;};};function _1415(_148b){var that=this;var _148c;this.collectLayerStates=function(a){};this.layerStates=function(_148d){stage.getConfiguration().updateLayerVis(_148d);};var _148e=dojo.create("div",{id:"shareContainer"},_148b);var _148f=dojo.create("div",{id:"shareContainerOverlay"},_148b);UIUtils.hide(_148f);var _1490=dojo.create("div",{id:"shareContainerOverlayText"},_148f);_1490.innerHTML="<strong style='font-size:20px;margin-bottom:16px;display:block'>"+UI.i18n().sharePaneDisabledTitle+"</strong>";_1490.innerHTML+=UI.i18n().sharePaneDisabledInfo;var _1491=dojo.create("button",{innerHTML:UI.i18n().shareNotPublicAnyway,style:"margin-top:3em;"});dojo.connect(_1491,"onclick",_1491,function(){UIUtils.hide(_148f);});_148f.appendChild(_1491);var env=WebScene.Utils.evalServer();if(env.host==="local"){UIUtils.show(_148f);}dojo.subscribe("/menu/share",function(msg){_1492();var urls=stage.getConfiguration().toUrl();UIUtils.shortenUrl(encodeURIComponent(urls.direct),function(url){_148c=url;_1493.value=_148c;});});var _1494=dojo.create("div",{id:"shareTopButtons"},_148e);var _1495=dojo.create("div",{id:"shareTopButtonsContainer"},_1494);var _1496=dojo.create("div",{id:"shareTopButtonsOverlay"},_1494);UIUtils.hide(_1496);var _1497=new UIUtils.ComboButton({"class":"shareButton",text:UI.i18n().shareFacebook,icon1:"icon_facebook",});_1497.button.onclick=function(){_1498();_1499(UIUtils.fbookto(_149a()));};_1495.appendChild(_1497.button);var _149b=new UIUtils.ComboButton({"class":"shareButton",text:UI.i18n().shareTwitter,icon1:"icon_twitter"});_149b.button.onclick=function(){_1498();_1499(UIUtils.tweetto(_149a()));};_1495.appendChild(_149b.button);var _149c=new UIUtils.ComboButton({"class":"shareButton",text:UI.i18n().shareEmail,icon1:"icon_email"});_149c.button.onclick=function(){_1498();_1499(UIUtils.mailto(_149a()),true);};_1495.appendChild(_149c.button);function _1498(){UIUtils.hide(_149d);UIUtils.hide(_149e);dojo.replaceClass(_149f.button,"","active");dojo.replaceClass(_14a0.button,"","active");};var _149f=new UIUtils.ComboButton({"class":"shareButton",text:UI.i18n().shareLink,icon1:"icon_world"});_149f.button.onclick=function(){UIUtils.toggle(_149e);UIUtils.hide(_149d);UIUtils.isVisible(_149e)?dojo.replaceClass(_149f.button,"active",""):dojo.replaceClass(_149f.button,"","active");dojo.replaceClass(_14a0.button,"","active");if(!UIUtils.isVisible(_149e)){_1493.select();}};_1495.appendChild(_149f.button);var _149e=dojo.create("div",{id:"shareUrlBox",},_148e);UIUtils.hide(_149e);dojo.create("div",{innerHTML:UI.i18n().shortUrl,},_149e);var _1493=dojo.create("textarea",{id:"shortURLBox",value:UI.i18n().getUrl,readonly:"readonly"},_149e);dojo.create("div",{innerHTML:UI.i18n().longUrl,},_149e);var _14a1=dojo.create("textarea",{id:"longURLBox",value:UI.i18n().getUrl,readonly:"readonly"},_149e);var _14a0=new UIUtils.ComboButton({"class":"shareButton",text:UI.i18n().embedInWebsite,icon1:"icon_embed"});_14a0.button.onclick=function(){UIUtils.toggle(_149d);UIUtils.hide(_149e);UIUtils.isVisible(_149d)?dojo.replaceClass(_14a0.button,"active",""):dojo.replaceClass(_14a0.button,"","active");dojo.replaceClass(_149f.button,"","active");};_1495.appendChild(_14a0.button);function _14a2(){var msg=UI.i18n().shareNotPublicWarn+" "+UI.i18n().shareNotPublicHint;var _14a3=dojo.create("div",{id:"warnNotPublic",},_148e);var _14a4=dojo.create("div",{innerHTML:msg,},_14a3);var _14a5=dojo.create("div",{},_14a3);new UIUtils.TextButton("editSceneItem",UIUtils.i18n().shareNotPublicEditItem,function(){window.open(AgolUtils.URLs().homeitem+"?id="+stage.getAgoItem().item.id);},_14a5);var _14a6=dojo.create("div",{id:"refreshShareEnabled",style:"display:inline-block","class":"icon_update active brightblue",onclick:function(){_14c2(true,function(){dojo.removeClass(_14a6,"spinner");});dojo.addClass(this,"spinner");}},_14a5);var _14a7=UIUtils.spinner(_14a5,"brightblue");var _14a8=dojo.create("button",{innerHTML:UI.i18n().shareNotPublicAnyway,style:"margin-top:3em",onclick:function(){_14a9(true);}},_14a3);UIUtils.hide(_14a3);return _14a3;};if(stage.getAgoItem()){var _14aa=_14a2();}var _149d=dojo.create("div",{id:"embedBox",},_148e);UIUtils.hide(_149d);var _14ab=dojo.create("div",{id:"embedChoose",},_149d);var _14ac=[];var _14ad=new UIUtils.ComboButton({text:UI.i18n().embedLarge,icon1:"icon_radio","class":"simple"});_14ad.icon1.onclick=function(){_14ae(0);};var _14af=new UIUtils.ComboButton({text:UI.i18n().embedSmall,icon1:"icon_radio","class":"simple"});_14af.icon1.onclick=function(){_14ae(1);};var tab=dojo.create("span",{id:"embedCustomContainer"});var _14b0=dojo.create("input",{type:"text",placeholder:UI.i18n().width,},tab);dojo.create("span",{innerHTML:"<strong>&nbsp;&nbsp;x&nbsp;&nbsp;</strong>"},tab);var _14b1=dojo.create("input",{type:"text",placeholder:UI.i18n().height,},tab);_14b1.onkeyup=_14b0.onkeyup=function(){_14b2();};_14b1.onclick=_14b0.onclick=function(){_14ae(2);};var _14b3=new UIUtils.ComboButton({text:UI.i18n().embedCustom,icon1:"icon_radio","class":"simple"});_14b3.button.appendChild(tab);_14b3.icon1.onclick=function(){_14ae(2);};_14ac.push(_14ad);_14ac.push(_14af);_14ac.push(_14b3);var _14b4=new UIUtils.RadioGroup(_14ac,"embGroup");_14b4.setActive(0);_14ab.appendChild(_14b4.listNode);function _14ae(_14b5){_14b4.setActive(_14b5);_14b2();};function _14b2(){var _14b6=isNaN(parseInt(_14b0.value))?720:_14b0.value;var _14b7=isNaN(parseInt(_14b1.value))?540:_14b1.value;var state=_14b4.getActive();var _14b8={0:{w:1080,h:720},1:{w:600,h:400},2:{w:_14b6,h:_14b7}};var _14b9=_14b8[state].w<=960||_14b8[state].h<=620?"&reducedUI":"";var url=stage.getConfiguration().toUrl().direct;if(_14ba&&_14ba.getState()===1){url+="&autoplay";}var _14bb="<iframe width=\""+_14b8[state].w+"\" height=\""+_14b8[state].h+"\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\""+url+_14b9+"\"></iframe>";_14bc.value=_14bb;var _14bd=_14b9?UI.i18n().embedReduced:UI.i18n().embedFull;_14be.innerHTML=dojo.string.substitute(UI.i18n().embedMsg,{reducedOrFull:_14bd});};var _14be=dojo.create("div",{innerHTML:"&nbsp;"},_149d);var _14bc=dojo.create("textarea",{id:"embedCodeBox",readonly:"readonly"},_149d);function _14bf(){var _14c0=new UIUtils.ComboButton({text:UI.i18n().enableAutoplay,icon1:"icon_check","class":"s0 simple"});dojo.connect(_14c0.button,"onclick",_14c0,function(){this.toggleState();_14b2();});_14c0.setState(1);return _14c0;};var _14ba;if(Object.keys(stage.getBookmarks()).length>1){_14ba=_14bf();_149d.appendChild(_14ba.button);}function _14a9(_14c1){if(!_14c1){_1495.style.opacity=0.2;_1496.onclick=function(){UIUtils.toggle(_14aa);};UIUtils.show(_1496);}else{_1495.style.opacity=1;UIUtils.hide(_1496);if(_14aa){UIUtils.hide(_14aa);}}return _14c1;};function _14c2(_14c3,_14c4){function set(){var _14c5=_14a9(stage.getAgoItem().store.itemIsPublic());if(_14c4){_14c4(_14c5);}};if(!stage.getAgoItem()){_14a9(true);}else{if(_14c3){stage.getAgoItem().store.refreshItem().then(set);}else{set();}}};_14c2(false);function _14c6(_14c7){dojo.create("div",{"class":"paneSubTitle",id:"commentsSubTitle",innerHTML:UI.i18n().commentsTitle},_14c7);var _14c8=dojo.create("div",{"id":"commentsArea"},_14c7);var _14c9=dojo.create("div",{"id":"commentsDiv"},_14c8);var _14ca=new UIUtils.SignInTextButton(stage," "+UI.i18n().commentHint);_14c8.appendChild(_14ca);function _14cb(r){dojo.removeClass(_14cc,"brightblue");_14cd.innerHTML=UI.i18n().commentFail;_14ce();};function _14cf(r){dojo.removeClass(_14cc,"brightblue");_14cd.innerHTML="";_14d0.value="";_14ce();};function _14ce(){_14c8.removeChild(_14c9);_14c9=dojo.create("div",{"id":"commentsDiv"},_14c8);AgolUtils.getComments(stage,stage.getAgoItem().item.id).then(function(_14d1){UIUtils.commentsUI(_14d1.comments,_14c9);});};var _14d2=dojo.create("div",{id:"newCommentEnabled"},_14c8);UIUtils.hide(_14d2);var _14d0=dojo.create("textarea",{id:"addCommentField",placeholder:UI.i18n().commentAdd},_14d2);var _14d3=dojo.create("button",{id:"publishComment",onclick:_14d4},_14d2);var _14d5=dojo.create("span",{id:"publishCommentT",innerHTML:UI.i18n().commentPublish},_14d3);var _14cc=dojo.create("span",{id:"publishCommentI","class":"spinner"},_14d3);var _14cd=dojo.create("div",{innerHTML:""},_14d2);function _14d4(){if(_14d0.value!==""){dojo.addClass(_14cc,"brightblue");AgolUtils.addComment(stage,_14d0.value,_14cf,_14cb);}};function _14d6(_14d7){if(_14d7){UIUtils.show(_14d2);}else{UIUtils.hide(_14d2);}};_14d6(false);dojo.subscribe("/portal/signedin",function(msg){_14d6(true);});dojo.subscribe("/portal/signedout",function(msg){_14d6(false);});_14ce();};if(stage.getAgoItem()&&stage.getAgoItem().item.id&&stage.getAgoItem().item.commentsEnabled!==false){_14c6(_148b);}function _1492(){that.collectLayerStates();var urls=stage.getConfiguration().toUrl();_14a1.value=urls.direct;_14b2();};dojo.connect(stage.getContainer(),"mouseup",this,function(){if(_1407=="share"){_1492();}});dojo.connect(stage.getContainer(),"mousewheel",this,function(){if(_1407=="share"){_1492();}});function _149a(){var urls=stage.getConfiguration().toUrl();var _14d8=UIUtils.getItemDetails(stage.getAgoItem(),stage.getModel().getMetadata()).sceneName;var nfo={"longUrlEncoded":urls.encoded,"longUrl":urls.direct,"noQuery":urls.base,"sceneName":_14d8||UI.i18n().this3dScene,"shortUrl":_148c};return nfo;};function _1499(surl,self){if(self){location.href=surl;}else{window.open(surl);}};var _14d9=dojo.create("div",{id:"shareContainerDisabledByOrg"});_14d9.innerHTML="<p style='font-size:16px;margin-bottom:16px;display:block'>"+UI.i18n().sharePaneDisabledTitle+"</p>";_14d9.innerHTML+=UI.i18n().sharePaneDisabledByOrg;dojo.place(_14d9,_148e,"before");UIUtils.hide(_14d9);function _14da(){UIUtils.hide(_148e);UIUtils.show(_14d9);};function _14db(){if(!UIUtils.isVisible(_148e)){UIUtils.hide(_14d9);UIUtils.show(_148e);_14c2(false);}};dojo.subscribe("/portal/signedin",function(msg){if(stage.getAgoItem().store.portal.canSharePublic===false){_14da();}else{_14db();}});dojo.subscribe("/portal/signedout",function(msg){_14db();});};};UI.Head=function(c,stage){var _14dc=(stage.getAgoItem())?stage.getAgoItem().item.title:stage.getModel().getMetadata()["sceneName"]||UI.i18n().unnamedScene;document.getElementsByTagName("title")[0].innerHTML=dojo.string.substitute(UI.i18n().sceneTitle,{sceneName:_14dc});var _14dd=dojo.create("div",{id:"wvlogo"},c);dojo.create("a",{href:UIUtils.URLs().ceProduct,target:"_blank"},_14dd);var title=dojo.create("h1",{id:"title"},c);if(stage.getAgoItem()){dojo.create("a",{href:AgolUtils.URLs().homeitem+"?id="+stage.getAgoItem().item.id,target:"_blank",innerHTML:_14dc,id:"title"},title);}else{dojo.create("a",{innerHTML:_14dc,id:"title"},title);}var _14de=dojo.create("span",{id:"topLinks"},c);var _14df=dojo.create("span",{},_14de);dojo.create("a",{"href":UIUtils.URLs().helpViewer,"target":"_blank",innerHTML:UI.i18n().help},_14df);if(stage.getAgoItem()){var _14e0=new UIUtils.SignInOutButton(stage,"","topSignInOutButton");_14de.appendChild(_14e0);}else{var _14e1=dojo.create("span",{},_14de);dojo.create("a",{"href":UIUtils.URLs().arcgisOnline,"target":"_blank",innerHTML:UI.i18n().arcgisOnline},_14e1);}var conf=stage.getConfiguration();if(conf.scene.reducedUI){var _14e2=dojo.create("span",{id:"embedTopLinks"},c);var url=location.protocol+"//"+location.host+location.pathname+"?3dWebScene="+conf.scene["3dWebScene"];url+=conf.scene.portal?"&portal="+conf.scene.portal:"";dojo.create("a",{"href":url,"target":"_blank",innerHTML:UI.i18n().reducedUIexploreFull},_14e2);}};UI.Progress=function(_14e3){var _14e4=0;var _14e5=undefined;var d=new Date();var m=dojo.create("div",{id:"progressWindow","class":""},_14e3);UIUtils.show(m);var logo=dojo.create("div",{id:"logo",style:"opacity:1"},m);var _14e6=dojo.create("img",{id:"logoImg",src:"css/images/cewv_logo.png",style:"z-index:5"},logo);var _14e7=dojo.create("div",{id:"itemDiv",style:"opacity:0"},m);var _14e8=dojo.create("div",{id:"dloadProgressBar","class":"loading"},m);var _14e9=dojo.create("div",{id:"detailToggle",innerHTML:UI.i18n().details},m);var _14ea=dojo.create("div",{id:"progressMsg"},m);dojo.create("div",{"class":"clr"},m);var _14eb=dojo.create("div",{id:"progressDetails"},m);var _14ec=dojo.create("div",{id:"glDetailDiv"});UIUtils.hide(_14ec);var _14ed=dojo.create("span",{id:"glDetailToggle",innerHTML:"&nbsp;"+UI.i18n().more});var _14ee;var _14ef=dojo.create("div",{id:"loadingHelpDiv"},m);var _14f0=dojo.create("div",{id:"glHelpDiv"},_14ef);UIUtils.hide(_14f0);var _14f1=dojo.create("div",{id:"progressFooter"},m.parentElement);function _14f2(_14f3){var _14f4=dojo.create("div",{id:"signOutD"},_14f3);var _14f5=dojo.create("span",{id:"signOutB",innerHTML:UI.i18n().signOut},_14f4);var _14f6=dojo.create("span",{id:"signOutT",innerHTML:" "+UI.i18n().signOutDiffUser},_14f4);_14f5.onclick=function(){AgolUtils.deleteCookie();document.location.reload(true);};return _14f4;};signOutDiv=_14f2(_14ef);UIUtils.hide(signOutDiv);function _14f7(item,_14f8){var title=item.title.replace(".3ws","");var _14f9=dojo.create("div",{innerHTML:title},_14e7);setTimeout(function(){dojo.anim(_14e7,{opacity:1},2000);},1000);};dojo.create("a",{"href":UIUtils.URLs().helpMain,"target":"_blank","innerHTML":UI.i18n().ceWebViewerHelp},_14f1);dojo.create("a",{"href":UIUtils.URLs().ceProduct,"target":"_blank","innerHTML":"CityEngine"},_14f1);dojo.create("a",{"href":UIUtils.URLs().arcgisOnline,"target":"_blank","innerHTML":UI.i18n().arcgisOnline},_14f1);dojo.create("a",{"href":"http://www.esri.com","target":"_blank","innerHTML":"Esri.com"},_14f1);dojo.create("a",{"href":UIUtils.URLs().arcgisContactUs,"target":"_blank","innerHTML":UI.i18n().contactUs},_14f1);UIUtils.hide(_14eb);_14e9.onclick=function(){UIUtils.toggle(_14eb);};_14ed.onclick=function(){UIUtils.toggle(_14ec);};this.update=function(_14fa,msg,_14fb){if(_14fa=="error"){UIUtils.hide(_14e7);UIUtils.show(_14eb);m.appendChild(UIUtils.glErrorHints(false));dojo.replaceClass(_14e8,"failed","loading");}if(_14fa=="glerror"){UIUtils.hide(_14e7);dojo.replaceClass(_14e8,"failed","loading");m.appendChild(UIUtils.glErrorHints(true));UIUtils.show(_14f0);}if(_14fa=="item"){_14f7(msg,_14fb);return;}if(_14fa=="hint"){if(msg=="signout"){UIUtils.show(signOutDiv);}}if(_14fa=="download"||_14fa=="parse"){msg=_14fc(msg,_14fb);}if(_14fa=="progress"){_14fd(msg/_14fb);return;}if(_14fa=="download"||_14fa=="info"||_14fa=="success"||_14fa=="error"||_14fa=="parse"){_14ea.innerHTML=msg;}else{if(_14fa=="gl"){_14ee="SHADING_LANGUAGE_VERSION: "+msg["SHADING_LANGUAGE_VERSION"]+"<br>";_14ee+=" VENDOR: "+msg["VENDOR"]+"<br>";_14ee+=" RENDERER: "+msg["RENDERER"]+"<br>";_14ee+=" EXTENSIONS: "+msg["EXTENSIONS"];_14ec.innerHTML=_14ee;msg="GL detect: "+msg["VERSION"];_14ea.innerHTML=msg;}else{if(_14fa=="glerror"){_14ea.innerHTML=msg;}}}if(_14fb&&(_14fa!="download"&&_14fa!="parse")){msg+=" "+_14fb;}if(!_14e5||(!(_14e5=="download"&&_14fa=="download")&&!(_14e5=="parse"&&_14fa=="parse"))){_14e4++;currDiv=dojo.create("div",{id:"msg"+_14e4,"class":"progress_"+_14fa},_14eb);}_14e5=_14fa;msg=Math.ceil((Date.now()-d))+"ms: "+msg;currDiv.innerHTML=msg;if(_14fa=="gl"){currDiv.innerHTML=msg;currDiv.appendChild(_14ed);_14eb.appendChild(_14ec);}};function _14fd(ratio){_14e8.setAttribute("style","background-position:"+(ratio-1)*dojo.position(_14e8).w+"px 0px");};function _14fc(msg,_14fe){if(_14fe[1]){var _14ff=Math.min(_14fe[1],_14fe[0]);msg+=" "+Math.round(_14ff/_14fe[1]*100)+"% ("+UIUtils.cround(_14ff)+" of "+UIUtils.cround(_14fe[1])+" MB)";_14fd(_14ff/_14fe[1]);}else{msg+=" "+Math.round(_14fe[0])+" MB";}return msg;};this.hide=function(){UIUtils.hide(_14e3);};};UI.Foot=function(_1500){var _1501=dojo.create("div",{id:"aologo"},_1500);};UI.Status=function(m,stage){dojo.create("div",{innerHTML:stage.getModel().getMetadata().scs.name},m);};});},"WebScene/lib/Renderer":function(){define("WebScene/lib/Renderer",["dijit","dojo","dojox","dojo/require!WebScene/lib/gl-matrix,WebScene/lib/GLMaterial,WebScene/lib/GLVBO,WebScene/lib/Util"],function(dijit,dojo,dojox){dojo.provide("WebScene.lib.Renderer");dojo.require("WebScene.lib.gl-matrix");dojo.require("WebScene.lib.GLMaterial");dojo.require("WebScene.lib.GLVBO");dojo.require("WebScene.lib.Util");Instance=function(name,_1502,from,to,_1503,idx){this.name=name;this.uniqueName=_1502;this.from=from;this.to=to;this.transformation=_1503;this.idx=idx;if(_1503!=undefined){this.transformationNormal=mat4.create();mat4.set(_1503,this.transformationNormal);mat4.inverse(this.transformationNormal,this.transformationNormal);mat4.transpose(this.transformationNormal,this.transformationNormal);}};LightingData=function(_1504,_1505,_1506){this.setUniforms=function(_1507){_1507.uniform4fv("lightAmbient",_1504);_1507.uniform4fv("lightDiffuse",_1505);_1507.uniform3fv("lightDirection",_1506);};this.getLightDirection=function(){return _1506;};};Renderer=function(_1508,_1509,_150a,_150b,gl){var _150c=undefined;var _150d=new Object();var _150e=new Object();var _150f=[0.1,0.2,0.9,0.4];var _1510=undefined;gl.enable(gl.DEPTH_TEST);gl.enable(gl.CULL_FACE);gl.disable(gl.BLEND);gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);this.setLightingData=function(data){_150c=data;};this.getLightingData=function(){return _150c;};this.setContent=function(_1511){this.dispose();init(_1511);};this.dispose=function(){for(name in _150d){_150d[name].vbo.dispose();}for(name in _150e){_150e[name].vbo.dispose();}_150d=new Object();_150e=new Object();};this.setSelection=function(_1512){_1510=_1512;};var _1513=mat4.identity();this.render=function(view,proj,_1514,_1515){if(Object.keys(_150d).length==0&&Object.keys(_150e).length==0){return;}this.renderSimple(view,proj,_1514,_1515,"material");if(_1510!=undefined){gl.enable(gl.BLEND);gl.depthFunc(gl.EQUAL);var _1516=_1508.get("simple");_1516.use();_1516.enableVertexAttribArrays();_1516.uniformMatrix4fv("view",view);_1516.uniformMatrix4fv("proj",proj);_1516.uniform4fv("color",_150f);for(var slot=0;slot<3;++slot){if(slot==2){gl.disable(gl.CULL_FACE);}_1516.uniformMatrix4fv("model",_1513);for(name in _150d){if(_150d[name].material.getSlot()!==slot){continue;}var _1517=_150d[name].instances;var _1518=false;for(var i=0;i<_1517.length;++i){var _1519=_1517[i];if(_1519.name===_1510){if(!_1518){var vbo=_150d[name].vbo;vbo.bind();vbo.setPointers(_1516);_1518=true;}gl.drawArrays(gl.TRIANGLES,_1519.from,_1519.to-_1519.from);}}}for(name in _150e){if(_150e[name].material.getSlot()!==slot){continue;}var _1517=_150e[name].instances;var _1518=false;for(var i=0;i<_1517.length;++i){var _1519=_1517[i];if(_1519.name===_1510&&_1515.get(_1519.idx)){if(!_1518){var vbo=_150e[name].vbo;vbo.bind();vbo.setPointers(_1516);_1518=true;}_1516.uniformMatrix4fv("model",_1519.transformation);gl.drawArrays(gl.TRIANGLES,_1519.from,_1519.to-_1519.from);}}}if(slot==2){gl.enable(gl.CULL_FACE);}}_1516.disableVertexAttribArrays();gl.disable(gl.BLEND);gl.depthFunc(gl.LESS);}gl.bindBuffer(gl.ARRAY_BUFFER,null);gl.useProgram(null);};var _151a=mat4.create();this.renderSimple=function(view,proj,_151b,_151c,_151d){if(Object.keys(_150d).length==0&&Object.keys(_150e).length==0){return;}mat4.inverse(view,_151a);mat4.transpose(_151a);for(var slot=0;slot<3;++slot){for(name in _150e){var _151e=_150e[name][_151d];if(_151e===undefined||_151e.getSlot()!==slot){continue;}var vbo=_150e[name].vbo;var _151f=_150e[name].instances;_151e.bind(view,proj,_151a,_151b,_150c,gl);var _1520=_151e.getProgram();vbo.bind();vbo.setPointers(_1520);for(var i=0;i<_151f.length;++i){var _1521=_151f[i];if(!_151c.get(_1521.idx)){continue;}_151e.bindInstance(_1521,gl);gl.drawArrays(gl.TRIANGLES,_1521.from,_1521.to-_1521.from);}_151e.release(gl);}for(name in _150d){var _151e=_150d[name][_151d];if(_151e.getSlot()!==slot){continue;}var vbo=_150d[name].vbo;_151e.bind(view,proj,_151a,_151b,_150c,gl);var _1520=_151e.getProgram();_1520.uniformMatrix4fv("model",_1513);_1520.uniformMatrix4fv("modelNormal",_1513);vbo.bind();vbo.setPointers(_1520);gl.drawArrays(gl.TRIANGLES,0,vbo.getNum());_151e.release(gl);}}};this.print=function(){console.log("number of materials (merged/instanced): "+Object.keys(_150d).length+"/"+Object.keys(_150e).length);var numM=0;for(name in _150d){numM+=_150d[name].instances.length;}var numI=0;for(name in _150e){numI+=_150e[name].instances.length;}console.log("number of instanced (merged/instanced):"+numM+"/"+numI);};function init(_1522){var _1523=new Array();var _1524=new Array();for(var i=0;i<_1522.length;++i){_1522[i].getInterleavedData().data.length<1024?_1523.push(_1522[i]):_1524.push(_1522[i]);}var _1525=new Object();for(var i=0;i<_1523.length;++i){var _1526=_1523[i].getMaterial();var _1527=_1526.getId();var _1528=_1525[_1527];if(_1528==undefined){_1528=new Object();_1528.material=_1526;_1528.count=0;_1528.content=new Array();_1525[_1527]=_1528;}_1528.count+=_1523[i].getInterleavedData().data.length;_1528.content.push(_1523[i]);}var _1529=new Object();var _152a=new Object();for(var i=0;i<_1524.length;++i){var _1526=_1524[i].getMaterial();var _1527=_1526.getId();var _152b=_1529[_1527];if(_152b==undefined){_152b=new Object();_152b.material=_1526;_152b.count=0;_152b.content=new Array();_1529[_1527]=_152b;}var ida=_1524[i].getInterleavedData();var _152c=_152a[ida.id];var _152d=_152c!=undefined;if(!_152d){var _152e=3+(_1526.getNeedNormals()?3:0)+(_1526.getNeedTexCoords()?2:0);_152c={from:_152b.count,to:_152b.count+ida.getCount()*_152e};_152a[ida.id]=_152c;}if(!_152d){_152b.count=_152c.to;}var ctx=new Object();_152b.content.push(ctx);ctx.renderGeometry=_1524[i];ctx.isInstance=!_152d;ctx.from=_152c.from;ctx.to=_152c.to;}var p=vec3.create();var _152f=mat4.create();for(name in _1525){var _1528=_1525[name];var data=new Float32Array(_1528.count);var cur=0;var _1526=_1528.material;var _1530=_1526.getNeedNormals();var _1531=_1526.getNeedTexCoords();var _152e=3+(_1530?3:0)+(_1531?2:0);var _1532=new Object();_150d[name]=_1532;_1532.instances=new Array();for(var i=0;i<_1528.content.length;++i){var _1533=_1528.content[i];var ida=_1533.getInterleavedData();var _1534=_1533.getTransformation();for(var j=ida.attr2offset[VertexAttrConstants.POSITION],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){vec3.set3(ida.data[j],ida.data[j+1],ida.data[j+2],p);mat4.multiplyVec3(_1534,p,p);data[cur2]=p[0];data[cur2+1]=p[1];data[cur2+2]=p[2];}if(_1530){mat4.inverse(_1534,_152f);mat4.transpose(_152f);for(var j=ida.attr2offset[VertexAttrConstants.NORMAL],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){vec3.set3(ida.data[j],ida.data[j+1],ida.data[j+2],p);mat4.multiplyVec3(_152f,p,p);data[cur2+3]=p[0];data[cur2+4]=p[1];data[cur2+5]=p[2];}}if(_1531){var _1535=_1530?6:3;for(var j=ida.attr2offset[VertexAttrConstants.UV0],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){data[cur2+_1535]=ida.data[j];data[cur2+_1535+1]=ida.data[j+1];}}var next=cur+ida.getCount()*_152e;var _1536=new Instance(_1533.getName(),_1533.getUniqueName(),cur/_152e,next/_152e,undefined,_1533.getIndex());cur=next;_1532.instances.push(_1536);}var _1537=new Object();_1537[VertexAttrConstants.POSITION]=0;if(_1530){_1537[VertexAttrConstants.NORMAL]=3;}if(_1531){_1537[VertexAttrConstants.UV0]=_1530?6:3;}_1532.vbo=new GLVBO(data,_1537,_152e,gl);_1532.material=_1538(_1526);_1532.materialDepth=_1539(_1526);_1532.materialNormal=_153a(_1526);}for(name in _1529){var _152b=_1529[name];var data=new Float32Array(_152b.count);var cur=0;var _1526=_152b.material;var _1530=_1526.getNeedNormals();var _1531=_1526.getNeedTexCoords();var _152e=3+(_1530?3:0)+(_1531?2:0);var _1532=new Object();_150e[name]=_1532;_1532.instances=new Array();for(var i=0;i<_152b.content.length;++i){var ctx=_152b.content[i];var _1533=ctx.renderGeometry;if(ctx.isInstance){var ida=_1533.getInterleavedData();for(var j=ida.attr2offset[VertexAttrConstants.POSITION],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){data[cur2]=ida.data[j];data[cur2+1]=ida.data[j+1];data[cur2+2]=ida.data[j+2];}if(_1530){for(var j=ida.attr2offset[VertexAttrConstants.NORMAL],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){data[cur2+3]=ida.data[j];data[cur2+4]=ida.data[j+1];data[cur2+5]=ida.data[j+2];}}if(_1531){var _1535=_1530?6:3;for(var j=ida.attr2offset[VertexAttrConstants.UV0],cur2=cur;j<ida.data.length;j+=ida.stride,cur2+=_152e){data[cur2+_1535]=ida.data[j];data[cur2+_1535+1]=ida.data[j+1];}}cur+=ida.getCount()*_152e;}var _1536=new Instance(_1533.getName(),_1533.getUniqueName(),ctx.from/_152e,ctx.to/_152e,_1533.getTransformation(),_1533.getIndex());_1532.instances.push(_1536);}var _1537=new Object();_1537[VertexAttrConstants.POSITION]=0;if(_1530){_1537[VertexAttrConstants.NORMAL]=3;}if(_1531){_1537[VertexAttrConstants.UV0]=_1530?6:3;}_1532.vbo=new GLVBO(data,_1537,_152e,gl);_1532.material=_1538(_1526);_1532.materialDepth=_1539(_1526);_1532.materialNormal=_153a(_1526);}};function _1538(_153b){var id=_153b.getId();var _153c=_150a.get(id);if(_153c==undefined){var _153d=_153e(_153b);if(_153b.getTexture()!=="envTex_panorama"){var _153f=_1508.get(_153b.getNeedTexCoords()?"defaultTextured":"default");var _1540=_153b.isTransparent();var slot=_1540?2:1;_153c=new DefaultGLMaterial(slot,_153f,_153d,_153b.getAmbient(),_153b.getDiffuse(),_153b.getSpecular(),_153b.getShininess(),_153b.getOpacity(),_1540,_153b.getPolygonOffset());}else{var _153f=_1508.get("texOnly");_153c=new PanoramaGLMaterial(0,_153f,_153d);}_150a.add(id,_153c);}return _153c;};function _1539(_1541){var id=_1541.getId()+"_depth";var _1542=_150a.get(id);if(_1542==undefined){var _1543=_153e(_1541);if(_1541.getTexture()!=="envTex_panorama"){var _1544=_1508.get(_1541.getNeedTexCoords()?"depthTextured":"depth");var _1545=_1541.isTransparent();var slot=_1545?2:1;_1542=new DefaultGLMaterialDepth(slot,_1544,_1543,_1545);}else{_1542=undefined;}_150a.add(id,_1542);}return _1542;};function _153a(_1546){var id=_1546.getId()+"_normal";var _1547=_150a.get(id);if(_1547==undefined){var _1548=_153e(_1546);if(_1546.getTexture()!=="envTex_panorama"){var _1549=_1508.get(_1546.getNeedTexCoords()?"normalTextured":"normal");var _154a=_1546.isTransparent();var slot=_154a?2:1;_1547=new DefaultGLMaterialNormal(slot,_1549,_1548,_154a);}else{_1547=undefined;}_150a.add(id,_1547);}return _1547;};function _153e(_154b){var _154c=_154b.getTexture();var raw=_154b.getRaw();_154b.dispose();if(_154c==undefined){return undefined;}return _150b.get(_154c,raw,gl);};};});},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(lang,dom,ioq,json){function _154d(obj,name,value){if(value===null){return;}var val=obj[name];if(typeof val=="string"){obj[name]=[val,value];}else{if(lang.isArray(val)){val.push(value);}else{obj[name]=value;}}};var _154e="file|submit|image|reset|button";var form={fieldToObject:function fieldToObject(_154f){var ret=null;_154f=dom.byId(_154f);if(_154f){var _1550=_154f.name,type=(_154f.type||"").toLowerCase();if(_1550&&type&&!_154f.disabled){if(type=="radio"||type=="checkbox"){if(_154f.checked){ret=_154f.value;}}else{if(_154f.multiple){ret=[];var nodes=[_154f.firstChild];while(nodes.length){for(var node=nodes.pop();node;node=node.nextSibling){if(node.nodeType==1&&node.tagName.toLowerCase()=="option"){if(node.selected){ret.push(node.value);}}else{if(node.nextSibling){nodes.push(node.nextSibling);}if(node.firstChild){nodes.push(node.firstChild);}break;}}}}else{ret=_154f.value;}}}}return ret;},toObject:function formToObject(_1551){var ret={},elems=dom.byId(_1551).elements;for(var i=0,l=elems.length;i<l;++i){var item=elems[i],_1552=item.name,type=(item.type||"").toLowerCase();if(_1552&&type&&_154e.indexOf(type)<0&&!item.disabled){_154d(ret,_1552,form.fieldToObject(item));if(type=="image"){ret[_1552+".x"]=ret[_1552+".y"]=ret[_1552].x=ret[_1552].y=0;}}}return ret;},toQuery:function formToQuery(_1553){return ioq.objectToQuery(form.toObject(_1553));},toJson:function formToJson(_1554,_1555){return json.stringify(form.toObject(_1554),null,_1555?4:0);}};return form;});},"WebScene/app/UIUtils":function(){define("WebScene/app/UIUtils",["dijit","dojo","dojox","dojo/require!WebScene/app/StageUtils,WebScene/lib/gl-matrix,dojo/date/locale,dojo/NodeList-traverse"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.UIUtils");dojo.require("WebScene.app.StageUtils");dojo.require("WebScene.lib.gl-matrix");dojo.require("dojo.date.locale");var _1556=window.UIUtils=function(){};_1556.i18n=function(){if(this._i18n){return this._i18n;}this._i18n=dojo.mixin({},dojo.i18n.getLocalization("WebScene","cewebviewer").common);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").ui);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").viewerPage);dojo.mixin(this._i18n,dojo.i18n.getLocalization("WebScene","cewebviewer").signInOut);return this._i18n;};_1556.show=function(node,_1557){node.style["display"]=_1557?"inline-block":"block";};_1556.hide=function(node){node.style["display"]="none";};_1556.setVisible=function(node,_1558){if(_1558){_1556.show(node);}else{_1556.hide(node);}};_1556.isVisible=function(node){return !(node.style["display"]=="none");};_1556.toggle=function(node){if(node.style["display"]==undefined||node.style["display"]==""){node.style["display"]="none";}else{node.style["display"]=node.style["display"]=="none"?"block":"none";}};_1556.Slider=function(_1559,_155a,_155b,_155c,_155d,_155e){var _155f=/Firefox/i.test(navigator.userAgent);var _1560=_155c?"pageY":"pageX";var _1561=_155c?"height":"width";var _1562=_155c?"offsetHeight":"offsetWidth";var TOP=_155c?"top":"left";var _1563=_155c?-1:1;var _1564=_155d||0.35;var state=0;var min=0;var max=1;var _1565=_155e;var _1566=dojo.create("div",{style:_1561+":"+_1567()+"px;",id:_1559},_155b);this.container=_1566;var bar=dojo.create("div",{style:_1561+":"+_1567()+"px;position:absolute;","class":"bar"},_1566);dojo.connect(bar,_155f?"DOMMouseScroll":"mousewheel",this,function(event){var _1568=_155f?event["detail"]*(-60):event["wheelDelta"];_1569((_156a()+_1568/(12*_1563))/_1567());event.stopPropagation();});dojo.connect(bar,"onclick",this,function(event){event.preventDefault();_1569((event[_1560]-_155b.getBoundingClientRect()[TOP])/_1567());event.stopPropagation();});var _156b=dojo.create("div",{style:"position:relative;","class":"handle",},_1566);var _156c=dojo.create("div",{"class":"handleT",innerHTML:""},_156b);_1556.hide(_156c);dojo.connect(_1566,"onmouseover",this,function(e){if(_1565){_1556.show(_156c);}});dojo.connect(_1566,"onmouseout",this,function(e){if(_1565){_1556.hide(_156c);}});dojo.connect(_156b,"onmousedown",this,function(e){e.preventDefault();if(e.which==1){state=1;}});dojo.connect(document,"onmousemove",this,function(e){e.preventDefault();if(state==1){_1569((e[_1560]-_155b.getBoundingClientRect()[TOP])/_1567());}});dojo.connect(document,"onmouseup",this,function(e){e.preventDefault();if(state==1){state=0;}});dojo.connect(window,"onresize",function(){_1569(_1564,true);});_1569(_1564,true);function _1567(){return _155b[_1562];};function _156a(){return _1567()*_1564;};this.labelCallback=function(_156d){};function _1569(_156e,_156f){_1564=Math.min(Math.max(_156e,0.001),0.999);_156b.style[TOP]=_156a()-_156b[_1562]/2+"px";if(_1565){_156c.innerHTML=this.getInRange();}if(!_156f){_155a(_1564,_1570());}};this.setRange=function(min_,max_){min=min_;max=max_;};function _1570(){return _1556.cround(_1564*(max-min)+min);};this.getInRange=function(){return _1570();};this.get=function(){return _1564;};this.set=function(_1571,_1572){if(state===0){_1569(_1571,_1572);}};this.setInRange=function(pos,_1573){var _1574=(pos-min)/(max-min);this.set(_1574);};this.getHandle=function(){return _156b;};this.getBar=function(){return bar;};this.resize=function(){_1566.style[_1561]=_1567()+"px";bar.style[_1561]=_1567()+"px";_1569(_1564);};_1556.forwardMouseEvents(_156b,bar,_155f?"DOMMouseScroll":"mousewheel");};_1556.HorizontalScrollbar=function(_1575,_1576,_1577,_1578){var that=this;var _1579=false;var _157a=/Firefox/i.test(navigator.userAgent);var _157b=_1579?"pageY":"pageX";var _157c=_1579?"height":"width";var _157d=_1579?"offsetHeight":"offsetWidth";var TOP=_1579?"top":"left";var _157e=_1579?-1:1;var _157f=0;var state=0;var _1580=0;var min=0;var max=1;var _1581=dojo.create("div",{className:"horizontalScrollbar"},_1576);var _1582=dojo.create("div",{style:_157c+":"+_1583()+"px;",id:_1575},_1581);var bar=dojo.create("div",{style:_157c+":"+_1583()+"px;","class":"bar"},_1582);var track=dojo.create("div",{style:"margin: 0 auto;"},_1582);var _1584=dojo.create("div",{"class":"handleHitArea"},track);var _1585=dojo.create("div",{"class":"handle"},_1584);var _1586=dojo.create("div",{"class":"handleT",innerHTML:""},_1585);_1556.hide(_1586);this.container=_1582;function _1587(pos){var _1588=_1577.scrollWidth-_1577.offsetWidth;return pos/_1588;};function _1589(rel){var _158a=_1577.scrollWidth-_1577.offsetWidth;return rel*_158a;};function _1583(){return _1581[_157d];};function _158b(){return track[_157d];};function _158c(){return Math.round(_158b()*_157f);};function _158d(_158e,_158f,_1590){_157f=Math.min(Math.max(_158e,0.001),0.999);_1584.style[TOP]=(_158c()-_1584[_157d]/2)+"px";if(!_158f){_1591(_157f);}};function _1591(pos){var _1592=_1577.scrollWidth-_1577.offsetWidth;var _1593=Math.ceil(pos*_1592);_1593=_1593<=_1592?_1593:_1592;_1593=_1593>0?_1593:0;_1577.scrollLeft=_1593;};function _1594(_1595){_157f=Math.min(Math.max(_1595,0.001),0.999);var _1596=(_158c()-_1584[_157d]/2);dojo.animateProperty({node:_1584,properties:{left:_1596}}).play();_1597(_157f);};var _1598;function _1597(pos){if(_1598){_1598.cancel();}var _1599=_1577.scrollWidth-_1577.offsetWidth;var _159a=pos*_1599;_159a=_159a<=_1599?_159a:_1599;_159a=_159a>0?_159a:0;_1598=new _1556.easing(_1577,"scrollLeft",_159a,2000);_1598.play();};var _159b=function(){var _159c=0;var _159d={x:0,y:0};function _159e(evt){if(evt){evt.stopPropagation();}return false;};return {startMoving:function(evt){_1577.removeEventListener("click",_159e,true);document.onmouseup=_159b.stopMoving;evt=evt||window.event;evt.preventDefault();_159c=evt.clientX;_159d.x=evt.clientX;_159d.y=evt.clientY;document.onmousemove=function(evt){_1577.removeEventListener("click",_159e,true);if(Math.abs(Math.abs(evt.clientX)-Math.abs(_159d.x))<3&&Math.abs(Math.abs(evt.clientY)-Math.abs(_159d.y))<1){return;}_1577.addEventListener("click",_159e,true);evt=evt||window.event;evt.preventDefault();var _159f=evt.clientX;var _15a0=_159c-_159f;_159c=_159f;_158d(_1587(_1589(_157f)+_15a0));return false;};},stopMoving:function(evt){document.onmousemove=function(){};evt.preventDefault();}};}();this.labelCallback=function(_15a1){};this.setRange=function(min_,max_){min=min_;max=max_;};function _15a2(){return _1556.cround(_157f*(max-min)+min);};this.getInRange=function(){return _15a2();};this.get=function(){return _157f;};this.set=function(_15a3,_15a4){if(state===0){_158d(_15a3,_15a4);}};this.setInRange=function(pos){var _15a5=(pos-min)/(max-min);this.set(_15a5);};this.getHandle=function(){return _1584;};this.getBar=function(){return bar;};this.enableScrollTargetDrag=function(){if(_1577){_1577.addEventListener("mousedown",_159b.startMoving,true);}};this.disableScrollTargetDrag=function(){if(_1577){_1577.removeEventListener("mousedown",_159b.startMoving,true);}};this.scrollIntoView=function(_15a6){if(!_15a6||!_15a6.getClientRects()[0]){return;}if(this.isVisible(_15a6)){return;}var _15a7=_15a6.offsetLeft+_15a6.offsetWidth/2-_1581.getBoundingClientRect().left;var _15a8=Math.round(1000*_1587(_15a7-_1583()/2))/1000;var prev=_157f;_1594(_15a8);};this.isVisible=function(_15a9){if(!_15a9||!_15a9.getClientRects()[0]){return false;}var _15aa=_1581.getBoundingClientRect().left;var _15ab=_15a9.offsetLeft-_15aa;var _15ac=_15a9.offsetLeft+_15a9.offsetWidth-_15aa;var _15ad=_15a9.offsetLeft+_15a9.offsetWidth/2-_15aa;var _15ae=_1577.scrollLeft;var _15af=_1577.scrollLeft+_1583();if(_15a9.offsetWidth<_1583()){return _15ab>=_15ae&&_15ac<=_15af;}else{return _15ad>=_15ae&&_15ad<=_15af;}};this.resize=function(){_1582.style[_157c]=_1583()+"px";bar.style[_157c]=_1583()+"px";if(_1584.getClientRects()[0]){track.style[_157c]=(_1583()-_1584.getClientRects()[0][_157c])+"px";}_158d(_157f);};this.updateWidth=function(){var _15b0=_1577.scrollWidth-_1577.offsetWidth;var _15b1=_1577.offsetWidth*0.2;var _15b2=_1577.offsetWidth*0.5;var _15b3=Math.max(Math.min(_1577.offsetWidth-_15b0,_15b2),_15b1);_1584.style.width=_15b3+"px";if(_1578){_1585.style.width=(_15b3-_1578*2)+"px";_1585.style.margin="0 "+_1578+"px";}if(16>_1577.scrollWidth-_1577.offsetWidth){_1556.hide(_1584);}else{_1556.show(_1584);}that.resize();};dojo.connect(bar,"onclick",this,function(event){event.preventDefault();_158d((event[_157b]-_1581.getBoundingClientRect()[TOP])/_1583());event.stopPropagation();});dojo.connect(_1577,_157a?"DOMMouseScroll":"mousewheel",this,function(event){var _15b4=_157a?event["detail"]*(-60):event["wheelDelta"];_158d((_158c()-_15b4/(12*_157e))/_158b());event.preventDefault();event.stopPropagation();});dojo.connect(_1584,"onmousedown",function(e){e.preventDefault();e.stopPropagation();if(e.which==1){state=1;_1580=Math.min(_1584[_157d],Math.max(0,e[_157b]-_1584.getClientRects()[0][TOP]));}});dojo.connect(document,"onmousemove",this,function(e){e.preventDefault();if(state==1){_158d((e[_157b]-_1581.getBoundingClientRect()[TOP]-_1580)/_158b());}});dojo.connect(document,"onmouseup",this,function(e){e.preventDefault();if(state==1){state=0;}});dojo.connect(window,"onresize",function(){that.updateWidth();_158d(_157f,true);});_1556.forwardMouseEvents(bar,_1577,_157a?"DOMMouseScroll":"mousewheel");_1556.forwardMouseEvents(_1584,_1577,_157a?"DOMMouseScroll":"mousewheel");_158d(_157f,true);};_1556.autoLink=function(key,value){if(typeof (value)!=="string"){return false;}var _15b5=/(\b((?:(?:https?|ftp|file):\/\/|www\.|ftp\.))|\\\\[a-zA-Z0-9-]+)[-A-Z0-9+&@#\\\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]/gi;function _15b6(url){return "<a target='_blank' href='"+url+"'>"+url+"</a>";};if(key&&key.toLowerCase().indexOf("url")===0){return _15b6(value);}else{return value.replace(_15b5,_15b6);}};_1556.Table=function(data,head,id,_15b7){var t=dojo.create("table",{id:id});var h=dojo.create("tr",{},t);for(var key in head){dojo.create("th",{innerHTML:head[key]},h);}for(var key in data){var r=dojo.create("tr",{},t);dojo.create("td",{innerHTML:key},r);for(var d in data[key]){if(_15b7){var mtd=dojo.create("td",{},r);var l=_1556.autoLink(key,data[key][d]);mtd.innerHTML=l?l:mtd.innerHTML=data[key][d];}else{dojo.create("td",{innerHTML:data[key][d]},r);}}}this.container=t;};_1556.cround=function(c){return Math.round(c*100)/100;};_1556.croundv=function(v){var t=[];for(var i=0;i<v.length;i++){t[i]=_1556.cround(v[i]);}return t;};_1556.ComboButton=function(_15b8,_15b9){var _15ba;var state=[1,1];var _15b9=_15b9||["icon1"];var _15bb=_15b8["class"]||"";this.button=dojo.create("div",{"class":"comboButton "+_15bb});if(_15b8["icon1"]){this.icon1=dojo.create("div",{"class":_15b8["icon1"]+" s1"},this.button);}if(_15b8["icon11"]){this.icon11=dojo.create("div",{"class":_15b8["icon11"]+" s1"},this.button);}if(_15b8["text"]){this.textD=dojo.create("div",{"class":"button_textD"},this.button);this.text=dojo.create("div",{"class":"button_text",innerHTML:_15b8["text"]},this.textD);}if(_15b8["text2"]){this.text2=dojo.create("div",{"class":"button_text2",innerHTML:_15b8["text2"]},this.textD);}if(_15b8["text3"]){this.text2=dojo.create("div",{"class":"button_text3",innerHTML:_15b8["text3"]},this.textD);}if(_15b8["icon2"]){this.icon2=dojo.create("div",{"class":_15b8["icon2"]+" right"},this.button);}this.getState=function(){return state[0];};this.setState=function(_15bc){if(!(_15bc instanceof Array)){_15bc=[_15bc];}_15ba=state.slice();state=_15bc;for(var i=0;i<state.length;i++){this.setIconState(i);}};this.setStateCol=function(_15bd,_15be){_15ba=state.slice();state[_15be]=_15bd;this.setIconState(_15be);};this.setIconState=function(idx){dojo.replaceClass(this[_15b9[idx]],"s"+state[idx],"s"+_15ba[idx]);};this.toggleState=function(){this.setState((state[0]+1)%2);};this.getStates=function(){return state;};};_1556.RadioGroup=function(_15bf,_15c0){var cls=_15c0||"";this.listNode=dojo.create("ul",{"class":cls});this.buttonList=_15bf;for(var b=0;b<_15bf.length;b++){dojo.create("li",{},this.listNode).appendChild(_15bf[b].button);}var _15c1=[-1,-1];this.setActive=function(index){_15c1=index;if(!(_15c1 instanceof Array)){_15c1=[_15c1];}for(var i=0;i<_15bf.length;i++){var sts=[];for(var a=0;a<_15c1.length;a++){sts[a]=_15c1[a]==i?1:0;}_15bf[i].setState(sts);}};this.setActiveCol=function(index,col){_15c1[col]=index;for(var i=0;i<_15bf.length;i++){_15bf[i].setStateCol(_15c1[col]==i?1:0,col);}};this.getActive=function(){return _15c1[0];};this.getActives=function(){return _15c1;};};_1556.LayerList=function(_15c2,stage){var that=this;this.node=dojo.create("ul",{id:"layerList"},_15c2);var _15c3;this.updateVis=function(_15c4){};this.switchToDual=function(_15c5,_15c6){};var _15c7=[[],[]];this.getUILayerGroups=function(){return _15c3;};this.init=function(_15c8){_15c3=WebScene.Utils.getInitialLayerStates(stage);for(var _15c9 in _15c3){var group=_15c3[_15c9];if(!group.grouped){new _15ca(group,this.node);}else{new _15cb(group,this.node);}}this.updateVis(_15c7);};function _15ca(group,p){for(var key in group.layers){var l=group.layers[key];if(stage.getLayers()[l.name].state!=="BACKDROP"){var _15cc=new _15cd(l.name);dojo.create("li",{},p).appendChild(_15cc.button);_15cc.setState(group.vis?1:0);group["active"]=0;dojo.connect(_15cc.icon1,"onclick",function(){group.vis=_15cc.getState();});}}};function _15cb(group,p){var _15ce=group.layers;var name=group.name;var _15cf=[];var ind=0;var act=-1;for(var key in _15ce){var l=_15ce[key];var sl=new _15d0(ind,l.name);_15cf.push(sl.button);if(l.vis&&act<0){act=ind;}ind++;}if(act===-1){act=0;}function _15d0(ind,txt){var b=new _1556.ComboButton({icon1:"icon_radio",text:txt,"class":"subLayerButton"});dojo.connect(b.icon1,"onclick",function(){_15d1(ind);});this.button=b;};var rg=new _1556.RadioGroup(_15cf,"layerGroupRadio");rg.setActive(act);var _15d2=new _15cd(name,_15cf,{icon2:"icon_frame"});_15d2.setState(group.vis?1:0);_1556.hide(_15d2.icon2);dojo.connect(_15d2.icon2,"onclick",function(){that.switchToDual(name,rg);});dojo.connect(_15d2.icon1,"onclick",function(){group.vis=_15d2.getState();});var lg=dojo.create("li",{"class":"layerGroup"},p);dojo.connect(lg,"onmouseenter",function(){_1556.show(_15d2.icon2);});dojo.connect(lg,"onmouseleave",function(){_1556.hide(_15d2.icon2);});lg.appendChild(_15d2.button);lg.appendChild(rg.listNode);_15d3();function _15d1(idx){if(_15d2.getState()>0){rg.setActive(idx);_15d4();}};function _15d3(){_15c7=_15d5(_15c7);};function _15d4(){var _15d6=[[],[]];that.updateVis(_15d5(_15d6));};function _15d5(_15d7){for(var c=0;c<_15cf.length;c++){var _15d8=(_15cf[c].getState()>0&&_15d2.getState()>0)?1:0;_15d7[_15d8].push(_15cf[c].text.innerHTML);group.layers[c].vis=_15cf[c].getState()>0?true:false;}return _15d7;};};function _15cd(_15d9,_15da,_15db){var _15db=_15db||{};var b=new _1556.ComboButton({icon1:"icon_visible",text:_15d9,icon2:_15db["icon2"],"class":"layerButton"});this.icon1=b.icon1;this.icon2=b.icon2;this.button=b.button;this.getState=function(){return b.getState();};this.setState=function(st){b.setState(st);};this.b=b;dojo.connect(b.icon1,"onclick",function(){b.toggleState();});dojo.connect(b.icon1,"onclick",this,function(){this.updateVisibility();});this.updateVisibility=function(){var _15dc=[[],[]];if(_15da){for(var c=0;c<_15da.length;c++){var _15dd=_15da[c].getState()&&b.getState();_15dc[_15dd].push(_15da[c].text.innerHTML);}}else{_15dc[b.getState()].push(_15d9);}that.updateVis(_15dc,0);};};};_1556.ProposalList=function(_15de,stage){var that=this;this.node=dojo.create("div",{id:"proposalList"},_15de);_1556.hide(this.node);function _15df(_15e0){stage.setViewData({centerLinePos:_15e0});};var _15e1=new _1556.Slider("splitviewSlider",_15df,stage.getContainer(),false,0.35,false);var line=dojo.create("div",{"class":"line"},_15e1.getHandle());var close=dojo.create("div",{"class":"close"},_15e1.getHandle());dojo.connect(close,"onclick",this,function(){this.leave();});_1556.hide(_15e1.container);this.enter=function(_15e2,_15e3){_1556.show(_15e1.container);var _15e4=[];var ind=0;for(var rb in _15e3.buttonList){var text=_15e3.buttonList[rb].text.innerHTML;var sl=new _15e5(ind,text);_15e4.push(sl.button);ind++;}var rg=new _1556.RadioGroup(_15e4,"layerGroupRadio");var act2=_15e3.getActive()==1?0:1;rg.setActive([_15e3.getActive(),act2]);_15de.removeChild(this.node);this.node=dojo.create("div",{id:"proposalList"},_15de);dojo.create("div",{},this.node);var _15e6=new _1556.ComboButton({icon2:"icon_frame",text:_15e2,"class":"layerButton"});dojo.connect(_15e6.icon2,"onclick",this,function(){this.leave();});this.node.appendChild(_15e6.button);this.node.appendChild(rg.listNode);_15e7(1);function _15e5(idx,txt){var cb=new _1556.ComboButton({icon1:"icon_radio",icon11:"icon_radio",text:txt,"class":"subLayerButton"},["icon1","icon11"]);dojo.connect(cb.icon1,"onclick",function(){_15e8(idx,0);});dojo.connect(cb.icon11,"onclick",function(){_15e8(idx,1);});this.button=cb;};function _15e8(idx,col){rg.setActiveCol(idx,col);if(col==0){_15e3.setActive(idx);}_15e7(col);};function _15e7(col){var _15e9=[[],[]];for(var c=0;c<_15e4.length;c++){_15e9[_15e4[c].getStates()[col]].push(_15e4[c].text.innerHTML);}that.updateVis(_15e9,col);stage.setViewData({centerLinePos:_15e1.get()});};};this.adjustHandlePos=function(_15ea){if(_15ea){dojo.addClass(_15e1.container,"bookmarksOn");}else{dojo.removeClass(_15e1.container,"bookmarksOn");}};this.resetIfHidden=function(){var _15eb=document.width;if(parseInt(_15e1.getHandle().style.left)>_15eb-350-45){_15e1.set(0.5);}};this.leave=function(){_1556.hide(_15e1.container);};this.updateVis=function(){};};_1556.shortenUrl=function(url,_15ec){var user="cityengine";var key="R_e88a305ed62e9780793d23bca22c2afc";var _15ed="http://api.bitly.com/v3/shorten";var xhr=new XMLHttpRequest();xhr.open("POST",_15ed,true);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.onload=function(){_15ec(JSON.parse(xhr.response).data.url);};params="login="+user+"&apiKey="+key+"&uri="+url;xhr.send(params);};_1556.websceneUrlShort=function(_15ee){_1556.shortenUrl(_1556.websceneUrl(),_15ee);};_1556.fbookto=function(info){var title=encodeURI(dojo.string.substitute(UI.i18n().shareFacebookTxt1,{sceneName:info.sceneName}));var urle=(info.longUrlEncoded);var _15ef=encodeURI(_1556.i18n().shareFacebookTxt2);var image=encodeURI("http://www.arcgis.com/apps/CEWebViewer/css/ui/ce_webscene_thumbnail_fb.png");if(stage.getAgoItem()&&stage.getAgoItem().item.access=="public"&&stage.getAgoItem().item.thumbnail){image=encodeURI(_1556.getAgoThumbnailSrc(stage.getAgoItem().item));}var fburl="http://www.facebook.com/sharer/sharer.php?s=100";fburl+="&p[title]="+title;fburl+="&p[summary]="+_15ef;fburl+="&p[url]="+urle;fburl+="&p[images][0]="+image;return fburl;};_1556.tweetto=function(info){var _15f0=dojo.string.substitute(UI.i18n().shareTwitterTxt,{sceneName:info.sceneName});var _15f1="\n@CityEngine Web Scene";var _15f2=140-(info.shortUrl.length+1);if((_15f0.length+_15f1.length)>_15f2){_15f0=_15f0.substr(0,(_15f2-3))+"...";}return "http://twitter.com/home?status="+encodeURIComponent(_15f0+""+info.shortUrl+_15f1);};_1556.mailto=function(info){var mail="mailto:?subject="+dojo.string.substitute(UI.i18n().shareEmailSubject,{sceneName:info.sceneName});mail+="&body="+_1556.i18n().shareEmailTxt1+"%0D%0A"+info.shortUrl;mail+="%0D%0A%0D%0A "+_1556.i18n().shareEmailTxt2;return mail;};_1556.commentsUI=function(_15f3,_15f4){_15f3.sort(function(a,b){return b.created-a.created;});function _15f5(c,cnt){var _15f6=_1556.autoLink(null,unescape(c.comment));var _15f7=cnt%2==1?" odd":"";var _15f8=dojo.create("div",{"class":"commentBox"+_15f7},_15f4);var owner=dojo.create("div",{"class":"commentOwner",innerHTML:c.owner},_15f8);var date="("+dojo.date.locale.format(new Date(c.created),{selector:"date",formatLength:"long"})+")";var _15f9=dojo.create("div",{"class":"commentName",innerHTML:date},_15f8);var text=dojo.create("div",{"class":"commentText",innerHTML:_15f6},_15f8);};for(var i=0;i<_15f3.length;i++){_15f5(_15f3[i],i);}};_1556.ratingUI=function(_15fa){var _15fb=AgolUtils.getRating(stage);function _15fc(level){for(var i=0;i<5;i++){var full=Math.round(level)>=i+1;if(full){dojo.replaceClass(stars[i],"full","");}else{dojo.replaceClass(stars[i],"","full");}}};function _15fd(val){_15fc(val);};function _15fe(value){if(stage.getAgoItem().store.userIsOwner()){_15ff.innerHTML=UI.i18n().ratingOwnMsg;}else{AgolUtils.setRating(stage,value).then(function(a){stage.getAgoItem().store.refreshItem().then(function(r){_1602();_15ff.innerHTML=UI.i18n().ratingThanks;});},function(b){_15ff.innerHTML=UI.i18n().ratingFail;});}};function _1600(){for(var i=0;i<5;i++){var _1601=stars[i];dojo.connect(_1601,"onmousemove",function(r){_15fd(this.value);});dojo.connect(_1601,"onclick",function(r){_15fe(this.value);});}};function _1602(){_15fb=AgolUtils.getRating(stage);_15fc(_15fb.avg);var _1603="("+_15fb.num+" "+UI.i18n().ratings+", ";_1603+=_15fb.views+" "+UI.i18n().views+")";_1604.innerHTML=_1603;};var _1605=dojo.create("div",{"id":"ratingArea"},_15fa);var _1606=dojo.create("ul",{"id":"ratingStars"},_1605);dojo.create("div",{id:"ratingDetails"},_1605);var _1604=dojo.create("span",{},_1605);var _15ff=dojo.create("div",{"id":"ratingFeedback",innerHTML:"&nbsp;"},_1605);_1606.onmouseout=function(){_15fc(_15fb.avg);};_1606.onmouseover=function(){_15ff.innerHTML="&nbsp;";};var stars=[];for(var i=0;i<5;i++){var _1607=dojo.create("li",{"class":"ratingStar",value:i+1},_1606);stars.push(_1607);}var _1608=new _1556.SignInTextButton(stage," "+UI.i18n().ratingHint);_1605.appendChild(_1608);_1602();dojo.subscribe("/portal/signedin",function(msg){_1600();});};_1556.getItemDetails=function(_1609,_160a){var _160b={sceneName:undefined,summary:undefined,description:undefined,thumbnailSrc:undefined,moreLink:undefined,tags:undefined,size:undefined,owner:undefined,modifed:undefined};if(_1609){var _160c=_1609.item;_160b.sceneName=_160c.title||_1556.i18n().unnamedScene;_160b.summary=_160c.snippet||_1556.i18n().detailsNoSummary;_160b.description=_160c.description||_1556.i18n().detailsNoDesc;_160b.thumbnailSrc=_160c.thumbnail?AgolUtils.URLs().contentitem+_160c.id+"/info/"+_160c.thumbnail:"css/images/web_scene_thumbnail.png";if(_160c.thumbnail&&_1609.store.cred){_160b.thumbnailSrc+="?token="+_1609.store.cred.token;}_160b.moreLink=AgolUtils.URLs().homeitem+"?id="+_160c.id;_160b.size=_160c.size||undefined;_160b.owner=_160c.owner;_160b.modified=dojo.date.locale.format(new Date(_160c.modified),{selector:"date",formatLength:"long"});}else{_160b.sceneName=_160a.sceneName||_1556.i18n().unnamedScene;_160b.summary=_160a.snippet||_1556.i18n().detailsNoSummary;_160b.description=_160a.description||_1556.i18n().detailsNoDesc;_160b.thumbnailSrc=_160a.thumbnail||"css/images/web_scene_thumbnail.png";}return _160b;};_1556.UIItemDetails=function(_160d,_160e,_160f){var _1610=_1556.getItemDetails(_160d,_160e,_160f);if(_160f){var cont=dojo.create("div",{id:"sceneDescription"},_160f);var _1611=dojo.create("div",{id:"detailsText",},cont);dojo.create("div",{id:"detailsName",innerHTML:_1610.sceneName},_1611);dojo.create("div",{id:"detailsSummary",innerHTML:_1610.summary},_1611);dojo.create("div",{id:"detailsDesc",innerHTML:_1610.description},_1611);if(_1610.size){dojo.create("div",{innerHTML:dojo.string.substitute(UI.i18n().detailsSize,{filesize:_1556.cround(_1610.size/1024/1024)}),},_1611);}if(_1610.moreLink){var moreD=dojo.create("div",{id:"moreD"},_1611);dojo.create("a",{href:_1610.moreLink,target:"_blank",innerHTML:_1556.i18n().detailsMoreDetails},moreD);}if(_1610.thumbnailSrc){var imgD=dojo.create("div",{id:"detailsThumb","class":"detailsThumb"},cont);dojo.create("img",{src:_1610.thumbnailSrc,target:"_blank",},imgD);}dojo.create("div",{style:"clear:both"},cont);}return cont;};_1556.helpKeyFromBrowserLocale=function(){var _1612="en";var _1613=["en","ar","de","es","fr","it","ja","ko","nl","no","pl","pt-BR","ro","ru","sv","zh-CN"];var _1614=navigator.language?navigator.language:navigator.userLanguage;_1614=(_1614?_1614.toLowerCase():"en");var _1615=_1614.search("-")<0?_1614:_1614.substring(0,_1614.search("-"));if(_1615=="pt"){_1612="pt-BR";}else{if(_1615=="zh"){_1612="zh-CN";}else{_1612=_1615;}}if(_1613.indexOf(_1612)<0){_1612="en";}return _1612;};_1556.URLs=function(){var _1616=_1556.helpKeyFromBrowserLocale();var urls={helpMain:"http://resources.arcgis.com/"+_1616+"/help/arcgisonline/010q/010q000000nw000000.htm",helpViewer:"http://resources.arcgis.com/"+_1616+"/help/arcgisonline/010q/010q000000nz000000.htm",helpTroubleshoot:"http://resources.arcgis.com/"+_1616+"/help/arcgisonline/010q/010q000000p0000000.htm",ceProduct:"http://www.esri.com/software/cityengine",arcgisOnline:"http://www.arcgis.com",arcgisContactUs:"http://www.esri.com/about-esri/contact.html"};return urls;};_1556.glErrorHints=function(_1617){var h=dojo.create("div",{id:"loadingHints"});var _1618="<div><a href=\""+_1556.URLs().helpMain+"\" target=\"_blank\">"+UI.i18n().ceWebViewerHelp+"</a>";var _1619="<div><a href=\""+_1556.URLs().helpTroubleshoot+"\" target=\"_blank\">"+UI.i18n().ceWebViewerHelp+"</a>";if(!_1617){h.innerHTML=_1618;return h;}var msg="";if(dojo.isIE){msg+="<div>"+UI.i18n().ieMsg+"</div>";}else{if(dojo.isSafari){msg+="<div>"+_1556.i18n().safariMsg1;msg+="<ul><li>"+_1556.i18n().safariMsg2+"</li>";msg+="<li>"+_1556.i18n().safariMsg3+"</li></ul></div>";}}msg+="<div>"+_1556.i18n().troubleMsg1;msg+=_1556.i18n().troubleMsg2+"</div>";msg+=_1619;h.innerHTML=msg;return h;};_1556.addFpsDialog=function(view){var _161a=dojo.create("div",{id:"fpsWin",act:"false"},dojo.byId("container"));_161a.onclick=function(){var act=_161a.getAttribute("act")==="false"?false:true;_1556.enableFPSCounter(view,!act);_161a.setAttribute("act",!act);_161a.innerHTML="";};};_1556.enableFPSCounter=function(view,on){var _161b=dojo.byId("fpsWin");if(!_161b){_161b=dojo.create("div",{id:"fpsWin"},dojo.byId("container"));}function _161c(fps){_161b.innerHTML=String(fps);};view.enableFPSCounter(on,_161c);};_1556.updateViewToNewPaneState=function(state,_161d,_161e,stage){function _161f(_1620,fovX,_1621){var _1622=vec3.create();var _1623=vec3.create();var UP=vec3.createFrom(0,1,0);var _1624=vec3.create();var _1625=vec3.create();vec3.subtract(_1620[1],_1620[0],_1622);var _1626=vec3.length(_1622);vec3.cross(UP,_1622,_1622);vec3.normalize(_1622);var l=_1626*Math.tan(fovX*0.5);vec3.scale(_1622,l,_1622);vec3.add(_1620[1],_1622,_1623);vec3.lerp(_1623,_1620[0],_1621,_1624);vec3.lerp(_1623,_1620[1],_1621,_1625);return [_1624,_1625];};var _1627=_161e.offsetWidth;var _1628=state?_161d:0;_161e.style.right=_1628+"px";var _1629=_161e.offsetWidth/_1627;var _162a=_161f(stage.getCamera(),stage.getFovX(),_1629);stage.setCamera(_162a[0],_162a[1],true);};_1556.getAgoThumbnailSrc=function(_162b,cred){var _162c="";_162c=_162b.thumbnail?AgolUtils.URLs().contentitem+_162b.id+"/info/"+_162b.thumbnail:undefined;if(cred){_162c+="?token="+cred.token;}return _162c;};_1556.updateSceneThumb=function(stage,_162d){var res=[200,133];var _162e=stage.renderScreenshots(res[0],res[1],[stage.getCamera()]);var _162f=byteBuffer2base64image(_162e[0],res[0],res[1],"image/png",0.8);_162d.src=_162f;return _162f;};_1556.dataURItoBlob=function(_1630,_1631){var _1632=atob(_1630.split(",")[1]);var _1633=_1630.split(",")[0].split(":")[1].split(";")[0];var ab=new ArrayBuffer(_1632.length);var ia=new Uint8Array(ab);for(var i=0;i<_1632.length;i++){ia[i]=_1632.charCodeAt(i);}return new Blob([ab],{"type":_1633});};_1556.forwardMouseEvents=function(from,to,_1634){return dojo.connect(from,_1634,this,function(event){event.preventDefault();event.stopPropagation();var evt=document.createEvent("MouseEvent");evt.initMouseEvent(_1634,event.bubbles,event.cancelable,window,event.detail,event.screenX,event.screenY,event.clientX,event.clientY,event.ctrlKey,event.altKey,event.shiftKey,event.metaKey,event.button,event.relatedTarget);if(event.wheelDelta){evt["wheelDelta"]=event.wheelDelta;}to.dispatchEvent(evt);});};_1556.easing=function(_1635,_1636,_1637,_1638,_1639){var _163a=0;var _163b=10;var _163c=_1639||_1635.style[_1636];var _163d;var _163e=function(_163f,_1640,_1641,_1642){return _163f+(_1640-_163f)*(1-Math.pow(1-(_1641/_1642),1.5));};function _1643(){if(_163c){_1635.style[_1636]=_163e(_1635.style[_1636],_1637,_163a,_1638);}else{_1635[_1636]=_163e(_1635[_1636],_1637,_163a,_1638);}_163a+=_163b;var _1644=Math.abs(Math.abs(_1637)-Math.abs((_163c?_1635.style[_1636]:_1635[_1636])))<2;if(_163a<=_1638&&!_1644){_163d=setTimeout(function(){_163d=undefined;_1643();},_163b);}};this.play=function(){this.cancel();_1643();};this.cancel=function(){if(_163d){clearTimeout(_163d);}};};_1556.TextButton=function(id,text,_1645,_1646){var _1647=dojo.create("div",{id:id,"class":"textButton",innerHTML:text},_1646);if(_1645){_1647.onclick=_1645;}return _1647;};_1556.SignInTextButton=function(stage,text){var _1648=dojo.create("div",{});var _1649=dojo.create("span",{"class":"signInButton textButton",innerHTML:UI.i18n().signIn},_1648);var _164a=dojo.create("span",{"class":"signInText",innerHTML:text},_1648);_1649.onclick=function(){stage.getAgoItem().store.signIn();};dojo.subscribe("/portal/signedin",function(msg){_1556.hide(_1648);});dojo.subscribe("/portal/signedout",function(msg){_1556.show(_1648);});return _1648;};_1556.SignInOutButton=function(stage){var _164b=dojo.create("div",{"class":"signInOutButton"});var _164c=dojo.create("span",{"class":"signInButton",innerHTML:UI.i18n().signIn},_164b);_164c.onclick=function(){stage.getAgoItem().store.signIn();};var _164d=dojo.create("span",{"class":"signInText",},_164b);var _164e=dojo.create("a",{id:"signedInUser","href":AgolUtils.URLs().portal+"home/content.html",target:"_blank"},_164d);_1556.hide(_164d);var _164f=dojo.create("span",{},_164b);var _1650=dojo.create("a",{"target":"_blank"},_164f);function _1651(){function _1652(_1653){_1650.href=_1653.url;_1650.innerHTML=_1653.name||_1653.portalName;};if(stage.getAgoItem().store.portal.portalHostname){_1652(stage.getAgoItem().store.portal);}else{dojo.connect(stage.getAgoItem().store.portal,"onLoad",_1652);}};if(stage.getAgoItem().store.portal){_1651();}else{setTimeout(_1651,1000);}var _1654=dojo.create("div",{id:"signOutWarning"},_164b);var _1655=dojo.create("div",{innerHTML:UI.i18n().signOutNonPublicWarning},_1654);var _1656=dojo.create("div",{id:"signOutWarningButtons"},_1654);var _1657=dojo.create("button",{innerHTML:UI.i18n().cancel},_1656);_1657.onclick=function(){_1556.hide(_1654);};var _1658=dojo.create("button",{innerHTML:UI.i18n().signOut},_1656);_1658.onclick=function(){function _1659(){location.href=AgolUtils.URLs().portal;};stage.getAgoItem().store.signOut(_1659);};_1556.hide(_1654);function _165a(){if(stage.getAgoItem().store.item.access!=="public"){_1556.show(_1654);}else{stage.getAgoItem().store.signOut();}};dojo.subscribe("/portal/signedin",function(msg){_164c.innerHTML=UI.i18n().signOut;_164e.innerHTML="("+stage.getAgoItem().store.portal.user.fullName+")";_1556.show(_164d,true);_164c.onclick=function(){_165a();};_1556.hide(_164f);});dojo.subscribe("/portal/signedout",function(msg){_1556.hide(_164d);_164e.innerHTML="";_164c.innerHTML=UI.i18n().signIn;_164c.onclick=function(){stage.getAgoItem().store.signIn();};_1556.show(_164f,true);});return _164b;};_1556.spinner=function(_165b,color,id){var _165c=color?color:"";return dojo.create("span",{"class":"spinner "+_165c,id:id},_165b);};_1556.endsWith=function(hay,_165d){return hay.length>=_165d.length&&hay.substr(hay.length-_165d.length)==_165d;};_1556.autoHide=function(_165e,_165f,_1660){dojo.require("dojo.NodeList-traverse");_165e=_165e||[];var _1661=5000;var _1662;var _1663;var lastX=-100,lastY=-100;function _1664(){_1665();_1662=setTimeout(function(){_1662=undefined;_1666();},_1661);};function _1665(){if(_1662){clearTimeout(_1662);_1662=undefined;}};function _1667(){_1665();_165e.forEach(function(id,index){if(dojo.byId(id)){dojo.addClass(id,"navFadeIn");dojo.removeClass(id,"navFadeOut");}});nodesOriginalOpacity=[];if(_1660){_1660();}};function _1666(){_1665();_165e.forEach(function(id){dojo.addClass(id,"navFadeOut");dojo.removeClass(id,"navFadeIn");});if(_165f){_165f();}};function _1668(e){var diffX=(lastX-e.clientX);var diffY=(lastY-e.clientY);if(diffX!=0||diffY!=0){lastX=e.clientX;lastY=e.clientY;_1667();var _1669=document.elementFromPoint(lastX,lastY);var _166a=false;if(_1669){_165e.forEach(function(id){_166a=_166a||_1669.id==id||dojo.query(_1669).parents(".navFadeOut").length>0||dojo.query(_1669).parents(".navFadeIn").length>0;});}if(!_166a){_1664();}}};return {start:function(){this.stop();_1663=dojo.connect(dojo.doc,"onmousemove",_1668);},stop:function(){if(_1663){dojo.disconnect(_1663);_1663=undefined;}},forceHide:function(){_1666();},show:function(){_1667();}};};});},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(_166b,a11y){return _166b("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.containerNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem;}});});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_166c,has,_166d,_166e){return _166c("dijit.form._FormValueWidget",[_166d,_166e],{_layoutHackIE7:function(){if(has("ie")==7){var _166f=this.domNode;var _1670=_166f.parentNode;var _1671=_166f.firstChild||_166f;var _1672=_1671.style.filter;var _1673=this;while(_1670&&_1670.clientHeight==0){(function ping(){var _1674=_1673.connect(_1670,"onscroll",function(){_1673.disconnect(_1674);_1671.style.filter=(new Date()).getMilliseconds();_1673.defer(function(){_1671.style.filter=_1672;});});})();_1670=_1670.parentNode;}}}});});},"WebScene/app/SunUtils":function(){define("WebScene/app/SunUtils",["dijit","dojo","dojox"],function(dijit,dojo,dojox){dojo.provide("WebScene.app.SunUtils");window.SunUtils=function(){this.mainCalc=function(Day,Month,Year,Hour,_1675,_1676,_1677,_1678,_1679){var _167a=_167b(Day,Month,Year,Hour,_1675,_1676,_1677,_1678,_1679);var _167c=_167d(_167a.sunrise.time);var _167e=_167d(_167a.sunset.time);var _167f=_167b(Day,Month,Year,_167c[0],_167c[1],0,0,_1678,_1679);var _1680=_167b(Day,Month,Year,_167e[0],_167e[1],0,0,_1678,_1679);_167a.sunrise["azimuth"]=_167f.azimuth;_167a.sunrise["elevation"]=_167f.elevation;_167a.sunset["azimuth"]=_1680.azimuth;_167a.sunset["elevation"]=_1680.elevation;return _167a;};this.numToTime=function(num){return _167d(num);};this.numToTimeNice=function(num){var mstr="am";var m;hm=_167d(num);if(hm[0]>12){hm[0]-=12;mstr="pm";}m=hm[1];if(hm[1]<10){m="0"+hm[1];}return hm[0]+":"+m+" "+mstr;};this.getAnglesDefault=function(_1681,tdate,ttime){var date=tdate||[20,3,2012,0];var time=ttime||14.4;var _1682=Math.round(_1681[0]/15);var _1683=_1682+date[3];var hm=this.numToTime(time);return this.mainCalc(date[0],date[1],date[2],hm[0],hm[1],0,_1683,_1681[1],_1681[0]);};function _167d(num){var num=num%24;var hours=Math.floor(num);var mins=Math.floor((num-hours)*60);return [hours,mins];};function _1684(d,_1685,_1686){var _1687,_1688,_1689,SatAz,_168a,Tst,_168b,pi,NewRA;var w,a,e,M,L,_168c,E,x,y,r,v,_168d,z,_168e,_168f,_1690,RA,Decl,GMST0,UT,_1691,HA;var _1692,xhor,yhor,zhor,_1693,_1694,_1695;pi=Math.PI;var _1696=new Array();w=282.9404+0.0000470935*d;a=1;e=0.016709-1.151e-9*d;M=356.047+0.9856002585*d;_168c=23.4393-3.563e-7*d;L=w+Rev(M);L=Rev(L);E=M+(180/pi)*e*Math.sin(_1697(M))*(1+e*Math.cos(_1697(M)));E=Rev(E);x=a*Math.cos(_1697(E))-e;y=a*Math.sin(_1697(Rev(E)))*Math.sqrt(1-e*e);r=Math.sqrt(x*x+y*y);v=Deg(Math.atan2(y,x));_168d=Rev(v+w);x=r*Math.cos(_1697(_168d));y=r*Math.sin(_1697(_168d));z=0;_168e=x;_168f=y*Math.cos(_1697(_168c))+z*Math.sin(_1697(_168c));_1690=y*Math.sin(_1697(_168c))+z*Math.cos(_1697(_168c));RA=Rev(Deg(Math.atan2(_168f,_168e)));Decl=Deg(Math.atan2(_1690,Math.sqrt(_168e*_168e+_168f*_168f)));GMST0=(L+180);UT=d-Math.floor(d);_1689=GMST0+UT*360+_1685;_1688=_1689-RA;x=Math.cos(_1688*pi/180)*Math.cos(Decl*pi/180);y=Math.sin(_1688*pi/180)*Math.cos(Decl*pi/180);z=Math.sin(Decl*pi/180);xhor=x*Math.sin(_1686*pi/180)-z*Math.cos(_1686*pi/180);yhor=y;zhor=x*Math.cos(_1686*pi/180)+z*Math.sin(_1686*pi/180);_1692=Deg(Math.asin(zhor));_1695=_1692;_1692=_1698(_1692);SunAzimuth=Deg(Math.atan2(yhor,xhor));_1696[0]=_1692;if(_1686<0){_1696[1]=SunAzimuth+180;}else{_1696[1]=SunAzimuth+180;}_1696[2]=Decl;_1696[3]=_168d;_1696[4]=RA;_1696[5]=Rev(GMST0);_1696[6]=Rev(M);_1696[7]=Rev(w);_1696[8]=Rev(e);_1696[9]=Rev(_168c);_1696[10]=_1695;_1696[11]=L;return (_1696);};function _1699(Day,Month,Year,RA,GMST0,_169a,_169b,Decl,_169c){var _169d=(RA-GMST0-_169b)/15;var pi=Math.PI;var h=-0.833*pi/180;var _169e=(Math.sin(h)-Math.sin(_169a*pi/180)*Math.sin(Decl*pi/180))/(Math.cos(_169a*pi/180)*Math.cos(Decl*pi/180));LHA=Math.acos(_169e);LHAD=LHA/pi*180;LHAh=LHAD/15;sunrise=_169d-LHAh+_169c;sunset=_169d+LHAh+_169c;sunrise2=sunrise<0?sunrise+24:sunrise;sunset2=sunrise<0?sunset+24:sunset;return {sunrise:{time:sunrise2},sunset:{time:sunset2}};};function _167b(Day,Month,Year,Hour,_169f,_16a0,_16a1,_16a2,_16a3){Hour=Hour-_16a1;var d=_16a4(Day,Month,Year,Hour,_169f,_16a0);var _16a5=_1684(d,_16a3,_16a2);var _16a6=_16a5[0];var _16a7=_16a5[10];if(_16a7>-5){SunElevation=_16a8(_16a6,5);}else{SunElevation="N/A";}var RA=_16a5[4];var GMST0=_16a5[5];var Decl=_16a5[2];sunrisesetArr=_1699(Day,Month,Year,RA,GMST0,_16a2,_16a3,Decl,_16a1);return {azimuth:Number(SunAzimuth),elevation:Number(SunElevation),sunrise:sunrisesetArr.sunrise,sunset:sunrisesetArr.sunset};};function _16a4(Day,Month,Year,Hour,_16a9,_16aa){d=367*Year-Div((7*(Year+(Div((Month+9),12)))),4)+Div((275*Month),9)+Day-730530;d=d+Hour/24+_16a9/(60*24)+_16aa/(24*60*60);return (d);};function Div(a,b){return ((a-a%b)/b);};function _16ab(){var today,Day,Month,Year,Hour,_16ac,_16ad;today=new Date();Month=today.getUTCMonth()+1;Day=today.getUTCDate();Year=today.getUTCFullYear();Hour=today.getUTCHours();_16ac=today.getUTCMinutes();_16ad=today.getUTCSeconds();};function _16ae(d){var today,t;var _16af=1000*60;var _16b0=_16af*60;var _16b1=_16b0*24;today=new Date();d=d+10956;d*_16b1;today.setTime(d*_16b1);time_offset=today.getTimezoneOffset();Hour=today.getUTCHours();Minute=today.getUTCMinutes();Second=today.getUTCSeconds();Month=today.getUTCMonth()+1;Day=today.getUTCDate();Year=today.getUTCFullYear();return (today);};function _1698(_16b2){var _16b3;var x,a0,a1,a2,a3,a4;a0=0.58804392;a1=-0.17941557;a2=0.029906946;a3=-0.00251874;a4=0.000082622101;_16b3=_16b2;x=Math.abs(_16b2+0.589);refraction=Math.abs(a0+a1*x+a2*x*x+a3*x*x*x+a4*x*x*x*x);if(_16b2>10.2){_16b3=_16b2+0.01617*(Math.cos(_1697(Math.abs(_16b2)))/Math.sin(_1697(Math.abs(_16b2))));}else{_16b3=_16b2+refraction;}return (_16b3);};function Rev(_16b4){var x;x=_16b4-Math.floor(_16b4/360)*360;return (x);};function _1697(_16b5){var rad;rad=_16b5*Math.PI/180;return (rad);};function Deg(_16b6){var rad;rad=_16b6*180/Math.PI;return (rad);};function _16a8(input,rsize){var _16b7="**************************";var nines="999999999999999999999999";var strin=""+input;var fltin=parseFloat(strin);if(strin.length<=rsize){return strin;}if(strin.indexOf("e")!=-1||fltin>parseFloat(nines.substring(0,rsize)+".4")){return _16b7.substring(0,rsize);}var _16b8=""+(fltin+(fltin-parseFloat(strin.substring(0,rsize))));return _16b8.substring(0,rsize);};};});},"*now":function(r){r(["dojo/i18n!*preload*dojo/nls/dojo*[\"ar\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});(function(){var _16b9=this.require;_16b9({cache:{}});!_16b9.async&&_16b9(["dojo"]);_16b9.boot&&_16b9.apply(null,_16b9.boot);})();